(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();function jM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nD={exports:{}},zv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oI=Symbol.for("react.transitional.element"),lI=Symbol.for("react.fragment");function iD(n,t,e){var i=null;if(e!==void 0&&(i=""+e),t.key!==void 0&&(i=""+t.key),"key"in t){e={};for(var a in t)a!=="key"&&(e[a]=t[a])}else e=t;return t=e.ref,{$$typeof:oI,type:n,key:i,ref:t!==void 0?t:null,props:e}}zv.Fragment=lI;zv.jsx=iD;zv.jsxs=iD;nD.exports=zv;var at=nD.exports,aD={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM=Symbol.for("react.transitional.element"),cI=Symbol.for("react.portal"),uI=Symbol.for("react.fragment"),fI=Symbol.for("react.strict_mode"),hI=Symbol.for("react.profiler"),dI=Symbol.for("react.consumer"),pI=Symbol.for("react.context"),mI=Symbol.for("react.forward_ref"),gI=Symbol.for("react.suspense"),vI=Symbol.for("react.memo"),sD=Symbol.for("react.lazy"),b2=Symbol.iterator;function yI(n){return n===null||typeof n!="object"?null:(n=b2&&n[b2]||n["@@iterator"],typeof n=="function"?n:null)}var rD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oD=Object.assign,lD={};function Df(n,t,e){this.props=n,this.context=t,this.refs=lD,this.updater=e||rD}Df.prototype.isReactComponent={};Df.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Df.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function cD(){}cD.prototype=Df.prototype;function YM(n,t,e){this.props=n,this.context=t,this.refs=lD,this.updater=e||rD}var WM=YM.prototype=new cD;WM.constructor=YM;oD(WM,Df.prototype);WM.isPureReactComponent=!0;var E2=Array.isArray,yn={H:null,A:null,T:null,S:null,V:null},uD=Object.prototype.hasOwnProperty;function ZM(n,t,e,i,a,s){return e=s.ref,{$$typeof:qM,type:n,key:t,ref:e!==void 0?e:null,props:s}}function _I(n,t){return ZM(n.type,t,void 0,void 0,void 0,n.props)}function KM(n){return typeof n=="object"&&n!==null&&n.$$typeof===qM}function xI(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var T2=/\/+/g;function lx(n,t){return typeof n=="object"&&n!==null&&n.key!=null?xI(""+n.key):t.toString(36)}function A2(){}function SI(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(A2,A2):(n.status="pending",n.then(function(t){n.status==="pending"&&(n.status="fulfilled",n.value=t)},function(t){n.status==="pending"&&(n.status="rejected",n.reason=t)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function Mu(n,t,e,i,a){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var r=!1;if(n===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(n.$$typeof){case qM:case cI:r=!0;break;case sD:return r=n._init,Mu(r(n._payload),t,e,i,a)}}if(r)return a=a(n),r=i===""?"."+lx(n,0):i,E2(a)?(e="",r!=null&&(e=r.replace(T2,"$&/")+"/"),Mu(a,t,e,"",function(f){return f})):a!=null&&(KM(a)&&(a=_I(a,e+(a.key==null||n&&n.key===a.key?"":(""+a.key).replace(T2,"$&/")+"/")+r)),t.push(a)),1;r=0;var l=i===""?".":i+":";if(E2(n))for(var u=0;u<n.length;u++)i=n[u],s=l+lx(i,u),r+=Mu(i,t,e,s,a);else if(u=yI(n),typeof u=="function")for(n=u.call(n),u=0;!(i=n.next()).done;)i=i.value,s=l+lx(i,u++),r+=Mu(i,t,e,s,a);else if(s==="object"){if(typeof n.then=="function")return Mu(SI(n),t,e,i,a);throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Cm(n,t,e){if(n==null)return n;var i=[],a=0;return Mu(n,i,"","",function(s){return t.call(e,s,a++)}),i}function MI(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var C2=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function bI(){}Ce.Children={map:Cm,forEach:function(n,t,e){Cm(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Cm(n,function(){t++}),t},toArray:function(n){return Cm(n,function(t){return t})||[]},only:function(n){if(!KM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ce.Component=Df;Ce.Fragment=uI;Ce.Profiler=hI;Ce.PureComponent=YM;Ce.StrictMode=fI;Ce.Suspense=gI;Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=yn;Ce.__COMPILER_RUNTIME={__proto__:null,c:function(n){return yn.H.useMemoCache(n)}};Ce.cache=function(n){return function(){return n.apply(null,arguments)}};Ce.cloneElement=function(n,t,e){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var i=oD({},n.props),a=n.key,s=void 0;if(t!=null)for(r in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(a=""+t.key),t)!uD.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(i[r]=t[r]);var r=arguments.length-2;if(r===1)i.children=e;else if(1<r){for(var l=Array(r),u=0;u<r;u++)l[u]=arguments[u+2];i.children=l}return ZM(n.type,a,void 0,void 0,s,i)};Ce.createContext=function(n){return n={$$typeof:pI,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:dI,_context:n},n};Ce.createElement=function(n,t,e){var i,a={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)uD.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(a[i]=t[i]);var r=arguments.length-2;if(r===1)a.children=e;else if(1<r){for(var l=Array(r),u=0;u<r;u++)l[u]=arguments[u+2];a.children=l}if(n&&n.defaultProps)for(i in r=n.defaultProps,r)a[i]===void 0&&(a[i]=r[i]);return ZM(n,s,void 0,void 0,null,a)};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(n){return{$$typeof:mI,render:n}};Ce.isValidElement=KM;Ce.lazy=function(n){return{$$typeof:sD,_payload:{_status:-1,_result:n},_init:MI}};Ce.memo=function(n,t){return{$$typeof:vI,type:n,compare:t===void 0?null:t}};Ce.startTransition=function(n){var t=yn.T,e={};yn.T=e;try{var i=n(),a=yn.S;a!==null&&a(e,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(bI,C2)}catch(s){C2(s)}finally{yn.T=t}};Ce.unstable_useCacheRefresh=function(){return yn.H.useCacheRefresh()};Ce.use=function(n){return yn.H.use(n)};Ce.useActionState=function(n,t,e){return yn.H.useActionState(n,t,e)};Ce.useCallback=function(n,t){return yn.H.useCallback(n,t)};Ce.useContext=function(n){return yn.H.useContext(n)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(n,t){return yn.H.useDeferredValue(n,t)};Ce.useEffect=function(n,t,e){var i=yn.H;if(typeof e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(n,t)};Ce.useId=function(){return yn.H.useId()};Ce.useImperativeHandle=function(n,t,e){return yn.H.useImperativeHandle(n,t,e)};Ce.useInsertionEffect=function(n,t){return yn.H.useInsertionEffect(n,t)};Ce.useLayoutEffect=function(n,t){return yn.H.useLayoutEffect(n,t)};Ce.useMemo=function(n,t){return yn.H.useMemo(n,t)};Ce.useOptimistic=function(n,t){return yn.H.useOptimistic(n,t)};Ce.useReducer=function(n,t,e){return yn.H.useReducer(n,t,e)};Ce.useRef=function(n){return yn.H.useRef(n)};Ce.useState=function(n){return yn.H.useState(n)};Ce.useSyncExternalStore=function(n,t,e){return yn.H.useSyncExternalStore(n,t,e)};Ce.useTransition=function(){return yn.H.useTransition()};Ce.version="19.1.1";aD.exports=Ce;var tt=aD.exports;const a1=jM(tt);var fD={exports:{}},Bv={},hD={exports:{}},dD={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(L,G){var H=L.length;L.push(G);t:for(;0<H;){var W=H-1>>>1,rt=L[W];if(0<a(rt,G))L[W]=G,L[H]=rt,H=W;else break t}}function e(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var G=L[0],H=L.pop();if(H!==G){L[0]=H;t:for(var W=0,rt=L.length,vt=rt>>>1;W<vt;){var Dt=2*(W+1)-1,Vt=L[Dt],J=Dt+1,yt=L[J];if(0>a(Vt,H))J<rt&&0>a(yt,Vt)?(L[W]=yt,L[J]=H,W=J):(L[W]=Vt,L[Dt]=H,W=Dt);else if(J<rt&&0>a(yt,H))L[W]=yt,L[J]=H,W=J;else break t}}return G}function a(L,G){var H=L.sortIndex-G.sortIndex;return H!==0?H:L.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();n.unstable_now=function(){return r.now()-l}}var u=[],f=[],d=1,p=null,m=3,g=!1,_=!1,E=!1,M=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function T(L){for(var G=e(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=L)i(f),G.sortIndex=G.expirationTime,t(u,G);else break;G=e(f)}}function w(L){if(E=!1,T(L),!_)if(e(u)!==null)_=!0,R||(R=!0,Z());else{var G=e(f);G!==null&&et(w,G.startTime-L)}}var R=!1,N=-1,U=5,D=-1;function C(){return M?!0:!(n.unstable_now()-D<U)}function B(){if(M=!1,R){var L=n.unstable_now();D=L;var G=!0;try{t:{_=!1,E&&(E=!1,x(N),N=-1),g=!0;var H=m;try{e:{for(T(L),p=e(u);p!==null&&!(p.expirationTime>L&&C());){var W=p.callback;if(typeof W=="function"){p.callback=null,m=p.priorityLevel;var rt=W(p.expirationTime<=L);if(L=n.unstable_now(),typeof rt=="function"){p.callback=rt,T(L),G=!0;break e}p===e(u)&&i(u),T(L)}else i(u);p=e(u)}if(p!==null)G=!0;else{var vt=e(f);vt!==null&&et(w,vt.startTime-L),G=!1}}break t}finally{p=null,m=H,g=!1}G=void 0}}finally{G?Z():R=!1}}}var Z;if(typeof b=="function")Z=function(){b(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,it=q.port2;q.port1.onmessage=B,Z=function(){it.postMessage(null)}}else Z=function(){v(B,0)};function et(L,G){N=v(function(){L(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(L){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var H=m;m=G;try{return L()}finally{m=H}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=m;m=L;try{return G()}finally{m=H}},n.unstable_scheduleCallback=function(L,G,H){var W=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,L){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=H+rt,L={id:d++,callback:G,priorityLevel:L,startTime:H,expirationTime:rt,sortIndex:-1},H>W?(L.sortIndex=H,t(f,L),e(u)===null&&L===e(f)&&(E?(x(N),N=-1):E=!0,et(w,H-W))):(L.sortIndex=rt,t(u,L),_||g||(_=!0,R||(R=!0,Z()))),L},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(L){var G=m;return function(){var H=m;m=G;try{return L.apply(this,arguments)}finally{m=H}}}})(dD);hD.exports=dD;var EI=hD.exports,pD={exports:{}},Yi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI=tt;function mD(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function oo(){}var ji={d:{f:oo,r:function(){throw Error(mD(522))},D:oo,C:oo,L:oo,m:oo,X:oo,S:oo,M:oo},p:0,findDOMNode:null},AI=Symbol.for("react.portal");function CI(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:AI,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}var Qh=TI.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Iv(n,t){if(n==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Yi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ji;Yi.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(mD(299));return CI(n,t,null,e)};Yi.flushSync=function(n){var t=Qh.T,e=ji.p;try{if(Qh.T=null,ji.p=2,n)return n()}finally{Qh.T=t,ji.p=e,ji.d.f()}};Yi.preconnect=function(n,t){typeof n=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ji.d.C(n,t))};Yi.prefetchDNS=function(n){typeof n=="string"&&ji.d.D(n)};Yi.preinit=function(n,t){if(typeof n=="string"&&t&&typeof t.as=="string"){var e=t.as,i=Iv(e,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;e==="style"?ji.d.S(n,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:a,fetchPriority:s}):e==="script"&&ji.d.X(n,{crossOrigin:i,integrity:a,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Yi.preinitModule=function(n,t){if(typeof n=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var e=Iv(t.as,t.crossOrigin);ji.d.M(n,{crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ji.d.M(n)};Yi.preload=function(n,t){if(typeof n=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var e=t.as,i=Iv(e,t.crossOrigin);ji.d.L(n,e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Yi.preloadModule=function(n,t){if(typeof n=="string")if(t){var e=Iv(t.as,t.crossOrigin);ji.d.m(n,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ji.d.m(n)};Yi.requestFormReset=function(n){ji.d.r(n)};Yi.unstable_batchedUpdates=function(n,t){return n(t)};Yi.useFormState=function(n,t,e){return Qh.H.useFormState(n,t,e)};Yi.useFormStatus=function(){return Qh.H.useHostTransitionStatus()};Yi.version="19.1.1";function gD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gD)}catch(n){console.error(n)}}gD(),pD.exports=Yi;var wI=pD.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=EI,vD=tt,RI=wI;function Mt(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function yD(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function dp(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function _D(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function w2(n){if(dp(n)!==n)throw Error(Mt(188))}function DI(n){var t=n.alternate;if(!t){if(t=dp(n),t===null)throw Error(Mt(188));return t!==n?null:n}for(var e=n,i=t;;){var a=e.return;if(a===null)break;var s=a.alternate;if(s===null){if(i=a.return,i!==null){e=i;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===e)return w2(a),n;if(s===i)return w2(a),t;s=s.sibling}throw Error(Mt(188))}if(e.return!==i.return)e=a,i=s;else{for(var r=!1,l=a.child;l;){if(l===e){r=!0,e=a,i=s;break}if(l===i){r=!0,i=a,e=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===e){r=!0,e=s,i=a;break}if(l===i){r=!0,i=s,e=a;break}l=l.sibling}if(!r)throw Error(Mt(189))}}if(e.alternate!==i)throw Error(Mt(190))}if(e.tag!==3)throw Error(Mt(188));return e.stateNode.current===e?n:t}function xD(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n;for(n=n.child;n!==null;){if(t=xD(n),t!==null)return t;n=n.sibling}return null}var gn=Object.assign,NI=Symbol.for("react.element"),wm=Symbol.for("react.transitional.element"),Xh=Symbol.for("react.portal"),Au=Symbol.for("react.fragment"),SD=Symbol.for("react.strict_mode"),s1=Symbol.for("react.profiler"),UI=Symbol.for("react.provider"),MD=Symbol.for("react.consumer"),Tr=Symbol.for("react.context"),QM=Symbol.for("react.forward_ref"),r1=Symbol.for("react.suspense"),o1=Symbol.for("react.suspense_list"),JM=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),l1=Symbol.for("react.activity"),OI=Symbol.for("react.memo_cache_sentinel"),R2=Symbol.iterator;function Mh(n){return n===null||typeof n!="object"?null:(n=R2&&n[R2]||n["@@iterator"],typeof n=="function"?n:null)}var LI=Symbol.for("react.client.reference");function c1(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===LI?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Au:return"Fragment";case s1:return"Profiler";case SD:return"StrictMode";case r1:return"Suspense";case o1:return"SuspenseList";case l1:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Xh:return"Portal";case Tr:return(n.displayName||"Context")+".Provider";case MD:return(n._context.displayName||"Context")+".Consumer";case QM:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case JM:return t=n.displayName||null,t!==null?t:c1(n.type)||"Memo";case _o:t=n._payload,n=n._init;try{return c1(n(t))}catch{}}return null}var kh=Array.isArray,ve=vD.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,We=RI.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ql={pending:!1,data:null,method:null,action:null},u1=[],Cu=-1;function Qs(n){return{current:n}}function oi(n){0>Cu||(n.current=u1[Cu],u1[Cu]=null,Cu--)}function _n(n,t){Cu++,u1[Cu]=n.current,n.current=t}var Hs=Qs(null),wd=Qs(null),Uo=Qs(null),l0=Qs(null);function c0(n,t){switch(_n(Uo,t),_n(wd,n),_n(Hs,null),t.nodeType){case 9:case 11:n=(n=t.documentElement)&&(n=n.namespaceURI)?LC(n):0;break;default:if(n=t.tagName,t=t.namespaceURI)t=LC(t),n=VU(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}oi(Hs),_n(Hs,n)}function rf(){oi(Hs),oi(wd),oi(Uo)}function f1(n){n.memoizedState!==null&&_n(l0,n);var t=Hs.current,e=VU(t,n.type);t!==e&&(_n(wd,n),_n(Hs,e))}function u0(n){wd.current===n&&(oi(Hs),oi(wd)),l0.current===n&&(oi(l0),Id._currentValue=Ql)}var h1=Object.prototype.hasOwnProperty,$M=Qn.unstable_scheduleCallback,cx=Qn.unstable_cancelCallback,PI=Qn.unstable_shouldYield,zI=Qn.unstable_requestPaint,Fs=Qn.unstable_now,BI=Qn.unstable_getCurrentPriorityLevel,bD=Qn.unstable_ImmediatePriority,ED=Qn.unstable_UserBlockingPriority,f0=Qn.unstable_NormalPriority,II=Qn.unstable_LowPriority,TD=Qn.unstable_IdlePriority,VI=Qn.log,HI=Qn.unstable_setDisableYieldValue,pp=null,Ca=null;function Co(n){if(typeof VI=="function"&&HI(n),Ca&&typeof Ca.setStrictMode=="function")try{Ca.setStrictMode(pp,n)}catch{}}var wa=Math.clz32?Math.clz32:XI,FI=Math.log,GI=Math.LN2;function XI(n){return n>>>=0,n===0?32:31-(FI(n)/GI|0)|0}var Rm=256,Dm=4194304;function Bl(n){var t=n&42;if(t!==0)return t;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Vv(n,t,e){var i=n.pendingLanes;if(i===0)return 0;var a=0,s=n.suspendedLanes,r=n.pingedLanes;n=n.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?a=Bl(i):(r&=l,r!==0?a=Bl(r):e||(e=l&~n,e!==0&&(a=Bl(e))))):(l=i&~s,l!==0?a=Bl(l):r!==0?a=Bl(r):e||(e=i&~n,e!==0&&(a=Bl(e)))),a===0?0:t!==0&&t!==a&&!(t&s)&&(s=a&-a,e=t&-t,s>=e||s===32&&(e&4194048)!==0)?t:a}function mp(n,t){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&t)===0}function kI(n,t){switch(n){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AD(){var n=Rm;return Rm<<=1,!(Rm&4194048)&&(Rm=256),n}function CD(){var n=Dm;return Dm<<=1,!(Dm&62914560)&&(Dm=4194304),n}function ux(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function gp(n,t){n.pendingLanes|=t,t!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function jI(n,t,e,i,a,s){var r=n.pendingLanes;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=e,n.entangledLanes&=e,n.errorRecoveryDisabledLanes&=e,n.shellSuspendCounter=0;var l=n.entanglements,u=n.expirationTimes,f=n.hiddenUpdates;for(e=r&~e;0<e;){var d=31-wa(e),p=1<<d;l[d]=0,u[d]=-1;var m=f[d];if(m!==null)for(f[d]=null,d=0;d<m.length;d++){var g=m[d];g!==null&&(g.lane&=-536870913)}e&=~p}i!==0&&wD(n,i,0),s!==0&&a===0&&n.tag!==0&&(n.suspendedLanes|=s&~(r&~t))}function wD(n,t,e){n.pendingLanes|=t,n.suspendedLanes&=~t;var i=31-wa(t);n.entangledLanes|=t,n.entanglements[i]=n.entanglements[i]|1073741824|e&4194090}function RD(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-wa(e),a=1<<i;a&t|n[i]&t&&(n[i]|=t),e&=~a}}function tb(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function eb(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function DD(){var n=We.p;return n!==0?n:(n=window.event,n===void 0?32:ZU(n.type))}function qI(n,t){var e=We.p;try{return We.p=n,t()}finally{We.p=e}}var Wo=Math.random().toString(36).slice(2),Ri="__reactFiber$"+Wo,la="__reactProps$"+Wo,Nf="__reactContainer$"+Wo,d1="__reactEvents$"+Wo,YI="__reactListeners$"+Wo,WI="__reactHandles$"+Wo,D2="__reactResources$"+Wo,vp="__reactMarker$"+Wo;function nb(n){delete n[Ri],delete n[la],delete n[d1],delete n[YI],delete n[WI]}function wu(n){var t=n[Ri];if(t)return t;for(var e=n.parentNode;e;){if(t=e[Nf]||e[Ri]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=BC(n);n!==null;){if(e=n[Ri])return e;n=BC(n)}return t}n=e,e=n.parentNode}return null}function Uf(n){if(n=n[Ri]||n[Nf]){var t=n.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return n}return null}function jh(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n.stateNode;throw Error(Mt(33))}function Wu(n){var t=n[D2];return t||(t=n[D2]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function si(n){n[vp]=!0}var ND=new Set,UD={};function vc(n,t){of(n,t),of(n+"Capture",t)}function of(n,t){for(UD[n]=t,n=0;n<t.length;n++)ND.add(t[n])}var ZI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),N2={},U2={};function KI(n){return h1.call(U2,n)?!0:h1.call(N2,n)?!1:ZI.test(n)?U2[n]=!0:(N2[n]=!0,!1)}function Hg(n,t,e){if(KI(t))if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":n.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){n.removeAttribute(t);return}}n.setAttribute(t,""+e)}}function Nm(n,t,e){if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttribute(t,""+e)}}function hr(n,t,e,i){if(i===null)n.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttributeNS(t,e,""+i)}}var fx,O2;function bu(n){if(fx===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);fx=t&&t[1]||"",O2=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fx+n+O2}var hx=!1;function dx(n,t){if(!n||hx)return"";hx=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(g){var m=g}Reflect.construct(n,[],p)}else{try{p.call()}catch(g){m=g}n.call(p.prototype)}}else{try{throw Error()}catch(g){m=g}(p=n())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),r=s[0],l=s[1];if(r&&l){var u=r.split(`
`),f=l.split(`
`);for(a=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;a<f.length&&!f[a].includes("DetermineComponentFrameRoot");)a++;if(i===u.length||a===f.length)for(i=u.length-1,a=f.length-1;1<=i&&0<=a&&u[i]!==f[a];)a--;for(;1<=i&&0<=a;i--,a--)if(u[i]!==f[a]){if(i!==1||a!==1)do if(i--,a--,0>a||u[i]!==f[a]){var d=`
`+u[i].replace(" at new "," at ");return n.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",n.displayName)),d}while(1<=i&&0<=a);break}}}finally{hx=!1,Error.prepareStackTrace=e}return(e=n?n.displayName||n.name:"")?bu(e):""}function QI(n){switch(n.tag){case 26:case 27:case 5:return bu(n.type);case 16:return bu("Lazy");case 13:return bu("Suspense");case 19:return bu("SuspenseList");case 0:case 15:return dx(n.type,!1);case 11:return dx(n.type.render,!1);case 1:return dx(n.type,!0);case 31:return bu("Activity");default:return""}}function L2(n){try{var t="";do t+=QI(n),n=n.return;while(n);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function Ya(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function OD(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JI(n){var t=OD(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var a=e.get,s=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return a.call(this)},set:function(r){i=""+r,s.call(this,r)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function h0(n){n._valueTracker||(n._valueTracker=JI(n))}function LD(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=OD(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function d0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var $I=/[\n"\\]/g;function Ka(n){return n.replace($I,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function p1(n,t,e,i,a,s,r,l){n.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?n.type=r:n.removeAttribute("type"),t!=null?r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+Ya(t)):n.value!==""+Ya(t)&&(n.value=""+Ya(t)):r!=="submit"&&r!=="reset"||n.removeAttribute("value"),t!=null?m1(n,r,Ya(t)):e!=null?m1(n,r,Ya(e)):i!=null&&n.removeAttribute("value"),a==null&&s!=null&&(n.defaultChecked=!!s),a!=null&&(n.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?n.name=""+Ya(l):n.removeAttribute("name")}function PD(n,t,e,i,a,s,r,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(n.type=s),t!=null||e!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;e=e!=null?""+Ya(e):"",t=t!=null?""+Ya(t):e,l||t===n.value||(n.value=t),n.defaultValue=t}i=i??a,i=typeof i!="function"&&typeof i!="symbol"&&!!i,n.checked=l?n.checked:!!i,n.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(n.name=r)}function m1(n,t,e){t==="number"&&d0(n.ownerDocument)===n||n.defaultValue===""+e||(n.defaultValue=""+e)}function Zu(n,t,e,i){if(n=n.options,t){t={};for(var a=0;a<e.length;a++)t["$"+e[a]]=!0;for(e=0;e<n.length;e++)a=t.hasOwnProperty("$"+n[e].value),n[e].selected!==a&&(n[e].selected=a),a&&i&&(n[e].defaultSelected=!0)}else{for(e=""+Ya(e),t=null,a=0;a<n.length;a++){if(n[a].value===e){n[a].selected=!0,i&&(n[a].defaultSelected=!0);return}t!==null||n[a].disabled||(t=n[a])}t!==null&&(t.selected=!0)}}function zD(n,t,e){if(t!=null&&(t=""+Ya(t),t!==n.value&&(n.value=t),e==null)){n.defaultValue!==t&&(n.defaultValue=t);return}n.defaultValue=e!=null?""+Ya(e):""}function BD(n,t,e,i){if(t==null){if(i!=null){if(e!=null)throw Error(Mt(92));if(kh(i)){if(1<i.length)throw Error(Mt(93));i=i[0]}e=i}e==null&&(e=""),t=e}e=Ya(t),n.defaultValue=e,i=n.textContent,i===e&&i!==""&&i!==null&&(n.value=i)}function lf(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var tV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function P2(n,t,e){var i=t.indexOf("--")===0;e==null||typeof e=="boolean"||e===""?i?n.setProperty(t,""):t==="float"?n.cssFloat="":n[t]="":i?n.setProperty(t,e):typeof e!="number"||e===0||tV.has(t)?t==="float"?n.cssFloat=e:n[t]=(""+e).trim():n[t]=e+"px"}function ID(n,t,e){if(t!=null&&typeof t!="object")throw Error(Mt(62));if(n=n.style,e!=null){for(var i in e)!e.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="");for(var a in t)i=t[a],t.hasOwnProperty(a)&&e[a]!==i&&P2(n,a,i)}else for(var s in t)t.hasOwnProperty(s)&&P2(n,s,t[s])}function ib(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fg(n){return nV.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var g1=null;function ab(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ru=null,Ku=null;function z2(n){var t=Uf(n);if(t&&(n=t.stateNode)){var e=n[la]||null;t:switch(n=t.stateNode,t.type){case"input":if(p1(n,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll('input[name="'+Ka(""+t)+'"][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var a=i[la]||null;if(!a)throw Error(Mt(90));p1(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<e.length;t++)i=e[t],i.form===n.form&&LD(i)}break t;case"textarea":zD(n,e.value,e.defaultValue);break t;case"select":t=e.value,t!=null&&Zu(n,!!e.multiple,t,!1)}}}var px=!1;function VD(n,t,e){if(px)return n(t,e);px=!0;try{var i=n(t);return i}finally{if(px=!1,(Ru!==null||Ku!==null)&&(Zv(),Ru&&(t=Ru,n=Ku,Ku=Ru=null,z2(t),n)))for(t=0;t<n.length;t++)z2(n[t])}}function Rd(n,t){var e=n.stateNode;if(e===null)return null;var i=e[la]||null;if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(Mt(231,t,typeof e));return e}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v1=!1;if(Lr)try{var bh={};Object.defineProperty(bh,"passive",{get:function(){v1=!0}}),window.addEventListener("test",bh,bh),window.removeEventListener("test",bh,bh)}catch{v1=!1}var wo=null,sb=null,Gg=null;function HD(){if(Gg)return Gg;var n,t=sb,e=t.length,i,a="value"in wo?wo.value:wo.textContent,s=a.length;for(n=0;n<e&&t[n]===a[n];n++);var r=e-n;for(i=1;i<=r&&t[e-i]===a[s-i];i++);return Gg=a.slice(n,1<i?1-i:void 0)}function Xg(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Um(){return!0}function B2(){return!1}function ca(n){function t(e,i,a,s,r){this._reactName=e,this._targetInst=a,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(e=n[l],this[l]=e?e(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Um:B2,this.isPropagationStopped=B2,this}return gn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Um)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Um)},persist:function(){},isPersistent:Um}),t}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hv=ca(yc),yp=gn({},yc,{view:0,detail:0}),iV=ca(yp),mx,gx,Eh,Fv=gn({},yp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Eh&&(Eh&&n.type==="mousemove"?(mx=n.screenX-Eh.screenX,gx=n.screenY-Eh.screenY):gx=mx=0,Eh=n),mx)},movementY:function(n){return"movementY"in n?n.movementY:gx}}),I2=ca(Fv),aV=gn({},Fv,{dataTransfer:0}),sV=ca(aV),rV=gn({},yp,{relatedTarget:0}),vx=ca(rV),oV=gn({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),lV=ca(oV),cV=gn({},yc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),uV=ca(cV),fV=gn({},yc,{data:0}),V2=ca(fV),hV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mV(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=pV[n])?!!t[n]:!1}function rb(){return mV}var gV=gn({},yp,{key:function(n){if(n.key){var t=hV[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Xg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dV[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rb,charCode:function(n){return n.type==="keypress"?Xg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vV=ca(gV),yV=gn({},Fv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H2=ca(yV),_V=gn({},yp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rb}),xV=ca(_V),SV=gn({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),MV=ca(SV),bV=gn({},Fv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),EV=ca(bV),TV=gn({},yc,{newState:0,oldState:0}),AV=ca(TV),CV=[9,13,27,32],ob=Lr&&"CompositionEvent"in window,Jh=null;Lr&&"documentMode"in document&&(Jh=document.documentMode);var wV=Lr&&"TextEvent"in window&&!Jh,FD=Lr&&(!ob||Jh&&8<Jh&&11>=Jh),F2=" ",G2=!1;function GD(n,t){switch(n){case"keyup":return CV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XD(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Du=!1;function RV(n,t){switch(n){case"compositionend":return XD(t);case"keypress":return t.which!==32?null:(G2=!0,F2);case"textInput":return n=t.data,n===F2&&G2?null:n;default:return null}}function DV(n,t){if(Du)return n==="compositionend"||!ob&&GD(n,t)?(n=HD(),Gg=sb=wo=null,Du=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return FD&&t.locale!=="ko"?null:t.data;default:return null}}var NV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X2(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!NV[n.type]:t==="textarea"}function kD(n,t,e,i){Ru?Ku?Ku.push(i):Ku=[i]:Ru=i,t=N0(t,"onChange"),0<t.length&&(e=new Hv("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var $h=null,Dd=null;function UV(n){zU(n,0)}function Gv(n){var t=jh(n);if(LD(t))return n}function k2(n,t){if(n==="change")return t}var jD=!1;if(Lr){var yx;if(Lr){var _x="oninput"in document;if(!_x){var j2=document.createElement("div");j2.setAttribute("oninput","return;"),_x=typeof j2.oninput=="function"}yx=_x}else yx=!1;jD=yx&&(!document.documentMode||9<document.documentMode)}function q2(){$h&&($h.detachEvent("onpropertychange",qD),Dd=$h=null)}function qD(n){if(n.propertyName==="value"&&Gv(Dd)){var t=[];kD(t,Dd,n,ab(n)),VD(UV,t)}}function OV(n,t,e){n==="focusin"?(q2(),$h=t,Dd=e,$h.attachEvent("onpropertychange",qD)):n==="focusout"&&q2()}function LV(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gv(Dd)}function PV(n,t){if(n==="click")return Gv(t)}function zV(n,t){if(n==="input"||n==="change")return Gv(t)}function BV(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Ua=typeof Object.is=="function"?Object.is:BV;function Nd(n,t){if(Ua(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var a=e[i];if(!h1.call(t,a)||!Ua(n[a],t[a]))return!1}return!0}function Y2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function W2(n,t){var e=Y2(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=Y2(e)}}function YD(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?YD(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function WD(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var t=d0(n.document);t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=d0(n.document)}return t}function lb(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}var IV=Lr&&"documentMode"in document&&11>=document.documentMode,Nu=null,y1=null,td=null,_1=!1;function Z2(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;_1||Nu==null||Nu!==d0(i)||(i=Nu,"selectionStart"in i&&lb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),td&&Nd(td,i)||(td=i,i=N0(y1,"onSelect"),0<i.length&&(t=new Hv("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=Nu)))}function Sl(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Uu={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionrun:Sl("Transition","TransitionRun"),transitionstart:Sl("Transition","TransitionStart"),transitioncancel:Sl("Transition","TransitionCancel"),transitionend:Sl("Transition","TransitionEnd")},xx={},ZD={};Lr&&(ZD=document.createElement("div").style,"AnimationEvent"in window||(delete Uu.animationend.animation,delete Uu.animationiteration.animation,delete Uu.animationstart.animation),"TransitionEvent"in window||delete Uu.transitionend.transition);function _c(n){if(xx[n])return xx[n];if(!Uu[n])return n;var t=Uu[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in ZD)return xx[n]=t[e];return n}var KD=_c("animationend"),QD=_c("animationiteration"),JD=_c("animationstart"),VV=_c("transitionrun"),HV=_c("transitionstart"),FV=_c("transitioncancel"),$D=_c("transitionend"),tN=new Map,x1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");x1.push("scrollEnd");function bs(n,t){tN.set(n,t),vc(t,[n])}var K2=new WeakMap;function Qa(n,t){if(typeof n=="object"&&n!==null){var e=K2.get(n);return e!==void 0?e:(t={value:n,source:t,stack:L2(t)},K2.set(n,t),t)}return{value:n,source:t,stack:L2(t)}}var qa=[],Ou=0,cb=0;function Xv(){for(var n=Ou,t=cb=Ou=0;t<n;){var e=qa[t];qa[t++]=null;var i=qa[t];qa[t++]=null;var a=qa[t];qa[t++]=null;var s=qa[t];if(qa[t++]=null,i!==null&&a!==null){var r=i.pending;r===null?a.next=a:(a.next=r.next,r.next=a),i.pending=a}s!==0&&eN(e,a,s)}}function kv(n,t,e,i){qa[Ou++]=n,qa[Ou++]=t,qa[Ou++]=e,qa[Ou++]=i,cb|=i,n.lanes|=i,n=n.alternate,n!==null&&(n.lanes|=i)}function ub(n,t,e,i){return kv(n,t,e,i),p0(n)}function Of(n,t){return kv(n,null,null,t),p0(n)}function eN(n,t,e){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e);for(var a=!1,s=n.return;s!==null;)s.childLanes|=e,i=s.alternate,i!==null&&(i.childLanes|=e),s.tag===22&&(n=s.stateNode,n===null||n._visibility&1||(a=!0)),n=s,s=s.return;return n.tag===3?(s=n.stateNode,a&&t!==null&&(a=31-wa(e),n=s.hiddenUpdates,i=n[a],i===null?n[a]=[t]:i.push(t),t.lane=e|536870912),s):null}function p0(n){if(50<ud)throw ud=0,F1=null,Error(Mt(185));for(var t=n.return;t!==null;)n=t,t=n.return;return n.tag===3?n.stateNode:null}var Lu={};function GV(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(n,t,e,i){return new GV(n,t,e,i)}function fb(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Dr(n,t){var e=n.alternate;return e===null?(e=Aa(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&65011712,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e.refCleanup=n.refCleanup,e}function nN(n,t){n.flags&=65011714;var e=n.alternate;return e===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.type=e.type,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n}function kg(n,t,e,i,a,s){var r=0;if(i=n,typeof n=="function")fb(n)&&(r=1);else if(typeof n=="string")r=kH(n,e,Hs.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case l1:return n=Aa(31,e,t,a),n.elementType=l1,n.lanes=s,n;case Au:return Jl(e.children,a,s,t);case SD:r=8,a|=24;break;case s1:return n=Aa(12,e,t,a|2),n.elementType=s1,n.lanes=s,n;case r1:return n=Aa(13,e,t,a),n.elementType=r1,n.lanes=s,n;case o1:return n=Aa(19,e,t,a),n.elementType=o1,n.lanes=s,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case UI:case Tr:r=10;break t;case MD:r=9;break t;case QM:r=11;break t;case JM:r=14;break t;case _o:r=16,i=null;break t}r=29,e=Error(Mt(130,n===null?"null":typeof n,"")),i=null}return t=Aa(r,e,t,a),t.elementType=n,t.type=i,t.lanes=s,t}function Jl(n,t,e,i){return n=Aa(7,n,i,t),n.lanes=e,n}function Sx(n,t,e){return n=Aa(6,n,null,t),n.lanes=e,n}function Mx(n,t,e){return t=Aa(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}var Pu=[],zu=0,m0=null,g0=0,Wa=[],Za=0,$l=null,Ar=1,Cr="";function Il(n,t){Pu[zu++]=g0,Pu[zu++]=m0,m0=n,g0=t}function iN(n,t,e){Wa[Za++]=Ar,Wa[Za++]=Cr,Wa[Za++]=$l,$l=n;var i=Ar;n=Cr;var a=32-wa(i)-1;i&=~(1<<a),e+=1;var s=32-wa(t)+a;if(30<s){var r=a-a%5;s=(i&(1<<r)-1).toString(32),i>>=r,a-=r,Ar=1<<32-wa(t)+a|e<<a|i,Cr=s+n}else Ar=1<<s|e<<a|i,Cr=n}function hb(n){n.return!==null&&(Il(n,1),iN(n,1,0))}function db(n){for(;n===m0;)m0=Pu[--zu],Pu[zu]=null,g0=Pu[--zu],Pu[zu]=null;for(;n===$l;)$l=Wa[--Za],Wa[Za]=null,Cr=Wa[--Za],Wa[Za]=null,Ar=Wa[--Za],Wa[Za]=null}var Xi=null,Un=null,Ye=!1,tc=null,zs=!1,S1=Error(Mt(519));function cc(n){var t=Error(Mt(418,""));throw Ud(Qa(t,n)),S1}function Q2(n){var t=n.stateNode,e=n.type,i=n.memoizedProps;switch(t[Ri]=n,t[la]=i,e){case"dialog":Le("cancel",t),Le("close",t);break;case"iframe":case"object":case"embed":Le("load",t);break;case"video":case"audio":for(e=0;e<Pd.length;e++)Le(Pd[e],t);break;case"source":Le("error",t);break;case"img":case"image":case"link":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"input":Le("invalid",t),PD(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),h0(t);break;case"select":Le("invalid",t);break;case"textarea":Le("invalid",t),BD(t,i.value,i.defaultValue,i.children),h0(t)}e=i.children,typeof e!="string"&&typeof e!="number"&&typeof e!="bigint"||t.textContent===""+e||i.suppressHydrationWarning===!0||IU(t.textContent,e)?(i.popover!=null&&(Le("beforetoggle",t),Le("toggle",t)),i.onScroll!=null&&Le("scroll",t),i.onScrollEnd!=null&&Le("scrollend",t),i.onClick!=null&&(t.onclick=Jv),t=!0):t=!1,t||cc(n)}function J2(n){for(Xi=n.return;Xi;)switch(Xi.tag){case 5:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:Xi=Xi.return}}function Th(n){if(n!==Xi)return!1;if(!Ye)return J2(n),Ye=!0,!1;var t=n.tag,e;if((e=t!==3&&t!==27)&&((e=t===5)&&(e=n.type,e=!(e!=="form"&&e!=="button")||Y1(n.type,n.memoizedProps)),e=!e),e&&Un&&cc(n),J2(n),t===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Mt(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8)if(e=n.data,e==="/$"){if(t===0){Un=Ss(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++;n=n.nextSibling}Un=null}}else t===27?(t=Un,Zo(n.type)?(n=K1,K1=null,Un=n):Un=t):Un=Xi?Ss(n.stateNode.nextSibling):null;return!0}function _p(){Un=Xi=null,Ye=!1}function $2(){var n=tc;return n!==null&&(na===null?na=n:na.push.apply(na,n),tc=null),n}function Ud(n){tc===null?tc=[n]:tc.push(n)}var M1=Qs(null),xc=null,wr=null;function So(n,t,e){_n(M1,t._currentValue),t._currentValue=e}function Nr(n){n._currentValue=M1.current,oi(M1)}function b1(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function E1(n,t,e,i){var a=n.child;for(a!==null&&(a.return=n);a!==null;){var s=a.dependencies;if(s!==null){var r=a.child;s=s.firstContext;t:for(;s!==null;){var l=s;s=a;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=e,l=s.alternate,l!==null&&(l.lanes|=e),b1(s.return,e,n),i||(r=null);break t}s=l.next}}else if(a.tag===18){if(r=a.return,r===null)throw Error(Mt(341));r.lanes|=e,s=r.alternate,s!==null&&(s.lanes|=e),b1(r,e,n),r=null}else r=a.child;if(r!==null)r.return=a;else for(r=a;r!==null;){if(r===n){r=null;break}if(a=r.sibling,a!==null){a.return=r.return,r=a;break}r=r.return}a=r}}function xp(n,t,e,i){n=null;for(var a=t,s=!1;a!==null;){if(!s){if(a.flags&524288)s=!0;else if(a.flags&262144)break}if(a.tag===10){var r=a.alternate;if(r===null)throw Error(Mt(387));if(r=r.memoizedProps,r!==null){var l=a.type;Ua(a.pendingProps.value,r.value)||(n!==null?n.push(l):n=[l])}}else if(a===l0.current){if(r=a.alternate,r===null)throw Error(Mt(387));r.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(n!==null?n.push(Id):n=[Id])}a=a.return}n!==null&&E1(t,n,e,i),t.flags|=262144}function v0(n){for(n=n.firstContext;n!==null;){if(!Ua(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function uc(n){xc=n,wr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Di(n){return aN(xc,n)}function Om(n,t){return xc===null&&uc(n),aN(n,t)}function aN(n,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},wr===null){if(n===null)throw Error(Mt(308));wr=t,n.dependencies={lanes:0,firstContext:t},n.flags|=524288}else wr=wr.next=t;return e}var XV=typeof AbortController<"u"?AbortController:function(){var n=[],t=this.signal={aborted:!1,addEventListener:function(e,i){n.push(i)}};this.abort=function(){t.aborted=!0,n.forEach(function(e){return e()})}},kV=Qn.unstable_scheduleCallback,jV=Qn.unstable_NormalPriority,Wn={$$typeof:Tr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pb(){return{controller:new XV,data:new Map,refCount:0}}function Sp(n){n.refCount--,n.refCount===0&&kV(jV,function(){n.controller.abort()})}var ed=null,T1=0,cf=0,Qu=null;function qV(n,t){if(ed===null){var e=ed=[];T1=0,cf=Bb(),Qu={status:"pending",value:void 0,then:function(i){e.push(i)}}}return T1++,t.then(tC,tC),t}function tC(){if(--T1===0&&ed!==null){Qu!==null&&(Qu.status="fulfilled");var n=ed;ed=null,cf=0,Qu=null;for(var t=0;t<n.length;t++)(0,n[t])()}}function YV(n,t){var e=[],i={status:"pending",value:null,reason:null,then:function(a){e.push(a)}};return n.then(function(){i.status="fulfilled",i.value=t;for(var a=0;a<e.length;a++)(0,e[a])(t)},function(a){for(i.status="rejected",i.reason=a,a=0;a<e.length;a++)(0,e[a])(void 0)}),i}var eC=ve.S;ve.S=function(n,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&qV(n,t),eC!==null&&eC(n,t)};var ec=Qs(null);function mb(){var n=ec.current;return n!==null?n:dn.pooledCache}function jg(n,t){t===null?_n(ec,ec.current):_n(ec,t.pool)}function sN(){var n=mb();return n===null?null:{parent:Wn._currentValue,pool:n}}var Mp=Error(Mt(460)),rN=Error(Mt(474)),jv=Error(Mt(542)),A1={then:function(){}};function nC(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Lm(){}function oN(n,t,e){switch(e=n[e],e===void 0?n.push(t):e!==t&&(t.then(Lm,Lm),t=e),t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,aC(n),n;default:if(typeof t.status=="string")t.then(Lm,Lm);else{if(n=dn,n!==null&&100<n.shellSuspendCounter)throw Error(Mt(482));n=t,n.status="pending",n.then(function(i){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=i}},function(i){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,aC(n),n}throw nd=t,Mp}}var nd=null;function iC(){if(nd===null)throw Error(Mt(459));var n=nd;return nd=null,n}function aC(n){if(n===Mp||n===jv)throw Error(Mt(483))}var xo=!1;function gb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function C1(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Oo(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Lo(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,tn&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,t=p0(n),eN(n,null,e),t}return kv(n,i,t,e),p0(n)}function id(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194048)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,RD(n,e)}}function bx(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var a=null,s=null;if(e=e.firstBaseUpdate,e!==null){do{var r={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};s===null?a=s=r:s=s.next=r,e=e.next}while(e!==null);s===null?a=s=t:s=s.next=t}else a=s=t;e={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}var w1=!1;function ad(){if(w1){var n=Qu;if(n!==null)throw n}}function sd(n,t,e,i){w1=!1;var a=n.updateQueue;xo=!1;var s=a.firstBaseUpdate,r=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var u=l,f=u.next;u.next=null,r===null?s=f:r.next=f,r=u;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==r&&(l===null?d.firstBaseUpdate=f:l.next=f,d.lastBaseUpdate=u))}if(s!==null){var p=a.baseState;r=0,d=f=u=null,l=s;do{var m=l.lane&-536870913,g=m!==l.lane;if(g?(Ve&m)===m:(i&m)===m){m!==0&&m===cf&&(w1=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var _=n,E=l;m=t;var M=e;switch(E.tag){case 1:if(_=E.payload,typeof _=="function"){p=_.call(M,p,m);break t}p=_;break t;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,m=typeof _=="function"?_.call(M,p,m):_,m==null)break t;p=gn({},p,m);break t;case 2:xo=!0}}m=l.callback,m!==null&&(n.flags|=64,g&&(n.flags|=8192),g=a.callbacks,g===null?a.callbacks=[m]:g.push(m))}else g={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(f=d=g,u=p):d=d.next=g,r|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);d===null&&(u=p),a.baseState=u,a.firstBaseUpdate=f,a.lastBaseUpdate=d,s===null&&(a.shared.lanes=0),Go|=r,n.lanes=r,n.memoizedState=p}}function lN(n,t){if(typeof n!="function")throw Error(Mt(191,n));n.call(t)}function cN(n,t){var e=n.callbacks;if(e!==null)for(n.callbacks=null,n=0;n<e.length;n++)lN(e[n],t)}var uf=Qs(null),y0=Qs(0);function sC(n,t){n=Br,_n(y0,n),_n(uf,t),Br=n|t.baseLanes}function R1(){_n(y0,Br),_n(uf,uf.current)}function vb(){Br=y0.current,oi(uf),oi(y0)}var Ho=0,De=null,sn=null,kn=null,_0=!1,Ju=!1,fc=!1,x0=0,Od=0,$u=null,WV=0;function Pn(){throw Error(Mt(321))}function yb(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!Ua(n[e],t[e]))return!1;return!0}function _b(n,t,e,i,a,s){return Ho=s,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ve.H=n===null||n.memoizedState===null?HN:FN,fc=!1,s=e(i,a),fc=!1,Ju&&(s=fN(t,e,i,a)),uN(n),s}function uN(n){ve.H=S0;var t=sn!==null&&sn.next!==null;if(Ho=0,kn=sn=De=null,_0=!1,Od=0,$u=null,t)throw Error(Mt(300));n===null||ri||(n=n.dependencies,n!==null&&v0(n)&&(ri=!0))}function fN(n,t,e,i){De=n;var a=0;do{if(Ju&&($u=null),Od=0,Ju=!1,25<=a)throw Error(Mt(301));if(a+=1,kn=sn=null,n.updateQueue!=null){var s=n.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}ve.H=eH,s=t(e,i)}while(Ju);return s}function ZV(){var n=ve.H,t=n.useState()[0];return t=typeof t.then=="function"?bp(t):t,n=n.useState()[0],(sn!==null?sn.memoizedState:null)!==n&&(De.flags|=1024),t}function xb(){var n=x0!==0;return x0=0,n}function Sb(n,t,e){t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~e}function Mb(n){if(_0){for(n=n.memoizedState;n!==null;){var t=n.queue;t!==null&&(t.pending=null),n=n.next}_0=!1}Ho=0,kn=sn=De=null,Ju=!1,Od=x0=0,$u=null}function ta(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?De.memoizedState=kn=n:kn=kn.next=n,kn}function qn(){if(sn===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=sn.next;var t=kn===null?De.memoizedState:kn.next;if(t!==null)kn=t,sn=n;else{if(n===null)throw De.alternate===null?Error(Mt(467)):Error(Mt(310));sn=n,n={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},kn===null?De.memoizedState=kn=n:kn=kn.next=n}return kn}function bb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bp(n){var t=Od;return Od+=1,$u===null&&($u=[]),n=oN($u,n,t),t=De,(kn===null?t.memoizedState:kn.next)===null&&(t=t.alternate,ve.H=t===null||t.memoizedState===null?HN:FN),n}function qv(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return bp(n);if(n.$$typeof===Tr)return Di(n)}throw Error(Mt(438,String(n)))}function Eb(n){var t=null,e=De.updateQueue;if(e!==null&&(t=e.memoCache),t==null){var i=De.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),e===null&&(e=bb(),De.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(n),i=0;i<n;i++)e[i]=OI;return t.index++,e}function Pr(n,t){return typeof t=="function"?t(n):t}function qg(n){var t=qn();return Tb(t,sn,n)}function Tb(n,t,e){var i=n.queue;if(i===null)throw Error(Mt(311));i.lastRenderedReducer=e;var a=n.baseQueue,s=i.pending;if(s!==null){if(a!==null){var r=a.next;a.next=s.next,s.next=r}t.baseQueue=a=s,i.pending=null}if(s=n.baseState,a===null)n.memoizedState=s;else{t=a.next;var l=r=null,u=null,f=t,d=!1;do{var p=f.lane&-536870913;if(p!==f.lane?(Ve&p)===p:(Ho&p)===p){var m=f.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),p===cf&&(d=!0);else if((Ho&m)===m){f=f.next,m===cf&&(d=!0);continue}else p={lane:0,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=p,r=s):u=u.next=p,De.lanes|=m,Go|=m;p=f.action,fc&&e(s,p),s=f.hasEagerState?f.eagerState:e(s,p)}else m={lane:p,revertLane:f.revertLane,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=m,r=s):u=u.next=m,De.lanes|=p,Go|=p;f=f.next}while(f!==null&&f!==t);if(u===null?r=s:u.next=l,!Ua(s,n.memoizedState)&&(ri=!0,d&&(e=Qu,e!==null)))throw e;n.memoizedState=s,n.baseState=r,n.baseQueue=u,i.lastRenderedState=s}return a===null&&(i.lanes=0),[n.memoizedState,i.dispatch]}function Ex(n){var t=qn(),e=t.queue;if(e===null)throw Error(Mt(311));e.lastRenderedReducer=n;var i=e.dispatch,a=e.pending,s=t.memoizedState;if(a!==null){e.pending=null;var r=a=a.next;do s=n(s,r.action),r=r.next;while(r!==a);Ua(s,t.memoizedState)||(ri=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),e.lastRenderedState=s}return[s,i]}function hN(n,t,e){var i=De,a=qn(),s=Ye;if(s){if(e===void 0)throw Error(Mt(407));e=e()}else e=t();var r=!Ua((sn||a).memoizedState,e);r&&(a.memoizedState=e,ri=!0),a=a.queue;var l=mN.bind(null,i,a,n);if(Ep(2048,8,l,[n]),a.getSnapshot!==t||r||kn!==null&&kn.memoizedState.tag&1){if(i.flags|=2048,ff(9,Yv(),pN.bind(null,i,a,e,t),null),dn===null)throw Error(Mt(349));s||Ho&124||dN(i,t,e)}return e}function dN(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=De.updateQueue,t===null?(t=bb(),De.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function pN(n,t,e,i){t.value=e,t.getSnapshot=i,gN(t)&&vN(n)}function mN(n,t,e){return e(function(){gN(t)&&vN(n)})}function gN(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Ua(n,e)}catch{return!0}}function vN(n){var t=Of(n,2);t!==null&&Da(t,n,2)}function D1(n){var t=ta();if(typeof n=="function"){var e=n;if(n=e(),fc){Co(!0);try{e()}finally{Co(!1)}}}return t.memoizedState=t.baseState=n,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:n},t}function yN(n,t,e,i){return n.baseState=e,Tb(n,sn,typeof i=="function"?i:Pr)}function KV(n,t,e,i,a){if(Wv(n))throw Error(Mt(485));if(n=t.action,n!==null){var s={payload:a,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};ve.T!==null?e(!0):s.isTransition=!1,i(s),e=t.pending,e===null?(s.next=t.pending=s,_N(t,s)):(s.next=e.next,t.pending=e.next=s)}}function _N(n,t){var e=t.action,i=t.payload,a=n.state;if(t.isTransition){var s=ve.T,r={};ve.T=r;try{var l=e(a,i),u=ve.S;u!==null&&u(r,l),rC(n,t,l)}catch(f){N1(n,t,f)}finally{ve.T=s}}else try{s=e(a,i),rC(n,t,s)}catch(f){N1(n,t,f)}}function rC(n,t,e){e!==null&&typeof e=="object"&&typeof e.then=="function"?e.then(function(i){oC(n,t,i)},function(i){return N1(n,t,i)}):oC(n,t,e)}function oC(n,t,e){t.status="fulfilled",t.value=e,xN(t),n.state=e,t=n.pending,t!==null&&(e=t.next,e===t?n.pending=null:(e=e.next,t.next=e,_N(n,e)))}function N1(n,t,e){var i=n.pending;if(n.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=e,xN(t),t=t.next;while(t!==i)}n.action=null}function xN(n){n=n.listeners;for(var t=0;t<n.length;t++)(0,n[t])()}function SN(n,t){return t}function lC(n,t){if(Ye){var e=dn.formState;if(e!==null){t:{var i=De;if(Ye){if(Un){e:{for(var a=Un,s=zs;a.nodeType!==8;){if(!s){a=null;break e}if(a=Ss(a.nextSibling),a===null){a=null;break e}}s=a.data,a=s==="F!"||s==="F"?a:null}if(a){Un=Ss(a.nextSibling),i=a.data==="F!";break t}}cc(i)}i=!1}i&&(t=e[0])}}return e=ta(),e.memoizedState=e.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:SN,lastRenderedState:t},e.queue=i,e=BN.bind(null,De,i),i.dispatch=e,i=D1(!1),s=Rb.bind(null,De,!1,i.queue),i=ta(),a={state:t,dispatch:null,action:n,pending:null},i.queue=a,e=KV.bind(null,De,a,s,e),a.dispatch=e,i.memoizedState=n,[t,e,!1]}function cC(n){var t=qn();return MN(t,sn,n)}function MN(n,t,e){if(t=Tb(n,t,SN)[0],n=qg(Pr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=bp(t)}catch(r){throw r===Mp?jv:r}else i=t;t=qn();var a=t.queue,s=a.dispatch;return e!==t.memoizedState&&(De.flags|=2048,ff(9,Yv(),QV.bind(null,a,e),null)),[i,s,n]}function QV(n,t){n.action=t}function uC(n){var t=qn(),e=sn;if(e!==null)return MN(t,e,n);qn(),t=t.memoizedState,e=qn();var i=e.queue.dispatch;return e.memoizedState=n,[t,i,!1]}function ff(n,t,e,i){return n={tag:n,create:e,deps:i,inst:t,next:null},t=De.updateQueue,t===null&&(t=bb(),De.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n),n}function Yv(){return{destroy:void 0,resource:void 0}}function bN(){return qn().memoizedState}function Yg(n,t,e,i){var a=ta();i=i===void 0?null:i,De.flags|=n,a.memoizedState=ff(1|t,Yv(),e,i)}function Ep(n,t,e,i){var a=qn();i=i===void 0?null:i;var s=a.memoizedState.inst;sn!==null&&i!==null&&yb(i,sn.memoizedState.deps)?a.memoizedState=ff(t,s,e,i):(De.flags|=n,a.memoizedState=ff(1|t,s,e,i))}function fC(n,t){Yg(8390656,8,n,t)}function EN(n,t){Ep(2048,8,n,t)}function TN(n,t){return Ep(4,2,n,t)}function AN(n,t){return Ep(4,4,n,t)}function CN(n,t){if(typeof t=="function"){n=n();var e=t(n);return function(){typeof e=="function"?e():t(null)}}if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function wN(n,t,e){e=e!=null?e.concat([n]):null,Ep(4,4,CN.bind(null,t,n),e)}function Ab(){}function RN(n,t){var e=qn();t=t===void 0?null:t;var i=e.memoizedState;return t!==null&&yb(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function DN(n,t){var e=qn();t=t===void 0?null:t;var i=e.memoizedState;if(t!==null&&yb(t,i[1]))return i[0];if(i=n(),fc){Co(!0);try{n()}finally{Co(!1)}}return e.memoizedState=[i,t],i}function Cb(n,t,e){return e===void 0||Ho&1073741824?n.memoizedState=t:(n.memoizedState=e,n=xU(),De.lanes|=n,Go|=n,e)}function NN(n,t,e,i){return Ua(e,t)?e:uf.current!==null?(n=Cb(n,e,i),Ua(n,t)||(ri=!0),n):Ho&42?(n=xU(),De.lanes|=n,Go|=n,t):(ri=!0,n.memoizedState=e)}function UN(n,t,e,i,a){var s=We.p;We.p=s!==0&&8>s?s:8;var r=ve.T,l={};ve.T=l,Rb(n,!1,t,e);try{var u=a(),f=ve.S;if(f!==null&&f(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=YV(u,i);rd(n,t,d,Ra(n))}else rd(n,t,i,Ra(n))}catch(p){rd(n,t,{then:function(){},status:"rejected",reason:p},Ra())}finally{We.p=s,ve.T=r}}function JV(){}function U1(n,t,e,i){if(n.tag!==5)throw Error(Mt(476));var a=ON(n).queue;UN(n,a,t,Ql,e===null?JV:function(){return LN(n),e(i)})}function ON(n){var t=n.memoizedState;if(t!==null)return t;t={memoizedState:Ql,baseState:Ql,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:Ql},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:e},next:null},n.memoizedState=t,n=n.alternate,n!==null&&(n.memoizedState=t),t}function LN(n){var t=ON(n).next.queue;rd(n,t,{},Ra())}function wb(){return Di(Id)}function PN(){return qn().memoizedState}function zN(){return qn().memoizedState}function $V(n){for(var t=n.return;t!==null;){switch(t.tag){case 24:case 3:var e=Ra();n=Oo(e);var i=Lo(t,n,e);i!==null&&(Da(i,t,e),id(i,t,e)),t={cache:pb()},n.payload=t;return}t=t.return}}function tH(n,t,e){var i=Ra();e={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null},Wv(n)?IN(t,e):(e=ub(n,t,e,i),e!==null&&(Da(e,n,i),VN(e,t,i)))}function BN(n,t,e){var i=Ra();rd(n,t,e,i)}function rd(n,t,e,i){var a={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null};if(Wv(n))IN(t,a);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,l=s(r,e);if(a.hasEagerState=!0,a.eagerState=l,Ua(l,r))return kv(n,t,a,0),dn===null&&Xv(),!1}catch{}finally{}if(e=ub(n,t,a,i),e!==null)return Da(e,n,i),VN(e,t,i),!0}return!1}function Rb(n,t,e,i){if(i={lane:2,revertLane:Bb(),action:i,hasEagerState:!1,eagerState:null,next:null},Wv(n)){if(t)throw Error(Mt(479))}else t=ub(n,e,i,2),t!==null&&Da(t,n,2)}function Wv(n){var t=n.alternate;return n===De||t!==null&&t===De}function IN(n,t){Ju=_0=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function VN(n,t,e){if(e&4194048){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,RD(n,e)}}var S0={readContext:Di,use:qv,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn},HN={readContext:Di,use:qv,useCallback:function(n,t){return ta().memoizedState=[n,t===void 0?null:t],n},useContext:Di,useEffect:fC,useImperativeHandle:function(n,t,e){e=e!=null?e.concat([n]):null,Yg(4194308,4,CN.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Yg(4194308,4,n,t)},useInsertionEffect:function(n,t){Yg(4,2,n,t)},useMemo:function(n,t){var e=ta();t=t===void 0?null:t;var i=n();if(fc){Co(!0);try{n()}finally{Co(!1)}}return e.memoizedState=[i,t],i},useReducer:function(n,t,e){var i=ta();if(e!==void 0){var a=e(t);if(fc){Co(!0);try{e(t)}finally{Co(!1)}}}else a=t;return i.memoizedState=i.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:a},i.queue=n,n=n.dispatch=tH.bind(null,De,n),[i.memoizedState,n]},useRef:function(n){var t=ta();return n={current:n},t.memoizedState=n},useState:function(n){n=D1(n);var t=n.queue,e=BN.bind(null,De,t);return t.dispatch=e,[n.memoizedState,e]},useDebugValue:Ab,useDeferredValue:function(n,t){var e=ta();return Cb(e,n,t)},useTransition:function(){var n=D1(!1);return n=UN.bind(null,De,n.queue,!0,!1),ta().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,t,e){var i=De,a=ta();if(Ye){if(e===void 0)throw Error(Mt(407));e=e()}else{if(e=t(),dn===null)throw Error(Mt(349));Ve&124||dN(i,t,e)}a.memoizedState=e;var s={value:e,getSnapshot:t};return a.queue=s,fC(mN.bind(null,i,s,n),[n]),i.flags|=2048,ff(9,Yv(),pN.bind(null,i,s,e,t),null),e},useId:function(){var n=ta(),t=dn.identifierPrefix;if(Ye){var e=Cr,i=Ar;e=(i&~(1<<32-wa(i)-1)).toString(32)+e,t="«"+t+"R"+e,e=x0++,0<e&&(t+="H"+e.toString(32)),t+="»"}else e=WV++,t="«"+t+"r"+e.toString(32)+"»";return n.memoizedState=t},useHostTransitionStatus:wb,useFormState:lC,useActionState:lC,useOptimistic:function(n){var t=ta();t.memoizedState=t.baseState=n;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=Rb.bind(null,De,!0,e),e.dispatch=t,[n,t]},useMemoCache:Eb,useCacheRefresh:function(){return ta().memoizedState=$V.bind(null,De)}},FN={readContext:Di,use:qv,useCallback:RN,useContext:Di,useEffect:EN,useImperativeHandle:wN,useInsertionEffect:TN,useLayoutEffect:AN,useMemo:DN,useReducer:qg,useRef:bN,useState:function(){return qg(Pr)},useDebugValue:Ab,useDeferredValue:function(n,t){var e=qn();return NN(e,sn.memoizedState,n,t)},useTransition:function(){var n=qg(Pr)[0],t=qn().memoizedState;return[typeof n=="boolean"?n:bp(n),t]},useSyncExternalStore:hN,useId:PN,useHostTransitionStatus:wb,useFormState:cC,useActionState:cC,useOptimistic:function(n,t){var e=qn();return yN(e,sn,n,t)},useMemoCache:Eb,useCacheRefresh:zN},eH={readContext:Di,use:qv,useCallback:RN,useContext:Di,useEffect:EN,useImperativeHandle:wN,useInsertionEffect:TN,useLayoutEffect:AN,useMemo:DN,useReducer:Ex,useRef:bN,useState:function(){return Ex(Pr)},useDebugValue:Ab,useDeferredValue:function(n,t){var e=qn();return sn===null?Cb(e,n,t):NN(e,sn.memoizedState,n,t)},useTransition:function(){var n=Ex(Pr)[0],t=qn().memoizedState;return[typeof n=="boolean"?n:bp(n),t]},useSyncExternalStore:hN,useId:PN,useHostTransitionStatus:wb,useFormState:uC,useActionState:uC,useOptimistic:function(n,t){var e=qn();return sn!==null?yN(e,sn,n,t):(e.baseState=n,[n,e.queue.dispatch])},useMemoCache:Eb,useCacheRefresh:zN},tf=null,Ld=0;function Pm(n){var t=Ld;return Ld+=1,tf===null&&(tf=[]),oN(tf,n,t)}function Ah(n,t){t=t.props.ref,n.ref=t!==void 0?t:null}function zm(n,t){throw t.$$typeof===NI?Error(Mt(525)):(n=Object.prototype.toString.call(t),Error(Mt(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)))}function hC(n){var t=n._init;return t(n._payload)}function GN(n){function t(v,x){if(n){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function e(v,x){if(!n)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function i(v){for(var x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function a(v,x){return v=Dr(v,x),v.index=0,v.sibling=null,v}function s(v,x,b){return v.index=b,n?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=67108866,x):b):(v.flags|=67108866,x)):(v.flags|=1048576,x)}function r(v){return n&&v.alternate===null&&(v.flags|=67108866),v}function l(v,x,b,T){return x===null||x.tag!==6?(x=Sx(b,v.mode,T),x.return=v,x):(x=a(x,b),x.return=v,x)}function u(v,x,b,T){var w=b.type;return w===Au?d(v,x,b.props.children,T,b.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_o&&hC(w)===x.type)?(x=a(x,b.props),Ah(x,b),x.return=v,x):(x=kg(b.type,b.key,b.props,null,v.mode,T),Ah(x,b),x.return=v,x)}function f(v,x,b,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Mx(b,v.mode,T),x.return=v,x):(x=a(x,b.children||[]),x.return=v,x)}function d(v,x,b,T,w){return x===null||x.tag!==7?(x=Jl(b,v.mode,T,w),x.return=v,x):(x=a(x,b),x.return=v,x)}function p(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Sx(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case wm:return b=kg(x.type,x.key,x.props,null,v.mode,b),Ah(b,x),b.return=v,b;case Xh:return x=Mx(x,v.mode,b),x.return=v,x;case _o:var T=x._init;return x=T(x._payload),p(v,x,b)}if(kh(x)||Mh(x))return x=Jl(x,v.mode,b,null),x.return=v,x;if(typeof x.then=="function")return p(v,Pm(x),b);if(x.$$typeof===Tr)return p(v,Om(v,x),b);zm(v,x)}return null}function m(v,x,b,T){var w=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return w!==null?null:l(v,x,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wm:return b.key===w?u(v,x,b,T):null;case Xh:return b.key===w?f(v,x,b,T):null;case _o:return w=b._init,b=w(b._payload),m(v,x,b,T)}if(kh(b)||Mh(b))return w!==null?null:d(v,x,b,T,null);if(typeof b.then=="function")return m(v,x,Pm(b),T);if(b.$$typeof===Tr)return m(v,x,Om(v,b),T);zm(v,b)}return null}function g(v,x,b,T,w){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return v=v.get(b)||null,l(x,v,""+T,w);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case wm:return v=v.get(T.key===null?b:T.key)||null,u(x,v,T,w);case Xh:return v=v.get(T.key===null?b:T.key)||null,f(x,v,T,w);case _o:var R=T._init;return T=R(T._payload),g(v,x,b,T,w)}if(kh(T)||Mh(T))return v=v.get(b)||null,d(x,v,T,w,null);if(typeof T.then=="function")return g(v,x,b,Pm(T),w);if(T.$$typeof===Tr)return g(v,x,b,Om(x,T),w);zm(x,T)}return null}function _(v,x,b,T){for(var w=null,R=null,N=x,U=x=0,D=null;N!==null&&U<b.length;U++){N.index>U?(D=N,N=null):D=N.sibling;var C=m(v,N,b[U],T);if(C===null){N===null&&(N=D);break}n&&N&&C.alternate===null&&t(v,N),x=s(C,x,U),R===null?w=C:R.sibling=C,R=C,N=D}if(U===b.length)return e(v,N),Ye&&Il(v,U),w;if(N===null){for(;U<b.length;U++)N=p(v,b[U],T),N!==null&&(x=s(N,x,U),R===null?w=N:R.sibling=N,R=N);return Ye&&Il(v,U),w}for(N=i(N);U<b.length;U++)D=g(N,v,U,b[U],T),D!==null&&(n&&D.alternate!==null&&N.delete(D.key===null?U:D.key),x=s(D,x,U),R===null?w=D:R.sibling=D,R=D);return n&&N.forEach(function(B){return t(v,B)}),Ye&&Il(v,U),w}function E(v,x,b,T){if(b==null)throw Error(Mt(151));for(var w=null,R=null,N=x,U=x=0,D=null,C=b.next();N!==null&&!C.done;U++,C=b.next()){N.index>U?(D=N,N=null):D=N.sibling;var B=m(v,N,C.value,T);if(B===null){N===null&&(N=D);break}n&&N&&B.alternate===null&&t(v,N),x=s(B,x,U),R===null?w=B:R.sibling=B,R=B,N=D}if(C.done)return e(v,N),Ye&&Il(v,U),w;if(N===null){for(;!C.done;U++,C=b.next())C=p(v,C.value,T),C!==null&&(x=s(C,x,U),R===null?w=C:R.sibling=C,R=C);return Ye&&Il(v,U),w}for(N=i(N);!C.done;U++,C=b.next())C=g(N,v,U,C.value,T),C!==null&&(n&&C.alternate!==null&&N.delete(C.key===null?U:C.key),x=s(C,x,U),R===null?w=C:R.sibling=C,R=C);return n&&N.forEach(function(Z){return t(v,Z)}),Ye&&Il(v,U),w}function M(v,x,b,T){if(typeof b=="object"&&b!==null&&b.type===Au&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case wm:t:{for(var w=b.key;x!==null;){if(x.key===w){if(w=b.type,w===Au){if(x.tag===7){e(v,x.sibling),T=a(x,b.props.children),T.return=v,v=T;break t}}else if(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_o&&hC(w)===x.type){e(v,x.sibling),T=a(x,b.props),Ah(T,b),T.return=v,v=T;break t}e(v,x);break}else t(v,x);x=x.sibling}b.type===Au?(T=Jl(b.props.children,v.mode,T,b.key),T.return=v,v=T):(T=kg(b.type,b.key,b.props,null,v.mode,T),Ah(T,b),T.return=v,v=T)}return r(v);case Xh:t:{for(w=b.key;x!==null;){if(x.key===w)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){e(v,x.sibling),T=a(x,b.children||[]),T.return=v,v=T;break t}else{e(v,x);break}else t(v,x);x=x.sibling}T=Mx(b,v.mode,T),T.return=v,v=T}return r(v);case _o:return w=b._init,b=w(b._payload),M(v,x,b,T)}if(kh(b))return _(v,x,b,T);if(Mh(b)){if(w=Mh(b),typeof w!="function")throw Error(Mt(150));return b=w.call(b),E(v,x,b,T)}if(typeof b.then=="function")return M(v,x,Pm(b),T);if(b.$$typeof===Tr)return M(v,x,Om(v,b),T);zm(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,x!==null&&x.tag===6?(e(v,x.sibling),T=a(x,b),T.return=v,v=T):(e(v,x),T=Sx(b,v.mode,T),T.return=v,v=T),r(v)):e(v,x)}return function(v,x,b,T){try{Ld=0;var w=M(v,x,b,T);return tf=null,w}catch(N){if(N===Mp||N===jv)throw N;var R=Aa(29,N,null,v.mode);return R.lanes=T,R.return=v,R}finally{}}}var hf=GN(!0),XN=GN(!1),ns=Qs(null),Gs=null;function Mo(n){var t=n.alternate;_n(Zn,Zn.current&1),_n(ns,n),Gs===null&&(t===null||uf.current!==null||t.memoizedState!==null)&&(Gs=n)}function kN(n){if(n.tag===22){if(_n(Zn,Zn.current),_n(ns,n),Gs===null){var t=n.alternate;t!==null&&t.memoizedState!==null&&(Gs=n)}}else bo()}function bo(){_n(Zn,Zn.current),_n(ns,ns.current)}function Rr(n){oi(ns),Gs===n&&(Gs=null),oi(Zn)}var Zn=Qs(0);function M0(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||Z1(e)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Tx(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:gn({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var O1={enqueueSetState:function(n,t,e){n=n._reactInternals;var i=Ra(),a=Oo(i);a.payload=t,e!=null&&(a.callback=e),t=Lo(n,a,i),t!==null&&(Da(t,n,i),id(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=Ra(),a=Oo(i);a.tag=1,a.payload=t,e!=null&&(a.callback=e),t=Lo(n,a,i),t!==null&&(Da(t,n,i),id(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Ra(),i=Oo(e);i.tag=2,t!=null&&(i.callback=t),t=Lo(n,i,e),t!==null&&(Da(t,n,e),id(t,n,e))}};function dC(n,t,e,i,a,s,r){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,r):t.prototype&&t.prototype.isPureReactComponent?!Nd(e,i)||!Nd(a,s):!0}function pC(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&O1.enqueueReplaceState(t,t.state,null)}function hc(n,t){var e=t;if("ref"in t){e={};for(var i in t)i!=="ref"&&(e[i]=t[i])}if(n=n.defaultProps){e===t&&(e=gn({},e));for(var a in n)e[a]===void 0&&(e[a]=n[a])}return e}var b0=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function jN(n){b0(n)}function qN(n){console.error(n)}function YN(n){b0(n)}function E0(n,t){try{var e=n.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function mC(n,t,e){try{var i=n.onCaughtError;i(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function L1(n,t,e){return e=Oo(e),e.tag=3,e.payload={element:null},e.callback=function(){E0(n,t)},e}function WN(n){return n=Oo(n),n.tag=3,n}function ZN(n,t,e,i){var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=i.value;n.payload=function(){return a(s)},n.callback=function(){mC(t,e,i)}}var r=e.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){mC(t,e,i),typeof a!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function nH(n,t,e,i,a){if(e.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=e.alternate,t!==null&&xp(t,e,a,!0),e=ns.current,e!==null){switch(e.tag){case 13:return Gs===null?G1():e.alternate===null&&On===0&&(On=3),e.flags&=-257,e.flags|=65536,e.lanes=a,i===A1?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([i]):t.add(i),zx(n,i,a)),!1;case 22:return e.flags|=65536,i===A1?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([i]):e.add(i)),zx(n,i,a)),!1}throw Error(Mt(435,e.tag))}return zx(n,i,a),G1(),!1}if(Ye)return t=ns.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==S1&&(n=Error(Mt(422),{cause:i}),Ud(Qa(n,e)))):(i!==S1&&(t=Error(Mt(423),{cause:i}),Ud(Qa(t,e))),n=n.current.alternate,n.flags|=65536,a&=-a,n.lanes|=a,i=Qa(i,e),a=L1(n.stateNode,i,a),bx(n,a),On!==4&&(On=2)),!1;var s=Error(Mt(520),{cause:i});if(s=Qa(s,e),cd===null?cd=[s]:cd.push(s),On!==4&&(On=2),t===null)return!0;i=Qa(i,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,n=a&-a,e.lanes|=n,n=L1(e.stateNode,i,n),bx(e,n),!1;case 1:if(t=e.type,s=e.stateNode,(e.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Po===null||!Po.has(s))))return e.flags|=65536,a&=-a,e.lanes|=a,a=WN(a),ZN(a,n,e,i),bx(e,a),!1}e=e.return}while(e!==null);return!1}var KN=Error(Mt(461)),ri=!1;function pi(n,t,e,i){t.child=n===null?XN(t,null,e,i):hf(t,n.child,e,i)}function gC(n,t,e,i,a){e=e.render;var s=t.ref;if("ref"in i){var r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}else r=i;return uc(t),i=_b(n,t,e,r,s,a),l=xb(),n!==null&&!ri?(Sb(n,t,a),zr(n,t,a)):(Ye&&l&&hb(t),t.flags|=1,pi(n,t,i,a),t.child)}function vC(n,t,e,i,a){if(n===null){var s=e.type;return typeof s=="function"&&!fb(s)&&s.defaultProps===void 0&&e.compare===null?(t.tag=15,t.type=s,QN(n,t,s,i,a)):(n=kg(e.type,null,i,t,t.mode,a),n.ref=t.ref,n.return=t,t.child=n)}if(s=n.child,!Db(n,a)){var r=s.memoizedProps;if(e=e.compare,e=e!==null?e:Nd,e(r,i)&&n.ref===t.ref)return zr(n,t,a)}return t.flags|=1,n=Dr(s,i),n.ref=t.ref,n.return=t,t.child=n}function QN(n,t,e,i,a){if(n!==null){var s=n.memoizedProps;if(Nd(s,i)&&n.ref===t.ref)if(ri=!1,t.pendingProps=i=s,Db(n,a))n.flags&131072&&(ri=!0);else return t.lanes=n.lanes,zr(n,t,a)}return P1(n,t,e,i,a)}function JN(n,t,e){var i=t.pendingProps,a=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=s!==null?s.baseLanes|e:e,n!==null){for(a=t.child=n.child,s=0;a!==null;)s=s|a.lanes|a.childLanes,a=a.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return yC(n,t,i,e)}if(e&536870912)t.memoizedState={baseLanes:0,cachePool:null},n!==null&&jg(t,s!==null?s.cachePool:null),s!==null?sC(t,s):R1(),kN(t);else return t.lanes=t.childLanes=536870912,yC(n,t,s!==null?s.baseLanes|e:e,e)}else s!==null?(jg(t,s.cachePool),sC(t,s),bo(),t.memoizedState=null):(n!==null&&jg(t,null),R1(),bo());return pi(n,t,a,e),t.child}function yC(n,t,e,i){var a=mb();return a=a===null?null:{parent:Wn._currentValue,pool:a},t.memoizedState={baseLanes:e,cachePool:a},n!==null&&jg(t,null),R1(),kN(t),n!==null&&xp(n,t,i,!0),null}function Wg(n,t){var e=t.ref;if(e===null)n!==null&&n.ref!==null&&(t.flags|=4194816);else{if(typeof e!="function"&&typeof e!="object")throw Error(Mt(284));(n===null||n.ref!==e)&&(t.flags|=4194816)}}function P1(n,t,e,i,a){return uc(t),e=_b(n,t,e,i,void 0,a),i=xb(),n!==null&&!ri?(Sb(n,t,a),zr(n,t,a)):(Ye&&i&&hb(t),t.flags|=1,pi(n,t,e,a),t.child)}function _C(n,t,e,i,a,s){return uc(t),t.updateQueue=null,e=fN(t,i,e,a),uN(n),i=xb(),n!==null&&!ri?(Sb(n,t,s),zr(n,t,s)):(Ye&&i&&hb(t),t.flags|=1,pi(n,t,e,s),t.child)}function xC(n,t,e,i,a){if(uc(t),t.stateNode===null){var s=Lu,r=e.contextType;typeof r=="object"&&r!==null&&(s=Di(r)),s=new e(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=O1,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},gb(t),r=e.contextType,s.context=typeof r=="object"&&r!==null?Di(r):Lu,s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Tx(t,e,r,i),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&O1.enqueueReplaceState(s,s.state,null),sd(t,i,s,a),ad(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(n===null){s=t.stateNode;var l=t.memoizedProps,u=hc(e,l);s.props=u;var f=s.context,d=e.contextType;r=Lu,typeof d=="object"&&d!==null&&(r=Di(d));var p=e.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||f!==r)&&pC(t,s,i,r),xo=!1;var m=t.memoizedState;s.state=m,sd(t,i,s,a),ad(),f=t.memoizedState,l||m!==f||xo?(typeof p=="function"&&(Tx(t,e,p,i),f=t.memoizedState),(u=xo||dC(t,e,u,i,m,f,r))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=r,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,C1(n,t),r=t.memoizedProps,d=hc(e,r),s.props=d,p=t.pendingProps,m=s.context,f=e.contextType,u=Lu,typeof f=="object"&&f!==null&&(u=Di(f)),l=e.getDerivedStateFromProps,(f=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==p||m!==u)&&pC(t,s,i,u),xo=!1,m=t.memoizedState,s.state=m,sd(t,i,s,a),ad();var g=t.memoizedState;r!==p||m!==g||xo||n!==null&&n.dependencies!==null&&v0(n.dependencies)?(typeof l=="function"&&(Tx(t,e,l,i),g=t.memoizedState),(d=xo||dC(t,e,d,i,m,g,u)||n!==null&&n.dependencies!==null&&v0(n.dependencies))?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===n.memoizedProps&&m===n.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===n.memoizedProps&&m===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),s.props=i,s.state=g,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||r===n.memoizedProps&&m===n.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===n.memoizedProps&&m===n.memoizedState||(t.flags|=1024),i=!1)}return s=i,Wg(n,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,e=i&&typeof e.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,n!==null&&i?(t.child=hf(t,n.child,null,a),t.child=hf(t,null,e,a)):pi(n,t,e,a),t.memoizedState=s.state,n=t.child):n=zr(n,t,a),n}function SC(n,t,e,i){return _p(),t.flags|=256,pi(n,t,e,i),t.child}var Ax={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cx(n){return{baseLanes:n,cachePool:sN()}}function wx(n,t,e){return n=n!==null?n.childLanes&~e:0,t&&(n|=Ja),n}function $N(n,t,e){var i=t.pendingProps,a=!1,s=(t.flags&128)!==0,r;if((r=s)||(r=n!==null&&n.memoizedState===null?!1:(Zn.current&2)!==0),r&&(a=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,n===null){if(Ye){if(a?Mo(t):bo(),Ye){var l=Un,u;if(u=l){t:{for(u=l,l=zs;u.nodeType!==8;){if(!l){l=null;break t}if(u=Ss(u.nextSibling),u===null){l=null;break t}}l=u}l!==null?(t.memoizedState={dehydrated:l,treeContext:$l!==null?{id:Ar,overflow:Cr}:null,retryLane:536870912,hydrationErrors:null},u=Aa(18,null,null,0),u.stateNode=l,u.return=t,t.child=u,Xi=t,Un=null,u=!0):u=!1}u||cc(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Z1(l)?t.lanes=32:t.lanes=536870912,null;Rr(t)}return l=i.children,i=i.fallback,a?(bo(),a=t.mode,l=T0({mode:"hidden",children:l},a),i=Jl(i,a,e,null),l.return=t,i.return=t,l.sibling=i,t.child=l,a=t.child,a.memoizedState=Cx(e),a.childLanes=wx(n,r,e),t.memoizedState=Ax,i):(Mo(t),z1(t,l))}if(u=n.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)t.flags&256?(Mo(t),t.flags&=-257,t=Rx(n,t,e)):t.memoizedState!==null?(bo(),t.child=n.child,t.flags|=128,t=null):(bo(),a=i.fallback,l=t.mode,i=T0({mode:"visible",children:i.children},l),a=Jl(a,l,e,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,hf(t,n.child,null,e),i=t.child,i.memoizedState=Cx(e),i.childLanes=wx(n,r,e),t.memoizedState=Ax,t=a);else if(Mo(t),Z1(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var f=r.dgst;r=f,i=Error(Mt(419)),i.stack="",i.digest=r,Ud({value:i,source:null,stack:null}),t=Rx(n,t,e)}else if(ri||xp(n,t,e,!1),r=(e&n.childLanes)!==0,ri||r){if(r=dn,r!==null&&(i=e&-e,i=i&42?1:tb(i),i=i&(r.suspendedLanes|e)?0:i,i!==0&&i!==u.retryLane))throw u.retryLane=i,Of(n,i),Da(r,n,i),KN;l.data==="$?"||G1(),t=Rx(n,t,e)}else l.data==="$?"?(t.flags|=192,t.child=n.child,t=null):(n=u.treeContext,Un=Ss(l.nextSibling),Xi=t,Ye=!0,tc=null,zs=!1,n!==null&&(Wa[Za++]=Ar,Wa[Za++]=Cr,Wa[Za++]=$l,Ar=n.id,Cr=n.overflow,$l=t),t=z1(t,i.children),t.flags|=4096);return t}return a?(bo(),a=i.fallback,l=t.mode,u=n.child,f=u.sibling,i=Dr(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,f!==null?a=Dr(f,a):(a=Jl(a,l,e,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=n.child.memoizedState,l===null?l=Cx(e):(u=l.cachePool,u!==null?(f=Wn._currentValue,u=u.parent!==f?{parent:f,pool:f}:u):u=sN(),l={baseLanes:l.baseLanes|e,cachePool:u}),a.memoizedState=l,a.childLanes=wx(n,r,e),t.memoizedState=Ax,i):(Mo(t),e=n.child,n=e.sibling,e=Dr(e,{mode:"visible",children:i.children}),e.return=t,e.sibling=null,n!==null&&(r=t.deletions,r===null?(t.deletions=[n],t.flags|=16):r.push(n)),t.child=e,t.memoizedState=null,e)}function z1(n,t){return t=T0({mode:"visible",children:t},n.mode),t.return=n,n.child=t}function T0(n,t){return n=Aa(22,n,null,t),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Rx(n,t,e){return hf(t,n.child,null,e),n=z1(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function MC(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),b1(n.return,t,e)}function Dx(n,t,e,i,a){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=e,s.tailMode=a)}function tU(n,t,e){var i=t.pendingProps,a=i.revealOrder,s=i.tail;if(pi(n,t,i.children,e),i=Zn.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&MC(n,e,t);else if(n.tag===19)MC(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}switch(_n(Zn,i),a){case"forwards":for(e=t.child,a=null;e!==null;)n=e.alternate,n!==null&&M0(n)===null&&(a=e),e=e.sibling;e=a,e===null?(a=t.child,t.child=null):(a=e.sibling,e.sibling=null),Dx(t,!1,a,e,s);break;case"backwards":for(e=null,a=t.child,t.child=null;a!==null;){if(n=a.alternate,n!==null&&M0(n)===null){t.child=a;break}n=a.sibling,a.sibling=e,e=a,a=n}Dx(t,!0,e,null,s);break;case"together":Dx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zr(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),Go|=t.lanes,!(e&t.childLanes))if(n!==null){if(xp(n,t,e,!1),(e&t.childLanes)===0)return null}else return null;if(n!==null&&t.child!==n.child)throw Error(Mt(153));if(t.child!==null){for(n=t.child,e=Dr(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=Dr(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function Db(n,t){return n.lanes&t?!0:(n=n.dependencies,!!(n!==null&&v0(n)))}function iH(n,t,e){switch(t.tag){case 3:c0(t,t.stateNode.containerInfo),So(t,Wn,n.memoizedState.cache),_p();break;case 27:case 5:f1(t);break;case 4:c0(t,t.stateNode.containerInfo);break;case 10:So(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Mo(t),t.flags|=128,null):e&t.child.childLanes?$N(n,t,e):(Mo(t),n=zr(n,t,e),n!==null?n.sibling:null);Mo(t);break;case 19:var a=(n.flags&128)!==0;if(i=(e&t.childLanes)!==0,i||(xp(n,t,e,!1),i=(e&t.childLanes)!==0),a){if(i)return tU(n,t,e);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),_n(Zn,Zn.current),i)break;return null;case 22:case 23:return t.lanes=0,JN(n,t,e);case 24:So(t,Wn,n.memoizedState.cache)}return zr(n,t,e)}function eU(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps)ri=!0;else{if(!Db(n,e)&&!(t.flags&128))return ri=!1,iH(n,t,e);ri=!!(n.flags&131072)}else ri=!1,Ye&&t.flags&1048576&&iN(t,g0,t.index);switch(t.lanes=0,t.tag){case 16:t:{n=t.pendingProps;var i=t.elementType,a=i._init;if(i=a(i._payload),t.type=i,typeof i=="function")fb(i)?(n=hc(i,n),t.tag=1,t=xC(null,t,i,n,e)):(t.tag=0,t=P1(null,t,i,n,e));else{if(i!=null){if(a=i.$$typeof,a===QM){t.tag=11,t=gC(null,t,i,n,e);break t}else if(a===JM){t.tag=14,t=vC(null,t,i,n,e);break t}}throw t=c1(i)||i,Error(Mt(306,t,""))}}return t;case 0:return P1(n,t,t.type,t.pendingProps,e);case 1:return i=t.type,a=hc(i,t.pendingProps),xC(n,t,i,a,e);case 3:t:{if(c0(t,t.stateNode.containerInfo),n===null)throw Error(Mt(387));i=t.pendingProps;var s=t.memoizedState;a=s.element,C1(n,t),sd(t,i,null,e);var r=t.memoizedState;if(i=r.cache,So(t,Wn,i),i!==s.cache&&E1(t,[Wn],e,!0),ad(),i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=SC(n,t,i,e);break t}else if(i!==a){a=Qa(Error(Mt(424)),t),Ud(a),t=SC(n,t,i,e);break t}else{switch(n=t.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Un=Ss(n.firstChild),Xi=t,Ye=!0,tc=null,zs=!0,e=XN(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(_p(),i===a){t=zr(n,t,e);break t}pi(n,t,i,e)}t=t.child}return t;case 26:return Wg(n,t),n===null?(e=VC(t.type,null,t.pendingProps,null))?t.memoizedState=e:Ye||(e=t.type,n=t.pendingProps,i=U0(Uo.current).createElement(e),i[Ri]=t,i[la]=n,gi(i,e,n),si(i),t.stateNode=i):t.memoizedState=VC(t.type,n.memoizedProps,t.pendingProps,n.memoizedState),null;case 27:return f1(t),n===null&&Ye&&(i=t.stateNode=FU(t.type,t.pendingProps,Uo.current),Xi=t,zs=!0,a=Un,Zo(t.type)?(K1=a,Un=Ss(i.firstChild)):Un=a),pi(n,t,t.pendingProps.children,e),Wg(n,t),n===null&&(t.flags|=4194304),t.child;case 5:return n===null&&Ye&&((a=i=Un)&&(i=NH(i,t.type,t.pendingProps,zs),i!==null?(t.stateNode=i,Xi=t,Un=Ss(i.firstChild),zs=!1,a=!0):a=!1),a||cc(t)),f1(t),a=t.type,s=t.pendingProps,r=n!==null?n.memoizedProps:null,i=s.children,Y1(a,s)?i=null:r!==null&&Y1(a,r)&&(t.flags|=32),t.memoizedState!==null&&(a=_b(n,t,ZV,null,null,e),Id._currentValue=a),Wg(n,t),pi(n,t,i,e),t.child;case 6:return n===null&&Ye&&((n=e=Un)&&(e=UH(e,t.pendingProps,zs),e!==null?(t.stateNode=e,Xi=t,Un=null,n=!0):n=!1),n||cc(t)),null;case 13:return $N(n,t,e);case 4:return c0(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=hf(t,null,i,e):pi(n,t,i,e),t.child;case 11:return gC(n,t,t.type,t.pendingProps,e);case 7:return pi(n,t,t.pendingProps,e),t.child;case 8:return pi(n,t,t.pendingProps.children,e),t.child;case 12:return pi(n,t,t.pendingProps.children,e),t.child;case 10:return i=t.pendingProps,So(t,t.type,i.value),pi(n,t,i.children,e),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,uc(t),a=Di(a),i=i(a),t.flags|=1,pi(n,t,i,e),t.child;case 14:return vC(n,t,t.type,t.pendingProps,e);case 15:return QN(n,t,t.type,t.pendingProps,e);case 19:return tU(n,t,e);case 31:return i=t.pendingProps,e=t.mode,i={mode:i.mode,children:i.children},n===null?(e=T0(i,e),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=Dr(n.child,i),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return JN(n,t,e);case 24:return uc(t),i=Di(Wn),n===null?(a=mb(),a===null&&(a=dn,s=pb(),a.pooledCache=s,s.refCount++,s!==null&&(a.pooledCacheLanes|=e),a=s),t.memoizedState={parent:i,cache:a},gb(t),So(t,Wn,a)):(n.lanes&e&&(C1(n,t),sd(t,null,null,e),ad()),a=n.memoizedState,s=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),So(t,Wn,i)):(i=s.cache,So(t,Wn,i),i!==a.cache&&E1(t,[Wn],e,!0))),pi(n,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(Mt(156,t.tag))}function dr(n){n.flags|=4}function bC(n,t){if(t.type!=="stylesheet"||t.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!kU(t)){if(t=ns.current,t!==null&&((Ve&4194048)===Ve?Gs!==null:(Ve&62914560)!==Ve&&!(Ve&536870912)||t!==Gs))throw nd=A1,rN;n.flags|=8192}}function Bm(n,t){t!==null&&(n.flags|=4),n.flags&16384&&(t=n.tag!==22?CD():536870912,n.lanes|=t,df|=t)}function Ch(n,t){if(!Ye)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Mn(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var a=n.child;a!==null;)e|=a.lanes|a.childLanes,i|=a.subtreeFlags&65011712,i|=a.flags&65011712,a.return=n,a=a.sibling;else for(a=n.child;a!==null;)e|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=n,a=a.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function aH(n,t,e){var i=t.pendingProps;switch(db(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(t),null;case 1:return Mn(t),null;case 3:return e=t.stateNode,i=null,n!==null&&(i=n.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Nr(Wn),rf(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&&(Th(t)?dr(t):n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$2())),Mn(t),null;case 26:return e=t.memoizedState,n===null?(dr(t),e!==null?(Mn(t),bC(t,e)):(Mn(t),t.flags&=-16777217)):e?e!==n.memoizedState?(dr(t),Mn(t),bC(t,e)):(Mn(t),t.flags&=-16777217):(n.memoizedProps!==i&&dr(t),Mn(t),t.flags&=-16777217),null;case 27:u0(t),e=Uo.current;var a=t.type;if(n!==null&&t.stateNode!=null)n.memoizedProps!==i&&dr(t);else{if(!i){if(t.stateNode===null)throw Error(Mt(166));return Mn(t),null}n=Hs.current,Th(t)?Q2(t):(n=FU(a,i,e),t.stateNode=n,dr(t))}return Mn(t),null;case 5:if(u0(t),e=t.type,n!==null&&t.stateNode!=null)n.memoizedProps!==i&&dr(t);else{if(!i){if(t.stateNode===null)throw Error(Mt(166));return Mn(t),null}if(n=Hs.current,Th(t))Q2(t);else{switch(a=U0(Uo.current),n){case 1:n=a.createElementNS("http://www.w3.org/2000/svg",e);break;case 2:n=a.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;default:switch(e){case"svg":n=a.createElementNS("http://www.w3.org/2000/svg",e);break;case"math":n=a.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;case"script":n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?n.multiple=!0:i.size&&(n.size=i.size);break;default:n=typeof i.is=="string"?a.createElement(e,{is:i.is}):a.createElement(e)}}n[Ri]=t,n[la]=i;t:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break t;for(;a.sibling===null;){if(a.return===null||a.return===t)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=n;t:switch(gi(n,e,i),e){case"button":case"input":case"select":case"textarea":n=!!i.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&dr(t)}}return Mn(t),t.flags&=-16777217,null;case 6:if(n&&t.stateNode!=null)n.memoizedProps!==i&&dr(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Mt(166));if(n=Uo.current,Th(t)){if(n=t.stateNode,e=t.memoizedProps,i=null,a=Xi,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}n[Ri]=t,n=!!(n.nodeValue===e||i!==null&&i.suppressHydrationWarning===!0||IU(n.nodeValue,e)),n||cc(t)}else n=U0(n).createTextNode(i),n[Ri]=t,t.stateNode=n}return Mn(t),null;case 13:if(i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(a=Th(t),i!==null&&i.dehydrated!==null){if(n===null){if(!a)throw Error(Mt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Mt(317));a[Ri]=t}else _p(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mn(t),a=!1}else a=$2(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(Rr(t),t):(Rr(t),null)}if(Rr(t),t.flags&128)return t.lanes=e,t;if(e=i!==null,n=n!==null&&n.memoizedState!==null,e){i=t.child,a=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(a=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==a&&(i.flags|=2048)}return e!==n&&e&&(t.child.flags|=8192),Bm(t,t.updateQueue),Mn(t),null;case 4:return rf(),n===null&&Ib(t.stateNode.containerInfo),Mn(t),null;case 10:return Nr(t.type),Mn(t),null;case 19:if(oi(Zn),a=t.memoizedState,a===null)return Mn(t),null;if(i=(t.flags&128)!==0,s=a.rendering,s===null)if(i)Ch(a,!1);else{if(On!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(s=M0(n),s!==null){for(t.flags|=128,Ch(a,!1),n=s.updateQueue,t.updateQueue=n,Bm(t,n),t.subtreeFlags=0,n=e,e=t.child;e!==null;)nN(e,n),e=e.sibling;return _n(Zn,Zn.current&1|2),t.child}n=n.sibling}a.tail!==null&&Fs()>C0&&(t.flags|=128,i=!0,Ch(a,!1),t.lanes=4194304)}else{if(!i)if(n=M0(s),n!==null){if(t.flags|=128,i=!0,n=n.updateQueue,t.updateQueue=n,Bm(t,n),Ch(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ye)return Mn(t),null}else 2*Fs()-a.renderingStartTime>C0&&e!==536870912&&(t.flags|=128,i=!0,Ch(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Fs(),t.sibling=null,n=Zn.current,_n(Zn,i?n&1|2:n&1),t):(Mn(t),null);case 22:case 23:return Rr(t),vb(),i=t.memoizedState!==null,n!==null?n.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?e&536870912&&!(t.flags&128)&&(Mn(t),t.subtreeFlags&6&&(t.flags|=8192)):Mn(t),e=t.updateQueue,e!==null&&Bm(t,e.retryQueue),e=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==e&&(t.flags|=2048),n!==null&&oi(ec),null;case 24:return e=null,n!==null&&(e=n.memoizedState.cache),t.memoizedState.cache!==e&&(t.flags|=2048),Nr(Wn),Mn(t),null;case 25:return null;case 30:return null}throw Error(Mt(156,t.tag))}function sH(n,t){switch(db(t),t.tag){case 1:return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return Nr(Wn),rf(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 26:case 27:case 5:return u0(t),null;case 13:if(Rr(t),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(Mt(340));_p()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return oi(Zn),null;case 4:return rf(),null;case 10:return Nr(t.type),null;case 22:case 23:return Rr(t),vb(),n!==null&&oi(ec),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 24:return Nr(Wn),null;case 25:return null;default:return null}}function nU(n,t){switch(db(t),t.tag){case 3:Nr(Wn),rf();break;case 26:case 27:case 5:u0(t);break;case 4:rf();break;case 13:Rr(t);break;case 19:oi(Zn);break;case 10:Nr(t.type);break;case 22:case 23:Rr(t),vb(),n!==null&&oi(ec);break;case 24:Nr(Wn)}}function Tp(n,t){try{var e=t.updateQueue,i=e!==null?e.lastEffect:null;if(i!==null){var a=i.next;e=a;do{if((e.tag&n)===n){i=void 0;var s=e.create,r=e.inst;i=s(),r.destroy=i}e=e.next}while(e!==a)}}catch(l){ln(t,t.return,l)}}function Fo(n,t,e){try{var i=t.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var s=a.next;i=s;do{if((i.tag&n)===n){var r=i.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,a=t;var u=e,f=l;try{f()}catch(d){ln(a,u,d)}}}i=i.next}while(i!==s)}}catch(d){ln(t,t.return,d)}}function iU(n){var t=n.updateQueue;if(t!==null){var e=n.stateNode;try{cN(t,e)}catch(i){ln(n,n.return,i)}}}function aU(n,t,e){e.props=hc(n.type,n.memoizedProps),e.state=n.memoizedState;try{e.componentWillUnmount()}catch(i){ln(n,t,i)}}function od(n,t){try{var e=n.ref;if(e!==null){switch(n.tag){case 26:case 27:case 5:var i=n.stateNode;break;case 30:i=n.stateNode;break;default:i=n.stateNode}typeof e=="function"?n.refCleanup=e(i):e.current=i}}catch(a){ln(n,t,a)}}function Bs(n,t){var e=n.ref,i=n.refCleanup;if(e!==null)if(typeof i=="function")try{i()}catch(a){ln(n,t,a)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof e=="function")try{e(null)}catch(a){ln(n,t,a)}else e.current=null}function sU(n){var t=n.type,e=n.memoizedProps,i=n.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":e.autoFocus&&i.focus();break t;case"img":e.src?i.src=e.src:e.srcSet&&(i.srcset=e.srcSet)}}catch(a){ln(n,n.return,a)}}function Nx(n,t,e){try{var i=n.stateNode;AH(i,n.type,e,t),i[la]=t}catch(a){ln(n,n.return,a)}}function rU(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Zo(n.type)||n.tag===4}function Ux(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||rU(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Zo(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function B1(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).insertBefore(n,t):(t=e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.appendChild(n),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Jv));else if(i!==4&&(i===27&&Zo(n.type)&&(e=n.stateNode,t=null),n=n.child,n!==null))for(B1(n,t,e),n=n.sibling;n!==null;)B1(n,t,e),n=n.sibling}function A0(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(i===27&&Zo(n.type)&&(e=n.stateNode),n=n.child,n!==null))for(A0(n,t,e),n=n.sibling;n!==null;)A0(n,t,e),n=n.sibling}function oU(n){var t=n.stateNode,e=n.memoizedProps;try{for(var i=n.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);gi(t,i,e),t[Ri]=n,t[la]=e}catch(s){ln(n,n.return,s)}}var Mr=!1,In=!1,Ox=!1,EC=typeof WeakSet=="function"?WeakSet:Set,ai=null;function rH(n,t){if(n=n.containerInfo,j1=z0,n=WD(n),lb(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var a=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{e.nodeType,s.nodeType}catch{e=null;break t}var r=0,l=-1,u=-1,f=0,d=0,p=n,m=null;e:for(;;){for(var g;p!==e||a!==0&&p.nodeType!==3||(l=r+a),p!==s||i!==0&&p.nodeType!==3||(u=r+i),p.nodeType===3&&(r+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===n)break e;if(m===e&&++f===a&&(l=r),m===s&&++d===i&&(u=r),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}e=l===-1||u===-1?null:{start:l,end:u}}else e=null}e=e||{start:0,end:0}}else e=null;for(q1={focusedElem:n,selectionRange:e},z0=!1,ai=t;ai!==null;)if(t=ai,n=t.child,(t.subtreeFlags&1024)!==0&&n!==null)n.return=t,ai=n;else for(;ai!==null;){switch(t=ai,s=t.alternate,n=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&s!==null){n=void 0,e=t,a=s.memoizedProps,s=s.memoizedState,i=e.stateNode;try{var _=hc(e.type,a,e.elementType===e.type);n=i.getSnapshotBeforeUpdate(_,s),i.__reactInternalSnapshotBeforeUpdate=n}catch(E){ln(e,e.return,E)}}break;case 3:if(n&1024){if(n=t.stateNode.containerInfo,e=n.nodeType,e===9)W1(n);else if(e===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":W1(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(Mt(163))}if(n=t.sibling,n!==null){n.return=t.return,ai=n;break}ai=t.return}}function lU(n,t,e){var i=e.flags;switch(e.tag){case 0:case 11:case 15:lo(n,e),i&4&&Tp(5,e);break;case 1:if(lo(n,e),i&4)if(n=e.stateNode,t===null)try{n.componentDidMount()}catch(r){ln(e,e.return,r)}else{var a=hc(e.type,t.memoizedProps);t=t.memoizedState;try{n.componentDidUpdate(a,t,n.__reactInternalSnapshotBeforeUpdate)}catch(r){ln(e,e.return,r)}}i&64&&iU(e),i&512&&od(e,e.return);break;case 3:if(lo(n,e),i&64&&(n=e.updateQueue,n!==null)){if(t=null,e.child!==null)switch(e.child.tag){case 27:case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}try{cN(n,t)}catch(r){ln(e,e.return,r)}}break;case 27:t===null&&i&4&&oU(e);case 26:case 5:lo(n,e),t===null&&i&4&&sU(e),i&512&&od(e,e.return);break;case 12:lo(n,e);break;case 13:lo(n,e),i&4&&fU(n,e),i&64&&(n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(e=mH.bind(null,e),OH(n,e))));break;case 22:if(i=e.memoizedState!==null||Mr,!i){t=t!==null&&t.memoizedState!==null||In,a=Mr;var s=In;Mr=i,(In=t)&&!s?vo(n,e,(e.subtreeFlags&8772)!==0):lo(n,e),Mr=a,In=s}break;case 30:break;default:lo(n,e)}}function cU(n){var t=n.alternate;t!==null&&(n.alternate=null,cU(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&nb(t)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var vn=null,ea=!1;function pr(n,t,e){for(e=e.child;e!==null;)uU(n,t,e),e=e.sibling}function uU(n,t,e){if(Ca&&typeof Ca.onCommitFiberUnmount=="function")try{Ca.onCommitFiberUnmount(pp,e)}catch{}switch(e.tag){case 26:In||Bs(e,t),pr(n,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&&(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:In||Bs(e,t);var i=vn,a=ea;Zo(e.type)&&(vn=e.stateNode,ea=!1),pr(n,t,e),fd(e.stateNode),vn=i,ea=a;break;case 5:In||Bs(e,t);case 6:if(i=vn,a=ea,vn=null,pr(n,t,e),vn=i,ea=a,vn!==null)if(ea)try{(vn.nodeType===9?vn.body:vn.nodeName==="HTML"?vn.ownerDocument.body:vn).removeChild(e.stateNode)}catch(s){ln(e,t,s)}else try{vn.removeChild(e.stateNode)}catch(s){ln(e,t,s)}break;case 18:vn!==null&&(ea?(n=vn,zC(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.stateNode),Fd(n)):zC(vn,e.stateNode));break;case 4:i=vn,a=ea,vn=e.stateNode.containerInfo,ea=!0,pr(n,t,e),vn=i,ea=a;break;case 0:case 11:case 14:case 15:In||Fo(2,e,t),In||Fo(4,e,t),pr(n,t,e);break;case 1:In||(Bs(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"&&aU(e,t,i)),pr(n,t,e);break;case 21:pr(n,t,e);break;case 22:In=(i=In)||e.memoizedState!==null,pr(n,t,e),In=i;break;default:pr(n,t,e)}}function fU(n,t){if(t.memoizedState===null&&(n=t.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fd(n)}catch(e){ln(t,t.return,e)}}function oH(n){switch(n.tag){case 13:case 19:var t=n.stateNode;return t===null&&(t=n.stateNode=new EC),t;case 22:return n=n.stateNode,t=n._retryCache,t===null&&(t=n._retryCache=new EC),t;default:throw Error(Mt(435,n.tag))}}function Lx(n,t){var e=oH(n);t.forEach(function(i){var a=gH.bind(null,n,i);e.has(i)||(e.add(i),i.then(a,a))})}function Sa(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var a=e[i],s=n,r=t,l=r;t:for(;l!==null;){switch(l.tag){case 27:if(Zo(l.type)){vn=l.stateNode,ea=!1;break t}break;case 5:vn=l.stateNode,ea=!1;break t;case 3:case 4:vn=l.stateNode.containerInfo,ea=!0;break t}l=l.return}if(vn===null)throw Error(Mt(160));uU(s,r,a),vn=null,ea=!1,s=a.alternate,s!==null&&(s.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)hU(t,n),t=t.sibling}var vs=null;function hU(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Sa(t,n),Ma(n),i&4&&(Fo(3,n,n.return),Tp(3,n),Fo(5,n,n.return));break;case 1:Sa(t,n),Ma(n),i&512&&(In||e===null||Bs(e,e.return)),i&64&&Mr&&(n=n.updateQueue,n!==null&&(i=n.callbacks,i!==null&&(e=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=e===null?i:e.concat(i))));break;case 26:var a=vs;if(Sa(t,n),Ma(n),i&512&&(In||e===null||Bs(e,e.return)),i&4){var s=e!==null?e.memoizedState:null;if(i=n.memoizedState,e===null)if(i===null)if(n.stateNode===null){t:{i=n.type,e=n.memoizedProps,a=a.ownerDocument||a;e:switch(i){case"title":s=a.getElementsByTagName("title")[0],(!s||s[vp]||s[Ri]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=a.createElement(i),a.head.insertBefore(s,a.querySelector("head > title"))),gi(s,i,e),s[Ri]=n,si(s),i=s;break t;case"link":var r=FC("link","href",a).get(i+(e.href||""));if(r){for(var l=0;l<r.length;l++)if(s=r[l],s.getAttribute("href")===(e.href==null||e.href===""?null:e.href)&&s.getAttribute("rel")===(e.rel==null?null:e.rel)&&s.getAttribute("title")===(e.title==null?null:e.title)&&s.getAttribute("crossorigin")===(e.crossOrigin==null?null:e.crossOrigin)){r.splice(l,1);break e}}s=a.createElement(i),gi(s,i,e),a.head.appendChild(s);break;case"meta":if(r=FC("meta","content",a).get(i+(e.content||""))){for(l=0;l<r.length;l++)if(s=r[l],s.getAttribute("content")===(e.content==null?null:""+e.content)&&s.getAttribute("name")===(e.name==null?null:e.name)&&s.getAttribute("property")===(e.property==null?null:e.property)&&s.getAttribute("http-equiv")===(e.httpEquiv==null?null:e.httpEquiv)&&s.getAttribute("charset")===(e.charSet==null?null:e.charSet)){r.splice(l,1);break e}}s=a.createElement(i),gi(s,i,e),a.head.appendChild(s);break;default:throw Error(Mt(468,i))}s[Ri]=n,si(s),i=s}n.stateNode=i}else GC(a,n.type,n.stateNode);else n.stateNode=HC(a,i,n.memoizedProps);else s!==i?(s===null?e.stateNode!==null&&(e=e.stateNode,e.parentNode.removeChild(e)):s.count--,i===null?GC(a,n.type,n.stateNode):HC(a,i,n.memoizedProps)):i===null&&n.stateNode!==null&&Nx(n,n.memoizedProps,e.memoizedProps)}break;case 27:Sa(t,n),Ma(n),i&512&&(In||e===null||Bs(e,e.return)),e!==null&&i&4&&Nx(n,n.memoizedProps,e.memoizedProps);break;case 5:if(Sa(t,n),Ma(n),i&512&&(In||e===null||Bs(e,e.return)),n.flags&32){a=n.stateNode;try{lf(a,"")}catch(g){ln(n,n.return,g)}}i&4&&n.stateNode!=null&&(a=n.memoizedProps,Nx(n,a,e!==null?e.memoizedProps:a)),i&1024&&(Ox=!0);break;case 6:if(Sa(t,n),Ma(n),i&4){if(n.stateNode===null)throw Error(Mt(162));i=n.memoizedProps,e=n.stateNode;try{e.nodeValue=i}catch(g){ln(n,n.return,g)}}break;case 3:if(Qg=null,a=vs,vs=O0(t.containerInfo),Sa(t,n),vs=a,Ma(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Fd(t.containerInfo)}catch(g){ln(n,n.return,g)}Ox&&(Ox=!1,dU(n));break;case 4:i=vs,vs=O0(n.stateNode.containerInfo),Sa(t,n),Ma(n),vs=i;break;case 12:Sa(t,n),Ma(n);break;case 13:Sa(t,n),Ma(n),n.child.flags&8192&&n.memoizedState!==null!=(e!==null&&e.memoizedState!==null)&&(Pb=Fs()),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,Lx(n,i)));break;case 22:a=n.memoizedState!==null;var u=e!==null&&e.memoizedState!==null,f=Mr,d=In;if(Mr=f||a,In=d||u,Sa(t,n),In=d,Mr=f,Ma(n),i&8192)t:for(t=n.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(e===null||u||Mr||In||Vl(n)),e=null,t=n;;){if(t.tag===5||t.tag===26){if(e===null){u=e=t;try{if(s=u.stateNode,a)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(g){ln(u,u.return,g)}}}else if(t.tag===6){if(e===null){u=t;try{u.stateNode.nodeValue=a?"":u.memoizedProps}catch(g){ln(u,u.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;e===t&&(e=null),t=t.return}e===t&&(e=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=n.updateQueue,i!==null&&(e=i.retryQueue,e!==null&&(i.retryQueue=null,Lx(n,e))));break;case 19:Sa(t,n),Ma(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,Lx(n,i)));break;case 30:break;case 21:break;default:Sa(t,n),Ma(n)}}function Ma(n){var t=n.flags;if(t&2){try{for(var e,i=n.return;i!==null;){if(rU(i)){e=i;break}i=i.return}if(e==null)throw Error(Mt(160));switch(e.tag){case 27:var a=e.stateNode,s=Ux(n);A0(n,s,a);break;case 5:var r=e.stateNode;e.flags&32&&(lf(r,""),e.flags&=-33);var l=Ux(n);A0(n,l,r);break;case 3:case 4:var u=e.stateNode.containerInfo,f=Ux(n);B1(n,f,u);break;default:throw Error(Mt(161))}}catch(d){ln(n,n.return,d)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function dU(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var t=n;dU(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),n=n.sibling}}function lo(n,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lU(n,t.alternate,t),t=t.sibling}function Vl(n){for(n=n.child;n!==null;){var t=n;switch(t.tag){case 0:case 11:case 14:case 15:Fo(4,t,t.return),Vl(t);break;case 1:Bs(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount=="function"&&aU(t,t.return,e),Vl(t);break;case 27:fd(t.stateNode);case 26:case 5:Bs(t,t.return),Vl(t);break;case 22:t.memoizedState===null&&Vl(t);break;case 30:Vl(t);break;default:Vl(t)}n=n.sibling}}function vo(n,t,e){for(e=e&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,a=n,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:vo(a,s,e),Tp(4,s);break;case 1:if(vo(a,s,e),i=s,a=i.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(f){ln(i,i.return,f)}if(i=s,a=i.updateQueue,a!==null){var l=i.stateNode;try{var u=a.shared.hiddenCallbacks;if(u!==null)for(a.shared.hiddenCallbacks=null,a=0;a<u.length;a++)lN(u[a],l)}catch(f){ln(i,i.return,f)}}e&&r&64&&iU(s),od(s,s.return);break;case 27:oU(s);case 26:case 5:vo(a,s,e),e&&i===null&&r&4&&sU(s),od(s,s.return);break;case 12:vo(a,s,e);break;case 13:vo(a,s,e),e&&r&4&&fU(a,s);break;case 22:s.memoizedState===null&&vo(a,s,e),od(s,s.return);break;case 30:break;default:vo(a,s,e)}t=t.sibling}}function Nb(n,t){var e=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==e&&(n!=null&&n.refCount++,e!=null&&Sp(e))}function Ub(n,t){n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&Sp(n))}function Us(n,t,e,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)pU(n,t,e,i),t=t.sibling}function pU(n,t,e,i){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Us(n,t,e,i),a&2048&&Tp(9,t);break;case 1:Us(n,t,e,i);break;case 3:Us(n,t,e,i),a&2048&&(n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&Sp(n)));break;case 12:if(a&2048){Us(n,t,e,i),n=t.stateNode;try{var s=t.memoizedProps,r=s.id,l=s.onPostCommit;typeof l=="function"&&l(r,t.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(u){ln(t,t.return,u)}}else Us(n,t,e,i);break;case 13:Us(n,t,e,i);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,t.memoizedState!==null?s._visibility&2?Us(n,t,e,i):ld(n,t):s._visibility&2?Us(n,t,e,i):(s._visibility|=2,Eu(n,t,e,i,(t.subtreeFlags&10256)!==0)),a&2048&&Nb(r,t);break;case 24:Us(n,t,e,i),a&2048&&Ub(t.alternate,t);break;default:Us(n,t,e,i)}}function Eu(n,t,e,i,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=n,r=t,l=e,u=i,f=r.flags;switch(r.tag){case 0:case 11:case 15:Eu(s,r,l,u,a),Tp(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?Eu(s,r,l,u,a):ld(s,r):(d._visibility|=2,Eu(s,r,l,u,a)),a&&f&2048&&Nb(r.alternate,r);break;case 24:Eu(s,r,l,u,a),a&&f&2048&&Ub(r.alternate,r);break;default:Eu(s,r,l,u,a)}t=t.sibling}}function ld(n,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var e=n,i=t,a=i.flags;switch(i.tag){case 22:ld(e,i),a&2048&&Nb(i.alternate,i);break;case 24:ld(e,i),a&2048&&Ub(i.alternate,i);break;default:ld(e,i)}t=t.sibling}}var qh=8192;function Jc(n){if(n.subtreeFlags&qh)for(n=n.child;n!==null;)mU(n),n=n.sibling}function mU(n){switch(n.tag){case 26:Jc(n),n.flags&qh&&n.memoizedState!==null&&qH(vs,n.memoizedState,n.memoizedProps);break;case 5:Jc(n);break;case 3:case 4:var t=vs;vs=O0(n.stateNode.containerInfo),Jc(n),vs=t;break;case 22:n.memoizedState===null&&(t=n.alternate,t!==null&&t.memoizedState!==null?(t=qh,qh=16777216,Jc(n),qh=t):Jc(n));break;default:Jc(n)}}function gU(n){var t=n.alternate;if(t!==null&&(n=t.child,n!==null)){t.child=null;do t=n.sibling,n.sibling=null,n=t;while(n!==null)}}function wh(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];ai=i,yU(i,n)}gU(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vU(n),n=n.sibling}function vU(n){switch(n.tag){case 0:case 11:case 15:wh(n),n.flags&2048&&Fo(9,n,n.return);break;case 3:wh(n);break;case 12:wh(n);break;case 22:var t=n.stateNode;n.memoizedState!==null&&t._visibility&2&&(n.return===null||n.return.tag!==13)?(t._visibility&=-3,Zg(n)):wh(n);break;default:wh(n)}}function Zg(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];ai=i,yU(i,n)}gU(n)}for(n=n.child;n!==null;){switch(t=n,t.tag){case 0:case 11:case 15:Fo(8,t,t.return),Zg(t);break;case 22:e=t.stateNode,e._visibility&2&&(e._visibility&=-3,Zg(t));break;default:Zg(t)}n=n.sibling}}function yU(n,t){for(;ai!==null;){var e=ai;switch(e.tag){case 0:case 11:case 15:Fo(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&&e.memoizedState.cachePool!==null){var i=e.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Sp(e.memoizedState.cache)}if(i=e.child,i!==null)i.return=e,ai=i;else t:for(e=n;ai!==null;){i=ai;var a=i.sibling,s=i.return;if(cU(i),i===e){ai=null;break t}if(a!==null){a.return=s,ai=a;break t}ai=s}}}var lH={getCacheForType:function(n){var t=Di(Wn),e=t.data.get(n);return e===void 0&&(e=n(),t.data.set(n,e)),e}},cH=typeof WeakMap=="function"?WeakMap:Map,tn=0,dn=null,Pe=null,Ve=0,$e=0,Ta=null,Ro=!1,Lf=!1,Ob=!1,Br=0,On=0,Go=0,nc=0,Lb=0,Ja=0,df=0,cd=null,na=null,I1=!1,Pb=0,C0=1/0,w0=null,Po=null,mi=0,zo=null,pf=null,ef=0,V1=0,H1=null,_U=null,ud=0,F1=null;function Ra(){if(tn&2&&Ve!==0)return Ve&-Ve;if(ve.T!==null){var n=cf;return n!==0?n:Bb()}return DD()}function xU(){Ja===0&&(Ja=!(Ve&536870912)||Ye?AD():536870912);var n=ns.current;return n!==null&&(n.flags|=32),Ja}function Da(n,t,e){(n===dn&&($e===2||$e===9)||n.cancelPendingCommit!==null)&&(mf(n,0),Do(n,Ve,Ja,!1)),gp(n,e),(!(tn&2)||n!==dn)&&(n===dn&&(!(tn&2)&&(nc|=e),On===4&&Do(n,Ve,Ja,!1)),Js(n))}function SU(n,t,e){if(tn&6)throw Error(Mt(327));var i=!e&&(t&124)===0&&(t&n.expiredLanes)===0||mp(n,t),a=i?hH(n,t):Px(n,t,!0),s=i;do{if(a===0){Lf&&!i&&Do(n,t,0,!1);break}else{if(e=n.current.alternate,s&&!uH(e)){a=Px(n,t,!1),s=!1;continue}if(a===2){if(s=t,n.errorRecoveryDisabledLanes&s)var r=0;else r=n.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;t:{var l=n;a=cd;var u=l.current.memoizedState.isDehydrated;if(u&&(mf(l,r).flags|=256),r=Px(l,r,!1),r!==2){if(Ob&&!u){l.errorRecoveryDisabledLanes|=s,nc|=s,a=4;break t}s=na,na=a,s!==null&&(na===null?na=s:na.push.apply(na,s))}a=r}if(s=!1,a!==2)continue}}if(a===1){mf(n,0),Do(n,t,0,!0);break}t:{switch(i=n,s=a,s){case 0:case 1:throw Error(Mt(345));case 4:if((t&4194048)!==t)break;case 6:Do(i,t,Ja,!Ro);break t;case 2:na=null;break;case 3:case 5:break;default:throw Error(Mt(329))}if((t&62914560)===t&&(a=Pb+300-Fs(),10<a)){if(Do(i,t,Ja,!Ro),Vv(i,0,!0)!==0)break t;i.timeoutHandle=HU(TC.bind(null,i,e,na,w0,I1,t,Ja,nc,df,Ro,s,2,-0,0),a);break t}TC(i,e,na,w0,I1,t,Ja,nc,df,Ro,s,0,-0,0)}}break}while(!0);Js(n)}function TC(n,t,e,i,a,s,r,l,u,f,d,p,m,g){if(n.timeoutHandle=-1,p=t.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(Bd={stylesheets:null,count:0,unsuspend:jH},mU(t),p=YH(),p!==null)){n.cancelPendingCommit=p(CC.bind(null,n,t,s,e,i,a,r,l,u,d,1,m,g)),Do(n,s,r,!f);return}CC(n,t,s,e,i,a,r,l,u)}function uH(n){for(var t=n;;){var e=t.tag;if((e===0||e===11||e===15)&&t.flags&16384&&(e=t.updateQueue,e!==null&&(e=e.stores,e!==null)))for(var i=0;i<e.length;i++){var a=e[i],s=a.getSnapshot;a=a.value;try{if(!Ua(s(),a))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Do(n,t,e,i){t&=~Lb,t&=~nc,n.suspendedLanes|=t,n.pingedLanes&=~t,i&&(n.warmLanes|=t),i=n.expirationTimes;for(var a=t;0<a;){var s=31-wa(a),r=1<<s;i[s]=-1,a&=~r}e!==0&&wD(n,e,t)}function Zv(){return tn&6?!0:(Ap(0),!1)}function zb(){if(Pe!==null){if($e===0)var n=Pe.return;else n=Pe,wr=xc=null,Mb(n),tf=null,Ld=0,n=Pe;for(;n!==null;)nU(n.alternate,n),n=n.return;Pe=null}}function mf(n,t){var e=n.timeoutHandle;e!==-1&&(n.timeoutHandle=-1,wH(e)),e=n.cancelPendingCommit,e!==null&&(n.cancelPendingCommit=null,e()),zb(),dn=n,Pe=e=Dr(n.current,null),Ve=t,$e=0,Ta=null,Ro=!1,Lf=mp(n,t),Ob=!1,df=Ja=Lb=nc=Go=On=0,na=cd=null,I1=!1,t&8&&(t|=t&32);var i=n.entangledLanes;if(i!==0)for(n=n.entanglements,i&=t;0<i;){var a=31-wa(i),s=1<<a;t|=n[a],i&=~s}return Br=t,Xv(),e}function MU(n,t){De=null,ve.H=S0,t===Mp||t===jv?(t=iC(),$e=3):t===rN?(t=iC(),$e=4):$e=t===KN?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ta=t,Pe===null&&(On=1,E0(n,Qa(t,n.current)))}function bU(){var n=ve.H;return ve.H=S0,n===null?S0:n}function EU(){var n=ve.A;return ve.A=lH,n}function G1(){On=4,Ro||(Ve&4194048)!==Ve&&ns.current!==null||(Lf=!0),!(Go&134217727)&&!(nc&134217727)||dn===null||Do(dn,Ve,Ja,!1)}function Px(n,t,e){var i=tn;tn|=2;var a=bU(),s=EU();(dn!==n||Ve!==t)&&(w0=null,mf(n,t)),t=!1;var r=On;t:do try{if($e!==0&&Pe!==null){var l=Pe,u=Ta;switch($e){case 8:zb(),r=6;break t;case 3:case 2:case 9:case 6:ns.current===null&&(t=!0);var f=$e;if($e=0,Ta=null,Bu(n,l,u,f),e&&Lf){r=0;break t}break;default:f=$e,$e=0,Ta=null,Bu(n,l,u,f)}}fH(),r=On;break}catch(d){MU(n,d)}while(!0);return t&&n.shellSuspendCounter++,wr=xc=null,tn=i,ve.H=a,ve.A=s,Pe===null&&(dn=null,Ve=0,Xv()),r}function fH(){for(;Pe!==null;)TU(Pe)}function hH(n,t){var e=tn;tn|=2;var i=bU(),a=EU();dn!==n||Ve!==t?(w0=null,C0=Fs()+500,mf(n,t)):Lf=mp(n,t);t:do try{if($e!==0&&Pe!==null){t=Pe;var s=Ta;e:switch($e){case 1:$e=0,Ta=null,Bu(n,t,s,1);break;case 2:case 9:if(nC(s)){$e=0,Ta=null,AC(t);break}t=function(){$e!==2&&$e!==9||dn!==n||($e=7),Js(n)},s.then(t,t);break t;case 3:$e=7;break t;case 4:$e=5;break t;case 7:nC(s)?($e=0,Ta=null,AC(t)):($e=0,Ta=null,Bu(n,t,s,7));break;case 5:var r=null;switch(Pe.tag){case 26:r=Pe.memoizedState;case 5:case 27:var l=Pe;if(!r||kU(r)){$e=0,Ta=null;var u=l.sibling;if(u!==null)Pe=u;else{var f=l.return;f!==null?(Pe=f,Kv(f)):Pe=null}break e}}$e=0,Ta=null,Bu(n,t,s,5);break;case 6:$e=0,Ta=null,Bu(n,t,s,6);break;case 8:zb(),On=6;break t;default:throw Error(Mt(462))}}dH();break}catch(d){MU(n,d)}while(!0);return wr=xc=null,ve.H=i,ve.A=a,tn=e,Pe!==null?0:(dn=null,Ve=0,Xv(),On)}function dH(){for(;Pe!==null&&!PI();)TU(Pe)}function TU(n){var t=eU(n.alternate,n,Br);n.memoizedProps=n.pendingProps,t===null?Kv(n):Pe=t}function AC(n){var t=n,e=t.alternate;switch(t.tag){case 15:case 0:t=_C(e,t,t.pendingProps,t.type,void 0,Ve);break;case 11:t=_C(e,t,t.pendingProps,t.type.render,t.ref,Ve);break;case 5:Mb(t);default:nU(e,t),t=Pe=nN(t,Br),t=eU(e,t,Br)}n.memoizedProps=n.pendingProps,t===null?Kv(n):Pe=t}function Bu(n,t,e,i){wr=xc=null,Mb(t),tf=null,Ld=0;var a=t.return;try{if(nH(n,a,t,e,Ve)){On=1,E0(n,Qa(e,n.current)),Pe=null;return}}catch(s){if(a!==null)throw Pe=a,s;On=1,E0(n,Qa(e,n.current)),Pe=null;return}t.flags&32768?(Ye||i===1?n=!0:Lf||Ve&536870912?n=!1:(Ro=n=!0,(i===2||i===9||i===3||i===6)&&(i=ns.current,i!==null&&i.tag===13&&(i.flags|=16384))),AU(t,n)):Kv(t)}function Kv(n){var t=n;do{if(t.flags&32768){AU(t,Ro);return}n=t.return;var e=aH(t.alternate,t,Br);if(e!==null){Pe=e;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=n}while(t!==null);On===0&&(On=5)}function AU(n,t){do{var e=sH(n.alternate,n);if(e!==null){e.flags&=32767,Pe=e;return}if(e=n.return,e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=e}while(n!==null);On=6,Pe=null}function CC(n,t,e,i,a,s,r,l,u){n.cancelPendingCommit=null;do Qv();while(mi!==0);if(tn&6)throw Error(Mt(327));if(t!==null){if(t===n.current)throw Error(Mt(177));if(s=t.lanes|t.childLanes,s|=cb,jI(n,e,s,r,l,u),n===dn&&(Pe=dn=null,Ve=0),pf=t,zo=n,ef=e,V1=s,H1=a,_U=i,t.subtreeFlags&10256||t.flags&10256?(n.callbackNode=null,n.callbackPriority=0,vH(f0,function(){return NU(),null})):(n.callbackNode=null,n.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=ve.T,ve.T=null,a=We.p,We.p=2,r=tn,tn|=4;try{rH(n,t,e)}finally{tn=r,We.p=a,ve.T=i}}mi=1,CU(),wU(),RU()}}function CU(){if(mi===1){mi=0;var n=zo,t=pf,e=(t.flags&13878)!==0;if(t.subtreeFlags&13878||e){e=ve.T,ve.T=null;var i=We.p;We.p=2;var a=tn;tn|=4;try{hU(t,n);var s=q1,r=WD(n.containerInfo),l=s.focusedElem,u=s.selectionRange;if(r!==l&&l&&l.ownerDocument&&YD(l.ownerDocument.documentElement,l)){if(u!==null&&lb(l)){var f=u.start,d=u.end;if(d===void 0&&(d=f),"selectionStart"in l)l.selectionStart=f,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var g=m.getSelection(),_=l.textContent.length,E=Math.min(u.start,_),M=u.end===void 0?E:Math.min(u.end,_);!g.extend&&E>M&&(r=M,M=E,E=r);var v=W2(l,E),x=W2(l,M);if(v&&x&&(g.rangeCount!==1||g.anchorNode!==v.node||g.anchorOffset!==v.offset||g.focusNode!==x.node||g.focusOffset!==x.offset)){var b=p.createRange();b.setStart(v.node,v.offset),g.removeAllRanges(),E>M?(g.addRange(b),g.extend(x.node,x.offset)):(b.setEnd(x.node,x.offset),g.addRange(b))}}}}for(p=[],g=l;g=g.parentNode;)g.nodeType===1&&p.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var T=p[l];T.element.scrollLeft=T.left,T.element.scrollTop=T.top}}z0=!!j1,q1=j1=null}finally{tn=a,We.p=i,ve.T=e}}n.current=t,mi=2}}function wU(){if(mi===2){mi=0;var n=zo,t=pf,e=(t.flags&8772)!==0;if(t.subtreeFlags&8772||e){e=ve.T,ve.T=null;var i=We.p;We.p=2;var a=tn;tn|=4;try{lU(n,t.alternate,t)}finally{tn=a,We.p=i,ve.T=e}}mi=3}}function RU(){if(mi===4||mi===3){mi=0,zI();var n=zo,t=pf,e=ef,i=_U;t.subtreeFlags&10256||t.flags&10256?mi=5:(mi=0,pf=zo=null,DU(n,n.pendingLanes));var a=n.pendingLanes;if(a===0&&(Po=null),eb(e),t=t.stateNode,Ca&&typeof Ca.onCommitFiberRoot=="function")try{Ca.onCommitFiberRoot(pp,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=ve.T,a=We.p,We.p=2,ve.T=null;try{for(var s=n.onRecoverableError,r=0;r<i.length;r++){var l=i[r];s(l.value,{componentStack:l.stack})}}finally{ve.T=t,We.p=a}}ef&3&&Qv(),Js(n),a=n.pendingLanes,e&4194090&&a&42?n===F1?ud++:(ud=0,F1=n):ud=0,Ap(0)}}function DU(n,t){(n.pooledCacheLanes&=t)===0&&(t=n.pooledCache,t!=null&&(n.pooledCache=null,Sp(t)))}function Qv(n){return CU(),wU(),RU(),NU()}function NU(){if(mi!==5)return!1;var n=zo,t=V1;V1=0;var e=eb(ef),i=ve.T,a=We.p;try{We.p=32>e?32:e,ve.T=null,e=H1,H1=null;var s=zo,r=ef;if(mi=0,pf=zo=null,ef=0,tn&6)throw Error(Mt(331));var l=tn;if(tn|=4,vU(s.current),pU(s,s.current,r,e),tn=l,Ap(0,!1),Ca&&typeof Ca.onPostCommitFiberRoot=="function")try{Ca.onPostCommitFiberRoot(pp,s)}catch{}return!0}finally{We.p=a,ve.T=i,DU(n,t)}}function wC(n,t,e){t=Qa(e,t),t=L1(n.stateNode,t,2),n=Lo(n,t,2),n!==null&&(gp(n,2),Js(n))}function ln(n,t,e){if(n.tag===3)wC(n,n,e);else for(;t!==null;){if(t.tag===3){wC(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Po===null||!Po.has(i))){n=Qa(e,n),e=WN(2),i=Lo(t,e,2),i!==null&&(ZN(e,i,t,n),gp(i,2),Js(i));break}}t=t.return}}function zx(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new cH;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(e)||(Ob=!0,a.add(e),n=pH.bind(null,n,t,e),t.then(n,n))}function pH(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),n.pingedLanes|=n.suspendedLanes&e,n.warmLanes&=~e,dn===n&&(Ve&e)===e&&(On===4||On===3&&(Ve&62914560)===Ve&&300>Fs()-Pb?!(tn&2)&&mf(n,0):Lb|=e,df===Ve&&(df=0)),Js(n)}function UU(n,t){t===0&&(t=CD()),n=Of(n,t),n!==null&&(gp(n,t),Js(n))}function mH(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),UU(n,e)}function gH(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,a=n.memoizedState;a!==null&&(e=a.retryLane);break;case 19:i=n.stateNode;break;case 22:i=n.stateNode._retryCache;break;default:throw Error(Mt(314))}i!==null&&i.delete(t),UU(n,e)}function vH(n,t){return $M(n,t)}var R0=null,Tu=null,X1=!1,D0=!1,Bx=!1,ic=0;function Js(n){n!==Tu&&n.next===null&&(Tu===null?R0=Tu=n:Tu=Tu.next=n),D0=!0,X1||(X1=!0,_H())}function Ap(n,t){if(!Bx&&D0){Bx=!0;do for(var e=!1,i=R0;i!==null;){if(n!==0){var a=i.pendingLanes;if(a===0)var s=0;else{var r=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-wa(42|n)+1)-1,s&=a&~(r&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(e=!0,RC(i,s))}else s=Ve,s=Vv(i,i===dn?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||mp(i,s)||(e=!0,RC(i,s));i=i.next}while(e);Bx=!1}}function yH(){OU()}function OU(){D0=X1=!1;var n=0;ic!==0&&(CH()&&(n=ic),ic=0);for(var t=Fs(),e=null,i=R0;i!==null;){var a=i.next,s=LU(i,t);s===0?(i.next=null,e===null?R0=a:e.next=a,a===null&&(Tu=e)):(e=i,(n!==0||s&3)&&(D0=!0)),i=a}Ap(n)}function LU(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,a=n.expirationTimes,s=n.pendingLanes&-62914561;0<s;){var r=31-wa(s),l=1<<r,u=a[r];u===-1?(!(l&e)||l&i)&&(a[r]=kI(l,t)):u<=t&&(n.expiredLanes|=l),s&=~l}if(t=dn,e=Ve,e=Vv(n,n===t?e:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i=n.callbackNode,e===0||n===t&&($e===2||$e===9)||n.cancelPendingCommit!==null)return i!==null&&i!==null&&cx(i),n.callbackNode=null,n.callbackPriority=0;if(!(e&3)||mp(n,e)){if(t=e&-e,t===n.callbackPriority)return t;switch(i!==null&&cx(i),eb(e)){case 2:case 8:e=ED;break;case 32:e=f0;break;case 268435456:e=TD;break;default:e=f0}return i=PU.bind(null,n),e=$M(e,i),n.callbackPriority=t,n.callbackNode=e,t}return i!==null&&i!==null&&cx(i),n.callbackPriority=2,n.callbackNode=null,2}function PU(n,t){if(mi!==0&&mi!==5)return n.callbackNode=null,n.callbackPriority=0,null;var e=n.callbackNode;if(Qv()&&n.callbackNode!==e)return null;var i=Ve;return i=Vv(n,n===dn?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i===0?null:(SU(n,i,t),LU(n,Fs()),n.callbackNode!=null&&n.callbackNode===e?PU.bind(null,n):null)}function RC(n,t){if(Qv())return null;SU(n,t,!0)}function _H(){RH(function(){tn&6?$M(bD,yH):OU()})}function Bb(){return ic===0&&(ic=AD()),ic}function DC(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Fg(""+n)}function NC(n,t){var e=t.ownerDocument.createElement("input");return e.name=t.name,e.value=t.value,n.id&&e.setAttribute("form",n.id),t.parentNode.insertBefore(e,t),n=new FormData(n),e.parentNode.removeChild(e),n}function xH(n,t,e,i,a){if(t==="submit"&&e&&e.stateNode===a){var s=DC((a[la]||null).action),r=i.submitter;r&&(t=(t=r[la]||null)?DC(t.formAction):r.getAttribute("formAction"),t!==null&&(s=t,r=null));var l=new Hv("action","action",null,i,a);n.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ic!==0){var u=r?NC(a,r):new FormData(a);U1(e,{pending:!0,data:u,method:a.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=r?NC(a,r):new FormData(a),U1(e,{pending:!0,data:u,method:a.method,action:s},s,u))},currentTarget:a}]})}}for(var Ix=0;Ix<x1.length;Ix++){var Vx=x1[Ix],SH=Vx.toLowerCase(),MH=Vx[0].toUpperCase()+Vx.slice(1);bs(SH,"on"+MH)}bs(KD,"onAnimationEnd");bs(QD,"onAnimationIteration");bs(JD,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(VV,"onTransitionRun");bs(HV,"onTransitionStart");bs(FV,"onTransitionCancel");bs($D,"onTransitionEnd");of("onMouseEnter",["mouseout","mouseover"]);of("onMouseLeave",["mouseout","mouseover"]);of("onPointerEnter",["pointerout","pointerover"]);of("onPointerLeave",["pointerout","pointerover"]);vc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vc("onBeforeInput",["compositionend","keypress","textInput","paste"]);vc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pd));function zU(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],a=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var r=i.length-1;0<=r;r--){var l=i[r],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==s&&a.isPropagationStopped())break t;s=l,a.currentTarget=f;try{s(a)}catch(d){b0(d)}a.currentTarget=null,s=u}else for(r=0;r<i.length;r++){if(l=i[r],u=l.instance,f=l.currentTarget,l=l.listener,u!==s&&a.isPropagationStopped())break t;s=l,a.currentTarget=f;try{s(a)}catch(d){b0(d)}a.currentTarget=null,s=u}}}}function Le(n,t){var e=t[d1];e===void 0&&(e=t[d1]=new Set);var i=n+"__bubble";e.has(i)||(BU(t,n,2,!1),e.add(i))}function Hx(n,t,e){var i=0;t&&(i|=4),BU(e,n,i,t)}var Im="_reactListening"+Math.random().toString(36).slice(2);function Ib(n){if(!n[Im]){n[Im]=!0,ND.forEach(function(e){e!=="selectionchange"&&(bH.has(e)||Hx(e,!1,n),Hx(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Im]||(t[Im]=!0,Hx("selectionchange",!1,t))}}function BU(n,t,e,i){switch(ZU(t)){case 2:var a=KH;break;case 8:a=QH;break;default:a=Gb}e=a.bind(null,t,e,n),a=void 0,!v1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?n.addEventListener(t,e,{capture:!0,passive:a}):n.addEventListener(t,e,!0):a!==void 0?n.addEventListener(t,e,{passive:a}):n.addEventListener(t,e,!1)}function Fx(n,t,e,i,a){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var l=i.stateNode.containerInfo;if(l===a)break;if(r===4)for(r=i.return;r!==null;){var u=r.tag;if((u===3||u===4)&&r.stateNode.containerInfo===a)return;r=r.return}for(;l!==null;){if(r=wu(l),r===null)return;if(u=r.tag,u===5||u===6||u===26||u===27){i=s=r;continue t}l=l.parentNode}}i=i.return}VD(function(){var f=s,d=ab(e),p=[];t:{var m=tN.get(n);if(m!==void 0){var g=Hv,_=n;switch(n){case"keypress":if(Xg(e)===0)break t;case"keydown":case"keyup":g=vV;break;case"focusin":_="focus",g=vx;break;case"focusout":_="blur",g=vx;break;case"beforeblur":case"afterblur":g=vx;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=I2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=sV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=xV;break;case KD:case QD:case JD:g=lV;break;case $D:g=MV;break;case"scroll":case"scrollend":g=iV;break;case"wheel":g=EV;break;case"copy":case"cut":case"paste":g=uV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=H2;break;case"toggle":case"beforetoggle":g=AV}var E=(t&4)!==0,M=!E&&(n==="scroll"||n==="scrollend"),v=E?m!==null?m+"Capture":null:m;E=[];for(var x=f,b;x!==null;){var T=x;if(b=T.stateNode,T=T.tag,T!==5&&T!==26&&T!==27||b===null||v===null||(T=Rd(x,v),T!=null&&E.push(zd(x,T,b))),M)break;x=x.return}0<E.length&&(m=new g(m,_,null,e,d),p.push({event:m,listeners:E}))}}if(!(t&7)){t:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&e!==g1&&(_=e.relatedTarget||e.fromElement)&&(wu(_)||_[Nf]))break t;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(_=e.relatedTarget||e.toElement,g=f,_=_?wu(_):null,_!==null&&(M=dp(_),E=_.tag,_!==M||E!==5&&E!==27&&E!==6)&&(_=null)):(g=null,_=f),g!==_)){if(E=I2,T="onMouseLeave",v="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(E=H2,T="onPointerLeave",v="onPointerEnter",x="pointer"),M=g==null?m:jh(g),b=_==null?m:jh(_),m=new E(T,x+"leave",g,e,d),m.target=M,m.relatedTarget=b,T=null,wu(d)===f&&(E=new E(v,x+"enter",_,e,d),E.target=b,E.relatedTarget=M,T=E),M=T,g&&_)e:{for(E=g,v=_,x=0,b=E;b;b=$c(b))x++;for(b=0,T=v;T;T=$c(T))b++;for(;0<x-b;)E=$c(E),x--;for(;0<b-x;)v=$c(v),b--;for(;x--;){if(E===v||v!==null&&E===v.alternate)break e;E=$c(E),v=$c(v)}E=null}else E=null;g!==null&&UC(p,m,g,E,!1),_!==null&&M!==null&&UC(p,M,_,E,!0)}}t:{if(m=f?jh(f):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var w=k2;else if(X2(m))if(jD)w=zV;else{w=LV;var R=OV}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?f&&ib(f.elementType)&&(w=k2):w=PV;if(w&&(w=w(n,f))){kD(p,w,e,d);break t}R&&R(n,m,f),n==="focusout"&&f&&m.type==="number"&&f.memoizedProps.value!=null&&m1(m,"number",m.value)}switch(R=f?jh(f):window,n){case"focusin":(X2(R)||R.contentEditable==="true")&&(Nu=R,y1=f,td=null);break;case"focusout":td=y1=Nu=null;break;case"mousedown":_1=!0;break;case"contextmenu":case"mouseup":case"dragend":_1=!1,Z2(p,e,d);break;case"selectionchange":if(IV)break;case"keydown":case"keyup":Z2(p,e,d)}var N;if(ob)t:{switch(n){case"compositionstart":var U="onCompositionStart";break t;case"compositionend":U="onCompositionEnd";break t;case"compositionupdate":U="onCompositionUpdate";break t}U=void 0}else Du?GD(n,e)&&(U="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(U="onCompositionStart");U&&(FD&&e.locale!=="ko"&&(Du||U!=="onCompositionStart"?U==="onCompositionEnd"&&Du&&(N=HD()):(wo=d,sb="value"in wo?wo.value:wo.textContent,Du=!0)),R=N0(f,U),0<R.length&&(U=new V2(U,n,null,e,d),p.push({event:U,listeners:R}),N?U.data=N:(N=XD(e),N!==null&&(U.data=N)))),(N=wV?RV(n,e):DV(n,e))&&(U=N0(f,"onBeforeInput"),0<U.length&&(R=new V2("onBeforeInput","beforeinput",null,e,d),p.push({event:R,listeners:U}),R.data=N)),xH(p,n,f,e,d)}zU(p,t)})}function zd(n,t,e){return{instance:n,listener:t,currentTarget:e}}function N0(n,t){for(var e=t+"Capture",i=[];n!==null;){var a=n,s=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||s===null||(a=Rd(n,e),a!=null&&i.unshift(zd(n,a,s)),a=Rd(n,t),a!=null&&i.push(zd(n,a,s))),n.tag===3)return i;n=n.return}return[]}function $c(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function UC(n,t,e,i,a){for(var s=t._reactName,r=[];e!==null&&e!==i;){var l=e,u=l.alternate,f=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||f===null||(u=f,a?(f=Rd(e,s),f!=null&&r.unshift(zd(e,f,u))):a||(f=Rd(e,s),f!=null&&r.push(zd(e,f,u)))),e=e.return}r.length!==0&&n.push({event:t,listeners:r})}var EH=/\r\n?/g,TH=/\u0000|\uFFFD/g;function OC(n){return(typeof n=="string"?n:""+n).replace(EH,`
`).replace(TH,"")}function IU(n,t){return t=OC(t),OC(n)===t}function Jv(){}function an(n,t,e,i,a,s){switch(e){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||lf(n,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&lf(n,""+i);break;case"className":Nm(n,"class",i);break;case"tabIndex":Nm(n,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Nm(n,e,i);break;case"style":ID(n,i,s);break;case"data":if(t!=="object"){Nm(n,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||e!=="href")){n.removeAttribute(e);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=Fg(""+i),n.setAttribute(e,i);break;case"action":case"formAction":if(typeof i=="function"){n.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(e==="formAction"?(t!=="input"&&an(n,t,"name",a.name,a,null),an(n,t,"formEncType",a.formEncType,a,null),an(n,t,"formMethod",a.formMethod,a,null),an(n,t,"formTarget",a.formTarget,a,null)):(an(n,t,"encType",a.encType,a,null),an(n,t,"method",a.method,a,null),an(n,t,"target",a.target,a,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=Fg(""+i),n.setAttribute(e,i);break;case"onClick":i!=null&&(n.onclick=Jv);break;case"onScroll":i!=null&&Le("scroll",n);break;case"onScrollEnd":i!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(Mt(61));if(e=i.__html,e!=null){if(a.children!=null)throw Error(Mt(60));n.innerHTML=e}}break;case"multiple":n.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":n.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){n.removeAttribute("xlink:href");break}e=Fg(""+i),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""+i):n.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""):n.removeAttribute(e);break;case"capture":case"download":i===!0?n.setAttribute(e,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,i):n.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?n.setAttribute(e,i):n.removeAttribute(e);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?n.removeAttribute(e):n.setAttribute(e,i);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Hg(n,"popover",i);break;case"xlinkActuate":hr(n,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":hr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":hr(n,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":hr(n,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":hr(n,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":hr(n,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":hr(n,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":hr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":hr(n,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Hg(n,"is",i);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=eV.get(e)||e,Hg(n,e,i))}}function k1(n,t,e,i,a,s){switch(e){case"style":ID(n,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(Mt(61));if(e=i.__html,e!=null){if(a.children!=null)throw Error(Mt(60));n.innerHTML=e}}break;case"children":typeof i=="string"?lf(n,i):(typeof i=="number"||typeof i=="bigint")&&lf(n,""+i);break;case"onScroll":i!=null&&Le("scroll",n);break;case"onScrollEnd":i!=null&&Le("scrollend",n);break;case"onClick":i!=null&&(n.onclick=Jv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!UD.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(a=e.endsWith("Capture"),t=e.slice(2,a?e.length-7:void 0),s=n[la]||null,s=s!=null?s[e]:null,typeof s=="function"&&n.removeEventListener(t,s,a),typeof i=="function")){typeof s!="function"&&s!==null&&(e in n?n[e]=null:n.hasAttribute(e)&&n.removeAttribute(e)),n.addEventListener(t,i,a);break t}e in n?n[e]=i:i===!0?n.setAttribute(e,""):Hg(n,e,i)}}}function gi(n,t,e){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var i=!1,a=!1,s;for(s in e)if(e.hasOwnProperty(s)){var r=e[s];if(r!=null)switch(s){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Mt(137,t));default:an(n,t,s,r,e,null)}}a&&an(n,t,"srcSet",e.srcSet,e,null),i&&an(n,t,"src",e.src,e,null);return;case"input":Le("invalid",n);var l=s=r=a=null,u=null,f=null;for(i in e)if(e.hasOwnProperty(i)){var d=e[i];if(d!=null)switch(i){case"name":a=d;break;case"type":r=d;break;case"checked":u=d;break;case"defaultChecked":f=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Mt(137,t));break;default:an(n,t,i,d,e,null)}}PD(n,s,l,u,f,r,a,!1),h0(n);return;case"select":Le("invalid",n),i=r=s=null;for(a in e)if(e.hasOwnProperty(a)&&(l=e[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":r=l;break;case"multiple":i=l;default:an(n,t,a,l,e,null)}t=s,e=r,n.multiple=!!i,t!=null?Zu(n,!!i,t,!1):e!=null&&Zu(n,!!i,e,!0);return;case"textarea":Le("invalid",n),s=a=i=null;for(r in e)if(e.hasOwnProperty(r)&&(l=e[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":a=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Mt(91));break;default:an(n,t,r,l,e,null)}BD(n,i,a,s),h0(n);return;case"option":for(u in e)if(e.hasOwnProperty(u)&&(i=e[u],i!=null))switch(u){case"selected":n.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:an(n,t,u,i,e,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(i=0;i<Pd.length;i++)Le(Pd[i],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in e)if(e.hasOwnProperty(f)&&(i=e[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Mt(137,t));default:an(n,t,f,i,e,null)}return;default:if(ib(t)){for(d in e)e.hasOwnProperty(d)&&(i=e[d],i!==void 0&&k1(n,t,d,i,e,void 0));return}}for(l in e)e.hasOwnProperty(l)&&(i=e[l],i!=null&&an(n,t,l,i,e,null))}function AH(n,t,e,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,r=null,l=null,u=null,f=null,d=null;for(g in e){var p=e[g];if(e.hasOwnProperty(g)&&p!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(g)||an(n,t,g,null,i,p)}}for(var m in i){var g=i[m];if(p=e[m],i.hasOwnProperty(m)&&(g!=null||p!=null))switch(m){case"type":s=g;break;case"name":a=g;break;case"checked":f=g;break;case"defaultChecked":d=g;break;case"value":r=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(Mt(137,t));break;default:g!==p&&an(n,t,m,g,i,p)}}p1(n,r,l,u,f,d,s,a);return;case"select":g=r=l=m=null;for(s in e)if(u=e[s],e.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":g=u;default:i.hasOwnProperty(s)||an(n,t,s,null,i,u)}for(a in i)if(s=i[a],u=e[a],i.hasOwnProperty(a)&&(s!=null||u!=null))switch(a){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":r=s;default:s!==u&&an(n,t,a,s,i,u)}t=l,e=r,i=g,m!=null?Zu(n,!!e,m,!1):!!i!=!!e&&(t!=null?Zu(n,!!e,t,!0):Zu(n,!!e,e?[]:"",!1));return;case"textarea":g=m=null;for(l in e)if(a=e[l],e.hasOwnProperty(l)&&a!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:an(n,t,l,null,i,a)}for(r in i)if(a=i[r],s=e[r],i.hasOwnProperty(r)&&(a!=null||s!=null))switch(r){case"value":m=a;break;case"defaultValue":g=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(Mt(91));break;default:a!==s&&an(n,t,r,a,i,s)}zD(n,m,g);return;case"option":for(var _ in e)if(m=e[_],e.hasOwnProperty(_)&&m!=null&&!i.hasOwnProperty(_))switch(_){case"selected":n.selected=!1;break;default:an(n,t,_,null,i,m)}for(u in i)if(m=i[u],g=e[u],i.hasOwnProperty(u)&&m!==g&&(m!=null||g!=null))switch(u){case"selected":n.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:an(n,t,u,m,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var E in e)m=e[E],e.hasOwnProperty(E)&&m!=null&&!i.hasOwnProperty(E)&&an(n,t,E,null,i,m);for(f in i)if(m=i[f],g=e[f],i.hasOwnProperty(f)&&m!==g&&(m!=null||g!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Mt(137,t));break;default:an(n,t,f,m,i,g)}return;default:if(ib(t)){for(var M in e)m=e[M],e.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&k1(n,t,M,void 0,i,m);for(d in i)m=i[d],g=e[d],!i.hasOwnProperty(d)||m===g||m===void 0&&g===void 0||k1(n,t,d,m,i,g);return}}for(var v in e)m=e[v],e.hasOwnProperty(v)&&m!=null&&!i.hasOwnProperty(v)&&an(n,t,v,null,i,m);for(p in i)m=i[p],g=e[p],!i.hasOwnProperty(p)||m===g||m==null&&g==null||an(n,t,p,m,i,g)}var j1=null,q1=null;function U0(n){return n.nodeType===9?n:n.ownerDocument}function LC(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VU(n,t){if(n===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&t==="foreignObject"?0:n}function Y1(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gx=null;function CH(){var n=window.event;return n&&n.type==="popstate"?n===Gx?!1:(Gx=n,!0):(Gx=null,!1)}var HU=typeof setTimeout=="function"?setTimeout:void 0,wH=typeof clearTimeout=="function"?clearTimeout:void 0,PC=typeof Promise=="function"?Promise:void 0,RH=typeof queueMicrotask=="function"?queueMicrotask:typeof PC<"u"?function(n){return PC.resolve(null).then(n).catch(DH)}:HU;function DH(n){setTimeout(function(){throw n})}function Zo(n){return n==="head"}function zC(n,t){var e=t,i=0,a=0;do{var s=e.nextSibling;if(n.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(0<i&&8>i){e=i;var r=n.ownerDocument;if(e&1&&fd(r.documentElement),e&2&&fd(r.body),e&4)for(e=r.head,fd(e),r=e.firstChild;r;){var l=r.nextSibling,u=r.nodeName;r[vp]||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&r.rel.toLowerCase()==="stylesheet"||e.removeChild(r),r=l}}if(a===0){n.removeChild(s),Fd(t);return}a--}else e==="$"||e==="$?"||e==="$!"?a++:i=e.charCodeAt(0)-48;else i=0;e=s}while(e);Fd(t)}function W1(n){var t=n.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":W1(e),nb(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}n.removeChild(e)}}function NH(n,t,e,i){for(;n.nodeType===1;){var a=e;if(n.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(i){if(!n[vp])switch(t){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(s=n.getAttribute("rel"),s==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(s!==a.rel||n.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||n.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||n.getAttribute("title")!==(a.title==null?null:a.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(s=n.getAttribute("src"),(s!==(a.src==null?null:a.src)||n.getAttribute("type")!==(a.type==null?null:a.type)||n.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&s&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(t==="input"&&n.type==="hidden"){var s=a.name==null?null:""+a.name;if(a.type==="hidden"&&n.getAttribute("name")===s)return n}else return n;if(n=Ss(n.nextSibling),n===null)break}return null}function UH(n,t,e){if(t==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!e||(n=Ss(n.nextSibling),n===null))return null;return n}function Z1(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function OH(n,t){var e=n.ownerDocument;if(n.data!=="$?"||e.readyState==="complete")t();else{var i=function(){t(),e.removeEventListener("DOMContentLoaded",i)};e.addEventListener("DOMContentLoaded",i),n._reactRetry=i}}function Ss(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return n}var K1=null;function BC(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}function FU(n,t,e){switch(t=U0(e),n){case"html":if(n=t.documentElement,!n)throw Error(Mt(452));return n;case"head":if(n=t.head,!n)throw Error(Mt(453));return n;case"body":if(n=t.body,!n)throw Error(Mt(454));return n;default:throw Error(Mt(451))}}function fd(n){for(var t=n.attributes;t.length;)n.removeAttributeNode(t[0]);nb(n)}var is=new Map,IC=new Set;function O0(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var kr=We.d;We.d={f:LH,r:PH,D:zH,C:BH,L:IH,m:VH,X:FH,S:HH,M:GH};function LH(){var n=kr.f(),t=Zv();return n||t}function PH(n){var t=Uf(n);t!==null&&t.tag===5&&t.type==="form"?LN(t):kr.r(n)}var Pf=typeof document>"u"?null:document;function GU(n,t,e){var i=Pf;if(i&&typeof t=="string"&&t){var a=Ka(t);a='link[rel="'+n+'"][href="'+a+'"]',typeof e=="string"&&(a+='[crossorigin="'+e+'"]'),IC.has(a)||(IC.add(a),n={rel:n,crossOrigin:e,href:t},i.querySelector(a)===null&&(t=i.createElement("link"),gi(t,"link",n),si(t),i.head.appendChild(t)))}}function zH(n){kr.D(n),GU("dns-prefetch",n,null)}function BH(n,t){kr.C(n,t),GU("preconnect",n,t)}function IH(n,t,e){kr.L(n,t,e);var i=Pf;if(i&&n&&t){var a='link[rel="preload"][as="'+Ka(t)+'"]';t==="image"&&e&&e.imageSrcSet?(a+='[imagesrcset="'+Ka(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(a+='[imagesizes="'+Ka(e.imageSizes)+'"]')):a+='[href="'+Ka(n)+'"]';var s=a;switch(t){case"style":s=gf(n);break;case"script":s=zf(n)}is.has(s)||(n=gn({rel:"preload",href:t==="image"&&e&&e.imageSrcSet?void 0:n,as:t},e),is.set(s,n),i.querySelector(a)!==null||t==="style"&&i.querySelector(Cp(s))||t==="script"&&i.querySelector(wp(s))||(t=i.createElement("link"),gi(t,"link",n),si(t),i.head.appendChild(t)))}}function VH(n,t){kr.m(n,t);var e=Pf;if(e&&n){var i=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Ka(i)+'"][href="'+Ka(n)+'"]',s=a;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=zf(n)}if(!is.has(s)&&(n=gn({rel:"modulepreload",href:n},t),is.set(s,n),e.querySelector(a)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector(wp(s)))return}i=e.createElement("link"),gi(i,"link",n),si(i),e.head.appendChild(i)}}}function HH(n,t,e){kr.S(n,t,e);var i=Pf;if(i&&n){var a=Wu(i).hoistableStyles,s=gf(n);t=t||"default";var r=a.get(s);if(!r){var l={loading:0,preload:null};if(r=i.querySelector(Cp(s)))l.loading=5;else{n=gn({rel:"stylesheet",href:n,"data-precedence":t},e),(e=is.get(s))&&Vb(n,e);var u=r=i.createElement("link");si(u),gi(u,"link",n),u._p=new Promise(function(f,d){u.onload=f,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Kg(r,t,i)}r={type:"stylesheet",instance:r,count:1,state:l},a.set(s,r)}}}function FH(n,t){kr.X(n,t);var e=Pf;if(e&&n){var i=Wu(e).hoistableScripts,a=zf(n),s=i.get(a);s||(s=e.querySelector(wp(a)),s||(n=gn({src:n,async:!0},t),(t=is.get(a))&&Hb(n,t),s=e.createElement("script"),si(s),gi(s,"link",n),e.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(a,s))}}function GH(n,t){kr.M(n,t);var e=Pf;if(e&&n){var i=Wu(e).hoistableScripts,a=zf(n),s=i.get(a);s||(s=e.querySelector(wp(a)),s||(n=gn({src:n,async:!0,type:"module"},t),(t=is.get(a))&&Hb(n,t),s=e.createElement("script"),si(s),gi(s,"link",n),e.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(a,s))}}function VC(n,t,e,i){var a=(a=Uo.current)?O0(a):null;if(!a)throw Error(Mt(446));switch(n){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(t=gf(e.href),e=Wu(a).hoistableStyles,i=e.get(t),i||(i={type:"style",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){n=gf(e.href);var s=Wu(a).hoistableStyles,r=s.get(n);if(r||(a=a.ownerDocument||a,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(n,r),(s=a.querySelector(Cp(n)))&&!s._p&&(r.instance=s,r.state.loading=5),is.has(n)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},is.set(n,e),s||XH(a,n,e,r.state))),t&&i===null)throw Error(Mt(528,""));return r}if(t&&i!==null)throw Error(Mt(529,""));return null;case"script":return t=e.async,e=e.src,typeof e=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=zf(e),e=Wu(a).hoistableScripts,i=e.get(t),i||(i={type:"script",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(Mt(444,n))}}function gf(n){return'href="'+Ka(n)+'"'}function Cp(n){return'link[rel="stylesheet"]['+n+"]"}function XU(n){return gn({},n,{"data-precedence":n.precedence,precedence:null})}function XH(n,t,e,i){n.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=n.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),gi(t,"link",e),si(t),n.head.appendChild(t))}function zf(n){return'[src="'+Ka(n)+'"]'}function wp(n){return"script[async]"+n}function HC(n,t,e){if(t.count++,t.instance===null)switch(t.type){case"style":var i=n.querySelector('style[data-href~="'+Ka(e.href)+'"]');if(i)return t.instance=i,si(i),i;var a=gn({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return i=(n.ownerDocument||n).createElement("style"),si(i),gi(i,"style",a),Kg(i,e.precedence,n),t.instance=i;case"stylesheet":a=gf(e.href);var s=n.querySelector(Cp(a));if(s)return t.state.loading|=4,t.instance=s,si(s),s;i=XU(e),(a=is.get(a))&&Vb(i,a),s=(n.ownerDocument||n).createElement("link"),si(s);var r=s;return r._p=new Promise(function(l,u){r.onload=l,r.onerror=u}),gi(s,"link",i),t.state.loading|=4,Kg(s,e.precedence,n),t.instance=s;case"script":return s=zf(e.src),(a=n.querySelector(wp(s)))?(t.instance=a,si(a),a):(i=e,(a=is.get(s))&&(i=gn({},e),Hb(i,a)),n=n.ownerDocument||n,a=n.createElement("script"),si(a),gi(a,"link",i),n.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(Mt(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Kg(i,e.precedence,n));return t.instance}function Kg(n,t,e){for(var i=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,s=a,r=0;r<i.length;r++){var l=i[r];if(l.dataset.precedence===t)s=l;else if(s!==a)break}s?s.parentNode.insertBefore(n,s.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(n,t.firstChild))}function Vb(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.title==null&&(n.title=t.title)}function Hb(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.integrity==null&&(n.integrity=t.integrity)}var Qg=null;function FC(n,t,e){if(Qg===null){var i=new Map,a=Qg=new Map;a.set(e,i)}else a=Qg,i=a.get(e),i||(i=new Map,a.set(e,i));if(i.has(n))return i;for(i.set(n,null),e=e.getElementsByTagName(n),a=0;a<e.length;a++){var s=e[a];if(!(s[vp]||s[Ri]||n==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(t)||"";r=n+r;var l=i.get(r);l?l.push(s):i.set(r,[s])}}return i}function GC(n,t,e){n=n.ownerDocument||n,n.head.insertBefore(e,t==="title"?n.querySelector("head > title"):null)}function kH(n,t,e){if(e===1||t.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return n=t.disabled,typeof t.precedence=="string"&&n==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function kU(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Bd=null;function jH(){}function qH(n,t,e){if(Bd===null)throw Error(Mt(475));var i=Bd;if(t.type==="stylesheet"&&(typeof e.media!="string"||matchMedia(e.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var a=gf(e.href),s=n.querySelector(Cp(a));if(s){n=s._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(i.count++,i=L0.bind(i),n.then(i,i)),t.state.loading|=4,t.instance=s,si(s);return}s=n.ownerDocument||n,e=XU(e),(a=is.get(a))&&Vb(e,a),s=s.createElement("link"),si(s);var r=s;r._p=new Promise(function(l,u){r.onload=l,r.onerror=u}),gi(s,"link",e),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,n),(n=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=L0.bind(i),n.addEventListener("load",t),n.addEventListener("error",t))}}function YH(){if(Bd===null)throw Error(Mt(475));var n=Bd;return n.stylesheets&&n.count===0&&Q1(n,n.stylesheets),0<n.count?function(t){var e=setTimeout(function(){if(n.stylesheets&&Q1(n,n.stylesheets),n.unsuspend){var i=n.unsuspend;n.unsuspend=null,i()}},6e4);return n.unsuspend=t,function(){n.unsuspend=null,clearTimeout(e)}}:null}function L0(){if(this.count--,this.count===0){if(this.stylesheets)Q1(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var P0=null;function Q1(n,t){n.stylesheets=null,n.unsuspend!==null&&(n.count++,P0=new Map,t.forEach(WH,n),P0=null,L0.call(n))}function WH(n,t){if(!(t.state.loading&4)){var e=P0.get(n);if(e)var i=e.get(null);else{e=new Map,P0.set(n,e);for(var a=n.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var r=a[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(e.set(r.dataset.precedence,r),i=r)}i&&e.set(null,i)}a=t.instance,r=a.getAttribute("data-precedence"),s=e.get(r)||i,s===i&&e.set(null,a),e.set(r,a),this.count++,i=L0.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),s?s.parentNode.insertBefore(a,s.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(a,n.firstChild)),t.state.loading|=4}}var Id={$$typeof:Tr,Provider:null,Consumer:null,_currentValue:Ql,_currentValue2:Ql,_threadCount:0};function ZH(n,t,e,i,a,s,r,l){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ux(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ux(0),this.hiddenUpdates=ux(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function jU(n,t,e,i,a,s,r,l,u,f,d,p){return n=new ZH(n,t,e,r,l,u,f,p),t=1,s===!0&&(t|=24),s=Aa(3,null,null,t),n.current=s,s.stateNode=n,t=pb(),t.refCount++,n.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:e,cache:t},gb(s),n}function qU(n){return n?(n=Lu,n):Lu}function YU(n,t,e,i,a,s){a=qU(a),i.context===null?i.context=a:i.pendingContext=a,i=Oo(t),i.payload={element:e},s=s===void 0?null:s,s!==null&&(i.callback=s),e=Lo(n,i,t),e!==null&&(Da(e,n,t),id(e,n,t))}function XC(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function Fb(n,t){XC(n,t),(n=n.alternate)&&XC(n,t)}function WU(n){if(n.tag===13){var t=Of(n,67108864);t!==null&&Da(t,n,67108864),Fb(n,67108864)}}var z0=!0;function KH(n,t,e,i){var a=ve.T;ve.T=null;var s=We.p;try{We.p=2,Gb(n,t,e,i)}finally{We.p=s,ve.T=a}}function QH(n,t,e,i){var a=ve.T;ve.T=null;var s=We.p;try{We.p=8,Gb(n,t,e,i)}finally{We.p=s,ve.T=a}}function Gb(n,t,e,i){if(z0){var a=J1(i);if(a===null)Fx(n,t,i,B0,e),kC(n,i);else if($H(a,n,t,e,i))i.stopPropagation();else if(kC(n,i),t&4&&-1<JH.indexOf(n)){for(;a!==null;){var s=Uf(a);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=Bl(s.pendingLanes);if(r!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var u=1<<31-wa(r);l.entanglements[1]|=u,r&=~u}Js(s),!(tn&6)&&(C0=Fs()+500,Ap(0))}}break;case 13:l=Of(s,2),l!==null&&Da(l,s,2),Zv(),Fb(s,2)}if(s=J1(i),s===null&&Fx(n,t,i,B0,e),s===a)break;a=s}a!==null&&i.stopPropagation()}else Fx(n,t,i,null,e)}}function J1(n){return n=ab(n),Xb(n)}var B0=null;function Xb(n){if(B0=null,n=wu(n),n!==null){var t=dp(n);if(t===null)n=null;else{var e=t.tag;if(e===13){if(n=_D(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return B0=n,null}function ZU(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(BI()){case bD:return 2;case ED:return 8;case f0:case II:return 32;case TD:return 268435456;default:return 32}default:return 32}}var $1=!1,Bo=null,Io=null,Vo=null,Vd=new Map,Hd=new Map,Eo=[],JH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kC(n,t){switch(n){case"focusin":case"focusout":Bo=null;break;case"dragenter":case"dragleave":Io=null;break;case"mouseover":case"mouseout":Vo=null;break;case"pointerover":case"pointerout":Vd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hd.delete(t.pointerId)}}function Rh(n,t,e,i,a,s){return n===null||n.nativeEvent!==s?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:s,targetContainers:[a]},t!==null&&(t=Uf(t),t!==null&&WU(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),n)}function $H(n,t,e,i,a){switch(t){case"focusin":return Bo=Rh(Bo,n,t,e,i,a),!0;case"dragenter":return Io=Rh(Io,n,t,e,i,a),!0;case"mouseover":return Vo=Rh(Vo,n,t,e,i,a),!0;case"pointerover":var s=a.pointerId;return Vd.set(s,Rh(Vd.get(s)||null,n,t,e,i,a)),!0;case"gotpointercapture":return s=a.pointerId,Hd.set(s,Rh(Hd.get(s)||null,n,t,e,i,a)),!0}return!1}function KU(n){var t=wu(n.target);if(t!==null){var e=dp(t);if(e!==null){if(t=e.tag,t===13){if(t=_D(e),t!==null){n.blockedOn=t,qI(n.priority,function(){if(e.tag===13){var i=Ra();i=tb(i);var a=Of(e,i);a!==null&&Da(a,e,i),Fb(e,i)}});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jg(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=J1(n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);g1=i,e.target.dispatchEvent(i),g1=null}else return t=Uf(e),t!==null&&WU(t),n.blockedOn=e,!1;t.shift()}return!0}function jC(n,t,e){Jg(n)&&e.delete(t)}function t5(){$1=!1,Bo!==null&&Jg(Bo)&&(Bo=null),Io!==null&&Jg(Io)&&(Io=null),Vo!==null&&Jg(Vo)&&(Vo=null),Vd.forEach(jC),Hd.forEach(jC)}function Vm(n,t){n.blockedOn===t&&(n.blockedOn=null,$1||($1=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,t5)))}var Hm=null;function qC(n){Hm!==n&&(Hm=n,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,function(){Hm===n&&(Hm=null);for(var t=0;t<n.length;t+=3){var e=n[t],i=n[t+1],a=n[t+2];if(typeof i!="function"){if(Xb(i||e)===null)continue;break}var s=Uf(e);s!==null&&(n.splice(t,3),t-=3,U1(s,{pending:!0,data:a,method:e.method,action:i},i,a))}}))}function Fd(n){function t(u){return Vm(u,n)}Bo!==null&&Vm(Bo,n),Io!==null&&Vm(Io,n),Vo!==null&&Vm(Vo,n),Vd.forEach(t),Hd.forEach(t);for(var e=0;e<Eo.length;e++){var i=Eo[e];i.blockedOn===n&&(i.blockedOn=null)}for(;0<Eo.length&&(e=Eo[0],e.blockedOn===null);)KU(e),e.blockedOn===null&&Eo.shift();if(e=(n.ownerDocument||n).$$reactFormReplay,e!=null)for(i=0;i<e.length;i+=3){var a=e[i],s=e[i+1],r=a[la]||null;if(typeof s=="function")r||qC(e);else if(r){var l=null;if(s&&s.hasAttribute("formAction")){if(a=s,r=s[la]||null)l=r.formAction;else if(Xb(a)!==null)continue}else l=r.action;typeof l=="function"?e[i+1]=l:(e.splice(i,3),i-=3),qC(e)}}}function kb(n){this._internalRoot=n}$v.prototype.render=kb.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(Mt(409));var e=t.current,i=Ra();YU(e,i,n,t,null,null)};$v.prototype.unmount=kb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;YU(n.current,2,null,n,null,null),Zv(),t[Nf]=null}};function $v(n){this._internalRoot=n}$v.prototype.unstable_scheduleHydration=function(n){if(n){var t=DD();n={blockedOn:null,target:n,priority:t};for(var e=0;e<Eo.length&&t!==0&&t<Eo[e].priority;e++);Eo.splice(e,0,n),e===0&&KU(n)}};var YC=vD.version;if(YC!=="19.1.1")throw Error(Mt(527,YC,"19.1.1"));We.findDOMNode=function(n){var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(Mt(188)):(n=Object.keys(n).join(","),Error(Mt(268,n)));return n=DI(t),n=n!==null?xD(n):null,n=n===null?null:n.stateNode,n};var e5={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ve,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fm.isDisabled&&Fm.supportsFiber)try{pp=Fm.inject(e5),Ca=Fm}catch{}}Bv.createRoot=function(n,t){if(!yD(n))throw Error(Mt(299));var e=!1,i="",a=jN,s=qN,r=YN,l=null;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=jU(n,1,!1,null,null,e,i,a,s,r,l,null),n[Nf]=t.current,Ib(n),new kb(t)};Bv.hydrateRoot=function(n,t,e){if(!yD(n))throw Error(Mt(299));var i=!1,a="",s=jN,r=qN,l=YN,u=null,f=null;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(l=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(u=e.unstable_transitionCallbacks),e.formState!==void 0&&(f=e.formState)),t=jU(n,1,!0,t,e??null,i,a,s,r,l,u,f),t.context=qU(null),e=t.current,i=Ra(),i=tb(i),a=Oo(i),a.callback=null,Lo(e,a,i),e=i,t.current.lanes=e,gp(t,e),Js(t),n[Nf]=t.current,Ib(n),new $v(t)};Bv.version="19.1.1";function QU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QU)}catch(n){console.error(n)}}QU(),fD.exports=Bv;var JU=fD.exports,$U={exports:{}},Ko={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ko.ConcurrentRoot=1;Ko.ContinuousEventPriority=8;Ko.DefaultEventPriority=32;Ko.DiscreteEventPriority=2;Ko.IdleEventPriority=268435456;Ko.LegacyRoot=0;Ko.NoEventPriority=0;$U.exports=Ko;var $g=$U.exports;/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ty="178",Hl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Fl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tO=0,tM=1,eO=2,n5=3,nO=0,ey=1,hd=2,gs=3,Ir=0,Oi=1,_s=2,Ur=0,ac=1,eM=2,nM=3,iM=4,iO=5,To=100,aO=101,sO=102,rO=103,oO=104,lO=200,cO=201,uO=202,fO=203,I0=204,V0=205,hO=206,dO=207,pO=208,mO=209,gO=210,vO=211,yO=212,_O=213,xO=214,H0=0,F0=1,G0=2,dc=3,X0=4,k0=5,j0=6,q0=7,Rp=0,SO=1,MO=2,Xs=0,bO=1,EO=2,TO=3,jb=4,AO=5,CO=6,wO=7,aM="attached",RO="detached",ny=300,Vr=301,Xo=302,Gd=303,Xd=304,Bf=306,kd=1e3,$a=1001,jd=1002,vi=1003,qb=1004,i5=1004,Iu=1005,a5=1005,Kn=1006,dd=1007,s5=1007,Is=1008,r5=1008,as=1009,Yb=1010,Wb=1011,vf=1012,iy=1013,Hr=1014,sa=1015,If=1016,ay=1017,sy=1018,yf=1020,Zb=35902,Kb=1021,Qb=1022,Ni=1023,_f=1026,xf=1027,ry=1028,Dp=1029,Jb=1030,oy=1031,o5=1032,ly=1033,pd=33776,md=33777,gd=33778,vd=33779,Y0=35840,W0=35841,Z0=35842,K0=35843,Q0=36196,J0=37492,$0=37496,tv=37808,ev=37809,nv=37810,iv=37811,av=37812,sv=37813,rv=37814,ov=37815,lv=37816,cv=37817,uv=37818,fv=37819,hv=37820,dv=37821,yd=36492,pv=36494,mv=36495,$b=36283,gv=36284,vv=36285,yv=36286,DO=2200,NO=2201,UO=2202,qd=2300,_v=2301,t0=2302,ql=2400,Yl=2401,Yd=2402,cy=2500,tE=2501,l5=0,c5=1,u5=2,OO=3200,LO=3201,f5=3202,h5=3203,Qo=0,PO=1,br="",wi="srgb",ko="srgb-linear",Wd="linear",Je="srgb",d5=0,Gl=7680,p5=7681,m5=7682,g5=7683,v5=34055,y5=34056,_5=5386,x5=512,S5=513,M5=514,b5=515,E5=516,T5=517,A5=518,sM=519,zO=512,BO=513,IO=514,eE=515,VO=516,HO=517,FO=518,GO=519,Zd=35044,C5=35048,w5=35040,R5=35045,D5=35049,N5=35041,U5=35046,O5=35050,L5=35042,P5="100",rM="300 es",ts=2e3,Kd=2001,z5={COMPUTE:"compute",RENDER:"render"},B5={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},I5={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let $s=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const i=this._listeners;if(i===void 0)return;const a=i[t];if(a!==void 0){const s=a.indexOf(e);s!==-1&&a.splice(s,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const i=e[t.type];if(i!==void 0){t.target=this;const a=i.slice(0);for(let s=0,r=a.length;s<r;s++)a[s].call(this,t);t.target=null}}};const Ti=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let WC=1234567;const sc=Math.PI/180,Sf=180/Math.PI;function Na(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ti[n&255]+Ti[n>>8&255]+Ti[n>>16&255]+Ti[n>>24&255]+"-"+Ti[t&255]+Ti[t>>8&255]+"-"+Ti[t>>16&15|64]+Ti[t>>24&255]+"-"+Ti[e&63|128]+Ti[e>>8&255]+"-"+Ti[e>>16&255]+Ti[e>>24&255]+Ti[i&255]+Ti[i>>8&255]+Ti[i>>16&255]+Ti[i>>24&255]).toLowerCase()}function xe(n,t,e){return Math.max(t,Math.min(e,n))}function nE(n,t){return(n%t+t)%t}function V5(n,t,e,i,a){return i+(n-t)*(a-i)/(e-t)}function H5(n,t,e){return n!==t?(e-n)/(t-n):0}function _d(n,t,e){return(1-e)*n+e*t}function F5(n,t,e,i){return _d(n,t,1-Math.exp(-e*i))}function G5(n,t=1){return t-Math.abs(nE(n,t*2)-t)}function X5(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function k5(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function j5(n,t){return n+Math.floor(Math.random()*(t-n+1))}function q5(n,t){return n+Math.random()*(t-n)}function Y5(n){return n*(.5-Math.random())}function W5(n){n!==void 0&&(WC=n);let t=WC+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Z5(n){return n*sc}function K5(n){return n*Sf}function Q5(n){return(n&n-1)===0&&n!==0}function J5(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function $5(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function tF(n,t,e,i,a){const s=Math.cos,r=Math.sin,l=s(e/2),u=r(e/2),f=s((t+i)/2),d=r((t+i)/2),p=s((t-i)/2),m=r((t-i)/2),g=s((i-t)/2),_=r((i-t)/2);switch(a){case"XYX":n.set(l*d,u*p,u*m,l*f);break;case"YZY":n.set(u*m,l*d,u*p,l*f);break;case"ZXZ":n.set(u*p,u*m,l*d,l*f);break;case"XZX":n.set(l*d,u*_,u*g,l*f);break;case"YXY":n.set(u*g,l*d,u*_,l*f);break;case"ZYZ":n.set(u*_,u*g,l*d,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function ki(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ee(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const eF={DEG2RAD:sc,RAD2DEG:Sf,generateUUID:Na,clamp:xe,euclideanModulo:nE,mapLinear:V5,inverseLerp:H5,lerp:_d,damp:F5,pingpong:G5,smoothstep:X5,smootherstep:k5,randInt:j5,randFloat:q5,randFloatSpread:Y5,seededRandom:W5,degToRad:Z5,radToDeg:K5,isPowerOfTwo:Q5,ceilPowerOfTwo:J5,floorPowerOfTwo:$5,setQuaternionFromProperEuler:tF,normalize:Ee,denormalize:ki};class mt{constructor(t=0,e=0){mt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,a=t.elements;return this.x=a[0]*e+a[3]*i+a[6],this.y=a[1]*e+a[4]*i+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=xe(this.x,t.x,e.x),this.y=xe(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=xe(this.x,t,e),this.y=xe(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(xe(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(xe(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),a=Math.sin(e),s=this.x-t.x,r=this.y-t.y;return this.x=s*i-r*a+t.x,this.y=s*a+r*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Li{constructor(t=0,e=0,i=0,a=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=a}static slerpFlat(t,e,i,a,s,r,l){let u=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];const m=s[r+0],g=s[r+1],_=s[r+2],E=s[r+3];if(l===0){t[e+0]=u,t[e+1]=f,t[e+2]=d,t[e+3]=p;return}if(l===1){t[e+0]=m,t[e+1]=g,t[e+2]=_,t[e+3]=E;return}if(p!==E||u!==m||f!==g||d!==_){let M=1-l;const v=u*m+f*g+d*_+p*E,x=v>=0?1:-1,b=1-v*v;if(b>Number.EPSILON){const w=Math.sqrt(b),R=Math.atan2(w,v*x);M=Math.sin(M*R)/w,l=Math.sin(l*R)/w}const T=l*x;if(u=u*M+m*T,f=f*M+g*T,d=d*M+_*T,p=p*M+E*T,M===1-l){const w=1/Math.sqrt(u*u+f*f+d*d+p*p);u*=w,f*=w,d*=w,p*=w}}t[e]=u,t[e+1]=f,t[e+2]=d,t[e+3]=p}static multiplyQuaternionsFlat(t,e,i,a,s,r){const l=i[a],u=i[a+1],f=i[a+2],d=i[a+3],p=s[r],m=s[r+1],g=s[r+2],_=s[r+3];return t[e]=l*_+d*p+u*g-f*m,t[e+1]=u*_+d*m+f*p-l*g,t[e+2]=f*_+d*g+l*m-u*p,t[e+3]=d*_-l*p-u*m-f*g,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,a){return this._x=t,this._y=e,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,a=t._y,s=t._z,r=t._order,l=Math.cos,u=Math.sin,f=l(i/2),d=l(a/2),p=l(s/2),m=u(i/2),g=u(a/2),_=u(s/2);switch(r){case"XYZ":this._x=m*d*p+f*g*_,this._y=f*g*p-m*d*_,this._z=f*d*_+m*g*p,this._w=f*d*p-m*g*_;break;case"YXZ":this._x=m*d*p+f*g*_,this._y=f*g*p-m*d*_,this._z=f*d*_-m*g*p,this._w=f*d*p+m*g*_;break;case"ZXY":this._x=m*d*p-f*g*_,this._y=f*g*p+m*d*_,this._z=f*d*_+m*g*p,this._w=f*d*p-m*g*_;break;case"ZYX":this._x=m*d*p-f*g*_,this._y=f*g*p+m*d*_,this._z=f*d*_-m*g*p,this._w=f*d*p+m*g*_;break;case"YZX":this._x=m*d*p+f*g*_,this._y=f*g*p+m*d*_,this._z=f*d*_-m*g*p,this._w=f*d*p-m*g*_;break;case"XZY":this._x=m*d*p-f*g*_,this._y=f*g*p-m*d*_,this._z=f*d*_+m*g*p,this._w=f*d*p+m*g*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,a=Math.sin(i);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],a=e[4],s=e[8],r=e[1],l=e[5],u=e[9],f=e[2],d=e[6],p=e[10],m=i+l+p;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-u)*g,this._y=(s-f)*g,this._z=(r-a)*g}else if(i>l&&i>p){const g=2*Math.sqrt(1+i-l-p);this._w=(d-u)/g,this._x=.25*g,this._y=(a+r)/g,this._z=(s+f)/g}else if(l>p){const g=2*Math.sqrt(1+l-i-p);this._w=(s-f)/g,this._x=(a+r)/g,this._y=.25*g,this._z=(u+d)/g}else{const g=2*Math.sqrt(1+p-i-l);this._w=(r-a)/g,this._x=(s+f)/g,this._y=(u+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-8?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(xe(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const a=Math.min(1,e/i);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,a=t._y,s=t._z,r=t._w,l=e._x,u=e._y,f=e._z,d=e._w;return this._x=i*d+r*l+a*f-s*u,this._y=a*d+r*u+s*l-i*f,this._z=s*d+r*f+i*u-a*l,this._w=r*d-i*l-a*u-s*f,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,a=this._y,s=this._z,r=this._w;let l=r*t._w+i*t._x+a*t._y+s*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=r,this._x=i,this._y=a,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const g=1-e;return this._w=g*r+e*this._w,this._x=g*i+e*this._x,this._y=g*a+e*this._y,this._z=g*s+e*this._z,this.normalize(),this}const f=Math.sqrt(u),d=Math.atan2(f,l),p=Math.sin((1-e)*d)/f,m=Math.sin(e*d)/f;return this._w=r*p+this._w*m,this._x=i*p+this._x*m,this._y=a*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(a*Math.sin(t),a*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(t=0,e=0,i=0){V.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(ZC.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(ZC.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,a=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*a,this.y=s[1]*e+s[4]*i+s[7]*a,this.z=s[2]*e+s[5]*i+s[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,a=this.z,s=t.elements,r=1/(s[3]*e+s[7]*i+s[11]*a+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*a+s[12])*r,this.y=(s[1]*e+s[5]*i+s[9]*a+s[13])*r,this.z=(s[2]*e+s[6]*i+s[10]*a+s[14])*r,this}applyQuaternion(t){const e=this.x,i=this.y,a=this.z,s=t.x,r=t.y,l=t.z,u=t.w,f=2*(r*a-l*i),d=2*(l*e-s*a),p=2*(s*i-r*e);return this.x=e+u*f+r*p-l*d,this.y=i+u*d+l*f-s*p,this.z=a+u*p+s*d-r*f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,a=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*a,this.y=s[1]*e+s[5]*i+s[9]*a,this.z=s[2]*e+s[6]*i+s[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=xe(this.x,t.x,e.x),this.y=xe(this.y,t.y,e.y),this.z=xe(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=xe(this.x,t,e),this.y=xe(this.y,t,e),this.z=xe(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(xe(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,a=t.y,s=t.z,r=e.x,l=e.y,u=e.z;return this.x=a*u-s*l,this.y=s*r-i*u,this.z=i*l-a*r,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Xx.copy(this).projectOnVector(t),this.sub(Xx)}reflect(t){return this.sub(Xx.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(xe(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,a=this.z-t.z;return e*e+i*i+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const a=Math.sin(e)*t;return this.x=a*Math.sin(i),this.y=Math.cos(e)*t,this.z=a*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=a,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Xx=new V,ZC=new Li;class Se{constructor(t,e,i,a,s,r,l,u,f){Se.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,a,s,r,l,u,f)}set(t,e,i,a,s,r,l,u,f){const d=this.elements;return d[0]=t,d[1]=a,d[2]=l,d[3]=e,d[4]=s,d[5]=u,d[6]=i,d[7]=r,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,a=e.elements,s=this.elements,r=i[0],l=i[3],u=i[6],f=i[1],d=i[4],p=i[7],m=i[2],g=i[5],_=i[8],E=a[0],M=a[3],v=a[6],x=a[1],b=a[4],T=a[7],w=a[2],R=a[5],N=a[8];return s[0]=r*E+l*x+u*w,s[3]=r*M+l*b+u*R,s[6]=r*v+l*T+u*N,s[1]=f*E+d*x+p*w,s[4]=f*M+d*b+p*R,s[7]=f*v+d*T+p*N,s[2]=m*E+g*x+_*w,s[5]=m*M+g*b+_*R,s[8]=m*v+g*T+_*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],a=t[2],s=t[3],r=t[4],l=t[5],u=t[6],f=t[7],d=t[8];return e*r*d-e*l*f-i*s*d+i*l*u+a*s*f-a*r*u}invert(){const t=this.elements,e=t[0],i=t[1],a=t[2],s=t[3],r=t[4],l=t[5],u=t[6],f=t[7],d=t[8],p=d*r-l*f,m=l*u-d*s,g=f*s-r*u,_=e*p+i*m+a*g;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/_;return t[0]=p*E,t[1]=(a*f-d*i)*E,t[2]=(l*i-a*r)*E,t[3]=m*E,t[4]=(d*e-a*u)*E,t[5]=(a*s-l*e)*E,t[6]=g*E,t[7]=(i*u-f*e)*E,t[8]=(r*e-i*s)*E,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,a,s,r,l){const u=Math.cos(s),f=Math.sin(s);return this.set(i*u,i*f,-i*(u*r+f*l)+r+t,-a*f,a*u,-a*(-f*r+u*l)+l+e,0,0,1),this}scale(t,e){return this.premultiply(kx.makeScale(t,e)),this}rotate(t){return this.premultiply(kx.makeRotation(-t)),this}translate(t,e){return this.premultiply(kx.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let a=0;a<9;a++)if(e[a]!==i[a])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const kx=new Se;function XO(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}const nF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Vu(n,t){return new nF[n](t)}function Qd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function kO(){const n=Qd("canvas");return n.style.display="block",n}const KC={};function nf(n){n in KC||(KC[n]=!0,console.warn(n))}function iF(n,t,e){return new Promise(function(i,a){function s(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(s,e);break;default:i()}}setTimeout(s,e)})}function aF(n){const t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function sF(n){const t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const QC=new Se().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),JC=new Se().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function rF(){const n={enabled:!0,workingColorSpace:ko,spaces:{},convert:function(a,s,r){return this.enabled===!1||s===r||!s||!r||(this.spaces[s].transfer===Je&&(a.r=Or(a.r),a.g=Or(a.g),a.b=Or(a.b)),this.spaces[s].primaries!==this.spaces[r].primaries&&(a.applyMatrix3(this.spaces[s].toXYZ),a.applyMatrix3(this.spaces[r].fromXYZ)),this.spaces[r].transfer===Je&&(a.r=af(a.r),a.g=af(a.g),a.b=af(a.b))),a},workingToColorSpace:function(a,s){return this.convert(a,this.workingColorSpace,s)},colorSpaceToWorking:function(a,s){return this.convert(a,s,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===br?Wd:this.spaces[a].transfer},getLuminanceCoefficients:function(a,s=this.workingColorSpace){return a.fromArray(this.spaces[s].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,s,r){return a.copy(this.spaces[s].toXYZ).multiply(this.spaces[r].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,s){return nf("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(a,s)},toWorkingColorSpace:function(a,s){return nf("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(a,s)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[ko]:{primaries:t,whitePoint:i,transfer:Wd,toXYZ:QC,fromXYZ:JC,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:wi},outputColorSpaceConfig:{drawingBufferColorSpace:wi}},[wi]:{primaries:t,whitePoint:i,transfer:Je,toXYZ:QC,fromXYZ:JC,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:wi}}}),n}const Be=rF();function Or(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function af(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let tu;class jO{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{tu===void 0&&(tu=Qd("canvas")),tu.width=t.width,tu.height=t.height;const a=tu.getContext("2d");t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height),i=tu}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Qd("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const a=i.getImageData(0,0,t.width,t.height),s=a.data;for(let r=0;r<s.length;r++)s[r]=Or(s[r]/255)*255;return i.putImageData(a,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Or(e[i]/255)*255):e[i]=Or(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let oF=0;class No{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:oF++}),this.uuid=Na(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let r=0,l=a.length;r<l;r++)a[r].isDataTexture?s.push(jx(a[r].image)):s.push(jx(a[r]))}else s=jx(a);i.url=s}return e||(t.images[this.uuid]=i),i}}function jx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?jO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let lF=0;const qx=new V;class Ln extends $s{constructor(t=Ln.DEFAULT_IMAGE,e=Ln.DEFAULT_MAPPING,i=$a,a=$a,s=Kn,r=Is,l=Ni,u=as,f=Ln.DEFAULT_ANISOTROPY,d=br){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lF++}),this.uuid=Na(),this.name="",this.source=new No(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=s,this.minFilter=r,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new mt(0,0),this.repeat=new mt(1,1),this.center=new mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Se,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(qx).x}get height(){return this.source.getSize(qx).y}get depth(){return this.source.getSize(qx).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`);continue}a&&i&&a.isVector2&&i.isVector2||a&&i&&a.isVector3&&i.isVector3||a&&i&&a.isMatrix3&&i.isMatrix3?a.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ny)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case kd:t.x=t.x-Math.floor(t.x);break;case $a:t.x=t.x<0?0:1;break;case jd:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case kd:t.y=t.y-Math.floor(t.y);break;case $a:t.y=t.y<0?0:1;break;case jd:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Ln.DEFAULT_IMAGE=null;Ln.DEFAULT_MAPPING=ny;Ln.DEFAULT_ANISOTROPY=1;class Fe{constructor(t=0,e=0,i=0,a=1){Fe.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,a){return this.x=t,this.y=e,this.z=i,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,a=this.z,s=this.w,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*a+r[12]*s,this.y=r[1]*e+r[5]*i+r[9]*a+r[13]*s,this.z=r[2]*e+r[6]*i+r[10]*a+r[14]*s,this.w=r[3]*e+r[7]*i+r[11]*a+r[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,a,s;const u=t.elements,f=u[0],d=u[4],p=u[8],m=u[1],g=u[5],_=u[9],E=u[2],M=u[6],v=u[10];if(Math.abs(d-m)<.01&&Math.abs(p-E)<.01&&Math.abs(_-M)<.01){if(Math.abs(d+m)<.1&&Math.abs(p+E)<.1&&Math.abs(_+M)<.1&&Math.abs(f+g+v-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const b=(f+1)/2,T=(g+1)/2,w=(v+1)/2,R=(d+m)/4,N=(p+E)/4,U=(_+M)/4;return b>T&&b>w?b<.01?(i=0,a=.707106781,s=.707106781):(i=Math.sqrt(b),a=R/i,s=N/i):T>w?T<.01?(i=.707106781,a=0,s=.707106781):(a=Math.sqrt(T),i=R/a,s=U/a):w<.01?(i=.707106781,a=.707106781,s=0):(s=Math.sqrt(w),i=N/s,a=U/s),this.set(i,a,s,e),this}let x=Math.sqrt((M-_)*(M-_)+(p-E)*(p-E)+(m-d)*(m-d));return Math.abs(x)<.001&&(x=1),this.x=(M-_)/x,this.y=(p-E)/x,this.z=(m-d)/x,this.w=Math.acos((f+g+v-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=xe(this.x,t.x,e.x),this.y=xe(this.y,t.y,e.y),this.z=xe(this.z,t.z,e.z),this.w=xe(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=xe(this.x,t,e),this.y=xe(this.y,t,e),this.z=xe(this.z,t,e),this.w=xe(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(xe(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class iE extends $s{constructor(t=1,e=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Kn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=i.depth,this.scissor=new Fe(0,0,t,e),this.scissorTest=!1,this.viewport=new Fe(0,0,t,e);const a={width:t,height:e,depth:i.depth},s=new Ln(a);this.textures=[];const r=i.count;for(let l=0;l<r;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(t={}){const e={minFilter:Kn,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let a=0,s=this.textures.length;a<s;a++)this.textures[a].image.width=t,this.textures[a].image.height=e,this.textures[a].image.depth=i,this.textures[a].isArrayTexture=this.textures[a].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const a=Object.assign({},t.textures[e].image);this.textures[e].source=new No(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ks extends iE{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}}class uy extends Ln{constructor(t=null,e=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:a},this.magFilter=vi,this.minFilter=vi,this.wrapR=$a,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class cF extends Ks{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new uy(null,t,e,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class fy extends Ln{constructor(t=null,e=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:a},this.magFilter=vi,this.minFilter=vi,this.wrapR=$a,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class uF extends Ks{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new fy(null,t,e,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Pi{constructor(t=new V(1/0,1/0,1/0),e=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(hs.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(hs.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=hs.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const s=i.getAttribute("position");if(e===!0&&s!==void 0&&t.isInstancedMesh!==!0)for(let r=0,l=s.count;r<l;r++)t.isMesh===!0?t.getVertexPosition(r,hs):hs.fromBufferAttribute(s,r),hs.applyMatrix4(t.matrixWorld),this.expandByPoint(hs);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Gm.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Gm.copy(i.boundingBox)),Gm.applyMatrix4(t.matrixWorld),this.union(Gm)}const a=t.children;for(let s=0,r=a.length;s<r;s++)this.expandByObject(a[s],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,hs),hs.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Dh),Xm.subVectors(this.max,Dh),eu.subVectors(t.a,Dh),nu.subVectors(t.b,Dh),iu.subVectors(t.c,Dh),co.subVectors(nu,eu),uo.subVectors(iu,nu),Ml.subVectors(eu,iu);let e=[0,-co.z,co.y,0,-uo.z,uo.y,0,-Ml.z,Ml.y,co.z,0,-co.x,uo.z,0,-uo.x,Ml.z,0,-Ml.x,-co.y,co.x,0,-uo.y,uo.x,0,-Ml.y,Ml.x,0];return!Yx(e,eu,nu,iu,Xm)||(e=[1,0,0,0,1,0,0,0,1],!Yx(e,eu,nu,iu,Xm))?!1:(km.crossVectors(co,uo),e=[km.x,km.y,km.z],Yx(e,eu,nu,iu,Xm))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,hs).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(hs).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(mr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),mr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),mr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),mr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),mr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),mr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),mr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),mr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(mr),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const mr=[new V,new V,new V,new V,new V,new V,new V,new V],hs=new V,Gm=new Pi,eu=new V,nu=new V,iu=new V,co=new V,uo=new V,Ml=new V,Dh=new V,Xm=new V,km=new V,bl=new V;function Yx(n,t,e,i,a){for(let s=0,r=n.length-3;s<=r;s+=3){bl.fromArray(n,s);const l=a.x*Math.abs(bl.x)+a.y*Math.abs(bl.y)+a.z*Math.abs(bl.z),u=t.dot(bl),f=e.dot(bl),d=i.dot(bl);if(Math.max(-Math.max(u,f,d),Math.min(u,f,d))>l)return!1}return!0}const fF=new Pi,Nh=new V,Wx=new V;class yi{constructor(t=new V,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):fF.setFromPoints(t).getCenter(i);let a=0;for(let s=0,r=t.length;s<r;s++)a=Math.max(a,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Nh.subVectors(t,this.center);const e=Nh.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),a=(i-this.radius)*.5;this.center.addScaledVector(Nh,a/i),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Wx.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Nh.copy(t.center).add(Wx)),this.expandByPoint(Nh.copy(t.center).sub(Wx))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const gr=new V,Zx=new V,jm=new V,fo=new V,Kx=new V,qm=new V,Qx=new V;class Sc{constructor(t=new V,e=new V(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,gr)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=gr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(gr.copy(this.origin).addScaledVector(this.direction,e),gr.distanceToSquared(t))}distanceSqToSegment(t,e,i,a){Zx.copy(t).add(e).multiplyScalar(.5),jm.copy(e).sub(t).normalize(),fo.copy(this.origin).sub(Zx);const s=t.distanceTo(e)*.5,r=-this.direction.dot(jm),l=fo.dot(this.direction),u=-fo.dot(jm),f=fo.lengthSq(),d=Math.abs(1-r*r);let p,m,g,_;if(d>0)if(p=r*u-l,m=r*l-u,_=s*d,p>=0)if(m>=-_)if(m<=_){const E=1/d;p*=E,m*=E,g=p*(p+r*m+2*l)+m*(r*p+m+2*u)+f}else m=s,p=Math.max(0,-(r*m+l)),g=-p*p+m*(m+2*u)+f;else m=-s,p=Math.max(0,-(r*m+l)),g=-p*p+m*(m+2*u)+f;else m<=-_?(p=Math.max(0,-(-r*s+l)),m=p>0?-s:Math.min(Math.max(-s,-u),s),g=-p*p+m*(m+2*u)+f):m<=_?(p=0,m=Math.min(Math.max(-s,-u),s),g=m*(m+2*u)+f):(p=Math.max(0,-(r*s+l)),m=p>0?s:Math.min(Math.max(-s,-u),s),g=-p*p+m*(m+2*u)+f);else m=r>0?-s:s,p=Math.max(0,-(r*m+l)),g=-p*p+m*(m+2*u)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,p),a&&a.copy(Zx).addScaledVector(jm,m),g}intersectSphere(t,e){gr.subVectors(t.center,this.origin);const i=gr.dot(this.direction),a=gr.dot(gr)-i*i,s=t.radius*t.radius;if(a>s)return null;const r=Math.sqrt(s-a),l=i-r,u=i+r;return u<0?null:l<0?this.at(u,e):this.at(l,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,a,s,r,l,u;const f=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,m=this.origin;return f>=0?(i=(t.min.x-m.x)*f,a=(t.max.x-m.x)*f):(i=(t.max.x-m.x)*f,a=(t.min.x-m.x)*f),d>=0?(s=(t.min.y-m.y)*d,r=(t.max.y-m.y)*d):(s=(t.max.y-m.y)*d,r=(t.min.y-m.y)*d),i>r||s>a||((s>i||isNaN(i))&&(i=s),(r<a||isNaN(a))&&(a=r),p>=0?(l=(t.min.z-m.z)*p,u=(t.max.z-m.z)*p):(l=(t.max.z-m.z)*p,u=(t.min.z-m.z)*p),i>u||l>a)||((l>i||i!==i)&&(i=l),(u<a||a!==a)&&(a=u),a<0)?null:this.at(i>=0?i:a,e)}intersectsBox(t){return this.intersectBox(t,gr)!==null}intersectTriangle(t,e,i,a,s){Kx.subVectors(e,t),qm.subVectors(i,t),Qx.crossVectors(Kx,qm);let r=this.direction.dot(Qx),l;if(r>0){if(a)return null;l=1}else if(r<0)l=-1,r=-r;else return null;fo.subVectors(this.origin,t);const u=l*this.direction.dot(qm.crossVectors(fo,qm));if(u<0)return null;const f=l*this.direction.dot(Kx.cross(fo));if(f<0||u+f>r)return null;const d=-l*fo.dot(Qx);return d<0?null:this.at(d/r,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class pe{constructor(t,e,i,a,s,r,l,u,f,d,p,m,g,_,E,M){pe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,a,s,r,l,u,f,d,p,m,g,_,E,M)}set(t,e,i,a,s,r,l,u,f,d,p,m,g,_,E,M){const v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=a,v[1]=s,v[5]=r,v[9]=l,v[13]=u,v[2]=f,v[6]=d,v[10]=p,v[14]=m,v[3]=g,v[7]=_,v[11]=E,v[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pe().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,a=1/au.setFromMatrixColumn(t,0).length(),s=1/au.setFromMatrixColumn(t,1).length(),r=1/au.setFromMatrixColumn(t,2).length();return e[0]=i[0]*a,e[1]=i[1]*a,e[2]=i[2]*a,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*r,e[9]=i[9]*r,e[10]=i[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,a=t.y,s=t.z,r=Math.cos(i),l=Math.sin(i),u=Math.cos(a),f=Math.sin(a),d=Math.cos(s),p=Math.sin(s);if(t.order==="XYZ"){const m=r*d,g=r*p,_=l*d,E=l*p;e[0]=u*d,e[4]=-u*p,e[8]=f,e[1]=g+_*f,e[5]=m-E*f,e[9]=-l*u,e[2]=E-m*f,e[6]=_+g*f,e[10]=r*u}else if(t.order==="YXZ"){const m=u*d,g=u*p,_=f*d,E=f*p;e[0]=m+E*l,e[4]=_*l-g,e[8]=r*f,e[1]=r*p,e[5]=r*d,e[9]=-l,e[2]=g*l-_,e[6]=E+m*l,e[10]=r*u}else if(t.order==="ZXY"){const m=u*d,g=u*p,_=f*d,E=f*p;e[0]=m-E*l,e[4]=-r*p,e[8]=_+g*l,e[1]=g+_*l,e[5]=r*d,e[9]=E-m*l,e[2]=-r*f,e[6]=l,e[10]=r*u}else if(t.order==="ZYX"){const m=r*d,g=r*p,_=l*d,E=l*p;e[0]=u*d,e[4]=_*f-g,e[8]=m*f+E,e[1]=u*p,e[5]=E*f+m,e[9]=g*f-_,e[2]=-f,e[6]=l*u,e[10]=r*u}else if(t.order==="YZX"){const m=r*u,g=r*f,_=l*u,E=l*f;e[0]=u*d,e[4]=E-m*p,e[8]=_*p+g,e[1]=p,e[5]=r*d,e[9]=-l*d,e[2]=-f*d,e[6]=g*p+_,e[10]=m-E*p}else if(t.order==="XZY"){const m=r*u,g=r*f,_=l*u,E=l*f;e[0]=u*d,e[4]=-p,e[8]=f*d,e[1]=m*p+E,e[5]=r*d,e[9]=g*p-_,e[2]=_*p-g,e[6]=l*d,e[10]=E*p+m}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(hF,t,dF)}lookAt(t,e,i){const a=this.elements;return ba.subVectors(t,e),ba.lengthSq()===0&&(ba.z=1),ba.normalize(),ho.crossVectors(i,ba),ho.lengthSq()===0&&(Math.abs(i.z)===1?ba.x+=1e-4:ba.z+=1e-4,ba.normalize(),ho.crossVectors(i,ba)),ho.normalize(),Ym.crossVectors(ba,ho),a[0]=ho.x,a[4]=Ym.x,a[8]=ba.x,a[1]=ho.y,a[5]=Ym.y,a[9]=ba.y,a[2]=ho.z,a[6]=Ym.z,a[10]=ba.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,a=e.elements,s=this.elements,r=i[0],l=i[4],u=i[8],f=i[12],d=i[1],p=i[5],m=i[9],g=i[13],_=i[2],E=i[6],M=i[10],v=i[14],x=i[3],b=i[7],T=i[11],w=i[15],R=a[0],N=a[4],U=a[8],D=a[12],C=a[1],B=a[5],Z=a[9],q=a[13],it=a[2],et=a[6],L=a[10],G=a[14],H=a[3],W=a[7],rt=a[11],vt=a[15];return s[0]=r*R+l*C+u*it+f*H,s[4]=r*N+l*B+u*et+f*W,s[8]=r*U+l*Z+u*L+f*rt,s[12]=r*D+l*q+u*G+f*vt,s[1]=d*R+p*C+m*it+g*H,s[5]=d*N+p*B+m*et+g*W,s[9]=d*U+p*Z+m*L+g*rt,s[13]=d*D+p*q+m*G+g*vt,s[2]=_*R+E*C+M*it+v*H,s[6]=_*N+E*B+M*et+v*W,s[10]=_*U+E*Z+M*L+v*rt,s[14]=_*D+E*q+M*G+v*vt,s[3]=x*R+b*C+T*it+w*H,s[7]=x*N+b*B+T*et+w*W,s[11]=x*U+b*Z+T*L+w*rt,s[15]=x*D+b*q+T*G+w*vt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],a=t[8],s=t[12],r=t[1],l=t[5],u=t[9],f=t[13],d=t[2],p=t[6],m=t[10],g=t[14],_=t[3],E=t[7],M=t[11],v=t[15];return _*(+s*u*p-a*f*p-s*l*m+i*f*m+a*l*g-i*u*g)+E*(+e*u*g-e*f*m+s*r*m-a*r*g+a*f*d-s*u*d)+M*(+e*f*p-e*l*g-s*r*p+i*r*g+s*l*d-i*f*d)+v*(-a*l*d-e*u*p+e*l*m+a*r*p-i*r*m+i*u*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=e,a[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],a=t[2],s=t[3],r=t[4],l=t[5],u=t[6],f=t[7],d=t[8],p=t[9],m=t[10],g=t[11],_=t[12],E=t[13],M=t[14],v=t[15],x=p*M*f-E*m*f+E*u*g-l*M*g-p*u*v+l*m*v,b=_*m*f-d*M*f-_*u*g+r*M*g+d*u*v-r*m*v,T=d*E*f-_*p*f+_*l*g-r*E*g-d*l*v+r*p*v,w=_*p*u-d*E*u-_*l*m+r*E*m+d*l*M-r*p*M,R=e*x+i*b+a*T+s*w;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/R;return t[0]=x*N,t[1]=(E*m*s-p*M*s-E*a*g+i*M*g+p*a*v-i*m*v)*N,t[2]=(l*M*s-E*u*s+E*a*f-i*M*f-l*a*v+i*u*v)*N,t[3]=(p*u*s-l*m*s-p*a*f+i*m*f+l*a*g-i*u*g)*N,t[4]=b*N,t[5]=(d*M*s-_*m*s+_*a*g-e*M*g-d*a*v+e*m*v)*N,t[6]=(_*u*s-r*M*s-_*a*f+e*M*f+r*a*v-e*u*v)*N,t[7]=(r*m*s-d*u*s+d*a*f-e*m*f-r*a*g+e*u*g)*N,t[8]=T*N,t[9]=(_*p*s-d*E*s-_*i*g+e*E*g+d*i*v-e*p*v)*N,t[10]=(r*E*s-_*l*s+_*i*f-e*E*f-r*i*v+e*l*v)*N,t[11]=(d*l*s-r*p*s-d*i*f+e*p*f+r*i*g-e*l*g)*N,t[12]=w*N,t[13]=(d*E*a-_*p*a+_*i*m-e*E*m-d*i*M+e*p*M)*N,t[14]=(_*l*a-r*E*a-_*i*u+e*E*u+r*i*M-e*l*M)*N,t[15]=(r*p*a-d*l*a+d*i*u-e*p*u-r*i*m+e*l*m)*N,this}scale(t){const e=this.elements,i=t.x,a=t.y,s=t.z;return e[0]*=i,e[4]*=a,e[8]*=s,e[1]*=i,e[5]*=a,e[9]*=s,e[2]*=i,e[6]*=a,e[10]*=s,e[3]*=i,e[7]*=a,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,a))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),a=Math.sin(e),s=1-i,r=t.x,l=t.y,u=t.z,f=s*r,d=s*l;return this.set(f*r+i,f*l-a*u,f*u+a*l,0,f*l+a*u,d*l+i,d*u-a*r,0,f*u-a*l,d*u+a*r,s*u*u+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,a,s,r){return this.set(1,i,s,0,t,1,r,0,e,a,1,0,0,0,0,1),this}compose(t,e,i){const a=this.elements,s=e._x,r=e._y,l=e._z,u=e._w,f=s+s,d=r+r,p=l+l,m=s*f,g=s*d,_=s*p,E=r*d,M=r*p,v=l*p,x=u*f,b=u*d,T=u*p,w=i.x,R=i.y,N=i.z;return a[0]=(1-(E+v))*w,a[1]=(g+T)*w,a[2]=(_-b)*w,a[3]=0,a[4]=(g-T)*R,a[5]=(1-(m+v))*R,a[6]=(M+x)*R,a[7]=0,a[8]=(_+b)*N,a[9]=(M-x)*N,a[10]=(1-(m+E))*N,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,e,i){const a=this.elements;let s=au.set(a[0],a[1],a[2]).length();const r=au.set(a[4],a[5],a[6]).length(),l=au.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),t.x=a[12],t.y=a[13],t.z=a[14],ds.copy(this);const f=1/s,d=1/r,p=1/l;return ds.elements[0]*=f,ds.elements[1]*=f,ds.elements[2]*=f,ds.elements[4]*=d,ds.elements[5]*=d,ds.elements[6]*=d,ds.elements[8]*=p,ds.elements[9]*=p,ds.elements[10]*=p,e.setFromRotationMatrix(ds),i.x=s,i.y=r,i.z=l,this}makePerspective(t,e,i,a,s,r,l=ts){const u=this.elements,f=2*s/(e-t),d=2*s/(i-a),p=(e+t)/(e-t),m=(i+a)/(i-a);let g,_;if(l===ts)g=-(r+s)/(r-s),_=-2*r*s/(r-s);else if(l===Kd)g=-r/(r-s),_=-r*s/(r-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=p,u[12]=0,u[1]=0,u[5]=d,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=g,u[14]=_,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,i,a,s,r,l=ts){const u=this.elements,f=1/(e-t),d=1/(i-a),p=1/(r-s),m=(e+t)*f,g=(i+a)*d;let _,E;if(l===ts)_=(r+s)*p,E=-2*p;else if(l===Kd)_=s*p,E=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-m,u[1]=0,u[5]=2*d,u[9]=0,u[13]=-g,u[2]=0,u[6]=0,u[10]=E,u[14]=-_,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let a=0;a<16;a++)if(e[a]!==i[a])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const au=new V,ds=new pe,hF=new V(0,0,0),dF=new V(1,1,1),ho=new V,Ym=new V,ba=new V,$C=new pe,tw=new Li;class Oa{constructor(t=0,e=0,i=0,a=Oa.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,a=this._order){return this._x=t,this._y=e,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const a=t.elements,s=a[0],r=a[4],l=a[8],u=a[1],f=a[5],d=a[9],p=a[2],m=a[6],g=a[10];switch(e){case"XYZ":this._y=Math.asin(xe(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-r,s)):(this._x=Math.atan2(m,f),this._z=0);break;case"YXZ":this._x=Math.asin(-xe(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(xe(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-r,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-xe(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-r,f));break;case"YZX":this._z=Math.asin(xe(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-xe(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(m,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return $C.makeRotationFromQuaternion(t),this.setFromRotationMatrix($C,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return tw.setFromEuler(this),this.setFromQuaternion(tw,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Oa.DEFAULT_ORDER="XYZ";class Mf{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let pF=0;const ew=new V,su=new Li,vr=new pe,Wm=new V,Uh=new V,mF=new V,gF=new Li,nw=new V(1,0,0),iw=new V(0,1,0),aw=new V(0,0,1),sw={type:"added"},vF={type:"removed"},ru={type:"childadded",child:null},Jx={type:"childremoved",child:null};class Ge extends $s{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:pF++}),this.uuid=Na(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ge.DEFAULT_UP.clone();const t=new V,e=new Oa,i=new Li,a=new V(1,1,1);function s(){i.setFromEuler(e,!1)}function r(){e.setFromQuaternion(i,void 0,!1)}e._onChange(s),i._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new pe},normalMatrix:{value:new Se}}),this.matrix=new pe,this.matrixWorld=new pe,this.matrixAutoUpdate=Ge.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ge.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Mf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return su.setFromAxisAngle(t,e),this.quaternion.multiply(su),this}rotateOnWorldAxis(t,e){return su.setFromAxisAngle(t,e),this.quaternion.premultiply(su),this}rotateX(t){return this.rotateOnAxis(nw,t)}rotateY(t){return this.rotateOnAxis(iw,t)}rotateZ(t){return this.rotateOnAxis(aw,t)}translateOnAxis(t,e){return ew.copy(t).applyQuaternion(this.quaternion),this.position.add(ew.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(nw,t)}translateY(t){return this.translateOnAxis(iw,t)}translateZ(t){return this.translateOnAxis(aw,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(vr.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?Wm.copy(t):Wm.set(t,e,i);const a=this.parent;this.updateWorldMatrix(!0,!1),Uh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vr.lookAt(Uh,Wm,this.up):vr.lookAt(Wm,Uh,this.up),this.quaternion.setFromRotationMatrix(vr),a&&(vr.extractRotation(a.matrixWorld),su.setFromRotationMatrix(vr),this.quaternion.premultiply(su.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(sw),ru.child=t,this.dispatchEvent(ru),ru.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(vF),Jx.child=t,this.dispatchEvent(Jx),Jx.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),vr.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),vr.multiply(t.parent.matrixWorld)),t.applyMatrix4(vr),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(sw),ru.child=t,this.dispatchEvent(ru),ru.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,a=this.children.length;i<a;i++){const r=this.children[i].getObjectByProperty(t,e);if(r!==void 0)return r}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const a=this.children;for(let s=0,r=a.length;s<r;s++)a[s].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Uh,t,mF),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Uh,gF,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const a=this.children;for(let s=0,r=a.length;s<r;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(l=>({...l})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(t),a.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(t.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,d=u.length;f<d;f++){const p=u[f];s(t.shapes,p)}else s(t.shapes,u)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(t.materials,this.material[u]));a.material=l}else a.material=s(t.materials,this.material);if(this.children.length>0){a.children=[];for(let l=0;l<this.children.length;l++)a.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];a.animations.push(s(t.animations,u))}}if(e){const l=r(t.geometries),u=r(t.materials),f=r(t.textures),d=r(t.images),p=r(t.shapes),m=r(t.skeletons),g=r(t.animations),_=r(t.nodes);l.length>0&&(i.geometries=l),u.length>0&&(i.materials=u),f.length>0&&(i.textures=f),d.length>0&&(i.images=d),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),_.length>0&&(i.nodes=_)}return i.object=a,i;function r(l){const u=[];for(const f in l){const d=l[f];delete d.metadata,u.push(d)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const a=t.children[i];this.add(a.clone())}return this}}Ge.DEFAULT_UP=new V(0,1,0);Ge.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ge.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ps=new V,yr=new V,$x=new V,_r=new V,ou=new V,lu=new V,rw=new V,tS=new V,eS=new V,nS=new V,iS=new Fe,aS=new Fe,sS=new Fe;class aa{constructor(t=new V,e=new V,i=new V){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,a){a.subVectors(i,e),ps.subVectors(t,e),a.cross(ps);const s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(t,e,i,a,s){ps.subVectors(a,e),yr.subVectors(i,e),$x.subVectors(t,e);const r=ps.dot(ps),l=ps.dot(yr),u=ps.dot($x),f=yr.dot(yr),d=yr.dot($x),p=r*f-l*l;if(p===0)return s.set(0,0,0),null;const m=1/p,g=(f*u-l*d)*m,_=(r*d-l*u)*m;return s.set(1-g-_,_,g)}static containsPoint(t,e,i,a){return this.getBarycoord(t,e,i,a,_r)===null?!1:_r.x>=0&&_r.y>=0&&_r.x+_r.y<=1}static getInterpolation(t,e,i,a,s,r,l,u){return this.getBarycoord(t,e,i,a,_r)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,_r.x),u.addScaledVector(r,_r.y),u.addScaledVector(l,_r.z),u)}static getInterpolatedAttribute(t,e,i,a,s,r){return iS.setScalar(0),aS.setScalar(0),sS.setScalar(0),iS.fromBufferAttribute(t,e),aS.fromBufferAttribute(t,i),sS.fromBufferAttribute(t,a),r.setScalar(0),r.addScaledVector(iS,s.x),r.addScaledVector(aS,s.y),r.addScaledVector(sS,s.z),r}static isFrontFacing(t,e,i,a){return ps.subVectors(i,e),yr.subVectors(t,e),ps.cross(yr).dot(a)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,a){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,e,i,a){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ps.subVectors(this.c,this.b),yr.subVectors(this.a,this.b),ps.cross(yr).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return aa.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return aa.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,a,s){return aa.getInterpolation(t,this.a,this.b,this.c,e,i,a,s)}containsPoint(t){return aa.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return aa.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,a=this.b,s=this.c;let r,l;ou.subVectors(a,i),lu.subVectors(s,i),tS.subVectors(t,i);const u=ou.dot(tS),f=lu.dot(tS);if(u<=0&&f<=0)return e.copy(i);eS.subVectors(t,a);const d=ou.dot(eS),p=lu.dot(eS);if(d>=0&&p<=d)return e.copy(a);const m=u*p-d*f;if(m<=0&&u>=0&&d<=0)return r=u/(u-d),e.copy(i).addScaledVector(ou,r);nS.subVectors(t,s);const g=ou.dot(nS),_=lu.dot(nS);if(_>=0&&g<=_)return e.copy(s);const E=g*f-u*_;if(E<=0&&f>=0&&_<=0)return l=f/(f-_),e.copy(i).addScaledVector(lu,l);const M=d*_-g*p;if(M<=0&&p-d>=0&&g-_>=0)return rw.subVectors(s,a),l=(p-d)/(p-d+(g-_)),e.copy(a).addScaledVector(rw,l);const v=1/(M+E+m);return r=E*v,l=m*v,e.copy(i).addScaledVector(ou,r).addScaledVector(lu,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const qO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},po={h:0,s:0,l:0},Zm={h:0,s:0,l:0};function rS(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class Zt{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const a=t;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=wi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Be.colorSpaceToWorking(this,e),this}setRGB(t,e,i,a=Be.workingColorSpace){return this.r=t,this.g=e,this.b=i,Be.colorSpaceToWorking(this,a),this}setHSL(t,e,i,a=Be.workingColorSpace){if(t=nE(t,1),e=xe(e,0,1),i=xe(i,0,1),e===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+e):i+e-i*e,r=2*i-s;this.r=rS(r,s,t+1/3),this.g=rS(r,s,t),this.b=rS(r,s,t-1/3)}return Be.colorSpaceToWorking(this,a),this}setStyle(t,e=wi){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const r=a[1],l=a[2];switch(r){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=a[1],r=s.length;if(r===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(r===6)return this.setHex(parseInt(s,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=wi){const i=qO[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Or(t.r),this.g=Or(t.g),this.b=Or(t.b),this}copyLinearToSRGB(t){return this.r=af(t.r),this.g=af(t.g),this.b=af(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=wi){return Be.workingToColorSpace(Ai.copy(this),t),Math.round(xe(Ai.r*255,0,255))*65536+Math.round(xe(Ai.g*255,0,255))*256+Math.round(xe(Ai.b*255,0,255))}getHexString(t=wi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Be.workingColorSpace){Be.workingToColorSpace(Ai.copy(this),e);const i=Ai.r,a=Ai.g,s=Ai.b,r=Math.max(i,a,s),l=Math.min(i,a,s);let u,f;const d=(l+r)/2;if(l===r)u=0,f=0;else{const p=r-l;switch(f=d<=.5?p/(r+l):p/(2-r-l),r){case i:u=(a-s)/p+(a<s?6:0);break;case a:u=(s-i)/p+2;break;case s:u=(i-a)/p+4;break}u/=6}return t.h=u,t.s=f,t.l=d,t}getRGB(t,e=Be.workingColorSpace){return Be.workingToColorSpace(Ai.copy(this),e),t.r=Ai.r,t.g=Ai.g,t.b=Ai.b,t}getStyle(t=wi){Be.workingToColorSpace(Ai.copy(this),t);const e=Ai.r,i=Ai.g,a=Ai.b;return t!==wi?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(t,e,i){return this.getHSL(po),this.setHSL(po.h+t,po.s+e,po.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(po),t.getHSL(Zm);const i=_d(po.h,Zm.h,e),a=_d(po.s,Zm.s,e),s=_d(po.l,Zm.l,e);return this.setHSL(i,a,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,a=this.b,s=t.elements;return this.r=s[0]*e+s[3]*i+s[6]*a,this.g=s[1]*e+s[4]*i+s[7]*a,this.b=s[2]*e+s[5]*i+s[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ai=new Zt;Zt.NAMES=qO;let yF=0;class zi extends $s{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yF++}),this.uuid=Na(),this.name="",this.type="Material",this.blending=ac,this.side=Ir,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=I0,this.blendDst=V0,this.blendEquation=To,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Zt(0,0,0),this.blendAlpha=0,this.depthFunc=dc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gl,this.stencilZFail=Gl,this.stencilZPass=Gl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ac&&(i.blending=this.blending),this.side!==Ir&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==I0&&(i.blendSrc=this.blendSrc),this.blendDst!==V0&&(i.blendDst=this.blendDst),this.blendEquation!==To&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==dc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==sM&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Gl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Gl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Gl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(s){const r=[];for(const l in s){const u=s[l];delete u.metadata,r.push(u)}return r}if(e){const s=a(t.textures),r=a(t.images);s.length>0&&(i.textures=s),r.length>0&&(i.images=r)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const a=e.length;i=new Array(a);for(let s=0;s!==a;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Jo extends zi{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=Rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Er=_F();function _F(){const n=new ArrayBuffer(4),t=new Float32Array(n),e=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(i[u]=0,i[u|256]=32768,a[u]=24,a[u|256]=24):f<-14?(i[u]=1024>>-f-14,i[u|256]=1024>>-f-14|32768,a[u]=-f-1,a[u|256]=-f-1):f<=15?(i[u]=f+15<<10,i[u|256]=f+15<<10|32768,a[u]=13,a[u|256]=13):f<128?(i[u]=31744,i[u|256]=64512,a[u]=24,a[u|256]=24):(i[u]=31744,i[u|256]=64512,a[u]=13,a[u|256]=13)}const s=new Uint32Array(2048),r=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,d=0;for(;!(f&8388608);)f<<=1,d-=8388608;f&=-8388609,d+=947912704,s[u]=f|d}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)r[u]=u<<23;r[31]=1199570944,r[32]=2147483648;for(let u=33;u<63;++u)r[u]=2147483648+(u-32<<23);r[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:t,uint32View:e,baseTable:i,shiftTable:a,mantissaTable:s,exponentTable:r,offsetTable:l}}function $i(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=xe(n,-65504,65504),Er.floatView[0]=n;const t=Er.uint32View[0],e=t>>23&511;return Er.baseTable[e]+((t&8388607)>>Er.shiftTable[e])}function Yh(n){const t=n>>10;return Er.uint32View[0]=Er.mantissaTable[Er.offsetTable[t]+(n&1023)]+Er.exponentTable[t],Er.floatView[0]}class xF{static toHalfFloat(t){return $i(t)}static fromHalfFloat(t){return Yh(t)}}const Gn=new V,Km=new mt;let SF=0;class rn{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:SF++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=Zd,this.updateRanges=[],this.gpuType=sa,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let a=0,s=this.itemSize;a<s;a++)this.array[t+a]=e.array[i+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Km.fromBufferAttribute(this,e),Km.applyMatrix3(t),this.setXY(e,Km.x,Km.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Gn.fromBufferAttribute(this,e),Gn.applyMatrix3(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Gn.fromBufferAttribute(this,e),Gn.applyMatrix4(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Gn.fromBufferAttribute(this,e),Gn.applyNormalMatrix(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Gn.fromBufferAttribute(this,e),Gn.transformDirection(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=ki(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Ee(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ki(e,this.array)),e}setX(t,e){return this.normalized&&(e=Ee(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ki(e,this.array)),e}setY(t,e){return this.normalized&&(e=Ee(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ki(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Ee(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ki(e,this.array)),e}setW(t,e){return this.normalized&&(e=Ee(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,a){return t*=this.itemSize,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array),a=Ee(a,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=a,this}setXYZW(t,e,i,a,s){return t*=this.itemSize,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array),a=Ee(a,this.array),s=Ee(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=a,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Zd&&(t.usage=this.usage),t}}class MF extends rn{constructor(t,e,i){super(new Int8Array(t),e,i)}}class bF extends rn{constructor(t,e,i){super(new Uint8Array(t),e,i)}}class EF extends rn{constructor(t,e,i){super(new Uint8ClampedArray(t),e,i)}}class TF extends rn{constructor(t,e,i){super(new Int16Array(t),e,i)}}class aE extends rn{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class AF extends rn{constructor(t,e,i){super(new Int32Array(t),e,i)}}class sE extends rn{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class CF extends rn{constructor(t,e,i){super(new Uint16Array(t),e,i),this.isFloat16BufferAttribute=!0}getX(t){let e=Yh(this.array[t*this.itemSize]);return this.normalized&&(e=ki(e,this.array)),e}setX(t,e){return this.normalized&&(e=Ee(e,this.array)),this.array[t*this.itemSize]=$i(e),this}getY(t){let e=Yh(this.array[t*this.itemSize+1]);return this.normalized&&(e=ki(e,this.array)),e}setY(t,e){return this.normalized&&(e=Ee(e,this.array)),this.array[t*this.itemSize+1]=$i(e),this}getZ(t){let e=Yh(this.array[t*this.itemSize+2]);return this.normalized&&(e=ki(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Ee(e,this.array)),this.array[t*this.itemSize+2]=$i(e),this}getW(t){let e=Yh(this.array[t*this.itemSize+3]);return this.normalized&&(e=ki(e,this.array)),e}setW(t,e){return this.normalized&&(e=Ee(e,this.array)),this.array[t*this.itemSize+3]=$i(e),this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array)),this.array[t+0]=$i(e),this.array[t+1]=$i(i),this}setXYZ(t,e,i,a){return t*=this.itemSize,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array),a=Ee(a,this.array)),this.array[t+0]=$i(e),this.array[t+1]=$i(i),this.array[t+2]=$i(a),this}setXYZW(t,e,i,a,s){return t*=this.itemSize,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array),a=Ee(a,this.array),s=Ee(s,this.array)),this.array[t+0]=$i(e),this.array[t+1]=$i(i),this.array[t+2]=$i(a),this.array[t+3]=$i(s),this}}class ee extends rn{constructor(t,e,i){super(new Float32Array(t),e,i)}}let wF=0;const Xa=new pe,oS=new Ge,cu=new V,Ea=new Pi,Oh=new Pi,ii=new V;class Me extends $s{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wF++}),this.uuid=Na(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(XO(t)?sE:aE)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Se().getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Xa.makeRotationFromQuaternion(t),this.applyMatrix4(Xa),this}rotateX(t){return Xa.makeRotationX(t),this.applyMatrix4(Xa),this}rotateY(t){return Xa.makeRotationY(t),this.applyMatrix4(Xa),this}rotateZ(t){return Xa.makeRotationZ(t),this.applyMatrix4(Xa),this}translate(t,e,i){return Xa.makeTranslation(t,e,i),this.applyMatrix4(Xa),this}scale(t,e,i){return Xa.makeScale(t,e,i),this.applyMatrix4(Xa),this}lookAt(t){return oS.lookAt(t),oS.updateMatrix(),this.applyMatrix4(oS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cu).negate(),this.translate(cu.x,cu.y,cu.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const i=[];for(let a=0,s=t.length;a<s;a++){const r=t[a];i.push(r.x,r.y,r.z||0)}this.setAttribute("position",new ee(i,3))}else{const i=Math.min(t.length,e.count);for(let a=0;a<i;a++){const s=t[a];e.setXYZ(a,s.x,s.y,s.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,a=e.length;i<a;i++){const s=e[i];Ea.setFromBufferAttribute(s),this.morphTargetsRelative?(ii.addVectors(this.boundingBox.min,Ea.min),this.boundingBox.expandByPoint(ii),ii.addVectors(this.boundingBox.max,Ea.max),this.boundingBox.expandByPoint(ii)):(this.boundingBox.expandByPoint(Ea.min),this.boundingBox.expandByPoint(Ea.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new yi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new V,1/0);return}if(t){const i=this.boundingSphere.center;if(Ea.setFromBufferAttribute(t),e)for(let s=0,r=e.length;s<r;s++){const l=e[s];Oh.setFromBufferAttribute(l),this.morphTargetsRelative?(ii.addVectors(Ea.min,Oh.min),Ea.expandByPoint(ii),ii.addVectors(Ea.max,Oh.max),Ea.expandByPoint(ii)):(Ea.expandByPoint(Oh.min),Ea.expandByPoint(Oh.max))}Ea.getCenter(i);let a=0;for(let s=0,r=t.count;s<r;s++)ii.fromBufferAttribute(t,s),a=Math.max(a,i.distanceToSquared(ii));if(e)for(let s=0,r=e.length;s<r;s++){const l=e[s],u=this.morphTargetsRelative;for(let f=0,d=l.count;f<d;f++)ii.fromBufferAttribute(l,f),u&&(cu.fromBufferAttribute(t,f),ii.add(cu)),a=Math.max(a,i.distanceToSquared(ii))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,a=e.normal,s=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new rn(new Float32Array(4*i.count),4));const r=this.getAttribute("tangent"),l=[],u=[];for(let U=0;U<i.count;U++)l[U]=new V,u[U]=new V;const f=new V,d=new V,p=new V,m=new mt,g=new mt,_=new mt,E=new V,M=new V;function v(U,D,C){f.fromBufferAttribute(i,U),d.fromBufferAttribute(i,D),p.fromBufferAttribute(i,C),m.fromBufferAttribute(s,U),g.fromBufferAttribute(s,D),_.fromBufferAttribute(s,C),d.sub(f),p.sub(f),g.sub(m),_.sub(m);const B=1/(g.x*_.y-_.x*g.y);isFinite(B)&&(E.copy(d).multiplyScalar(_.y).addScaledVector(p,-g.y).multiplyScalar(B),M.copy(p).multiplyScalar(g.x).addScaledVector(d,-_.x).multiplyScalar(B),l[U].add(E),l[D].add(E),l[C].add(E),u[U].add(M),u[D].add(M),u[C].add(M))}let x=this.groups;x.length===0&&(x=[{start:0,count:t.count}]);for(let U=0,D=x.length;U<D;++U){const C=x[U],B=C.start,Z=C.count;for(let q=B,it=B+Z;q<it;q+=3)v(t.getX(q+0),t.getX(q+1),t.getX(q+2))}const b=new V,T=new V,w=new V,R=new V;function N(U){w.fromBufferAttribute(a,U),R.copy(w);const D=l[U];b.copy(D),b.sub(w.multiplyScalar(w.dot(D))).normalize(),T.crossVectors(R,D);const B=T.dot(u[U])<0?-1:1;r.setXYZW(U,b.x,b.y,b.z,B)}for(let U=0,D=x.length;U<D;++U){const C=x[U],B=C.start,Z=C.count;for(let q=B,it=B+Z;q<it;q+=3)N(t.getX(q+0)),N(t.getX(q+1)),N(t.getX(q+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new rn(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const a=new V,s=new V,r=new V,l=new V,u=new V,f=new V,d=new V,p=new V;if(t)for(let m=0,g=t.count;m<g;m+=3){const _=t.getX(m+0),E=t.getX(m+1),M=t.getX(m+2);a.fromBufferAttribute(e,_),s.fromBufferAttribute(e,E),r.fromBufferAttribute(e,M),d.subVectors(r,s),p.subVectors(a,s),d.cross(p),l.fromBufferAttribute(i,_),u.fromBufferAttribute(i,E),f.fromBufferAttribute(i,M),l.add(d),u.add(d),f.add(d),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(E,u.x,u.y,u.z),i.setXYZ(M,f.x,f.y,f.z)}else for(let m=0,g=e.count;m<g;m+=3)a.fromBufferAttribute(e,m+0),s.fromBufferAttribute(e,m+1),r.fromBufferAttribute(e,m+2),d.subVectors(r,s),p.subVectors(a,s),d.cross(p),i.setXYZ(m+0,d.x,d.y,d.z),i.setXYZ(m+1,d.x,d.y,d.z),i.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)ii.fromBufferAttribute(t,e),ii.normalize(),t.setXYZ(e,ii.x,ii.y,ii.z)}toNonIndexed(){function t(l,u){const f=l.array,d=l.itemSize,p=l.normalized,m=new f.constructor(u.length*d);let g=0,_=0;for(let E=0,M=u.length;E<M;E++){l.isInterleavedBufferAttribute?g=u[E]*l.data.stride+l.offset:g=u[E]*d;for(let v=0;v<d;v++)m[_++]=f[g++]}return new rn(m,d,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Me,i=this.index.array,a=this.attributes;for(const l in a){const u=a[l],f=t(u,i);e.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const u=[],f=s[l];for(let d=0,p=f.length;d<p;d++){const m=f[d],g=t(m,i);u.push(g)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let l=0,u=r.length;l<u;l++){const f=r[l];e.addGroup(f.start,f.count,f.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(t[f]=u[f]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const u in i){const f=i[u];t.data.attributes[u]=f.toJSON(t.data)}const a={};let s=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],d=[];for(let p=0,m=f.length;p<m;p++){const g=f[p];d.push(g.toJSON(t.data))}d.length>0&&(a[u]=d,s=!0)}s&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const l=this.boundingSphere;return l!==null&&(t.data.boundingSphere=l.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone());const a=t.attributes;for(const f in a){const d=a[f];this.setAttribute(f,d.clone(e))}const s=t.morphAttributes;for(const f in s){const d=[],p=s[f];for(let m=0,g=p.length;m<g;m++)d.push(p[m].clone(e));this.morphAttributes[f]=d}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let f=0,d=r.length;f<d;f++){const p=r[f];this.addGroup(p.start,p.count,p.materialIndex)}const l=t.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ow=new pe,El=new Sc,Qm=new yi,lw=new V,Jm=new V,$m=new V,tg=new V,lS=new V,eg=new V,cw=new V,ng=new V;class jn extends Ge{constructor(t=new Me,e=new Jo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=a.length;s<r;s++){const l=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(t,e){const i=this.geometry,a=i.attributes.position,s=i.morphAttributes.position,r=i.morphTargetsRelative;e.fromBufferAttribute(a,t);const l=this.morphTargetInfluences;if(s&&l){eg.set(0,0,0);for(let u=0,f=s.length;u<f;u++){const d=l[u],p=s[u];d!==0&&(lS.fromBufferAttribute(p,t),r?eg.addScaledVector(lS,d):eg.addScaledVector(lS.sub(e),d))}e.add(eg)}return e}raycast(t,e){const i=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Qm.copy(i.boundingSphere),Qm.applyMatrix4(s),El.copy(t.ray).recast(t.near),!(Qm.containsPoint(El.origin)===!1&&(El.intersectSphere(Qm,lw)===null||El.origin.distanceToSquared(lw)>(t.far-t.near)**2))&&(ow.copy(s).invert(),El.copy(t.ray).applyMatrix4(ow),!(i.boundingBox!==null&&El.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,El)))}_computeIntersections(t,e,i){let a;const s=this.geometry,r=this.material,l=s.index,u=s.attributes.position,f=s.attributes.uv,d=s.attributes.uv1,p=s.attributes.normal,m=s.groups,g=s.drawRange;if(l!==null)if(Array.isArray(r))for(let _=0,E=m.length;_<E;_++){const M=m[_],v=r[M.materialIndex],x=Math.max(M.start,g.start),b=Math.min(l.count,Math.min(M.start+M.count,g.start+g.count));for(let T=x,w=b;T<w;T+=3){const R=l.getX(T),N=l.getX(T+1),U=l.getX(T+2);a=ig(this,v,t,i,f,d,p,R,N,U),a&&(a.faceIndex=Math.floor(T/3),a.face.materialIndex=M.materialIndex,e.push(a))}}else{const _=Math.max(0,g.start),E=Math.min(l.count,g.start+g.count);for(let M=_,v=E;M<v;M+=3){const x=l.getX(M),b=l.getX(M+1),T=l.getX(M+2);a=ig(this,r,t,i,f,d,p,x,b,T),a&&(a.faceIndex=Math.floor(M/3),e.push(a))}}else if(u!==void 0)if(Array.isArray(r))for(let _=0,E=m.length;_<E;_++){const M=m[_],v=r[M.materialIndex],x=Math.max(M.start,g.start),b=Math.min(u.count,Math.min(M.start+M.count,g.start+g.count));for(let T=x,w=b;T<w;T+=3){const R=T,N=T+1,U=T+2;a=ig(this,v,t,i,f,d,p,R,N,U),a&&(a.faceIndex=Math.floor(T/3),a.face.materialIndex=M.materialIndex,e.push(a))}}else{const _=Math.max(0,g.start),E=Math.min(u.count,g.start+g.count);for(let M=_,v=E;M<v;M+=3){const x=M,b=M+1,T=M+2;a=ig(this,r,t,i,f,d,p,x,b,T),a&&(a.faceIndex=Math.floor(M/3),e.push(a))}}}}function RF(n,t,e,i,a,s,r,l){let u;if(t.side===Oi?u=i.intersectTriangle(r,s,a,!0,l):u=i.intersectTriangle(a,s,r,t.side===Ir,l),u===null)return null;ng.copy(l),ng.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(ng);return f<e.near||f>e.far?null:{distance:f,point:ng.clone(),object:n}}function ig(n,t,e,i,a,s,r,l,u,f){n.getVertexPosition(l,Jm),n.getVertexPosition(u,$m),n.getVertexPosition(f,tg);const d=RF(n,t,e,i,Jm,$m,tg,cw);if(d){const p=new V;aa.getBarycoord(cw,Jm,$m,tg,p),a&&(d.uv=aa.getInterpolatedAttribute(a,l,u,f,p,new mt)),s&&(d.uv1=aa.getInterpolatedAttribute(s,l,u,f,p,new mt)),r&&(d.normal=aa.getInterpolatedAttribute(r,l,u,f,p,new V),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const m={a:l,b:u,c:f,normal:new V,materialIndex:0};aa.getNormal(Jm,$m,tg,m.normal),d.face=m,d.barycoord=p}return d}class Mc extends Me{constructor(t=1,e=1,i=1,a=1,s=1,r=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:a,heightSegments:s,depthSegments:r};const l=this;a=Math.floor(a),s=Math.floor(s),r=Math.floor(r);const u=[],f=[],d=[],p=[];let m=0,g=0;_("z","y","x",-1,-1,i,e,t,r,s,0),_("z","y","x",1,-1,i,e,-t,r,s,1),_("x","z","y",1,1,t,i,e,a,r,2),_("x","z","y",1,-1,t,i,-e,a,r,3),_("x","y","z",1,-1,t,e,i,a,s,4),_("x","y","z",-1,-1,t,e,-i,a,s,5),this.setIndex(u),this.setAttribute("position",new ee(f,3)),this.setAttribute("normal",new ee(d,3)),this.setAttribute("uv",new ee(p,2));function _(E,M,v,x,b,T,w,R,N,U,D){const C=T/N,B=w/U,Z=T/2,q=w/2,it=R/2,et=N+1,L=U+1;let G=0,H=0;const W=new V;for(let rt=0;rt<L;rt++){const vt=rt*B-q;for(let Dt=0;Dt<et;Dt++){const Vt=Dt*C-Z;W[E]=Vt*x,W[M]=vt*b,W[v]=it,f.push(W.x,W.y,W.z),W[E]=0,W[M]=0,W[v]=R>0?1:-1,d.push(W.x,W.y,W.z),p.push(Dt/N),p.push(1-rt/U),G+=1}}for(let rt=0;rt<U;rt++)for(let vt=0;vt<N;vt++){const Dt=m+vt+et*rt,Vt=m+vt+et*(rt+1),J=m+(vt+1)+et*(rt+1),yt=m+(vt+1)+et*rt;u.push(Dt,Vt,yt),u.push(Vt,J,yt),H+=6}l.addGroup(g,H,D),g+=H,m+=G}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Mc(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function bf(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const a=n[e][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=a.clone():Array.isArray(a)?t[e][i]=a.slice():t[e][i]=a}}return t}function Gi(n){const t={};for(let e=0;e<n.length;e++){const i=bf(n[e]);for(const a in i)t[a]=i[a]}return t}function DF(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function YO(n){const t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Be.workingColorSpace}const WO={clone:bf,merge:Gi};var NF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,UF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ms extends zi{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=NF,this.fragmentShader=UF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=bf(t.uniforms),this.uniformsGroups=DF(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const a in this.uniforms){const r=this.uniforms[a].value;r&&r.isTexture?e.uniforms[a]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[a]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[a]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[a]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[a]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[a]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[a]={type:"m4",value:r.toArray()}:e.uniforms[a]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class hy extends Ge{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pe,this.projectionMatrix=new pe,this.projectionMatrixInverse=new pe,this.coordinateSystem=ts}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const mo=new V,uw=new mt,fw=new mt;class En extends hy{constructor(t=50,e=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=Sf*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(sc*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Sf*2*Math.atan(Math.tan(sc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){mo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(mo.x,mo.y).multiplyScalar(-t/mo.z),mo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(mo.x,mo.y).multiplyScalar(-t/mo.z)}getViewSize(t,e){return this.getViewBounds(t,uw,fw),e.subVectors(fw,uw)}setViewOffset(t,e,i,a,s,r){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(sc*.5*this.fov)/this.zoom,i=2*e,a=this.aspect*i,s=-.5*a;const r=this.view;if(this.view!==null&&this.view.enabled){const u=r.fullWidth,f=r.fullHeight;s+=r.offsetX*a/u,e-=r.offsetY*i/f,a*=r.width/u,i*=r.height/f}const l=this.filmOffset;l!==0&&(s+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const uu=-90,fu=1;class ZO extends Ge{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new En(uu,fu,t,e);a.layers=this.layers,this.add(a);const s=new En(uu,fu,t,e);s.layers=this.layers,this.add(s);const r=new En(uu,fu,t,e);r.layers=this.layers,this.add(r);const l=new En(uu,fu,t,e);l.layers=this.layers,this.add(l);const u=new En(uu,fu,t,e);u.layers=this.layers,this.add(u);const f=new En(uu,fu,t,e);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[i,a,s,r,l,u]=e;for(const f of e)this.remove(f);if(t===ts)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),r.up.set(0,0,1),r.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(t===Kd)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),r.up.set(0,0,-1),r.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const f of e)this.add(f),f.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[s,r,l,u,f,d]=this.children,p=t.getRenderTarget(),m=t.getActiveCubeFace(),g=t.getActiveMipmapLevel(),_=t.xr.enabled;t.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,a),t.render(e,s),t.setRenderTarget(i,1,a),t.render(e,r),t.setRenderTarget(i,2,a),t.render(e,l),t.setRenderTarget(i,3,a),t.render(e,u),t.setRenderTarget(i,4,a),t.render(e,f),i.texture.generateMipmaps=E,t.setRenderTarget(i,5,a),t.render(e,d),t.setRenderTarget(p,m,g),t.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class Np extends Ln{constructor(t=[],e=Vr,i,a,s,r,l,u,f,d){super(t,e,i,a,s,r,l,u,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class KO extends Ks{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},a=[i,i,i,i,i,i];this.texture=new Np(a),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Mc(5,5,5),s=new Ms({name:"CubemapFromEquirect",uniforms:bf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Oi,blending:Ur});s.uniforms.tEquirect.value=e;const r=new jn(a,s),l=e.minFilter;return e.minFilter===Is&&(e.minFilter=Kn),new ZO(1,10,this).update(t,r),e.minFilter=l,r.geometry.dispose(),r.material.dispose(),this}clear(t,e=!0,i=!0,a=!0){const s=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,i,a);t.setRenderTarget(s)}}class Hu extends Ge{constructor(){super(),this.isGroup=!0,this.type="Group"}}const OF={type:"move"};class e0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Hu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Hu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Hu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let a=null,s=null,r=null;const l=this._targetRay,u=this._grip,f=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(f&&t.hand){r=!0;for(const E of t.hand.values()){const M=e.getJointPose(E,i),v=this._getHandJoint(f,E);M!==null&&(v.matrix.fromArray(M.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=M.radius),v.visible=M!==null}const d=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],m=d.position.distanceTo(p.position),g=.02,_=.005;f.inputState.pinching&&m>g+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!f.inputState.pinching&&m<=g-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,i),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(a=e.getPose(t.targetRaySpace,i),a===null&&s!==null&&(a=s),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(OF)))}return l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),f!==null&&(f.visible=r!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const i=new Hu;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class dy{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Zt(t),this.density=e}clone(){return new dy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class py{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new Zt(t),this.near=e,this.far=i}clone(){return new py(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class rE extends Ge{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Oa,this.environmentIntensity=1,this.environmentRotation=new Oa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class my{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Zd,this.updateRanges=[],this.version=0,this.uuid=Na()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let a=0,s=this.stride;a<s;a++)this.array[t+a]=e.array[i+a];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Na()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Na()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fi=new V;class pc{constructor(t,e,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)Fi.fromBufferAttribute(this,e),Fi.applyMatrix4(t),this.setXYZ(e,Fi.x,Fi.y,Fi.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Fi.fromBufferAttribute(this,e),Fi.applyNormalMatrix(t),this.setXYZ(e,Fi.x,Fi.y,Fi.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Fi.fromBufferAttribute(this,e),Fi.transformDirection(t),this.setXYZ(e,Fi.x,Fi.y,Fi.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=ki(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Ee(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=Ee(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Ee(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Ee(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Ee(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=ki(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=ki(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=ki(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=ki(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,a){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array),a=Ee(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=a,this}setXYZW(t,e,i,a,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ee(e,this.array),i=Ee(i,this.array),a=Ee(a,this.array),s=Ee(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=a,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[a+s])}return new rn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new pc(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class oE extends zi{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let hu;const Lh=new V,du=new V,pu=new V,mu=new mt,Ph=new mt,QO=new pe,ag=new V,zh=new V,sg=new V,hw=new mt,cS=new mt,dw=new mt;class JO extends Ge{constructor(t=new oE){if(super(),this.isSprite=!0,this.type="Sprite",hu===void 0){hu=new Me;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new my(e,5);hu.setIndex([0,1,2,0,2,3]),hu.setAttribute("position",new pc(i,3,0,!1)),hu.setAttribute("uv",new pc(i,2,3,!1))}this.geometry=hu,this.material=t,this.center=new mt(.5,.5),this.count=1}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),du.setFromMatrixScale(this.matrixWorld),QO.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),pu.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&du.multiplyScalar(-pu.z);const i=this.material.rotation;let a,s;i!==0&&(s=Math.cos(i),a=Math.sin(i));const r=this.center;rg(ag.set(-.5,-.5,0),pu,r,du,a,s),rg(zh.set(.5,-.5,0),pu,r,du,a,s),rg(sg.set(.5,.5,0),pu,r,du,a,s),hw.set(0,0),cS.set(1,0),dw.set(1,1);let l=t.ray.intersectTriangle(ag,zh,sg,!1,Lh);if(l===null&&(rg(zh.set(-.5,.5,0),pu,r,du,a,s),cS.set(0,1),l=t.ray.intersectTriangle(ag,sg,zh,!1,Lh),l===null))return;const u=t.ray.origin.distanceTo(Lh);u<t.near||u>t.far||e.push({distance:u,point:Lh.clone(),uv:aa.getInterpolation(Lh,ag,zh,sg,hw,cS,dw,new mt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function rg(n,t,e,i,a,s){mu.subVectors(n,e).addScalar(.5).multiply(i),a!==void 0?(Ph.x=s*mu.x-a*mu.y,Ph.y=a*mu.x+s*mu.y):Ph.copy(mu),n.copy(t),n.x+=Ph.x,n.y+=Ph.y,n.applyMatrix4(QO)}const og=new V,pw=new V;class $O extends Ge{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let i=0,a=e.length;i<a;i++){const s=e[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,i=0){e=Math.abs(e);const a=this.levels;let s;for(s=0;s<a.length&&!(e<a[s].distance);s++);return a.splice(s,0,{distance:e,hysteresis:i,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let i=0;i<e.length;i++)if(e[i].distance===t){const a=e.splice(i,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,a;for(i=1,a=e.length;i<a;i++){let s=e[i].distance;if(e[i].object.visible&&(s-=s*e[i].hysteresis),t<s)break}return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){og.setFromMatrixPosition(this.matrixWorld);const a=t.ray.origin.distanceTo(og);this.getObjectForDistance(a).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){og.setFromMatrixPosition(t.matrixWorld),pw.setFromMatrixPosition(this.matrixWorld);const i=og.distanceTo(pw)/t.zoom;e[0].object.visible=!0;let a,s;for(a=1,s=e.length;a<s;a++){let r=e[a].distance;if(e[a].object.visible&&(r-=r*e[a].hysteresis),i>=r)e[a-1].object.visible=!1,e[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<s;a++)e[a].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let a=0,s=i.length;a<s;a++){const r=i[a];e.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return e}}const mw=new V,gw=new Fe,vw=new Fe,LF=new V,yw=new pe,lg=new V,uS=new yi,_w=new pe,fS=new Sc;class tL extends jn{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=aM,this.bindMatrix=new pe,this.bindMatrixInverse=new pe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Pi),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,lg),this.boundingBox.expandByPoint(lg)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new yi),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,lg),this.boundingSphere.expandByPoint(lg)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const i=this.material,a=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uS.copy(this.boundingSphere),uS.applyMatrix4(a),t.ray.intersectsSphere(uS)!==!1&&(_w.copy(a).invert(),fS.copy(t.ray).applyMatrix4(_w),!(this.boundingBox!==null&&fS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,fS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Fe,e=this.geometry.attributes.skinWeight;for(let i=0,a=e.count;i<a;i++){t.fromBufferAttribute(e,i);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===aM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===RO?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const i=this.skeleton,a=this.geometry;gw.fromBufferAttribute(a.attributes.skinIndex,t),vw.fromBufferAttribute(a.attributes.skinWeight,t),mw.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const r=vw.getComponent(s);if(r!==0){const l=gw.getComponent(s);yw.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),e.addScaledVector(LF.copy(mw).applyMatrix4(yw),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}class lE extends Ge{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ks extends Ln{constructor(t=null,e=1,i=1,a,s,r,l,u,f=vi,d=vi,p,m){super(null,r,l,u,f,d,a,s,p,m),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const xw=new pe,PF=new pe;class gy{constructor(t=[],e=[]){this.uuid=Na(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new pe)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new pe;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let s=0,r=t.length;s<r;s++){const l=t[s]?t[s].matrixWorld:PF;xw.multiplyMatrices(l,e[s]),xw.toArray(i,s*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new gy(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new ks(e,t,t,Ni,sa);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const a=this.bones[e];if(a.name===t)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,a=t.bones.length;i<a;i++){const s=t.bones[i];let r=e[s];r===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),r=new lE),this.bones.push(r),this.boneInverses.push(new pe().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let a=0,s=e.length;a<s;a++){const r=e[a];t.bones.push(r.uuid);const l=i[a];t.boneInverses.push(l.toArray())}return t}}class Ef extends rn{constructor(t,e,i,a=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const gu=new pe,Sw=new pe,cg=[],Mw=new Pi,zF=new pe,Bh=new jn,Ih=new yi;class eL extends jn{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Ef(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<i;a++)this.setMatrixAt(a,zF)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Pi),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,gu),Mw.copy(t.boundingBox).applyMatrix4(gu),this.boundingBox.union(Mw)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new yi),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,gu),Ih.copy(t.boundingSphere).applyMatrix4(gu),this.boundingSphere.union(Ih)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const i=e.morphTargetInfluences,a=this.morphTexture.source.data.data,s=i.length+1,r=t*s+1;for(let l=0;l<i.length;l++)i[l]=a[r+l]}raycast(t,e){const i=this.matrixWorld,a=this.count;if(Bh.geometry=this.geometry,Bh.material=this.material,Bh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ih.copy(this.boundingSphere),Ih.applyMatrix4(i),t.ray.intersectsSphere(Ih)!==!1))for(let s=0;s<a;s++){this.getMatrixAt(s,gu),Sw.multiplyMatrices(i,gu),Bh.matrixWorld=Sw,Bh.raycast(t,cg);for(let r=0,l=cg.length;r<l;r++){const u=cg[r];u.instanceId=s,u.object=this,e.push(u)}cg.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Ef(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const i=e.morphTargetInfluences,a=i.length+1;this.morphTexture===null&&(this.morphTexture=new ks(new Float32Array(a*this.count),a,this.count,ry,sa));const s=this.morphTexture.source.data.data;let r=0;for(let f=0;f<i.length;f++)r+=i[f];const l=this.geometry.morphTargetsRelative?1:1-r,u=a*t;s[u]=l,s.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const hS=new V,BF=new V,IF=new Se;class Sr{constructor(t=new V(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,a){return this.normal.set(t,e,i),this.constant=a,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const a=hS.subVectors(i,e).cross(BF.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(hS),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/a;return s<0||s>1?null:e.copy(t.start).addScaledVector(i,s)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||IF.getNormalMatrix(t),a=this.coplanarPoint(hS).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Tl=new yi,VF=new mt(.5,.5),ug=new V;class Vf{constructor(t=new Sr,e=new Sr,i=new Sr,a=new Sr,s=new Sr,r=new Sr){this.planes=[t,e,i,a,s,r]}set(t,e,i,a,s,r){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(i),l[3].copy(a),l[4].copy(s),l[5].copy(r),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=ts){const i=this.planes,a=t.elements,s=a[0],r=a[1],l=a[2],u=a[3],f=a[4],d=a[5],p=a[6],m=a[7],g=a[8],_=a[9],E=a[10],M=a[11],v=a[12],x=a[13],b=a[14],T=a[15];if(i[0].setComponents(u-s,m-f,M-g,T-v).normalize(),i[1].setComponents(u+s,m+f,M+g,T+v).normalize(),i[2].setComponents(u+r,m+d,M+_,T+x).normalize(),i[3].setComponents(u-r,m-d,M-_,T-x).normalize(),i[4].setComponents(u-l,m-p,M-E,T-b).normalize(),e===ts)i[5].setComponents(u+l,m+p,M+E,T+b).normalize();else if(e===Kd)i[5].setComponents(l,p,E,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Tl.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Tl.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Tl)}intersectsSprite(t){Tl.center.set(0,0,0);const e=VF.distanceTo(t.center);return Tl.radius=.7071067811865476+e,Tl.applyMatrix4(t.matrixWorld),this.intersectsSphere(Tl)}intersectsSphere(t){const e=this.planes,i=t.center,a=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(i)<a)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const a=e[i];if(ug.x=a.normal.x>0?t.max.x:t.min.x,ug.y=a.normal.y>0?t.max.y:t.min.y,ug.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(ug)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Os=new pe,Ls=new Vf;class vy{constructor(){this.coordinateSystem=ts}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let i=0;i<e.cameras.length;i++){const a=e.cameras[i];if(Os.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ls.setFromProjectionMatrix(Os,this.coordinateSystem),Ls.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let i=0;i<e.cameras.length;i++){const a=e.cameras[i];if(Os.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ls.setFromProjectionMatrix(Os,this.coordinateSystem),Ls.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let i=0;i<e.cameras.length;i++){const a=e.cameras[i];if(Os.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ls.setFromProjectionMatrix(Os,this.coordinateSystem),Ls.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let i=0;i<e.cameras.length;i++){const a=e.cameras[i];if(Os.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ls.setFromProjectionMatrix(Os,this.coordinateSystem),Ls.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let i=0;i<e.cameras.length;i++){const a=e.cameras[i];if(Os.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Ls.setFromProjectionMatrix(Os,this.coordinateSystem),Ls.containsPoint(t))return!0}return!1}clone(){return new vy}}function dS(n,t){return n-t}function HF(n,t){return n.z-t.z}function FF(n,t){return t.z-n.z}class GF{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,i,a){const s=this.pool,r=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];r.push(l),this.index++,l.start=t,l.count=e,l.z=i,l.index=a}reset(){this.list.length=0,this.index=0}}const Ji=new pe,XF=new Zt(1,1,1),bw=new Vf,kF=new vy,fg=new Pi,Al=new yi,Vh=new V,Ew=new V,jF=new V,pS=new GF,Ci=new jn,hg=[];function qF(n,t,e=0){const i=t.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==t.array.constructor){const a=n.count;for(let s=0;s<a;s++)for(let r=0;r<i;r++)t.setComponent(s+e,r,n.getComponent(s,r))}else t.array.set(n.array,e*i);t.needsUpdate=!0}function Cl(n,t){if(n.constructor!==t.constructor){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++)t[i]=n[i]}else{const e=Math.min(n.length,t.length);t.set(new n.constructor(n.buffer,0,e))}}class nL extends jn{constructor(t,e,i=e*2,a){super(new Me,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),i=new ks(e,t,t,Ni,sa);this._matricesTexture=i}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),i=new ks(e,t,t,Dp,Hr);this._indirectTexture=i}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),i=new ks(e,t,t,Ni,sa);i.colorSpace=Be.workingColorSpace,this._colorsTexture=i}_initializeGeometry(t){const e=this.geometry,i=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in t.attributes){const r=t.getAttribute(s),{array:l,itemSize:u,normalized:f}=r,d=new l.constructor(i*u),p=new rn(d,u,f);e.setAttribute(s,p)}if(t.getIndex()!==null){const s=i>65535?new Uint32Array(a):new Uint16Array(a);e.setIndex(new rn(s,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in e.attributes){if(!t.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const a=t.getAttribute(i),s=e.getAttribute(i);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pi);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let i=0,a=e.length;i<a;i++){if(e[i].active===!1)continue;const s=e[i].geometryIndex;this.getMatrixAt(i,Ji),this.getBoundingBoxAt(s,fg).applyMatrix4(Ji),t.union(fg)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new yi);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let i=0,a=e.length;i<a;i++){if(e[i].active===!1)continue;const s=e[i].geometryIndex;this.getMatrixAt(i,Ji),this.getBoundingSphereAt(s,Al).applyMatrix4(Ji),t.union(Al)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:t};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(dS),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=i):(a=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Ji.identity().toArray(s.image.data,a*16),s.needsUpdate=!0;const r=this._colorsTexture;return r&&(XF.toArray(r.image.data,a*4),r.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(t,e=-1,i=-1){this._initializeGeometry(t),this._validateGeometry(t);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const r=t.getIndex();if(r!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=i===-1?r.count:i),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(dS),u=this._availableGeometryIds.shift(),s[u]=a):(u=this._geometryCount,this._geometryCount++,s.push(a)),this.setGeometryAt(u,t),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,u}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const i=this.geometry,a=i.getIndex()!==null,s=i.getIndex(),r=e.getIndex(),l=this._geometryInfo[t];if(a&&r.count>l.reservedIndexCount||e.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=e.getAttribute("position").count;for(const d in i.attributes){const p=e.getAttribute(d),m=i.getAttribute(d);qF(p,m,u);const g=p.itemSize;for(let _=p.count,E=f;_<E;_++){const M=u+_;for(let v=0;v<g;v++)m.setComponent(M,v,0)}m.needsUpdate=!0,m.addUpdateRange(u*g,f*g)}if(a){const d=l.indexStart,p=l.reservedIndexCount;l.indexCount=e.getIndex().count;for(let m=0;m<r.count;m++)s.setX(d+m,u+r.getX(m));for(let m=r.count,g=p;m<g;m++)s.setX(d+m,u);s.needsUpdate=!0,s.addUpdateRange(d,l.reservedIndexCount)}return l.start=a?l.indexStart:l.vertexStart,l.count=a?l.indexCount:l.vertexCount,l.boundingBox=null,e.boundingBox!==null&&(l.boundingBox=e.boundingBox.clone()),l.boundingSphere=null,e.boundingSphere!==null&&(l.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const i=this._instanceInfo;for(let a=0,s=i.length;a<s;a++)i[a].active&&i[a].geometryIndex===t&&this.deleteInstance(a);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const i=this._geometryInfo,a=i.map((r,l)=>l).sort((r,l)=>i[r].vertexStart-i[l].vertexStart),s=this.geometry;for(let r=0,l=i.length;r<l;r++){const u=a[r],f=i[u];if(f.active!==!1){if(s.index!==null){if(f.indexStart!==e){const{indexStart:d,vertexStart:p,reservedIndexCount:m}=f,g=s.index,_=g.array,E=t-p;for(let M=d;M<d+m;M++)_[M]=_[M]+E;g.array.copyWithin(e,d,d+m),g.addUpdateRange(e,m),f.indexStart=e}e+=f.reservedIndexCount}if(f.vertexStart!==t){const{vertexStart:d,reservedVertexCount:p}=f,m=s.attributes;for(const g in m){const _=m[g],{array:E,itemSize:M}=_;E.copyWithin(t*M,d*M,(d+p)*M),_.addUpdateRange(t*M,p*M)}f.vertexStart=t}t+=f.reservedVertexCount,f.start=s.index?f.indexStart:f.vertexStart,this._nextIndexStart=s.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[t];if(a.boundingBox===null){const s=new Pi,r=i.index,l=i.attributes.position;for(let u=a.start,f=a.start+a.count;u<f;u++){let d=u;r&&(d=r.getX(d)),s.expandByPoint(Vh.fromBufferAttribute(l,d))}a.boundingBox=s}return e.copy(a.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[t];if(a.boundingSphere===null){const s=new yi;this.getBoundingBoxAt(t,fg),fg.getCenter(s.center);const r=i.index,l=i.attributes.position;let u=0;for(let f=a.start,d=a.start+a.count;f<d;f++){let p=f;r&&(p=r.getX(p)),Vh.fromBufferAttribute(l,p),u=Math.max(u,s.center.distanceToSquared(Vh))}s.radius=Math.sqrt(u),a.boundingSphere=s}return e.copy(a.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const i=this._matricesTexture,a=this._matricesTexture.image.data;return e.toArray(a,t*16),i.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const i=this._geometryInfo[t];return e.vertexStart=i.vertexStart,e.vertexCount=i.vertexCount,e.reservedVertexCount=i.reservedVertexCount,e.indexStart=i.indexStart,e.indexCount=i.indexCount,e.reservedIndexCount=i.reservedIndexCount,e.start=i.start,e.count=i.count,e}setInstanceCount(t){const e=this._availableInstanceIds,i=this._instanceInfo;for(e.sort(dS);e[e.length-1]===i.length;)i.pop(),e.pop();if(t<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const a=new Int32Array(t),s=new Int32Array(t);Cl(this._multiDrawCounts,a),Cl(this._multiDrawStarts,s),this._multiDrawCounts=a,this._multiDrawStarts=s,this._maxInstanceCount=t;const r=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;r.dispose(),this._initIndirectTexture(),Cl(r.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Cl(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),Cl(u.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(u=>u.indexStart+u.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Me,this._initializeGeometry(s));const r=this.geometry;s.index&&Cl(s.index.array,r.index.array);for(const l in s.attributes)Cl(s.attributes[l].array,r.attributes[l].array)}raycast(t,e){const i=this._instanceInfo,a=this._geometryInfo,s=this.matrixWorld,r=this.geometry;Ci.material=this.material,Ci.geometry.index=r.index,Ci.geometry.attributes=r.attributes,Ci.geometry.boundingBox===null&&(Ci.geometry.boundingBox=new Pi),Ci.geometry.boundingSphere===null&&(Ci.geometry.boundingSphere=new yi);for(let l=0,u=i.length;l<u;l++){if(!i[l].visible||!i[l].active)continue;const f=i[l].geometryIndex,d=a[f];Ci.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(l,Ci.matrixWorld).premultiply(s),this.getBoundingBoxAt(f,Ci.geometry.boundingBox),this.getBoundingSphereAt(f,Ci.geometry.boundingSphere),Ci.raycast(t,hg);for(let p=0,m=hg.length;p<m;p++){const g=hg[p];g.object=this,g.batchId=l,e.push(g)}hg.length=0}Ci.material=null,Ci.geometry.index=null,Ci.geometry.attributes={},Ci.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,i,a,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const r=a.getIndex(),l=r===null?1:r.array.BYTES_PER_ELEMENT,u=this._instanceInfo,f=this._multiDrawStarts,d=this._multiDrawCounts,p=this._geometryInfo,m=this.perObjectFrustumCulled,g=this._indirectTexture,_=g.image.data,E=i.isArrayCamera?kF:bw;m&&!i.isArrayCamera&&(Ji.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),bw.setFromProjectionMatrix(Ji,t.coordinateSystem));let M=0;if(this.sortObjects){Ji.copy(this.matrixWorld).invert(),Vh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ji),Ew.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ji);for(let b=0,T=u.length;b<T;b++)if(u[b].visible&&u[b].active){const w=u[b].geometryIndex;this.getMatrixAt(b,Ji),this.getBoundingSphereAt(w,Al).applyMatrix4(Ji);let R=!1;if(m&&(R=!E.intersectsSphere(Al,i)),!R){const N=p[w],U=jF.subVectors(Al.center,Vh).dot(Ew);pS.push(N.start,N.count,U,b)}}const v=pS.list,x=this.customSort;x===null?v.sort(s.transparent?FF:HF):x.call(this,v,i);for(let b=0,T=v.length;b<T;b++){const w=v[b];f[M]=w.start*l,d[M]=w.count,_[M]=w.index,M++}pS.reset()}else for(let v=0,x=u.length;v<x;v++)if(u[v].visible&&u[v].active){const b=u[v].geometryIndex;let T=!1;if(m&&(this.getMatrixAt(v,Ji),this.getBoundingSphereAt(b,Al).applyMatrix4(Ji),T=!E.intersectsSphere(Al,i)),!T){const w=p[b];f[M]=w.start*l,d[M]=w.count,_[M]=v,M++}}g.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(t,e,i,a,s,r){this.onBeforeRender(t,null,a,s,r)}}class Wi extends zi{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Zt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const xv=new V,Sv=new V,Tw=new pe,Hh=new Sc,dg=new yi,mS=new V,Aw=new V;class jo extends Ge{constructor(t=new Me,e=new Wi){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let a=1,s=e.count;a<s;a++)xv.fromBufferAttribute(e,a-1),Sv.fromBufferAttribute(e,a),i[a]=i[a-1],i[a]+=xv.distanceTo(Sv);t.setAttribute("lineDistance",new ee(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,a=this.matrixWorld,s=t.params.Line.threshold,r=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),dg.copy(i.boundingSphere),dg.applyMatrix4(a),dg.radius+=s,t.ray.intersectsSphere(dg)===!1)return;Tw.copy(a).invert(),Hh.copy(t.ray).applyMatrix4(Tw);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=this.isLineSegments?2:1,d=i.index,m=i.attributes.position;if(d!==null){const g=Math.max(0,r.start),_=Math.min(d.count,r.start+r.count);for(let E=g,M=_-1;E<M;E+=f){const v=d.getX(E),x=d.getX(E+1),b=pg(this,t,Hh,u,v,x,E);b&&e.push(b)}if(this.isLineLoop){const E=d.getX(_-1),M=d.getX(g),v=pg(this,t,Hh,u,E,M,_-1);v&&e.push(v)}}else{const g=Math.max(0,r.start),_=Math.min(m.count,r.start+r.count);for(let E=g,M=_-1;E<M;E+=f){const v=pg(this,t,Hh,u,E,E+1,E);v&&e.push(v)}if(this.isLineLoop){const E=pg(this,t,Hh,u,_-1,g,_-1);E&&e.push(E)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=a.length;s<r;s++){const l=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function pg(n,t,e,i,a,s,r){const l=n.geometry.attributes.position;if(xv.fromBufferAttribute(l,a),Sv.fromBufferAttribute(l,s),e.distanceSqToSegment(xv,Sv,mS,Aw)>i)return;mS.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(mS);if(!(f<t.near||f>t.far))return{distance:f,point:Aw.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const Cw=new V,ww=new V;class tr extends jo{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let a=0,s=e.count;a<s;a+=2)Cw.fromBufferAttribute(e,a),ww.fromBufferAttribute(e,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+Cw.distanceTo(ww);t.setAttribute("lineDistance",new ee(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class iL extends jo{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class cE extends zi{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Rw=new pe,oM=new Sc,mg=new yi,gg=new V;class aL extends Ge{constructor(t=new Me,e=new cE){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,a=this.matrixWorld,s=t.params.Points.threshold,r=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),mg.copy(i.boundingSphere),mg.applyMatrix4(a),mg.radius+=s,t.ray.intersectsSphere(mg)===!1)return;Rw.copy(a).invert(),oM.copy(t.ray).applyMatrix4(Rw);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=i.index,p=i.attributes.position;if(f!==null){const m=Math.max(0,r.start),g=Math.min(f.count,r.start+r.count);for(let _=m,E=g;_<E;_++){const M=f.getX(_);gg.fromBufferAttribute(p,M),Dw(gg,M,u,a,t,e,this)}}else{const m=Math.max(0,r.start),g=Math.min(p.count,r.start+r.count);for(let _=m,E=g;_<E;_++)gg.fromBufferAttribute(p,_),Dw(gg,_,u,a,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=a.length;s<r;s++){const l=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Dw(n,t,e,i,a,s,r){const l=oM.distanceSqToPoint(n);if(l<e){const u=new V;oM.closestPointToPoint(n,u),u.applyMatrix4(i);const f=a.ray.origin.distanceTo(u);if(f<a.near||f>a.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:r})}}class sL extends Ln{constructor(t,e,i,a,s=Kn,r=Kn,l,u,f){super(t,e,i,a,s,r,l,u,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const d=this;function p(){d.needsUpdate=!0,t.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class YF extends sL{constructor(t,e,i,a,s,r,l,u){super({},t,e,i,a,s,r,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class WF extends Ln{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=vi,this.minFilter=vi,this.generateMipmaps=!1,this.needsUpdate=!0}}class yy extends Ln{constructor(t,e,i,a,s,r,l,u,f,d,p,m){super(null,r,l,u,f,d,a,s,p,m),this.isCompressedTexture=!0,this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class ZF extends yy{constructor(t,e,i,a,s,r){super(t,e,i,s,r),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=$a,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class KF extends yy{constructor(t,e,i){super(void 0,t[0].width,t[0].height,e,i,Vr),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class QF extends Ln{constructor(t,e,i,a,s,r,l,u,f){super(t,e,i,a,s,r,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class uE extends Ln{constructor(t,e,i=Hr,a,s,r,l=vi,u=vi,f,d=_f,p=1){if(d!==_f&&d!==xf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:t,height:e,depth:p};super(m,a,s,r,l,u,d,i,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new No(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class _y extends Me{constructor(t=1,e=1,i=4,a=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:i,radialSegments:a,heightSegments:s},e=Math.max(0,e),i=Math.max(1,Math.floor(i)),a=Math.max(3,Math.floor(a)),s=Math.max(1,Math.floor(s));const r=[],l=[],u=[],f=[],d=e/2,p=Math.PI/2*t,m=e,g=2*p+m,_=i*2+s,E=a+1,M=new V,v=new V;for(let x=0;x<=_;x++){let b=0,T=0,w=0,R=0;if(x<=i){const D=x/i,C=D*Math.PI/2;T=-d-t*Math.cos(C),w=t*Math.sin(C),R=-t*Math.cos(C),b=D*p}else if(x<=i+s){const D=(x-i)/s;T=-d+D*e,w=t,R=0,b=p+D*m}else{const D=(x-i-s)/i,C=D*Math.PI/2;T=d+t*Math.sin(C),w=t*Math.cos(C),R=t*Math.sin(C),b=p+m+D*p}const N=Math.max(0,Math.min(1,b/g));let U=0;x===0?U=.5/a:x===_&&(U=-.5/a);for(let D=0;D<=a;D++){const C=D/a,B=C*Math.PI*2,Z=Math.sin(B),q=Math.cos(B);v.x=-w*q,v.y=T,v.z=w*Z,l.push(v.x,v.y,v.z),M.set(-w*q,R,w*Z),M.normalize(),u.push(M.x,M.y,M.z),f.push(C+U,N)}if(x>0){const D=(x-1)*E;for(let C=0;C<a;C++){const B=D+C,Z=D+C+1,q=x*E+C,it=x*E+C+1;r.push(B,Z,q),r.push(Z,it,q)}}}this.setIndex(r),this.setAttribute("position",new ee(l,3)),this.setAttribute("normal",new ee(u,3)),this.setAttribute("uv",new ee(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _y(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class xy extends Me{constructor(t=1,e=32,i=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:a},e=Math.max(3,e);const s=[],r=[],l=[],u=[],f=new V,d=new mt;r.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let p=0,m=3;p<=e;p++,m+=3){const g=i+p/e*a;f.x=t*Math.cos(g),f.y=t*Math.sin(g),r.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(r[m]/t+1)/2,d.y=(r[m+1]/t+1)/2,u.push(d.x,d.y)}for(let p=1;p<=e;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new ee(r,3)),this.setAttribute("normal",new ee(l,3)),this.setAttribute("uv",new ee(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new xy(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Up extends Me{constructor(t=1,e=1,i=1,a=32,s=1,r=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:a,heightSegments:s,openEnded:r,thetaStart:l,thetaLength:u};const f=this;a=Math.floor(a),s=Math.floor(s);const d=[],p=[],m=[],g=[];let _=0;const E=[],M=i/2;let v=0;x(),r===!1&&(t>0&&b(!0),e>0&&b(!1)),this.setIndex(d),this.setAttribute("position",new ee(p,3)),this.setAttribute("normal",new ee(m,3)),this.setAttribute("uv",new ee(g,2));function x(){const T=new V,w=new V;let R=0;const N=(e-t)/i;for(let U=0;U<=s;U++){const D=[],C=U/s,B=C*(e-t)+t;for(let Z=0;Z<=a;Z++){const q=Z/a,it=q*u+l,et=Math.sin(it),L=Math.cos(it);w.x=B*et,w.y=-C*i+M,w.z=B*L,p.push(w.x,w.y,w.z),T.set(et,N,L).normalize(),m.push(T.x,T.y,T.z),g.push(q,1-C),D.push(_++)}E.push(D)}for(let U=0;U<a;U++)for(let D=0;D<s;D++){const C=E[D][U],B=E[D+1][U],Z=E[D+1][U+1],q=E[D][U+1];(t>0||D!==0)&&(d.push(C,B,q),R+=3),(e>0||D!==s-1)&&(d.push(B,Z,q),R+=3)}f.addGroup(v,R,0),v+=R}function b(T){const w=_,R=new mt,N=new V;let U=0;const D=T===!0?t:e,C=T===!0?1:-1;for(let Z=1;Z<=a;Z++)p.push(0,M*C,0),m.push(0,C,0),g.push(.5,.5),_++;const B=_;for(let Z=0;Z<=a;Z++){const it=Z/a*u+l,et=Math.cos(it),L=Math.sin(it);N.x=D*L,N.y=M*C,N.z=D*et,p.push(N.x,N.y,N.z),m.push(0,C,0),R.x=et*.5+.5,R.y=L*.5*C+.5,g.push(R.x,R.y),_++}for(let Z=0;Z<a;Z++){const q=w+Z,it=B+Z;T===!0?d.push(it,it+1,q):d.push(it+1,it,q),U+=3}f.addGroup(v,U,T===!0?1:2),v+=U}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Up(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Op extends Up{constructor(t=1,e=1,i=32,a=1,s=!1,r=0,l=Math.PI*2){super(0,t,e,i,a,s,r,l),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:r,thetaLength:l}}static fromJSON(t){return new Op(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class $o extends Me{constructor(t=[],e=[],i=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:a};const s=[],r=[];l(a),f(i),d(),this.setAttribute("position",new ee(s,3)),this.setAttribute("normal",new ee(s.slice(),3)),this.setAttribute("uv",new ee(r,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function l(x){const b=new V,T=new V,w=new V;for(let R=0;R<e.length;R+=3)g(e[R+0],b),g(e[R+1],T),g(e[R+2],w),u(b,T,w,x)}function u(x,b,T,w){const R=w+1,N=[];for(let U=0;U<=R;U++){N[U]=[];const D=x.clone().lerp(T,U/R),C=b.clone().lerp(T,U/R),B=R-U;for(let Z=0;Z<=B;Z++)Z===0&&U===R?N[U][Z]=D:N[U][Z]=D.clone().lerp(C,Z/B)}for(let U=0;U<R;U++)for(let D=0;D<2*(R-U)-1;D++){const C=Math.floor(D/2);D%2===0?(m(N[U][C+1]),m(N[U+1][C]),m(N[U][C])):(m(N[U][C+1]),m(N[U+1][C+1]),m(N[U+1][C]))}}function f(x){const b=new V;for(let T=0;T<s.length;T+=3)b.x=s[T+0],b.y=s[T+1],b.z=s[T+2],b.normalize().multiplyScalar(x),s[T+0]=b.x,s[T+1]=b.y,s[T+2]=b.z}function d(){const x=new V;for(let b=0;b<s.length;b+=3){x.x=s[b+0],x.y=s[b+1],x.z=s[b+2];const T=M(x)/2/Math.PI+.5,w=v(x)/Math.PI+.5;r.push(T,1-w)}_(),p()}function p(){for(let x=0;x<r.length;x+=6){const b=r[x+0],T=r[x+2],w=r[x+4],R=Math.max(b,T,w),N=Math.min(b,T,w);R>.9&&N<.1&&(b<.2&&(r[x+0]+=1),T<.2&&(r[x+2]+=1),w<.2&&(r[x+4]+=1))}}function m(x){s.push(x.x,x.y,x.z)}function g(x,b){const T=x*3;b.x=t[T+0],b.y=t[T+1],b.z=t[T+2]}function _(){const x=new V,b=new V,T=new V,w=new V,R=new mt,N=new mt,U=new mt;for(let D=0,C=0;D<s.length;D+=9,C+=6){x.set(s[D+0],s[D+1],s[D+2]),b.set(s[D+3],s[D+4],s[D+5]),T.set(s[D+6],s[D+7],s[D+8]),R.set(r[C+0],r[C+1]),N.set(r[C+2],r[C+3]),U.set(r[C+4],r[C+5]),w.copy(x).add(b).add(T).divideScalar(3);const B=M(w);E(R,C+0,x,B),E(N,C+2,b,B),E(U,C+4,T,B)}}function E(x,b,T,w){w<0&&x.x===1&&(r[b]=x.x-1),T.x===0&&T.z===0&&(r[b]=w/2/Math.PI+.5)}function M(x){return Math.atan2(x.z,-x.x)}function v(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new $o(t.vertices,t.indices,t.radius,t.details)}}class Sy extends $o{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,a=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],r=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,r,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Sy(t.radius,t.detail)}}const vg=new V,yg=new V,gS=new V,_g=new aa;class rL extends Me{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const a=Math.pow(10,4),s=Math.cos(sc*e),r=t.getIndex(),l=t.getAttribute("position"),u=r?r.count:l.count,f=[0,0,0],d=["a","b","c"],p=new Array(3),m={},g=[];for(let _=0;_<u;_+=3){r?(f[0]=r.getX(_),f[1]=r.getX(_+1),f[2]=r.getX(_+2)):(f[0]=_,f[1]=_+1,f[2]=_+2);const{a:E,b:M,c:v}=_g;if(E.fromBufferAttribute(l,f[0]),M.fromBufferAttribute(l,f[1]),v.fromBufferAttribute(l,f[2]),_g.getNormal(gS),p[0]=`${Math.round(E.x*a)},${Math.round(E.y*a)},${Math.round(E.z*a)}`,p[1]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,p[2]=`${Math.round(v.x*a)},${Math.round(v.y*a)},${Math.round(v.z*a)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let x=0;x<3;x++){const b=(x+1)%3,T=p[x],w=p[b],R=_g[d[x]],N=_g[d[b]],U=`${T}_${w}`,D=`${w}_${T}`;D in m&&m[D]?(gS.dot(m[D].normal)<=s&&(g.push(R.x,R.y,R.z),g.push(N.x,N.y,N.z)),m[D]=null):U in m||(m[U]={index0:f[x],index1:f[b],normal:gS.clone()})}}for(const _ in m)if(m[_]){const{index0:E,index1:M}=m[_];vg.fromBufferAttribute(l,E),yg.fromBufferAttribute(l,M),g.push(vg.x,vg.y,vg.z),g.push(yg.x,yg.y,yg.z)}this.setAttribute("position",new ee(g,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Es{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,a=this.getPoint(0),s=0;e.push(0);for(let r=1;r<=t;r++)i=this.getPoint(r/t),s+=i.distanceTo(a),e.push(s),a=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const i=this.getLengths();let a=0;const s=i.length;let r;e?r=e:r=t*i[s-1];let l=0,u=s-1,f;for(;l<=u;)if(a=Math.floor(l+(u-l)/2),f=i[a]-r,f<0)l=a+1;else if(f>0)u=a-1;else{u=a;break}if(a=u,i[a]===r)return a/(s-1);const d=i[a],m=i[a+1]-d,g=(r-d)/m;return(a+g)/(s-1)}getTangent(t,e){let a=t-1e-4,s=t+1e-4;a<0&&(a=0),s>1&&(s=1);const r=this.getPoint(a),l=this.getPoint(s),u=e||(r.isVector2?new mt:new V);return u.copy(l).sub(r).normalize(),u}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e=!1){const i=new V,a=[],s=[],r=[],l=new V,u=new pe;for(let g=0;g<=t;g++){const _=g/t;a[g]=this.getTangentAt(_,new V)}s[0]=new V,r[0]=new V;let f=Number.MAX_VALUE;const d=Math.abs(a[0].x),p=Math.abs(a[0].y),m=Math.abs(a[0].z);d<=f&&(f=d,i.set(1,0,0)),p<=f&&(f=p,i.set(0,1,0)),m<=f&&i.set(0,0,1),l.crossVectors(a[0],i).normalize(),s[0].crossVectors(a[0],l),r[0].crossVectors(a[0],s[0]);for(let g=1;g<=t;g++){if(s[g]=s[g-1].clone(),r[g]=r[g-1].clone(),l.crossVectors(a[g-1],a[g]),l.length()>Number.EPSILON){l.normalize();const _=Math.acos(xe(a[g-1].dot(a[g]),-1,1));s[g].applyMatrix4(u.makeRotationAxis(l,_))}r[g].crossVectors(a[g],s[g])}if(e===!0){let g=Math.acos(xe(s[0].dot(s[t]),-1,1));g/=t,a[0].dot(l.crossVectors(s[0],s[t]))>0&&(g=-g);for(let _=1;_<=t;_++)s[_].applyMatrix4(u.makeRotationAxis(a[_],g*_)),r[_].crossVectors(a[_],s[_])}return{tangents:a,normals:s,binormals:r}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class My extends Es{constructor(t=0,e=0,i=1,a=1,s=0,r=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=r,this.aClockwise=l,this.aRotation=u}getPoint(t,e=new mt){const i=e,a=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=a;for(;s>a;)s-=a;s<Number.EPSILON&&(r?s=0:s=a),this.aClockwise===!0&&!r&&(s===a?s=-a:s=s-a);const l=this.aStartAngle+t*s;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=u-this.aX,g=f-this.aY;u=m*d-g*p+this.aX,f=m*p+g*d+this.aY}return i.set(u,f)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class oL extends My{constructor(t,e,i,a,s,r){super(t,e,i,i,a,s,r),this.isArcCurve=!0,this.type="ArcCurve"}}function fE(){let n=0,t=0,e=0,i=0;function a(s,r,l,u){n=s,t=l,e=-3*s+3*r-2*l-u,i=2*s-2*r+l+u}return{initCatmullRom:function(s,r,l,u,f){a(r,l,f*(l-s),f*(u-r))},initNonuniformCatmullRom:function(s,r,l,u,f,d,p){let m=(r-s)/f-(l-s)/(f+d)+(l-r)/d,g=(l-r)/d-(u-r)/(d+p)+(u-l)/p;m*=d,g*=d,a(r,l,m,g)},calc:function(s){const r=s*s,l=r*s;return n+t*s+e*r+i*l}}}const xg=new V,vS=new fE,yS=new fE,_S=new fE;class lL extends Es{constructor(t=[],e=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=a}getPoint(t,e=new V){const i=e,a=this.points,s=a.length,r=(s-(this.closed?0:1))*t;let l=Math.floor(r),u=r-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&&l===s-1&&(l=s-2,u=1);let f,d;this.closed||l>0?f=a[(l-1)%s]:(xg.subVectors(a[0],a[1]).add(a[0]),f=xg);const p=a[l%s],m=a[(l+1)%s];if(this.closed||l+2<s?d=a[(l+2)%s]:(xg.subVectors(a[s-1],a[s-2]).add(a[s-1]),d=xg),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(p),g),E=Math.pow(p.distanceToSquared(m),g),M=Math.pow(m.distanceToSquared(d),g);E<1e-4&&(E=1),_<1e-4&&(_=E),M<1e-4&&(M=E),vS.initNonuniformCatmullRom(f.x,p.x,m.x,d.x,_,E,M),yS.initNonuniformCatmullRom(f.y,p.y,m.y,d.y,_,E,M),_S.initNonuniformCatmullRom(f.z,p.z,m.z,d.z,_,E,M)}else this.curveType==="catmullrom"&&(vS.initCatmullRom(f.x,p.x,m.x,d.x,this.tension),yS.initCatmullRom(f.y,p.y,m.y,d.y,this.tension),_S.initCatmullRom(f.z,p.z,m.z,d.z,this.tension));return i.set(vS.calc(u),yS.calc(u),_S.calc(u)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(a.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const a=this.points[e];t.points.push(a.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(new V().fromArray(a))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Nw(n,t,e,i,a){const s=(i-t)*.5,r=(a-e)*.5,l=n*n,u=n*l;return(2*e-2*i+s+r)*u+(-3*e+3*i-2*s-r)*l+s*n+e}function JF(n,t){const e=1-n;return e*e*t}function $F(n,t){return 2*(1-n)*n*t}function t6(n,t){return n*n*t}function xd(n,t,e,i){return JF(n,t)+$F(n,e)+t6(n,i)}function e6(n,t){const e=1-n;return e*e*e*t}function n6(n,t){const e=1-n;return 3*e*e*n*t}function i6(n,t){return 3*(1-n)*n*n*t}function a6(n,t){return n*n*n*t}function Sd(n,t,e,i,a){return e6(n,t)+n6(n,e)+i6(n,i)+a6(n,a)}class hE extends Es{constructor(t=new mt,e=new mt,i=new mt,a=new mt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=a}getPoint(t,e=new mt){const i=e,a=this.v0,s=this.v1,r=this.v2,l=this.v3;return i.set(Sd(t,a.x,s.x,r.x,l.x),Sd(t,a.y,s.y,r.y,l.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class cL extends Es{constructor(t=new V,e=new V,i=new V,a=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=a}getPoint(t,e=new V){const i=e,a=this.v0,s=this.v1,r=this.v2,l=this.v3;return i.set(Sd(t,a.x,s.x,r.x,l.x),Sd(t,a.y,s.y,r.y,l.y),Sd(t,a.z,s.z,r.z,l.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class dE extends Es{constructor(t=new mt,e=new mt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new mt){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new mt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class uL extends Es{constructor(t=new V,e=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new V){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new V){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class pE extends Es{constructor(t=new mt,e=new mt,i=new mt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new mt){const i=e,a=this.v0,s=this.v1,r=this.v2;return i.set(xd(t,a.x,s.x,r.x),xd(t,a.y,s.y,r.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class mE extends Es{constructor(t=new V,e=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new V){const i=e,a=this.v0,s=this.v1,r=this.v2;return i.set(xd(t,a.x,s.x,r.x),xd(t,a.y,s.y,r.y),xd(t,a.z,s.z,r.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class gE extends Es{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new mt){const i=e,a=this.points,s=(a.length-1)*t,r=Math.floor(s),l=s-r,u=a[r===0?r:r-1],f=a[r],d=a[r>a.length-2?a.length-1:r+1],p=a[r>a.length-3?a.length-1:r+2];return i.set(Nw(l,u.x,f.x,d.x,p.x),Nw(l,u.y,f.y,d.y,p.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const a=this.points[e];t.points.push(a.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(new mt().fromArray(a))}return this}}var Mv=Object.freeze({__proto__:null,ArcCurve:oL,CatmullRomCurve3:lL,CubicBezierCurve:hE,CubicBezierCurve3:cL,EllipseCurve:My,LineCurve:dE,LineCurve3:uL,QuadraticBezierCurve:pE,QuadraticBezierCurve3:mE,SplineCurve:gE});class fL extends Es{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const i=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Mv[i](e,t))}return this}getPoint(t,e){const i=t*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=i){const r=a[s]-i,l=this.curves[s],u=l.getLength(),f=u===0?0:1-r/u;return l.getPointAt(f,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,a=this.curves.length;i<a;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let a=0,s=this.curves;a<s.length;a++){const r=s[a],l=r.isEllipseCurve?t*2:r.isLineCurve||r.isLineCurve3?1:r.isSplineCurve?t*r.points.length:t,u=r.getPoints(l);for(let f=0;f<u.length;f++){const d=u[f];i&&i.equals(d)||(e.push(d),i=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const a=t.curves[e];this.curves.push(a.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const a=this.curves[e];t.curves.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const a=t.curves[e];this.curves.push(new Mv[a.type]().fromJSON(a))}return this}}class bv extends fL{constructor(t){super(),this.type="Path",this.currentPoint=new mt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new dE(this.currentPoint.clone(),new mt(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,a){const s=new pE(this.currentPoint.clone(),new mt(t,e),new mt(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}bezierCurveTo(t,e,i,a,s,r){const l=new hE(this.currentPoint.clone(),new mt(t,e),new mt(i,a),new mt(s,r));return this.curves.push(l),this.currentPoint.set(s,r),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new gE(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,a,s,r){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(t+l,e+u,i,a,s,r),this}absarc(t,e,i,a,s,r){return this.absellipse(t,e,i,i,a,s,r),this}ellipse(t,e,i,a,s,r,l,u){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+f,e+d,i,a,s,r,l,u),this}absellipse(t,e,i,a,s,r,l,u){const f=new My(t,e,i,a,s,r,l,u);if(this.curves.length>0){const p=f.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class rc extends bv{constructor(t){super(t),this.uuid=Na(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,a=this.holes.length;i<a;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const a=t.holes[e];this.holes.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const a=this.holes[e];t.holes.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const a=t.holes[e];this.holes.push(new bv().fromJSON(a))}return this}}function s6(n,t,e=2){const i=t&&t.length,a=i?t[0]*e:n.length;let s=hL(n,0,a,e,!0);const r=[];if(!s||s.next===s.prev)return r;let l,u,f;if(i&&(s=u6(n,t,s,e)),n.length>80*e){l=1/0,u=1/0;let d=-1/0,p=-1/0;for(let m=e;m<a;m+=e){const g=n[m],_=n[m+1];g<l&&(l=g),_<u&&(u=_),g>d&&(d=g),_>p&&(p=_)}f=Math.max(d-l,p-u),f=f!==0?32767/f:0}return Jd(s,r,e,l,u,f,0),r}function hL(n,t,e,i,a){let s;if(a===S6(n,t,e,i)>0)for(let r=t;r<e;r+=i)s=Uw(r/i|0,n[r],n[r+1],s);else for(let r=e-i;r>=t;r-=i)s=Uw(r/i|0,n[r],n[r+1],s);return s&&Tf(s,s.next)&&(tp(s),s=s.next),s}function mc(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(Tf(e,e.next)||Tn(e.prev,e,e.next)===0)){if(tp(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Jd(n,t,e,i,a,s,r){if(!n)return;!r&&s&&m6(n,i,a,s);let l=n;for(;n.prev!==n.next;){const u=n.prev,f=n.next;if(s?o6(n,i,a,s):r6(n)){t.push(u.i,n.i,f.i),tp(n),n=f.next,l=f.next;continue}if(n=f,n===l){r?r===1?(n=l6(mc(n),t),Jd(n,t,e,i,a,s,2)):r===2&&c6(n,t,e,i,a,s):Jd(mc(n),t,e,i,a,s,1);break}}}function r6(n){const t=n.prev,e=n,i=n.next;if(Tn(t,e,i)>=0)return!1;const a=t.x,s=e.x,r=i.x,l=t.y,u=e.y,f=i.y,d=Math.min(a,s,r),p=Math.min(l,u,f),m=Math.max(a,s,r),g=Math.max(l,u,f);let _=i.next;for(;_!==t;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&Wh(a,l,s,u,r,f,_.x,_.y)&&Tn(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function o6(n,t,e,i){const a=n.prev,s=n,r=n.next;if(Tn(a,s,r)>=0)return!1;const l=a.x,u=s.x,f=r.x,d=a.y,p=s.y,m=r.y,g=Math.min(l,u,f),_=Math.min(d,p,m),E=Math.max(l,u,f),M=Math.max(d,p,m),v=lM(g,_,t,e,i),x=lM(E,M,t,e,i);let b=n.prevZ,T=n.nextZ;for(;b&&b.z>=v&&T&&T.z<=x;){if(b.x>=g&&b.x<=E&&b.y>=_&&b.y<=M&&b!==a&&b!==r&&Wh(l,d,u,p,f,m,b.x,b.y)&&Tn(b.prev,b,b.next)>=0||(b=b.prevZ,T.x>=g&&T.x<=E&&T.y>=_&&T.y<=M&&T!==a&&T!==r&&Wh(l,d,u,p,f,m,T.x,T.y)&&Tn(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;b&&b.z>=v;){if(b.x>=g&&b.x<=E&&b.y>=_&&b.y<=M&&b!==a&&b!==r&&Wh(l,d,u,p,f,m,b.x,b.y)&&Tn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;T&&T.z<=x;){if(T.x>=g&&T.x<=E&&T.y>=_&&T.y<=M&&T!==a&&T!==r&&Wh(l,d,u,p,f,m,T.x,T.y)&&Tn(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function l6(n,t){let e=n;do{const i=e.prev,a=e.next.next;!Tf(i,a)&&pL(i,e,e.next,a)&&$d(i,a)&&$d(a,i)&&(t.push(i.i,e.i,a.i),tp(e),tp(e.next),e=n=a),e=e.next}while(e!==n);return mc(e)}function c6(n,t,e,i,a,s){let r=n;do{let l=r.next.next;for(;l!==r.prev;){if(r.i!==l.i&&y6(r,l)){let u=mL(r,l);r=mc(r,r.next),u=mc(u,u.next),Jd(r,t,e,i,a,s,0),Jd(u,t,e,i,a,s,0);return}l=l.next}r=r.next}while(r!==n)}function u6(n,t,e,i){const a=[];for(let s=0,r=t.length;s<r;s++){const l=t[s]*i,u=s<r-1?t[s+1]*i:n.length,f=hL(n,l,u,i,!1);f===f.next&&(f.steiner=!0),a.push(v6(f))}a.sort(f6);for(let s=0;s<a.length;s++)e=h6(a[s],e);return e}function f6(n,t){let e=n.x-t.x;if(e===0&&(e=n.y-t.y,e===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=i-a}return e}function h6(n,t){const e=d6(n,t);if(!e)return t;const i=mL(e,n);return mc(i,i.next),mc(e,e.next)}function d6(n,t){let e=t;const i=n.x,a=n.y;let s=-1/0,r;if(Tf(n,e))return e;do{if(Tf(n,e.next))return e.next;if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const p=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(p<=i&&p>s&&(s=p,r=e.x<e.next.x?e:e.next,p===i))return r}e=e.next}while(e!==t);if(!r)return null;const l=r,u=r.x,f=r.y;let d=1/0;e=r;do{if(i>=e.x&&e.x>=u&&i!==e.x&&dL(a<f?i:s,a,u,f,a<f?s:i,a,e.x,e.y)){const p=Math.abs(a-e.y)/(i-e.x);$d(e,n)&&(p<d||p===d&&(e.x>r.x||e.x===r.x&&p6(r,e)))&&(r=e,d=p)}e=e.next}while(e!==l);return r}function p6(n,t){return Tn(n.prev,n,t.prev)<0&&Tn(t.next,n,n.next)<0}function m6(n,t,e,i){let a=n;do a.z===0&&(a.z=lM(a.x,a.y,t,e,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,g6(a)}function g6(n){let t,e=1;do{let i=n,a;n=null;let s=null;for(t=0;i;){t++;let r=i,l=0;for(let f=0;f<e&&(l++,r=r.nextZ,!!r);f++);let u=e;for(;l>0||u>0&&r;)l!==0&&(u===0||!r||i.z<=r.z)?(a=i,i=i.nextZ,l--):(a=r,r=r.nextZ,u--),s?s.nextZ=a:n=a,a.prevZ=s,s=a;i=r}s.nextZ=null,e*=2}while(t>1);return n}function lM(n,t,e,i,a){return n=(n-e)*a|0,t=(t-i)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function v6(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function dL(n,t,e,i,a,s,r,l){return(a-r)*(t-l)>=(n-r)*(s-l)&&(n-r)*(i-l)>=(e-r)*(t-l)&&(e-r)*(s-l)>=(a-r)*(i-l)}function Wh(n,t,e,i,a,s,r,l){return!(n===r&&t===l)&&dL(n,t,e,i,a,s,r,l)}function y6(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!_6(n,t)&&($d(n,t)&&$d(t,n)&&x6(n,t)&&(Tn(n.prev,n,t.prev)||Tn(n,t.prev,t))||Tf(n,t)&&Tn(n.prev,n,n.next)>0&&Tn(t.prev,t,t.next)>0)}function Tn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Tf(n,t){return n.x===t.x&&n.y===t.y}function pL(n,t,e,i){const a=Mg(Tn(n,t,e)),s=Mg(Tn(n,t,i)),r=Mg(Tn(e,i,n)),l=Mg(Tn(e,i,t));return!!(a!==s&&r!==l||a===0&&Sg(n,e,t)||s===0&&Sg(n,i,t)||r===0&&Sg(e,n,i)||l===0&&Sg(e,t,i))}function Sg(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Mg(n){return n>0?1:n<0?-1:0}function _6(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&pL(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function $d(n,t){return Tn(n.prev,n,n.next)<0?Tn(n,t,n.next)>=0&&Tn(n,n.prev,t)>=0:Tn(n,t,n.prev)<0||Tn(n,n.next,t)<0}function x6(n,t){let e=n,i=!1;const a=(n.x+t.x)/2,s=(n.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&a<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function mL(n,t){const e=cM(n.i,n.x,n.y),i=cM(t.i,t.x,t.y),a=n.next,s=t.prev;return n.next=t,t.prev=n,e.next=a,a.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function Uw(n,t,e,i){const a=cM(n,t,e);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function tp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function cM(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function S6(n,t,e,i){let a=0;for(let s=t,r=e-i;s<e;s+=i)a+=(n[r]-n[s])*(n[s+1]+n[r+1]),r=s;return a}class M6{static triangulate(t,e,i=2){return s6(t,e,i)}}class xs{static area(t){const e=t.length;let i=0;for(let a=e-1,s=0;s<e;a=s++)i+=t[a].x*t[s].y-t[s].x*t[a].y;return i*.5}static isClockWise(t){return xs.area(t)<0}static triangulateShape(t,e){const i=[],a=[],s=[];Ow(t),Lw(i,t);let r=t.length;e.forEach(Ow);for(let u=0;u<e.length;u++)a.push(r),r+=e[u].length,Lw(i,e[u]);const l=M6.triangulate(i,a);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function Ow(n){const t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function Lw(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}class by extends Me{constructor(t=new rc([new mt(.5,.5),new mt(-.5,.5),new mt(-.5,-.5),new mt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,a=[],s=[];for(let l=0,u=t.length;l<u;l++){const f=t[l];r(f)}this.setAttribute("position",new ee(a,3)),this.setAttribute("uv",new ee(s,2)),this.computeVertexNormals();function r(l){const u=[],f=e.curveSegments!==void 0?e.curveSegments:12,d=e.steps!==void 0?e.steps:1,p=e.depth!==void 0?e.depth:1;let m=e.bevelEnabled!==void 0?e.bevelEnabled:!0,g=e.bevelThickness!==void 0?e.bevelThickness:.2,_=e.bevelSize!==void 0?e.bevelSize:g-.1,E=e.bevelOffset!==void 0?e.bevelOffset:0,M=e.bevelSegments!==void 0?e.bevelSegments:3;const v=e.extrudePath,x=e.UVGenerator!==void 0?e.UVGenerator:b6;let b,T=!1,w,R,N,U;v&&(b=v.getSpacedPoints(d),T=!0,m=!1,w=v.computeFrenetFrames(d,!1),R=new V,N=new V,U=new V),m||(M=0,g=0,_=0,E=0);const D=l.extractPoints(f);let C=D.shape;const B=D.holes;if(!xs.isClockWise(C)){C=C.reverse();for(let I=0,Nt=B.length;I<Nt;I++){const Et=B[I];xs.isClockWise(Et)&&(B[I]=Et.reverse())}}function q(I){const Et=10000000000000001e-36;let Tt=I[0];for(let dt=1;dt<=I.length;dt++){const zt=dt%I.length,bt=I[zt],Ht=bt.x-Tt.x,fe=bt.y-Tt.y,F=Ht*Ht+fe*fe,O=Math.max(Math.abs(bt.x),Math.abs(bt.y),Math.abs(Tt.x),Math.abs(Tt.y)),nt=Et*O*O;if(F<=nt){I.splice(zt,1),dt--;continue}Tt=bt}}q(C),B.forEach(q);const it=B.length,et=C;for(let I=0;I<it;I++){const Nt=B[I];C=C.concat(Nt)}function L(I,Nt,Et){return Nt||console.error("THREE.ExtrudeGeometry: vec does not exist"),I.clone().addScaledVector(Nt,Et)}const G=C.length;function H(I,Nt,Et){let Tt,dt,zt;const bt=I.x-Nt.x,Ht=I.y-Nt.y,fe=Et.x-I.x,F=Et.y-I.y,O=bt*bt+Ht*Ht,nt=bt*F-Ht*fe;if(Math.abs(nt)>Number.EPSILON){const ft=Math.sqrt(O),pt=Math.sqrt(fe*fe+F*F),ht=Nt.x-Ht/ft,te=Nt.y+bt/ft,Pt=Et.x-F/pt,Qt=Et.y+fe/pt,Jt=((Pt-ht)*F-(Qt-te)*fe)/(bt*F-Ht*fe);Tt=ht+bt*Jt-I.x,dt=te+Ht*Jt-I.y;const xt=Tt*Tt+dt*dt;if(xt<=2)return new mt(Tt,dt);zt=Math.sqrt(xt/2)}else{let ft=!1;bt>Number.EPSILON?fe>Number.EPSILON&&(ft=!0):bt<-Number.EPSILON?fe<-Number.EPSILON&&(ft=!0):Math.sign(Ht)===Math.sign(F)&&(ft=!0),ft?(Tt=-Ht,dt=bt,zt=Math.sqrt(O)):(Tt=bt,dt=Ht,zt=Math.sqrt(O/2))}return new mt(Tt/zt,dt/zt)}const W=[];for(let I=0,Nt=et.length,Et=Nt-1,Tt=I+1;I<Nt;I++,Et++,Tt++)Et===Nt&&(Et=0),Tt===Nt&&(Tt=0),W[I]=H(et[I],et[Et],et[Tt]);const rt=[];let vt,Dt=W.concat();for(let I=0,Nt=it;I<Nt;I++){const Et=B[I];vt=[];for(let Tt=0,dt=Et.length,zt=dt-1,bt=Tt+1;Tt<dt;Tt++,zt++,bt++)zt===dt&&(zt=0),bt===dt&&(bt=0),vt[Tt]=H(Et[Tt],Et[zt],Et[bt]);rt.push(vt),Dt=Dt.concat(vt)}let Vt;if(M===0)Vt=xs.triangulateShape(et,B);else{const I=[],Nt=[];for(let Et=0;Et<M;Et++){const Tt=Et/M,dt=g*Math.cos(Tt*Math.PI/2),zt=_*Math.sin(Tt*Math.PI/2)+E;for(let bt=0,Ht=et.length;bt<Ht;bt++){const fe=L(et[bt],W[bt],zt);he(fe.x,fe.y,-dt),Tt===0&&I.push(fe)}for(let bt=0,Ht=it;bt<Ht;bt++){const fe=B[bt];vt=rt[bt];const F=[];for(let O=0,nt=fe.length;O<nt;O++){const ft=L(fe[O],vt[O],zt);he(ft.x,ft.y,-dt),Tt===0&&F.push(ft)}Tt===0&&Nt.push(F)}}Vt=xs.triangulateShape(I,Nt)}const J=Vt.length,yt=_+E;for(let I=0;I<G;I++){const Nt=m?L(C[I],Dt[I],yt):C[I];T?(N.copy(w.normals[0]).multiplyScalar(Nt.x),R.copy(w.binormals[0]).multiplyScalar(Nt.y),U.copy(b[0]).add(N).add(R),he(U.x,U.y,U.z)):he(Nt.x,Nt.y,0)}for(let I=1;I<=d;I++)for(let Nt=0;Nt<G;Nt++){const Et=m?L(C[Nt],Dt[Nt],yt):C[Nt];T?(N.copy(w.normals[I]).multiplyScalar(Et.x),R.copy(w.binormals[I]).multiplyScalar(Et.y),U.copy(b[I]).add(N).add(R),he(U.x,U.y,U.z)):he(Et.x,Et.y,p/d*I)}for(let I=M-1;I>=0;I--){const Nt=I/M,Et=g*Math.cos(Nt*Math.PI/2),Tt=_*Math.sin(Nt*Math.PI/2)+E;for(let dt=0,zt=et.length;dt<zt;dt++){const bt=L(et[dt],W[dt],Tt);he(bt.x,bt.y,p+Et)}for(let dt=0,zt=B.length;dt<zt;dt++){const bt=B[dt];vt=rt[dt];for(let Ht=0,fe=bt.length;Ht<fe;Ht++){const F=L(bt[Ht],vt[Ht],Tt);T?he(F.x,F.y+b[d-1].y,b[d-1].x+Et):he(F.x,F.y,p+Et)}}}Yt(),Lt();function Yt(){const I=a.length/3;if(m){let Nt=0,Et=G*Nt;for(let Tt=0;Tt<J;Tt++){const dt=Vt[Tt];qt(dt[2]+Et,dt[1]+Et,dt[0]+Et)}Nt=d+M*2,Et=G*Nt;for(let Tt=0;Tt<J;Tt++){const dt=Vt[Tt];qt(dt[0]+Et,dt[1]+Et,dt[2]+Et)}}else{for(let Nt=0;Nt<J;Nt++){const Et=Vt[Nt];qt(Et[2],Et[1],Et[0])}for(let Nt=0;Nt<J;Nt++){const Et=Vt[Nt];qt(Et[0]+G*d,Et[1]+G*d,Et[2]+G*d)}}i.addGroup(I,a.length/3-I,0)}function Lt(){const I=a.length/3;let Nt=0;Xt(et,Nt),Nt+=et.length;for(let Et=0,Tt=B.length;Et<Tt;Et++){const dt=B[Et];Xt(dt,Nt),Nt+=dt.length}i.addGroup(I,a.length/3-I,1)}function Xt(I,Nt){let Et=I.length;for(;--Et>=0;){const Tt=Et;let dt=Et-1;dt<0&&(dt=I.length-1);for(let zt=0,bt=d+M*2;zt<bt;zt++){const Ht=G*zt,fe=G*(zt+1),F=Nt+Tt+Ht,O=Nt+dt+Ht,nt=Nt+dt+fe,ft=Nt+Tt+fe;ie(F,O,nt,ft)}}}function he(I,Nt,Et){u.push(I),u.push(Nt),u.push(Et)}function qt(I,Nt,Et){ue(I),ue(Nt),ue(Et);const Tt=a.length/3,dt=x.generateTopUV(i,a,Tt-3,Tt-2,Tt-1);ne(dt[0]),ne(dt[1]),ne(dt[2])}function ie(I,Nt,Et,Tt){ue(I),ue(Nt),ue(Tt),ue(Nt),ue(Et),ue(Tt);const dt=a.length/3,zt=x.generateSideWallUV(i,a,dt-6,dt-3,dt-2,dt-1);ne(zt[0]),ne(zt[1]),ne(zt[3]),ne(zt[1]),ne(zt[2]),ne(zt[3])}function ue(I){a.push(u[I*3+0]),a.push(u[I*3+1]),a.push(u[I*3+2])}function ne(I){s.push(I.x),s.push(I.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return E6(e,i,t)}static fromJSON(t,e){const i=[];for(let s=0,r=t.shapes.length;s<r;s++){const l=e[t.shapes[s]];i.push(l)}const a=t.options.extrudePath;return a!==void 0&&(t.options.extrudePath=new Mv[a.type]().fromJSON(a)),new by(i,t.options)}}const b6={generateTopUV:function(n,t,e,i,a){const s=t[e*3],r=t[e*3+1],l=t[i*3],u=t[i*3+1],f=t[a*3],d=t[a*3+1];return[new mt(s,r),new mt(l,u),new mt(f,d)]},generateSideWallUV:function(n,t,e,i,a,s){const r=t[e*3],l=t[e*3+1],u=t[e*3+2],f=t[i*3],d=t[i*3+1],p=t[i*3+2],m=t[a*3],g=t[a*3+1],_=t[a*3+2],E=t[s*3],M=t[s*3+1],v=t[s*3+2];return Math.abs(l-d)<Math.abs(r-f)?[new mt(r,1-u),new mt(f,1-p),new mt(m,1-_),new mt(E,1-v)]:[new mt(l,1-u),new mt(d,1-p),new mt(g,1-_),new mt(M,1-v)]}};function E6(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,a=n.length;i<a;i++){const s=n[i];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class Ey extends $o{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,a=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Ey(t.radius,t.detail)}}class Ty extends Me{constructor(t=[new mt(0,-.5),new mt(.5,0),new mt(0,.5)],e=12,i=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:a},e=Math.floor(e),a=xe(a,0,Math.PI*2);const s=[],r=[],l=[],u=[],f=[],d=1/e,p=new V,m=new mt,g=new V,_=new V,E=new V;let M=0,v=0;for(let x=0;x<=t.length-1;x++)switch(x){case 0:M=t[x+1].x-t[x].x,v=t[x+1].y-t[x].y,g.x=v*1,g.y=-M,g.z=v*0,E.copy(g),g.normalize(),u.push(g.x,g.y,g.z);break;case t.length-1:u.push(E.x,E.y,E.z);break;default:M=t[x+1].x-t[x].x,v=t[x+1].y-t[x].y,g.x=v*1,g.y=-M,g.z=v*0,_.copy(g),g.x+=E.x,g.y+=E.y,g.z+=E.z,g.normalize(),u.push(g.x,g.y,g.z),E.copy(_)}for(let x=0;x<=e;x++){const b=i+x*d*a,T=Math.sin(b),w=Math.cos(b);for(let R=0;R<=t.length-1;R++){p.x=t[R].x*T,p.y=t[R].y,p.z=t[R].x*w,r.push(p.x,p.y,p.z),m.x=x/e,m.y=R/(t.length-1),l.push(m.x,m.y);const N=u[3*R+0]*T,U=u[3*R+1],D=u[3*R+0]*w;f.push(N,U,D)}}for(let x=0;x<e;x++)for(let b=0;b<t.length-1;b++){const T=b+x*t.length,w=T,R=T+t.length,N=T+t.length+1,U=T+1;s.push(w,R,U),s.push(N,U,R)}this.setIndex(s),this.setAttribute("position",new ee(r,3)),this.setAttribute("uv",new ee(l,2)),this.setAttribute("normal",new ee(f,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ty(t.points,t.segments,t.phiStart,t.phiLength)}}class Lp extends $o{constructor(t=1,e=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,a,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Lp(t.radius,t.detail)}}class Hf extends Me{constructor(t=1,e=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:a};const s=t/2,r=e/2,l=Math.floor(i),u=Math.floor(a),f=l+1,d=u+1,p=t/l,m=e/u,g=[],_=[],E=[],M=[];for(let v=0;v<d;v++){const x=v*m-r;for(let b=0;b<f;b++){const T=b*p-s;_.push(T,-x,0),E.push(0,0,1),M.push(b/l),M.push(1-v/u)}}for(let v=0;v<u;v++)for(let x=0;x<l;x++){const b=x+f*v,T=x+f*(v+1),w=x+1+f*(v+1),R=x+1+f*v;g.push(b,T,R),g.push(T,w,R)}this.setIndex(g),this.setAttribute("position",new ee(_,3)),this.setAttribute("normal",new ee(E,3)),this.setAttribute("uv",new ee(M,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Hf(t.width,t.height,t.widthSegments,t.heightSegments)}}class Ay extends Me{constructor(t=.5,e=1,i=32,a=1,s=0,r=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:a,thetaStart:s,thetaLength:r},i=Math.max(3,i),a=Math.max(1,a);const l=[],u=[],f=[],d=[];let p=t;const m=(e-t)/a,g=new V,_=new mt;for(let E=0;E<=a;E++){for(let M=0;M<=i;M++){const v=s+M/i*r;g.x=p*Math.cos(v),g.y=p*Math.sin(v),u.push(g.x,g.y,g.z),f.push(0,0,1),_.x=(g.x/e+1)/2,_.y=(g.y/e+1)/2,d.push(_.x,_.y)}p+=m}for(let E=0;E<a;E++){const M=E*(i+1);for(let v=0;v<i;v++){const x=v+M,b=x,T=x+i+1,w=x+i+2,R=x+1;l.push(b,T,R),l.push(T,w,R)}}this.setIndex(l),this.setAttribute("position",new ee(u,3)),this.setAttribute("normal",new ee(f,3)),this.setAttribute("uv",new ee(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ay(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class Cy extends Me{constructor(t=new rc([new mt(0,.5),new mt(-.5,-.5),new mt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],a=[],s=[],r=[];let l=0,u=0;if(Array.isArray(t)===!1)f(t);else for(let d=0;d<t.length;d++)f(t[d]),this.addGroup(l,u,d),l+=u,u=0;this.setIndex(i),this.setAttribute("position",new ee(a,3)),this.setAttribute("normal",new ee(s,3)),this.setAttribute("uv",new ee(r,2));function f(d){const p=a.length/3,m=d.extractPoints(e);let g=m.shape;const _=m.holes;xs.isClockWise(g)===!1&&(g=g.reverse());for(let M=0,v=_.length;M<v;M++){const x=_[M];xs.isClockWise(x)===!0&&(_[M]=x.reverse())}const E=xs.triangulateShape(g,_);for(let M=0,v=_.length;M<v;M++){const x=_[M];g=g.concat(x)}for(let M=0,v=g.length;M<v;M++){const x=g[M];a.push(x.x,x.y,0),s.push(0,0,1),r.push(x.x,x.y)}for(let M=0,v=E.length;M<v;M++){const x=E[M],b=x[0]+p,T=x[1]+p,w=x[2]+p;i.push(b,T,w),u+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return T6(e,t)}static fromJSON(t,e){const i=[];for(let a=0,s=t.shapes.length;a<s;a++){const r=e[t.shapes[a]];i.push(r)}return new Cy(i,t.curveSegments)}}function T6(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const a=n[e];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t}class Pp extends Me{constructor(t=1,e=32,i=16,a=0,s=Math.PI*2,r=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:a,phiLength:s,thetaStart:r,thetaLength:l},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const u=Math.min(r+l,Math.PI);let f=0;const d=[],p=new V,m=new V,g=[],_=[],E=[],M=[];for(let v=0;v<=i;v++){const x=[],b=v/i;let T=0;v===0&&r===0?T=.5/e:v===i&&u===Math.PI&&(T=-.5/e);for(let w=0;w<=e;w++){const R=w/e;p.x=-t*Math.cos(a+R*s)*Math.sin(r+b*l),p.y=t*Math.cos(r+b*l),p.z=t*Math.sin(a+R*s)*Math.sin(r+b*l),_.push(p.x,p.y,p.z),m.copy(p).normalize(),E.push(m.x,m.y,m.z),M.push(R+T,1-b),x.push(f++)}d.push(x)}for(let v=0;v<i;v++)for(let x=0;x<e;x++){const b=d[v][x+1],T=d[v][x],w=d[v+1][x],R=d[v+1][x+1];(v!==0||r>0)&&g.push(b,T,R),(v!==i-1||u<Math.PI)&&g.push(T,w,R)}this.setIndex(g),this.setAttribute("position",new ee(_,3)),this.setAttribute("normal",new ee(E,3)),this.setAttribute("uv",new ee(M,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Pp(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class wy extends $o{constructor(t=1,e=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,a,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new wy(t.radius,t.detail)}}class Ry extends Me{constructor(t=1,e=.4,i=12,a=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:a,arc:s},i=Math.floor(i),a=Math.floor(a);const r=[],l=[],u=[],f=[],d=new V,p=new V,m=new V;for(let g=0;g<=i;g++)for(let _=0;_<=a;_++){const E=_/a*s,M=g/i*Math.PI*2;p.x=(t+e*Math.cos(M))*Math.cos(E),p.y=(t+e*Math.cos(M))*Math.sin(E),p.z=e*Math.sin(M),l.push(p.x,p.y,p.z),d.x=t*Math.cos(E),d.y=t*Math.sin(E),m.subVectors(p,d).normalize(),u.push(m.x,m.y,m.z),f.push(_/a),f.push(g/i)}for(let g=1;g<=i;g++)for(let _=1;_<=a;_++){const E=(a+1)*g+_-1,M=(a+1)*(g-1)+_-1,v=(a+1)*(g-1)+_,x=(a+1)*g+_;r.push(E,M,x),r.push(M,v,x)}this.setIndex(r),this.setAttribute("position",new ee(l,3)),this.setAttribute("normal",new ee(u,3)),this.setAttribute("uv",new ee(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ry(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class Dy extends Me{constructor(t=1,e=.4,i=64,a=8,s=2,r=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:a,p:s,q:r},i=Math.floor(i),a=Math.floor(a);const l=[],u=[],f=[],d=[],p=new V,m=new V,g=new V,_=new V,E=new V,M=new V,v=new V;for(let b=0;b<=i;++b){const T=b/i*s*Math.PI*2;x(T,s,r,t,g),x(T+.01,s,r,t,_),M.subVectors(_,g),v.addVectors(_,g),E.crossVectors(M,v),v.crossVectors(E,M),E.normalize(),v.normalize();for(let w=0;w<=a;++w){const R=w/a*Math.PI*2,N=-e*Math.cos(R),U=e*Math.sin(R);p.x=g.x+(N*v.x+U*E.x),p.y=g.y+(N*v.y+U*E.y),p.z=g.z+(N*v.z+U*E.z),u.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),f.push(m.x,m.y,m.z),d.push(b/i),d.push(w/a)}}for(let b=1;b<=i;b++)for(let T=1;T<=a;T++){const w=(a+1)*(b-1)+(T-1),R=(a+1)*b+(T-1),N=(a+1)*b+T,U=(a+1)*(b-1)+T;l.push(w,R,U),l.push(R,N,U)}this.setIndex(l),this.setAttribute("position",new ee(u,3)),this.setAttribute("normal",new ee(f,3)),this.setAttribute("uv",new ee(d,2));function x(b,T,w,R,N){const U=Math.cos(b),D=Math.sin(b),C=w/T*b,B=Math.cos(C);N.x=R*(2+B)*.5*U,N.y=R*(2+B)*D*.5,N.z=R*Math.sin(C)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Dy(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Ny extends Me{constructor(t=new mE(new V(-1,-1,0),new V(-1,1,0),new V(1,1,0)),e=64,i=1,a=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:a,closed:s};const r=t.computeFrenetFrames(e,s);this.tangents=r.tangents,this.normals=r.normals,this.binormals=r.binormals;const l=new V,u=new V,f=new mt;let d=new V;const p=[],m=[],g=[],_=[];E(),this.setIndex(_),this.setAttribute("position",new ee(p,3)),this.setAttribute("normal",new ee(m,3)),this.setAttribute("uv",new ee(g,2));function E(){for(let b=0;b<e;b++)M(b);M(s===!1?e:0),x(),v()}function M(b){d=t.getPointAt(b/e,d);const T=r.normals[b],w=r.binormals[b];for(let R=0;R<=a;R++){const N=R/a*Math.PI*2,U=Math.sin(N),D=-Math.cos(N);u.x=D*T.x+U*w.x,u.y=D*T.y+U*w.y,u.z=D*T.z+U*w.z,u.normalize(),m.push(u.x,u.y,u.z),l.x=d.x+i*u.x,l.y=d.y+i*u.y,l.z=d.z+i*u.z,p.push(l.x,l.y,l.z)}}function v(){for(let b=1;b<=e;b++)for(let T=1;T<=a;T++){const w=(a+1)*(b-1)+(T-1),R=(a+1)*b+(T-1),N=(a+1)*b+T,U=(a+1)*(b-1)+T;_.push(w,R,U),_.push(R,N,U)}}function x(){for(let b=0;b<=e;b++)for(let T=0;T<=a;T++)f.x=b/e,f.y=T/a,g.push(f.x,f.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Ny(new Mv[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class gL extends Me{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],i=new Set,a=new V,s=new V;if(t.index!==null){const r=t.attributes.position,l=t.index;let u=t.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,d=u.length;f<d;++f){const p=u[f],m=p.start,g=p.count;for(let _=m,E=m+g;_<E;_+=3)for(let M=0;M<3;M++){const v=l.getX(_+M),x=l.getX(_+(M+1)%3);a.fromBufferAttribute(r,v),s.fromBufferAttribute(r,x),Pw(a,s,i)===!0&&(e.push(a.x,a.y,a.z),e.push(s.x,s.y,s.z))}}}else{const r=t.attributes.position;for(let l=0,u=r.count/3;l<u;l++)for(let f=0;f<3;f++){const d=3*l+f,p=3*l+(f+1)%3;a.fromBufferAttribute(r,d),s.fromBufferAttribute(r,p),Pw(a,s,i)===!0&&(e.push(a.x,a.y,a.z),e.push(s.x,s.y,s.z))}}this.setAttribute("position",new ee(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function Pw(n,t,e){const i=`${n.x},${n.y},${n.z}-${t.x},${t.y},${t.z}`,a=`${t.x},${t.y},${t.z}-${n.x},${n.y},${n.z}`;return e.has(i)===!0||e.has(a)===!0?!1:(e.add(i),e.add(a),!0)}var zw=Object.freeze({__proto__:null,BoxGeometry:Mc,CapsuleGeometry:_y,CircleGeometry:xy,ConeGeometry:Op,CylinderGeometry:Up,DodecahedronGeometry:Sy,EdgesGeometry:rL,ExtrudeGeometry:by,IcosahedronGeometry:Ey,LatheGeometry:Ty,OctahedronGeometry:Lp,PlaneGeometry:Hf,PolyhedronGeometry:$o,RingGeometry:Ay,ShapeGeometry:Cy,SphereGeometry:Pp,TetrahedronGeometry:wy,TorusGeometry:Ry,TorusKnotGeometry:Dy,TubeGeometry:Ny,WireframeGeometry:gL});class vL extends zi{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Zt(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class yL extends Ms{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class vE extends zi{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class _L extends vE{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return xe(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Zt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class xL extends zi{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Zt(16777215),this.specular=new Zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=Rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class SL extends zi{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class ML extends zi{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class bL extends zi{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oa,this.combine=Rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class yE extends zi{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=OO,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class _E extends zi{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class EL extends zi{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class TL extends Wi{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Wl(n,t){return!n||n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function AL(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function CL(n){function t(a,s){return n[a]-n[s]}const e=n.length,i=new Array(e);for(let a=0;a!==e;++a)i[a]=a;return i.sort(t),i}function uM(n,t,e){const i=n.length,a=new n.constructor(i);for(let s=0,r=0;r!==i;++s){const l=e[s]*t;for(let u=0;u!==t;++u)a[r++]=n[l+u]}return a}function xE(n,t,e,i){let a=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[a++];if(s===void 0)return;let r=s[i];if(r!==void 0)if(Array.isArray(r))do r=s[i],r!==void 0&&(t.push(s.time),e.push(...r)),s=n[a++];while(s!==void 0);else if(r.toArray!==void 0)do r=s[i],r!==void 0&&(t.push(s.time),r.toArray(e,e.length)),s=n[a++];while(s!==void 0);else do r=s[i],r!==void 0&&(t.push(s.time),e.push(r)),s=n[a++];while(s!==void 0)}function A6(n,t,e,i,a=30){const s=n.clone();s.name=t;const r=[];for(let u=0;u<s.tracks.length;++u){const f=s.tracks[u],d=f.getValueSize(),p=[],m=[];for(let g=0;g<f.times.length;++g){const _=f.times[g]*a;if(!(_<e||_>=i)){p.push(f.times[g]);for(let E=0;E<d;++E)m.push(f.values[g*d+E])}}p.length!==0&&(f.times=Wl(p,f.times.constructor),f.values=Wl(m,f.values.constructor),r.push(f))}s.tracks=r;let l=1/0;for(let u=0;u<s.tracks.length;++u)l>s.tracks[u].times[0]&&(l=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function C6(n,t=0,e=n,i=30){i<=0&&(i=30);const a=e.tracks.length,s=t/i;for(let r=0;r<a;++r){const l=e.tracks[r],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=n.tracks.find(function(v){return v.name===l.name&&v.ValueTypeName===u});if(f===void 0)continue;let d=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let m=0;const g=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const _=l.times.length-1;let E;if(s<=l.times[0]){const v=d,x=p-d;E=l.values.slice(v,x)}else if(s>=l.times[_]){const v=_*p+d,x=v+p-d;E=l.values.slice(v,x)}else{const v=l.createInterpolant(),x=d,b=p-d;v.evaluate(s),E=v.resultBuffer.slice(x,b)}u==="quaternion"&&new Li().fromArray(E).normalize().conjugate().toArray(E);const M=f.times.length;for(let v=0;v<M;++v){const x=v*g+m;if(u==="quaternion")Li.multiplyQuaternionsFlat(f.values,x,E,0,f.values,x);else{const b=g-m*2;for(let T=0;T<b;++T)f.values[x+T]-=E[T]}}}return n.blendMode=tE,n}class w6{static convertArray(t,e){return Wl(t,e)}static isTypedArray(t){return AL(t)}static getKeyframeOrder(t){return CL(t)}static sortedArray(t,e,i){return uM(t,e,i)}static flattenJSON(t,e,i,a){xE(t,e,i,a)}static subclip(t,e,i,a,s=30){return A6(t,e,i,a,s)}static makeClipAdditive(t,e=0,i=t,a=30){return C6(t,e,i,a)}}class zp{constructor(t,e,i,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,a=e[i],s=e[i-1];t:{e:{let r;n:{i:if(!(t<a)){for(let l=i+2;;){if(a===void 0){if(t<s)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=a,a=e[++i],t<a)break e}r=e.length;break n}if(!(t>=s)){const l=e[1];t<l&&(i=2,s=l);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(a=s,s=e[--i-1],t>=s)break e}r=i,i=0;break n}break t}for(;i<r;){const l=i+r>>>1;t<e[l]?r=l:i=l+1}if(a=e[i],s=e[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,a)}return this.interpolate_(i,s,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=t*a;for(let r=0;r!==a;++r)e[r]=i[s+r];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wL extends zp{constructor(t,e,i,a){super(t,e,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ql,endingEnd:ql}}intervalChanged_(t,e,i){const a=this.parameterPositions;let s=t-2,r=t+1,l=a[s],u=a[r];if(l===void 0)switch(this.getSettings_().endingStart){case Yl:s=t,l=2*e-i;break;case Yd:s=a.length-2,l=e+a[s]-a[s+1];break;default:s=t,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case Yl:r=t,u=2*i-e;break;case Yd:r=1,u=i+a[1]-a[0];break;default:r=t-1,u=e}const f=(i-e)*.5,d=this.valueSize;this._weightPrev=f/(e-l),this._weightNext=f/(u-i),this._offsetPrev=s*d,this._offsetNext=r*d}interpolate_(t,e,i,a){const s=this.resultBuffer,r=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,d=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,_=(i-e)/(a-e),E=_*_,M=E*_,v=-m*M+2*m*E-m*_,x=(1+m)*M+(-1.5-2*m)*E+(-.5+m)*_+1,b=(-1-g)*M+(1.5+g)*E+.5*_,T=g*M-g*E;for(let w=0;w!==l;++w)s[w]=v*r[d+w]+x*r[f+w]+b*r[u+w]+T*r[p+w];return s}}class SE extends zp{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t,e,i,a){const s=this.resultBuffer,r=this.sampleValues,l=this.valueSize,u=t*l,f=u-l,d=(i-e)/(a-e),p=1-d;for(let m=0;m!==l;++m)s[m]=r[f+m]*p+r[u+m]*d;return s}}class RL extends zp{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class ss{constructor(t,e,i,a){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Wl(e,this.TimeBufferType),this.values=Wl(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Wl(t.times,Array),values:Wl(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(i.interpolation=a)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new RL(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new SE(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new wL(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case qd:e=this.InterpolantFactoryMethodDiscrete;break;case _v:e=this.InterpolantFactoryMethodLinear;break;case t0:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qd;case this.InterpolantFactoryMethodLinear:return _v;case this.InterpolantFactoryMethodSmooth:return t0}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,a=e.length;i!==a;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,a=e.length;i!==a;++i)e[i]*=t}return this}trim(t,e){const i=this.times,a=i.length;let s=0,r=a-1;for(;s!==a&&i[s]<t;)++s;for(;r!==-1&&i[r]>e;)--r;if(++r,s!==0||r!==a){s>=r&&(r=Math.max(r,1),s=r-1);const l=this.getValueSize();this.times=i.slice(s,r),this.values=this.values.slice(s*l,r*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,a=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let r=null;for(let l=0;l!==s;l++){const u=i[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(r!==null&&r>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,r),t=!1;break}r=u}if(a!==void 0&&AL(a))for(let l=0,u=a.length;l!==u;++l){const f=a[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===t0,s=t.length-1;let r=1;for(let l=1;l<s;++l){let u=!1;const f=t[l],d=t[l+1];if(f!==d&&(l!==1||f!==t[0]))if(a)u=!0;else{const p=l*i,m=p-i,g=p+i;for(let _=0;_!==i;++_){const E=e[p+_];if(E!==e[m+_]||E!==e[g+_]){u=!0;break}}}if(u){if(l!==r){t[r]=t[l];const p=l*i,m=r*i;for(let g=0;g!==i;++g)e[m+g]=e[p+g]}++r}}if(s>0){t[r]=t[s];for(let l=s*i,u=r*i,f=0;f!==i;++f)e[u+f]=e[l+f];++r}return r!==t.length?(this.times=t.slice(0,r),this.values=e.slice(0,r*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=this.constructor,a=new i(this.name,t,e);return a.createInterpolant=this.createInterpolant,a}}ss.prototype.ValueTypeName="";ss.prototype.TimeBufferType=Float32Array;ss.prototype.ValueBufferType=Float32Array;ss.prototype.DefaultInterpolation=_v;class bc extends ss{constructor(t,e,i){super(t,e,i)}}bc.prototype.ValueTypeName="bool";bc.prototype.ValueBufferType=Array;bc.prototype.DefaultInterpolation=qd;bc.prototype.InterpolantFactoryMethodLinear=void 0;bc.prototype.InterpolantFactoryMethodSmooth=void 0;class ME extends ss{constructor(t,e,i,a){super(t,e,i,a)}}ME.prototype.ValueTypeName="color";class ep extends ss{constructor(t,e,i,a){super(t,e,i,a)}}ep.prototype.ValueTypeName="number";class DL extends zp{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t,e,i,a){const s=this.resultBuffer,r=this.sampleValues,l=this.valueSize,u=(i-e)/(a-e);let f=t*l;for(let d=f+l;f!==d;f+=4)Li.slerpFlat(s,0,r,f-l,r,f,u);return s}}class Bp extends ss{constructor(t,e,i,a){super(t,e,i,a)}InterpolantFactoryMethodLinear(t){return new DL(this.times,this.values,this.getValueSize(),t)}}Bp.prototype.ValueTypeName="quaternion";Bp.prototype.InterpolantFactoryMethodSmooth=void 0;class Ec extends ss{constructor(t,e,i){super(t,e,i)}}Ec.prototype.ValueTypeName="string";Ec.prototype.ValueBufferType=Array;Ec.prototype.DefaultInterpolation=qd;Ec.prototype.InterpolantFactoryMethodLinear=void 0;Ec.prototype.InterpolantFactoryMethodSmooth=void 0;class np extends ss{constructor(t,e,i,a){super(t,e,i,a)}}np.prototype.ValueTypeName="vector";class ip{constructor(t="",e=-1,i=[],a=cy){this.name=t,this.tracks=i,this.duration=e,this.blendMode=a,this.uuid=Na(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,a=1/(t.fps||1);for(let r=0,l=i.length;r!==l;++r)e.push(D6(i[r]).scale(a));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],i=t.tracks,a={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,r=i.length;s!==r;++s)e.push(ss.toJSON(i[s]));return a}static CreateFromMorphTargetSequence(t,e,i,a){const s=e.length,r=[];for(let l=0;l<s;l++){let u=[],f=[];u.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const d=CL(u);u=uM(u,1,d),f=uM(f,1,d),!a&&u[0]===0&&(u.push(s),f.push(f[0])),r.push(new ep(".morphTargetInfluences["+e[l].name+"]",u,f).scale(1/i))}return new this(t,-1,r)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const a=t;i=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<i.length;a++)if(i[a].name===e)return i[a];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const a={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=t.length;l<u;l++){const f=t[l],d=f.name.match(s);if(d&&d.length>1){const p=d[1];let m=a[p];m||(a[p]=m=[]),m.push(f)}}const r=[];for(const l in a)r.push(this.CreateFromMorphTargetSequence(l,a[l],e,i));return r}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,g,_,E){if(g.length!==0){const M=[],v=[];xE(g,M,v,_),M.length!==0&&E.push(new p(m,M,v))}},a=[],s=t.name||"default",r=t.fps||30,l=t.blendMode;let u=t.length||-1;const f=t.hierarchy||[];for(let p=0;p<f.length;p++){const m=f[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let _;for(_=0;_<m.length;_++)if(m[_].morphTargets)for(let E=0;E<m[_].morphTargets.length;E++)g[m[_].morphTargets[E]]=-1;for(const E in g){const M=[],v=[];for(let x=0;x!==m[_].morphTargets.length;++x){const b=m[_];M.push(b.time),v.push(b.morphTarget===E?1:0)}a.push(new ep(".morphTargetInfluence["+E+"]",M,v))}u=g.length*r}else{const g=".bones["+e[p].name+"]";i(np,g+".position",m,"pos",a),i(Bp,g+".quaternion",m,"rot",a),i(np,g+".scale",m,"scl",a)}}return a.length===0?null:new this(s,u,a,l)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,a=t.length;i!==a;++i){const s=this.tracks[i];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function R6(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ep;case"vector":case"vector2":case"vector3":case"vector4":return np;case"color":return ME;case"quaternion":return Bp;case"bool":case"boolean":return bc;case"string":return Ec}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function D6(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=R6(n.type);if(n.times===void 0){const e=[],i=[];xE(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const Vs={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class bE{constructor(t,e,i){const a=this;let s=!1,r=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(d){l++,s===!1&&a.onStart!==void 0&&a.onStart(d,r,l),s=!0},this.itemEnd=function(d){r++,a.onProgress!==void 0&&a.onProgress(d,r,l),r===l&&(s=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(d){a.onError!==void 0&&a.onError(d)},this.resolveURL=function(d){return u?u(d):d},this.setURLModifier=function(d){return u=d,this},this.addHandler=function(d,p){return f.push(d,p),this},this.removeHandler=function(d){const p=f.indexOf(d);return p!==-1&&f.splice(p,2),this},this.getHandler=function(d){for(let p=0,m=f.length;p<m;p+=2){const g=f[p],_=f[p+1];if(g.global&&(g.lastIndex=0),g.test(d))return _}return null}}}const NL=new bE;class ua{constructor(t){this.manager=t!==void 0?t:NL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(a,s){i.load(t,a,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}ua.DEFAULT_MATERIAL_NAME="__DEFAULT";const xr={};class N6 extends Error{constructor(t,e){super(t),this.response=e}}class Fr extends ua{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,i,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=Vs.get(`file:${t}`);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(xr[t]!==void 0){xr[t].push({onLoad:e,onProgress:i,onError:a});return}xr[t]=[],xr[t].push({onLoad:e,onProgress:i,onError:a});const r=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(r).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const d=xr[t],p=f.body.getReader(),m=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),g=m?parseInt(m):0,_=g!==0;let E=0;const M=new ReadableStream({start(v){x();function x(){p.read().then(({done:b,value:T})=>{if(b)v.close();else{E+=T.byteLength;const w=new ProgressEvent("progress",{lengthComputable:_,loaded:E,total:g});for(let R=0,N=d.length;R<N;R++){const U=d[R];U.onProgress&&U.onProgress(w)}v.enqueue(T),x()}},b=>{v.error(b)})}}});return new Response(M)}else throw new N6(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return f.json();default:if(l==="")return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(l),m=p&&p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return f.arrayBuffer().then(_=>g.decode(_))}}}).then(f=>{Vs.add(`file:${t}`,f);const d=xr[t];delete xr[t];for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onLoad&&g.onLoad(f)}}).catch(f=>{const d=xr[t];if(d===void 0)throw this.manager.itemError(t),f;delete xr[t];for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onError&&g.onError(f)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class U6 extends ua{constructor(t){super(t)}load(t,e,i,a){const s=this,r=new Fr(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,function(l){try{e(s.parse(JSON.parse(l)))}catch(u){a?a(u):console.error(u),s.manager.itemError(t)}},i,a)}parse(t){const e=[];for(let i=0;i<t.length;i++){const a=ip.parse(t[i]);e.push(a)}return e}}class O6 extends ua{constructor(t){super(t)}load(t,e,i,a){const s=this,r=[],l=new yy,u=new Fr(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let f=0;function d(p){u.load(t[p],function(m){const g=s.parse(m,!0);r[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},f+=1,f===6&&(g.mipmapCount===1&&(l.minFilter=Kn),l.image=r,l.format=g.format,l.needsUpdate=!0,e&&e(l))},i,a)}if(Array.isArray(t))for(let p=0,m=t.length;p<m;++p)d(p);else u.load(t,function(p){const m=s.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let _=0;_<g;_++){r[_]={mipmaps:[]};for(let E=0;E<m.mipmapCount;E++)r[_].mipmaps.push(m.mipmaps[_*m.mipmapCount+E]),r[_].format=m.format,r[_].width=m.width,r[_].height=m.height}l.image=r}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&&(l.minFilter=Kn),l.format=m.format,l.needsUpdate=!0,e&&e(l)},i,a);return l}}const vu=new WeakMap;class ap extends ua{constructor(t){super(t)}load(t,e,i,a){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=Vs.get(`image:${t}`);if(r!==void 0){if(r.complete===!0)s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0);else{let p=vu.get(r);p===void 0&&(p=[],vu.set(r,p)),p.push({onLoad:e,onError:a})}return r}const l=Qd("img");function u(){d(),e&&e(this);const p=vu.get(this)||[];for(let m=0;m<p.length;m++){const g=p[m];g.onLoad&&g.onLoad(this)}vu.delete(this),s.manager.itemEnd(t)}function f(p){d(),a&&a(p),Vs.remove(`image:${t}`);const m=vu.get(this)||[];for(let g=0;g<m.length;g++){const _=m[g];_.onError&&_.onError(p)}vu.delete(this),s.manager.itemError(t),s.manager.itemEnd(t)}function d(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),Vs.add(`image:${t}`,l),s.manager.itemStart(t),l.src=t,l}}class L6 extends ua{constructor(t){super(t)}load(t,e,i,a){const s=new Np;s.colorSpace=wi;const r=new ap(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);let l=0;function u(f){r.load(t[f],function(d){s.images[f]=d,l++,l===6&&(s.needsUpdate=!0,e&&e(s))},void 0,a)}for(let f=0;f<t.length;++f)u(f);return s}}class P6 extends ua{constructor(t){super(t)}load(t,e,i,a){const s=this,r=new ks,l=new Fr(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(t,function(u){let f;try{f=s.parse(u)}catch(d){if(a!==void 0)a(d);else{console.error(d);return}}f.image!==void 0?r.image=f.image:f.data!==void 0&&(r.image.width=f.width,r.image.height=f.height,r.image.data=f.data),r.wrapS=f.wrapS!==void 0?f.wrapS:$a,r.wrapT=f.wrapT!==void 0?f.wrapT:$a,r.magFilter=f.magFilter!==void 0?f.magFilter:Kn,r.minFilter=f.minFilter!==void 0?f.minFilter:Kn,r.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(r.colorSpace=f.colorSpace),f.flipY!==void 0&&(r.flipY=f.flipY),f.format!==void 0&&(r.format=f.format),f.type!==void 0&&(r.type=f.type),f.mipmaps!==void 0&&(r.mipmaps=f.mipmaps,r.minFilter=Is),f.mipmapCount===1&&(r.minFilter=Kn),f.generateMipmaps!==void 0&&(r.generateMipmaps=f.generateMipmaps),r.needsUpdate=!0,e&&e(r,f)},i,a),r}}class z6 extends ua{constructor(t){super(t)}load(t,e,i,a){const s=new Ln,r=new ap(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(t,function(l){s.image=l,s.needsUpdate=!0,e!==void 0&&e(s)},i,a),s}}class tl extends Ge{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Zt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class UL extends tl{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ge.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Zt(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const xS=new pe,Bw=new V,Iw=new V;class EE{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mt(512,512),this.mapType=as,this.map=null,this.mapPass=null,this.matrix=new pe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vf,this._frameExtents=new mt(1,1),this._viewportCount=1,this._viewports=[new Fe(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;Bw.setFromMatrixPosition(t.matrixWorld),e.position.copy(Bw),Iw.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Iw),e.updateMatrixWorld(),xS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(xS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class B6 extends EE{constructor(){super(new En(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const e=this.camera,i=Sf*2*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,s=t.distance||e.far;(i!==e.fov||a!==e.aspect||s!==e.far)&&(e.fov=i,e.aspect=a,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class OL extends tl{constructor(t,e,i=0,a=Math.PI/3,s=0,r=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ge.DEFAULT_UP),this.updateMatrix(),this.target=new Ge,this.distance=i,this.angle=a,this.penumbra=s,this.decay=r,this.map=null,this.shadow=new B6}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Vw=new pe,Fh=new V,SS=new V;class I6 extends EE{constructor(){super(new En(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mt(4,2),this._viewportCount=6,this._viewports=[new Fe(2,1,1,1),new Fe(0,1,1,1),new Fe(3,1,1,1),new Fe(1,1,1,1),new Fe(3,0,1,1),new Fe(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,a=this.matrix,s=t.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Fh.setFromMatrixPosition(t.matrixWorld),i.position.copy(Fh),SS.copy(i.position),SS.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(SS),i.updateMatrixWorld(),a.makeTranslation(-Fh.x,-Fh.y,-Fh.z),Vw.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vw)}}class LL extends tl{constructor(t,e,i=0,a=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new I6}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class js extends hy{constructor(t=-1,e=1,i=1,a=-1,s=.1,r=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=a,this.near=s,this.far=r,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,a,s,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let s=i-t,r=i+t,l=a+e,u=a-e;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,r=s+f*this.view.width,l-=d*this.view.offsetY,u=l-d*this.view.height}this.projectionMatrix.makeOrthographic(s,r,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class V6 extends EE{constructor(){super(new js(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class PL extends tl{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ge.DEFAULT_UP),this.updateMatrix(),this.target=new Ge,this.shadow=new V6}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class zL extends tl{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class BL extends tl{constructor(t,e,i=10,a=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class IL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new V)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,a=t.y,s=t.z,r=this.coefficients;return e.copy(r[0]).multiplyScalar(.282095),e.addScaledVector(r[1],.488603*a),e.addScaledVector(r[2],.488603*s),e.addScaledVector(r[3],.488603*i),e.addScaledVector(r[4],1.092548*(i*a)),e.addScaledVector(r[5],1.092548*(a*s)),e.addScaledVector(r[6],.315392*(3*s*s-1)),e.addScaledVector(r[7],1.092548*(i*s)),e.addScaledVector(r[8],.546274*(i*i-a*a)),e}getIrradianceAt(t,e){const i=t.x,a=t.y,s=t.z,r=this.coefficients;return e.copy(r[0]).multiplyScalar(.886227),e.addScaledVector(r[1],2*.511664*a),e.addScaledVector(r[2],2*.511664*s),e.addScaledVector(r[3],2*.511664*i),e.addScaledVector(r[4],2*.429043*i*a),e.addScaledVector(r[5],2*.429043*a*s),e.addScaledVector(r[6],.743125*s*s-.247708),e.addScaledVector(r[7],2*.429043*i*s),e.addScaledVector(r[8],.429043*(i*i-a*a)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].fromArray(t,e+a*3);return this}toArray(t=[],e=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].toArray(t,e+a*3);return t}static getBasisAt(t,e){const i=t.x,a=t.y,s=t.z;e[0]=.282095,e[1]=.488603*a,e[2]=.488603*s,e[3]=.488603*i,e[4]=1.092548*i*a,e[5]=1.092548*a*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*i*s,e[8]=.546274*(i*i-a*a)}}class VL extends tl{constructor(t=new IL,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class Uy extends ua{constructor(t){super(t),this.textures={}}load(t,e,i,a){const s=this,r=new Fr(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.setWithCredentials(s.withCredentials),r.load(t,function(l){try{e(s.parse(JSON.parse(l)))}catch(u){a?a(u):console.error(u),s.manager.itemError(t)}},i,a)}parse(t){const e=this.textures;function i(s){return e[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),e[s]}const a=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(a.uuid=t.uuid),t.name!==void 0&&(a.name=t.name),t.color!==void 0&&a.color!==void 0&&a.color.setHex(t.color),t.roughness!==void 0&&(a.roughness=t.roughness),t.metalness!==void 0&&(a.metalness=t.metalness),t.sheen!==void 0&&(a.sheen=t.sheen),t.sheenColor!==void 0&&(a.sheenColor=new Zt().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(a.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(t.emissive),t.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(t.specular),t.specularIntensity!==void 0&&(a.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(a.shininess=t.shininess),t.clearcoat!==void 0&&(a.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(a.dispersion=t.dispersion),t.iridescence!==void 0&&(a.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(a.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(a.transmission=t.transmission),t.thickness!==void 0&&(a.thickness=t.thickness),t.attenuationDistance!==void 0&&(a.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(a.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(a.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(a.fog=t.fog),t.flatShading!==void 0&&(a.flatShading=t.flatShading),t.blending!==void 0&&(a.blending=t.blending),t.combine!==void 0&&(a.combine=t.combine),t.side!==void 0&&(a.side=t.side),t.shadowSide!==void 0&&(a.shadowSide=t.shadowSide),t.opacity!==void 0&&(a.opacity=t.opacity),t.transparent!==void 0&&(a.transparent=t.transparent),t.alphaTest!==void 0&&(a.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(a.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(a.depthFunc=t.depthFunc),t.depthTest!==void 0&&(a.depthTest=t.depthTest),t.depthWrite!==void 0&&(a.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(a.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(a.blendSrc=t.blendSrc),t.blendDst!==void 0&&(a.blendDst=t.blendDst),t.blendEquation!==void 0&&(a.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(a.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(a.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(a.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(a.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(a.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(a.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(a.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(a.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(a.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(a.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(a.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(a.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(a.rotation=t.rotation),t.linewidth!==void 0&&(a.linewidth=t.linewidth),t.dashSize!==void 0&&(a.dashSize=t.dashSize),t.gapSize!==void 0&&(a.gapSize=t.gapSize),t.scale!==void 0&&(a.scale=t.scale),t.polygonOffset!==void 0&&(a.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(a.dithering=t.dithering),t.alphaToCoverage!==void 0&&(a.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(a.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(a.visible=t.visible),t.toneMapped!==void 0&&(a.toneMapped=t.toneMapped),t.userData!==void 0&&(a.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?a.vertexColors=t.vertexColors>0:a.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const s in t.uniforms){const r=t.uniforms[s];switch(a.uniforms[s]={},r.type){case"t":a.uniforms[s].value=i(r.value);break;case"c":a.uniforms[s].value=new Zt().setHex(r.value);break;case"v2":a.uniforms[s].value=new mt().fromArray(r.value);break;case"v3":a.uniforms[s].value=new V().fromArray(r.value);break;case"v4":a.uniforms[s].value=new Fe().fromArray(r.value);break;case"m3":a.uniforms[s].value=new Se().fromArray(r.value);break;case"m4":a.uniforms[s].value=new pe().fromArray(r.value);break;default:a.uniforms[s].value=r.value}}if(t.defines!==void 0&&(a.defines=t.defines),t.vertexShader!==void 0&&(a.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(a.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(a.glslVersion=t.glslVersion),t.extensions!==void 0)for(const s in t.extensions)a.extensions[s]=t.extensions[s];if(t.lights!==void 0&&(a.lights=t.lights),t.clipping!==void 0&&(a.clipping=t.clipping),t.size!==void 0&&(a.size=t.size),t.sizeAttenuation!==void 0&&(a.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(a.map=i(t.map)),t.matcap!==void 0&&(a.matcap=i(t.matcap)),t.alphaMap!==void 0&&(a.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(a.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(a.bumpScale=t.bumpScale),t.normalMap!==void 0&&(a.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(a.normalMapType=t.normalMapType),t.normalScale!==void 0){let s=t.normalScale;Array.isArray(s)===!1&&(s=[s,s]),a.normalScale=new mt().fromArray(s)}return t.displacementMap!==void 0&&(a.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(a.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(a.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(a.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(a.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(a.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(a.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(a.specularMap=i(t.specularMap)),t.specularIntensityMap!==void 0&&(a.specularIntensityMap=i(t.specularIntensityMap)),t.specularColorMap!==void 0&&(a.specularColorMap=i(t.specularColorMap)),t.envMap!==void 0&&(a.envMap=i(t.envMap)),t.envMapRotation!==void 0&&a.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(a.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(a.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(a.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(a.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(a.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(a.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(a.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(a.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(a.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new mt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(a.iridescenceMap=i(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(a.transmissionMap=i(t.transmissionMap)),t.thicknessMap!==void 0&&(a.thicknessMap=i(t.thicknessMap)),t.anisotropyMap!==void 0&&(a.anisotropyMap=i(t.anisotropyMap)),t.sheenColorMap!==void 0&&(a.sheenColorMap=i(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=i(t.sheenRoughnessMap)),a}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return Uy.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:vL,SpriteMaterial:oE,RawShaderMaterial:yL,ShaderMaterial:Ms,PointsMaterial:cE,MeshPhysicalMaterial:_L,MeshStandardMaterial:vE,MeshPhongMaterial:xL,MeshToonMaterial:SL,MeshNormalMaterial:ML,MeshLambertMaterial:bL,MeshDepthMaterial:yE,MeshDistanceMaterial:_E,MeshBasicMaterial:Jo,MeshMatcapMaterial:EL,LineDashedMaterial:TL,LineBasicMaterial:Wi,Material:zi};return new e[t]}}class fM{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class HL extends Me{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class FL extends ua{constructor(t){super(t)}load(t,e,i,a){const s=this,r=new Fr(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.setWithCredentials(s.withCredentials),r.load(t,function(l){try{e(s.parse(JSON.parse(l)))}catch(u){a?a(u):console.error(u),s.manager.itemError(t)}},i,a)}parse(t){const e={},i={};function a(g,_){if(e[_]!==void 0)return e[_];const M=g.interleavedBuffers[_],v=s(g,M.buffer),x=Vu(M.type,v),b=new my(x,M.stride);return b.uuid=M.uuid,e[_]=b,b}function s(g,_){if(i[_]!==void 0)return i[_];const M=g.arrayBuffers[_],v=new Uint32Array(M).buffer;return i[_]=v,v}const r=t.isInstancedBufferGeometry?new HL:new Me,l=t.data.index;if(l!==void 0){const g=Vu(l.type,l.array);r.setIndex(new rn(g,1))}const u=t.data.attributes;for(const g in u){const _=u[g];let E;if(_.isInterleavedBufferAttribute){const M=a(t.data,_.data);E=new pc(M,_.itemSize,_.offset,_.normalized)}else{const M=Vu(_.type,_.array),v=_.isInstancedBufferAttribute?Ef:rn;E=new v(M,_.itemSize,_.normalized)}_.name!==void 0&&(E.name=_.name),_.usage!==void 0&&E.setUsage(_.usage),r.setAttribute(g,E)}const f=t.data.morphAttributes;if(f)for(const g in f){const _=f[g],E=[];for(let M=0,v=_.length;M<v;M++){const x=_[M];let b;if(x.isInterleavedBufferAttribute){const T=a(t.data,x.data);b=new pc(T,x.itemSize,x.offset,x.normalized)}else{const T=Vu(x.type,x.array);b=new rn(T,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),E.push(b)}r.morphAttributes[g]=E}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const p=t.data.groups||t.data.drawcalls||t.data.offsets;if(p!==void 0)for(let g=0,_=p.length;g!==_;++g){const E=p[g];r.addGroup(E.start,E.count,E.materialIndex)}const m=t.data.boundingSphere;return m!==void 0&&(r.boundingSphere=new yi().fromJSON(m)),t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}class H6 extends ua{constructor(t){super(t)}load(t,e,i,a){const s=this,r=this.path===""?fM.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||r;const l=new Fr(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){let f=null;try{f=JSON.parse(u)}catch(p){a!==void 0&&a(p),console.error("THREE:ObjectLoader: Can't parse "+t+".",p.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}s.parse(f,e)},i,a)}async loadAsync(t,e){const i=this,a=this.path===""?fM.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const s=new Fr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const r=await s.loadAsync(t,e),l=JSON.parse(r),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await i.parseAsync(l)}parse(t,e){const i=this.parseAnimations(t.animations),a=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,a),r=this.parseImages(t.images,function(){e!==void 0&&e(f)}),l=this.parseTextures(t.textures,r),u=this.parseMaterials(t.materials,l),f=this.parseObject(t.object,s,u,l,i),d=this.parseSkeletons(t.skeletons,f);if(this.bindSkeletons(f,d),this.bindLightTargets(f),e!==void 0){let p=!1;for(const m in r)if(r[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&e(f)}return f}async parseAsync(t){const e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,i),s=await this.parseImagesAsync(t.images),r=this.parseTextures(t.textures,s),l=this.parseMaterials(t.materials,r),u=this.parseObject(t.object,a,l,r,e),f=this.parseSkeletons(t.skeletons,u);return this.bindSkeletons(u,f),this.bindLightTargets(u),u}parseShapes(t){const e={};if(t!==void 0)for(let i=0,a=t.length;i<a;i++){const s=new rc().fromJSON(t[i]);e[s.uuid]=s}return e}parseSkeletons(t,e){const i={},a={};if(e.traverse(function(s){s.isBone&&(a[s.uuid]=s)}),t!==void 0)for(let s=0,r=t.length;s<r;s++){const l=new gy().fromJSON(t[s],a);i[l.uuid]=l}return i}parseGeometries(t,e){const i={};if(t!==void 0){const a=new FL;for(let s=0,r=t.length;s<r;s++){let l;const u=t[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=a.parse(u);break;default:u.type in zw?l=zw[u.type].fromJSON(u,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(t,e){const i={},a={};if(t!==void 0){const s=new Uy;s.setTextures(e);for(let r=0,l=t.length;r<l;r++){const u=t[r];i[u.uuid]===void 0&&(i[u.uuid]=s.parse(u)),a[u.uuid]=i[u.uuid]}}return a}parseAnimations(t){const e={};if(t!==void 0)for(let i=0;i<t.length;i++){const a=t[i],s=ip.parse(a);e[s.uuid]=s}return e}parseImages(t,e){const i=this,a={};let s;function r(u){return i.manager.itemStart(u),s.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return r(d)}else return u.data?{data:Vu(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){const u=new bE(e);s=new ap(u),s.setCrossOrigin(this.crossOrigin);for(let f=0,d=t.length;f<d;f++){const p=t[f],m=p.url;if(Array.isArray(m)){const g=[];for(let _=0,E=m.length;_<E;_++){const M=m[_],v=l(M);v!==null&&(v instanceof HTMLImageElement?g.push(v):g.push(new ks(v.data,v.width,v.height)))}a[p.uuid]=new No(g)}else{const g=l(p.url);a[p.uuid]=new No(g)}}}return a}async parseImagesAsync(t){const e=this,i={};let a;async function s(r){if(typeof r=="string"){const l=r,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:e.resourcePath+l;return await a.loadAsync(u)}else return r.data?{data:Vu(r.type,r.data),width:r.width,height:r.height}:null}if(t!==void 0&&t.length>0){a=new ap(this.manager),a.setCrossOrigin(this.crossOrigin);for(let r=0,l=t.length;r<l;r++){const u=t[r],f=u.url;if(Array.isArray(f)){const d=[];for(let p=0,m=f.length;p<m;p++){const g=f[p],_=await s(g);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new ks(_.data,_.width,_.height)))}i[u.uuid]=new No(d)}else{const d=await s(u.url);i[u.uuid]=new No(d)}}}return i}parseTextures(t,e){function i(s,r){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),r[s])}const a={};if(t!==void 0)for(let s=0,r=t.length;s<r;s++){const l=t[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),e[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=e[l.image],f=u.data;let d;Array.isArray(f)?(d=new Np,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new ks:d=new Ln,f&&(d.needsUpdate=!0)),d.source=u,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=i(l.mapping,F6)),l.channel!==void 0&&(d.channel=l.channel),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=i(l.wrap[0],Hw),d.wrapT=i(l.wrap[1],Hw)),l.format!==void 0&&(d.format=l.format),l.internalFormat!==void 0&&(d.internalFormat=l.internalFormat),l.type!==void 0&&(d.type=l.type),l.colorSpace!==void 0&&(d.colorSpace=l.colorSpace),l.minFilter!==void 0&&(d.minFilter=i(l.minFilter,Fw)),l.magFilter!==void 0&&(d.magFilter=i(l.magFilter,Fw)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.generateMipmaps!==void 0&&(d.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(d.compareFunction=l.compareFunction),l.userData!==void 0&&(d.userData=l.userData),a[l.uuid]=d}return a}parseObject(t,e,i,a,s){let r;function l(m){return e[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),e[m]}function u(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let _=0,E=m.length;_<E;_++){const M=m[_];i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),g.push(i[M])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function f(m){return a[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),a[m]}let d,p;switch(t.type){case"Scene":r=new rE,t.background!==void 0&&(Number.isInteger(t.background)?r.background=new Zt(t.background):r.background=f(t.background)),t.environment!==void 0&&(r.environment=f(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?r.fog=new py(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(r.fog=new dy(t.fog.color,t.fog.density)),t.fog.name!==""&&(r.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(r.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(r.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&r.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(r.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&r.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":r=new En(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(r.focus=t.focus),t.zoom!==void 0&&(r.zoom=t.zoom),t.filmGauge!==void 0&&(r.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(r.filmOffset=t.filmOffset),t.view!==void 0&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new js(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(r.zoom=t.zoom),t.view!==void 0&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new zL(t.color,t.intensity);break;case"DirectionalLight":r=new PL(t.color,t.intensity),r.target=t.target||"";break;case"PointLight":r=new LL(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new BL(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new OL(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),r.target=t.target||"";break;case"HemisphereLight":r=new UL(t.color,t.groundColor,t.intensity);break;case"LightProbe":r=new VL().fromJSON(t);break;case"SkinnedMesh":d=l(t.geometry),p=u(t.material),r=new tL(d,p),t.bindMode!==void 0&&(r.bindMode=t.bindMode),t.bindMatrix!==void 0&&r.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(r.skeleton=t.skeleton);break;case"Mesh":d=l(t.geometry),p=u(t.material),r=new jn(d,p);break;case"InstancedMesh":d=l(t.geometry),p=u(t.material);const m=t.count,g=t.instanceMatrix,_=t.instanceColor;r=new eL(d,p,m),r.instanceMatrix=new Ef(new Float32Array(g.array),16),_!==void 0&&(r.instanceColor=new Ef(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":d=l(t.geometry),p=u(t.material),r=new nL(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,p),r.geometry=d,r.perObjectFrustumCulled=t.perObjectFrustumCulled,r.sortObjects=t.sortObjects,r._drawRanges=t.drawRanges,r._reservedRanges=t.reservedRanges,r._geometryInfo=t.geometryInfo.map(E=>{let M=null,v=null;return E.boundingBox!==void 0&&(M=new Pi().fromJSON(E.boundingBox)),E.boundingSphere!==void 0&&(v=new yi().fromJSON(E.boundingSphere)),{...E,boundingBox:M,boundingSphere:v}}),r._instanceInfo=t.instanceInfo,r._availableInstanceIds=t._availableInstanceIds,r._availableGeometryIds=t._availableGeometryIds,r._nextIndexStart=t.nextIndexStart,r._nextVertexStart=t.nextVertexStart,r._geometryCount=t.geometryCount,r._maxInstanceCount=t.maxInstanceCount,r._maxVertexCount=t.maxVertexCount,r._maxIndexCount=t.maxIndexCount,r._geometryInitialized=t.geometryInitialized,r._matricesTexture=f(t.matricesTexture.uuid),r._indirectTexture=f(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(r._colorsTexture=f(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(r.boundingSphere=new yi().fromJSON(t.boundingSphere)),t.boundingBox!==void 0&&(r.boundingBox=new Pi().fromJSON(t.boundingBox));break;case"LOD":r=new $O;break;case"Line":r=new jo(l(t.geometry),u(t.material));break;case"LineLoop":r=new iL(l(t.geometry),u(t.material));break;case"LineSegments":r=new tr(l(t.geometry),u(t.material));break;case"PointCloud":case"Points":r=new aL(l(t.geometry),u(t.material));break;case"Sprite":r=new JO(u(t.material));break;case"Group":r=new Hu;break;case"Bone":r=new lE;break;default:r=new Ge}if(r.uuid=t.uuid,t.name!==void 0&&(r.name=t.name),t.matrix!==void 0?(r.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(t.position!==void 0&&r.position.fromArray(t.position),t.rotation!==void 0&&r.rotation.fromArray(t.rotation),t.quaternion!==void 0&&r.quaternion.fromArray(t.quaternion),t.scale!==void 0&&r.scale.fromArray(t.scale)),t.up!==void 0&&r.up.fromArray(t.up),t.castShadow!==void 0&&(r.castShadow=t.castShadow),t.receiveShadow!==void 0&&(r.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(r.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(r.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(r.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(r.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&r.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(r.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(r.visible=t.visible),t.frustumCulled!==void 0&&(r.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(r.renderOrder=t.renderOrder),t.userData!==void 0&&(r.userData=t.userData),t.layers!==void 0&&(r.layers.mask=t.layers),t.children!==void 0){const m=t.children;for(let g=0;g<m.length;g++)r.add(this.parseObject(m[g],e,i,a,s))}if(t.animations!==void 0){const m=t.animations;for(let g=0;g<m.length;g++){const _=m[g];r.animations.push(s[_])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(r.autoUpdate=t.autoUpdate);const m=t.levels;for(let g=0;g<m.length;g++){const _=m[g],E=r.getObjectByProperty("uuid",_.object);E!==void 0&&r.addLevel(E,_.distance,_.hysteresis)}}return r}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const a=e[i.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(a,i.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const i=e.target,a=t.getObjectByProperty("uuid",i);a!==void 0?e.target=a:e.target=new Ge}})}}const F6={UVMapping:ny,CubeReflectionMapping:Vr,CubeRefractionMapping:Xo,EquirectangularReflectionMapping:Gd,EquirectangularRefractionMapping:Xd,CubeUVReflectionMapping:Bf},Hw={RepeatWrapping:kd,ClampToEdgeWrapping:$a,MirroredRepeatWrapping:jd},Fw={NearestFilter:vi,NearestMipmapNearestFilter:qb,NearestMipmapLinearFilter:Iu,LinearFilter:Kn,LinearMipmapNearestFilter:dd,LinearMipmapLinearFilter:Is},MS=new WeakMap;class G6 extends ua{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=Vs.get(`image-bitmap:${t}`);if(r!==void 0){if(s.manager.itemStart(t),r.then){r.then(f=>{if(MS.has(r)===!0)a&&a(MS.get(r)),s.manager.itemError(t),s.manager.itemEnd(t);else return e&&e(f),s.manager.itemEnd(t),f});return}return setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(t,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return Vs.add(`image-bitmap:${t}`,f),e&&e(f),s.manager.itemEnd(t),f}).catch(function(f){a&&a(f),MS.set(u,f),Vs.remove(`image-bitmap:${t}`),s.manager.itemError(t),s.manager.itemEnd(t)});Vs.add(`image-bitmap:${t}`,u),s.manager.itemStart(t)}}let bg;class TE{static getContext(){return bg===void 0&&(bg=new(window.AudioContext||window.webkitAudioContext)),bg}static setContext(t){bg=t}}class X6 extends ua{constructor(t){super(t)}load(t,e,i,a){const s=this,r=new Fr(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,function(u){try{const f=u.slice(0);TE.getContext().decodeAudioData(f,function(p){e(p)}).catch(l)}catch(f){l(f)}},i,a);function l(u){a?a(u):console.error(u),s.manager.itemError(t)}}}const Gw=new pe,Xw=new pe,wl=new pe;class k6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new En,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new En,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,wl.copy(t.projectionMatrix);const a=e.eyeSep/2,s=a*e.near/e.focus,r=e.near*Math.tan(sc*e.fov*.5)/e.zoom;let l,u;Xw.elements[12]=-a,Gw.elements[12]=a,l=-r*e.aspect+s,u=r*e.aspect+s,wl.elements[0]=2*e.near/(u-l),wl.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(wl),l=-r*e.aspect-s,u=r*e.aspect-s,wl.elements[0]=2*e.near/(u-l),wl.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(wl)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Xw),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Gw)}}class GL extends En{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}class AE{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const Rl=new V,bS=new Li,j6=new V,Dl=new V,Nl=new V;class q6 extends Ge{constructor(){super(),this.type="AudioListener",this.context=TE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new AE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Rl,bS,j6),Dl.set(0,0,-1).applyQuaternion(bS),Nl.set(0,1,0).applyQuaternion(bS),e.positionX){const i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Rl.x,i),e.positionY.linearRampToValueAtTime(Rl.y,i),e.positionZ.linearRampToValueAtTime(Rl.z,i),e.forwardX.linearRampToValueAtTime(Dl.x,i),e.forwardY.linearRampToValueAtTime(Dl.y,i),e.forwardZ.linearRampToValueAtTime(Dl.z,i),e.upX.linearRampToValueAtTime(Nl.x,i),e.upY.linearRampToValueAtTime(Nl.y,i),e.upZ.linearRampToValueAtTime(Nl.z,i)}else e.setPosition(Rl.x,Rl.y,Rl.z),e.setOrientation(Dl.x,Dl.y,Dl.z,Nl.x,Nl.y,Nl.z)}}class XL extends Ge{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const Ul=new V,kw=new Li,Y6=new V,Ol=new V;class W6 extends XL{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ul,kw,Y6),Ol.set(0,0,1).applyQuaternion(kw);const e=this.panner;if(e.positionX){const i=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Ul.x,i),e.positionY.linearRampToValueAtTime(Ul.y,i),e.positionZ.linearRampToValueAtTime(Ul.z,i),e.orientationX.linearRampToValueAtTime(Ol.x,i),e.orientationY.linearRampToValueAtTime(Ol.y,i),e.orientationZ.linearRampToValueAtTime(Ol.z,i)}else e.setPosition(Ul.x,Ul.y,Ul.z),e.setOrientation(Ol.x,Ol.y,Ol.z)}}class Z6{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}class kL{constructor(t,e,i){this.binding=t,this.valueSize=i;let a,s,r;switch(e){case"quaternion":a=this._slerp,s=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":a=this._select,s=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:a=this._lerp,s=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,a=this.valueSize,s=t*a+a;let r=this.cumulativeWeight;if(r===0){for(let l=0;l!==a;++l)i[s+l]=i[l];r=e}else{r+=e;const l=e/r;this._mixBufferRegion(i,s,0,l,a)}this.cumulativeWeight=r}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,a=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,a,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,a=t*e+e,s=this.cumulativeWeight,r=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=e*this._origIndex;this._mixBufferRegion(i,a,u,1-s,e)}r>0&&this._mixBufferRegionAdditive(i,a,this._addIndex*e,1,e);for(let u=e,f=e+e;u!==f;++u)if(i[u]!==i[u+e]){l.setValue(i,a);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,a=i*this._origIndex;t.getValue(e,a);for(let s=i,r=a;s!==r;++s)e[s]=e[a+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,a,s){if(a>=.5)for(let r=0;r!==s;++r)t[e+r]=t[i+r]}_slerp(t,e,i,a){Li.slerpFlat(t,e,t,e,t,i,a)}_slerpAdditive(t,e,i,a,s){const r=this._workIndex*s;Li.multiplyQuaternionsFlat(t,r,t,e,t,i),Li.slerpFlat(t,e,t,e,t,r,a)}_lerp(t,e,i,a,s){const r=1-a;for(let l=0;l!==s;++l){const u=e+l;t[u]=t[u]*r+t[i+l]*a}}_lerpAdditive(t,e,i,a,s){for(let r=0;r!==s;++r){const l=e+r;t[l]=t[l]+t[i+r]*a}}}const CE="\\[\\]\\.:\\/",K6=new RegExp("["+CE+"]","g"),wE="[^"+CE+"]",Q6="[^"+CE.replace("\\.","")+"]",J6=/((?:WC+[\/:])*)/.source.replace("WC",wE),$6=/(WCOD+)?/.source.replace("WCOD",Q6),t8=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",wE),e8=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",wE),n8=new RegExp("^"+J6+$6+t8+e8+"$"),i8=["material","materials","bones","map"];class a8{constructor(t,e,i){const a=i||He.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,a)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&&a.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=i.length;a!==s;++a)i[a].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class He{constructor(t,e,i){this.path=e,this.parsedPath=i||He.parseTrackName(e),this.node=He.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new He.Composite(t,e,i):new He(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(K6,"")}static parseTrackName(t){const e=n8.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const s=i.nodeName.substring(a+1);i8.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(s){for(let r=0;r<s.length;r++){const l=s[r];if(l.name===e||l.uuid===e)return l;const u=i(l.children);if(u)return u}return null},a=i(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)t[e++]=i[a]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,a=e.propertyName;let s=e.propertyIndex;if(t||(t=He.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===f){f=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(f!==void 0){if(t[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[f]}}const r=t[a];if(r===void 0){const f=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+a+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?l=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else r.fromArray!==void 0&&r.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(u=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=a;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}He.Composite=a8;He.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};He.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};He.prototype.GetterByBindingType=[He.prototype._getValue_direct,He.prototype._getValue_array,He.prototype._getValue_arrayElement,He.prototype._getValue_toArray];He.prototype.SetterByBindingTypeAndVersioning=[[He.prototype._setValue_direct,He.prototype._setValue_direct_setNeedsUpdate,He.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[He.prototype._setValue_array,He.prototype._setValue_array_setNeedsUpdate,He.prototype._setValue_array_setMatrixWorldNeedsUpdate],[He.prototype._setValue_arrayElement,He.prototype._setValue_arrayElement_setNeedsUpdate,He.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[He.prototype._setValue_fromArray,He.prototype._setValue_fromArray_setNeedsUpdate,He.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class s8{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Na(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let i=0,a=arguments.length;i!==a;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,i=this._paths,a=this._parsedPaths,s=this._bindings,r=s.length;let l,u=t.length,f=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const m=arguments[d],g=m.uuid;let _=e[g];if(_===void 0){_=u++,e[g]=_,t.push(m);for(let E=0,M=r;E!==M;++E)s[E].push(new He(m,i[E],a[E]))}else if(_<f){l=t[_];const E=--f,M=t[E];e[M.uuid]=_,t[_]=M,e[g]=E,t[E]=m;for(let v=0,x=r;v!==x;++v){const b=s[v],T=b[E];let w=b[_];b[_]=T,w===void 0&&(w=new He(m,i[v],a[v])),b[E]=w}}else t[_]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,a=i.length;let s=this.nCachedObjects_;for(let r=0,l=arguments.length;r!==l;++r){const u=arguments[r],f=u.uuid,d=e[f];if(d!==void 0&&d>=s){const p=s++,m=t[p];e[m.uuid]=d,t[d]=m,e[f]=p,t[p]=u;for(let g=0,_=a;g!==_;++g){const E=i[g],M=E[p],v=E[d];E[d]=M,E[p]=v}}}this.nCachedObjects_=s}uncache(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,a=i.length;let s=this.nCachedObjects_,r=t.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],d=f.uuid,p=e[d];if(p!==void 0)if(delete e[d],p<s){const m=--s,g=t[m],_=--r,E=t[_];e[g.uuid]=p,t[p]=g,e[E.uuid]=m,t[m]=E,t.pop();for(let M=0,v=a;M!==v;++M){const x=i[M],b=x[m],T=x[_];x[p]=b,x[m]=T,x.pop()}}else{const m=--r,g=t[m];m>0&&(e[g.uuid]=p),t[p]=g,t.pop();for(let _=0,E=a;_!==E;++_){const M=i[_];M[p]=M[m],M.pop()}}}this.nCachedObjects_=s}subscribe_(t,e){const i=this._bindingsIndicesByPath;let a=i[t];const s=this._bindings;if(a!==void 0)return s[a];const r=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,d=this.nCachedObjects_,p=new Array(f);a=s.length,i[t]=a,r.push(t),l.push(e),s.push(p);for(let m=d,g=u.length;m!==g;++m){const _=u[m];p[m]=new He(_,t,e)}return p}unsubscribe_(t){const e=this._bindingsIndicesByPath,i=e[t];if(i!==void 0){const a=this._paths,s=this._parsedPaths,r=this._bindings,l=r.length-1,u=r[l],f=t[l];e[f]=i,r[i]=u,r.pop(),s[i]=s[l],s.pop(),a[i]=a[l],a.pop()}}}class jL{constructor(t,e,i=null,a=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=a;const s=e.tracks,r=s.length,l=new Array(r),u={endingStart:ql,endingEnd:ql};for(let f=0;f!==r;++f){const d=s[f].createInterpolant(null);l[f]=d,d.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=NO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i=!1){if(t.fadeOut(e),this.fadeIn(e),i===!0){const a=this._clip.duration,s=t._clip.duration,r=s/a,l=a/s;t.warp(1,r,e),this.warp(l,1,e)}return this}crossFadeTo(t,e,i=!1){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const a=this._mixer,s=a.time,r=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=a._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=s,u[1]=s+i,f[0]=t/r,f[1]=e/r,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,a){if(!this.enabled){this._updateWeight(t);return}const s=this._startTime;if(s!==null){const u=(t-s)*i;u<0||i===0?e=0:(this._startTime=null,e=i*u)}e*=this._updateTimeScale(t);const r=this._updateTime(e),l=this._updateWeight(t);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case tE:for(let d=0,p=u.length;d!==p;++d)u[d].evaluate(r),f[d].accumulateAdditive(l);break;case cy:default:for(let d=0,p=u.length;d!==p;++d)u[d].evaluate(r),f[d].accumulate(a,l)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(i!==null){const a=i.evaluate(t)[0];e*=a,t>i.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const a=i.evaluate(t)[0];e*=a,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let a=this.time+t,s=this._loopCount;const r=i===UO;if(t===0)return s===-1?a:r&&(s&1)===1?e-a:a;if(i===DO){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(a>=e)a=e;else if(a<0)a=0;else{this.time=a;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,r)):this._setEndings(this.repetitions===0,!0,r)),a>=e||a<0){const l=Math.floor(a/e);a-=e*l,s+=Math.abs(l);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?e:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(u===1){const f=t<0;this._setEndings(f,!f,r)}else this._setEndings(!1,!1,r);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=a;if(r&&(s&1)===1)return e-a}return a}_setEndings(t,e,i){const a=this._interpolantSettings;i?(a.endingStart=Yl,a.endingEnd=Yl):(t?a.endingStart=this.zeroSlopeAtStart?Yl:ql:a.endingStart=Yd,e?a.endingEnd=this.zeroSlopeAtEnd?Yl:ql:a.endingEnd=Yd)}_scheduleFading(t,e,i){const a=this._mixer,s=a.time;let r=this._weightInterpolant;r===null&&(r=a._lendControlInterpolant(),this._weightInterpolant=r);const l=r.parameterPositions,u=r.sampleValues;return l[0]=s,u[0]=e,l[1]=s+t,u[1]=i,this}}const r8=new Float32Array(1);class o8 extends $s{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,a=t._clip.tracks,s=a.length,r=t._propertyBindings,l=t._interpolants,u=i.uuid,f=this._bindingsByRootAndName;let d=f[u];d===void 0&&(d={},f[u]=d);for(let p=0;p!==s;++p){const m=a[p],g=m.name;let _=d[g];if(_!==void 0)++_.referenceCount,r[p]=_;else{if(_=r[p],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,u,g));continue}const E=e&&e._propertyBindings[p].binding.parsedPath;_=new kL(He.create(i,g,E),m.ValueTypeName,m.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,u,g),r[p]=_}l[p].resultBuffer=_.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const i=(t._localRoot||this._root).uuid,a=t._clip.uuid,s=this._actionsByClip[a];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,a,i)}const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const s=e[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){const a=this._actions,s=this._actionsByClip;let r=s[e];if(r===void 0)r={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=r;else{const l=r.knownActions;t._byClipCacheIndex=l.length,l.push(t)}t._cacheIndex=a.length,a.push(t),r.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],a=t._cacheIndex;i._cacheIndex=a,e[a]=i,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,r=this._actionsByClip,l=r[s],u=l.knownActions,f=u[u.length-1],d=t._byClipCacheIndex;f._byClipCacheIndex=d,u[d]=f,u.pop(),t._byClipCacheIndex=null;const p=l.actionByRoot,m=(t._localRoot||this._root).uuid;delete p[m],u.length===0&&delete r[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const s=e[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,a=this._nActiveActions++,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=i,e[i]=s}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,a=--this._nActiveActions,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=i,e[i]=s}_addInactiveBinding(t,e,i){const a=this._bindingsByRootAndName,s=this._bindings;let r=a[e];r===void 0&&(r={},a[e]=r),r[i]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,a=i.rootNode.uuid,s=i.path,r=this._bindingsByRootAndName,l=r[a],u=e[e.length-1],f=t._cacheIndex;u._cacheIndex=f,e[f]=u,e.pop(),delete l[s],Object.keys(l).length===0&&delete r[a]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,a=this._nActiveBindings++,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=i,e[i]=s}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,a=--this._nActiveBindings,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=i,e[i]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return i===void 0&&(i=new SE(new Float32Array(2),new Float32Array(2),1,r8),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,a=--this._nActiveControlInterpolants,s=e[a];t.__cacheIndex=a,e[a]=t,s.__cacheIndex=i,e[i]=s}clipAction(t,e,i){const a=e||this._root,s=a.uuid;let r=typeof t=="string"?ip.findByName(a,t):t;const l=r!==null?r.uuid:t,u=this._actionsByClip[l];let f=null;if(i===void 0&&(r!==null?i=r.blendMode:i=cy),u!==void 0){const p=u.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;f=u.knownActions[0],r===null&&(r=f._clip)}if(r===null)return null;const d=new jL(this,r,e,i);return this._bindAction(d,f),this._addInactiveAction(d,l,s),d}existingAction(t,e){const i=e||this._root,a=i.uuid,s=typeof t=="string"?ip.findByName(i,t):t,r=s?s.uuid:t,l=this._actionsByClip[r];return l!==void 0&&l.actionByRoot[a]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,a=this.time+=t,s=Math.sign(t),r=this._accuIndex^=1;for(let f=0;f!==i;++f)e[f]._update(a,t,s,r);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(r);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,a=this._actionsByClip,s=a[i];if(s!==void 0){const r=s.knownActions;for(let l=0,u=r.length;l!==u;++l){const f=r[l];this._deactivateAction(f);const d=f._cacheIndex,p=e[e.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,p._cacheIndex=d,e[d]=p,e.pop(),this._removeInactiveBindingsForAction(f)}delete a[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const r in i){const l=i[r].actionByRoot,u=l[e];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const a=this._bindingsByRootAndName,s=a[e];if(s!==void 0)for(const r in s){const l=s[r];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(t,e){const i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class l8 extends iE{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isRenderTarget3D=!0,this.depth=i,this.texture=new fy(null,t,e,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class RE{constructor(t){this.value=t}clone(){return new RE(this.value.clone===void 0?this.value:this.value.clone())}}let c8=0;class u8 extends $s{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:c8++}),this.name="",this.usage=Zd,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let i=0,a=e.length;i<a;i++){const s=Array.isArray(e[i])?e[i]:[e[i]];for(let r=0;r<s.length;r++)this.uniforms.push(s[r].clone())}return this}clone(){return new this.constructor().copy(this)}}class f8 extends my{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class h8{constructor(t,e,i,a,s,r=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=a,this.count=s,this.normalized=r,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const jw=new pe;class qL{constructor(t,e,i=0,a=1/0){this.ray=new Sc(t,e),this.near=i,this.far=a,this.camera=null,this.layers=new Mf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return jw.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(jw),this}intersectObject(t,e=!0,i=[]){return hM(t,this,i,e),i.sort(qw),i}intersectObjects(t,e=!0,i=[]){for(let a=0,s=t.length;a<s;a++)hM(t[a],this,i,e);return i.sort(qw),i}}function qw(n,t){return n.distance-t.distance}function hM(n,t,e,i){let a=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(a=!1),a===!0&&i===!0){const s=n.children;for(let r=0,l=s.length;r<l;r++)hM(s[r],t,e,!0)}}class dM{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=xe(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(xe(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class d8{constructor(t=1,e=0,i=0){this.radius=t,this.theta=e,this.y=i}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return new this.constructor().copy(this)}}class DE{constructor(t,e,i,a){DE.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,i,a)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let i=0;i<4;i++)this.elements[i]=t[i+e];return this}set(t,e,i,a){const s=this.elements;return s[0]=t,s[2]=e,s[1]=i,s[3]=a,this}}const Yw=new mt;class p8{constructor(t=new mt(1/0,1/0),e=new mt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Yw.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Yw).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ww=new V,Eg=new V;class m8{constructor(t=new V,e=new V){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Ww.subVectors(t,this.start),Eg.subVectors(this.end,this.start);const i=Eg.dot(Eg);let s=Eg.dot(Ww)/i;return e&&(s=xe(s,0,1)),s}closestPointToPoint(t,e,i){const a=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(a).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Zw=new V;class g8 extends Ge{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const i=new Me,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let r=0,l=1,u=32;r<u;r++,l++){const f=r/u*Math.PI*2,d=l/u*Math.PI*2;a.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new ee(a,3));const s=new Wi({fog:!1,toneMapped:!1});this.cone=new tr(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Zw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Zw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const go=new V,Tg=new pe,ES=new pe;class v8 extends tr{constructor(t){const e=YL(t),i=new Me,a=[],s=[],r=new Zt(0,0,1),l=new Zt(0,1,0);for(let f=0;f<e.length;f++){const d=e[f];d.parent&&d.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(r.r,r.g,r.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new ee(a,3)),i.setAttribute("color",new ee(s,3));const u=new Wi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,a=i.getAttribute("position");ES.copy(this.root.matrixWorld).invert();for(let s=0,r=0;s<e.length;s++){const l=e[s];l.parent&&l.parent.isBone&&(Tg.multiplyMatrices(ES,l.matrixWorld),go.setFromMatrixPosition(Tg),a.setXYZ(r,go.x,go.y,go.z),Tg.multiplyMatrices(ES,l.parent.matrixWorld),go.setFromMatrixPosition(Tg),a.setXYZ(r+1,go.x,go.y,go.z),r+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function YL(n){const t=[];n.isBone===!0&&t.push(n);for(let e=0;e<n.children.length;e++)t.push(...YL(n.children[e]));return t}class y8 extends jn{constructor(t,e,i){const a=new Pp(e,4,2),s=new Jo({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=t,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _8=new V,Kw=new Zt,Qw=new Zt;class x8 extends Ge{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const a=new Lp(e);a.rotateY(Math.PI*.5),this.material=new Jo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=a.getAttribute("position"),r=new Float32Array(s.count*3);a.setAttribute("color",new rn(r,3)),this.add(new jn(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Kw.copy(this.light.color),Qw.copy(this.light.groundColor);for(let i=0,a=e.count;i<a;i++){const s=i<a/2?Kw:Qw;e.setXYZ(i,s.r,s.g,s.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(_8.setFromMatrixPosition(this.light.matrixWorld).negate())}}class S8 extends tr{constructor(t=10,e=10,i=4473924,a=8947848){i=new Zt(i),a=new Zt(a);const s=e/2,r=t/e,l=t/2,u=[],f=[];for(let m=0,g=0,_=-l;m<=e;m++,_+=r){u.push(-l,0,_,l,0,_),u.push(_,0,-l,_,0,l);const E=m===s?i:a;E.toArray(f,g),g+=3,E.toArray(f,g),g+=3,E.toArray(f,g),g+=3,E.toArray(f,g),g+=3}const d=new Me;d.setAttribute("position",new ee(u,3)),d.setAttribute("color",new ee(f,3));const p=new Wi({vertexColors:!0,toneMapped:!1});super(d,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class M8 extends tr{constructor(t=10,e=16,i=8,a=64,s=4473924,r=8947848){s=new Zt(s),r=new Zt(r);const l=[],u=[];if(e>1)for(let p=0;p<e;p++){const m=p/e*(Math.PI*2),g=Math.sin(m)*t,_=Math.cos(m)*t;l.push(0,0,0),l.push(g,0,_);const E=p&1?s:r;u.push(E.r,E.g,E.b),u.push(E.r,E.g,E.b)}for(let p=0;p<i;p++){const m=p&1?s:r,g=t-t/i*p;for(let _=0;_<a;_++){let E=_/a*(Math.PI*2),M=Math.sin(E)*g,v=Math.cos(E)*g;l.push(M,0,v),u.push(m.r,m.g,m.b),E=(_+1)/a*(Math.PI*2),M=Math.sin(E)*g,v=Math.cos(E)*g,l.push(M,0,v),u.push(m.r,m.g,m.b)}}const f=new Me;f.setAttribute("position",new ee(l,3)),f.setAttribute("color",new ee(u,3));const d=new Wi({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Jw=new V,Ag=new V,$w=new V;class b8 extends Ge{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",e===void 0&&(e=1);let a=new Me;a.setAttribute("position",new ee([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const s=new Wi({fog:!1,toneMapped:!1});this.lightPlane=new jo(a,s),this.add(this.lightPlane),a=new Me,a.setAttribute("position",new ee([0,0,0,0,0,1],3)),this.targetLine=new jo(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Jw.setFromMatrixPosition(this.light.matrixWorld),Ag.setFromMatrixPosition(this.light.target.matrixWorld),$w.subVectors(Ag,Jw),this.lightPlane.lookAt(Ag),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ag),this.targetLine.scale.z=$w.length()}}const Cg=new V,Dn=new hy;class E8 extends tr{constructor(t){const e=new Me,i=new Wi({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],r={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(_,E){u(_),u(E)}function u(_){a.push(0,0,0),s.push(0,0,0),r[_]===void 0&&(r[_]=[]),r[_].push(a.length/3-1)}e.setAttribute("position",new ee(a,3)),e.setAttribute("color",new ee(s,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update();const f=new Zt(16755200),d=new Zt(16711680),p=new Zt(43775),m=new Zt(16777215),g=new Zt(3355443);this.setColors(f,d,p,m,g)}setColors(t,e,i,a,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,t.r,t.g,t.b),l.setXYZ(1,t.r,t.g,t.b),l.setXYZ(2,t.r,t.g,t.b),l.setXYZ(3,t.r,t.g,t.b),l.setXYZ(4,t.r,t.g,t.b),l.setXYZ(5,t.r,t.g,t.b),l.setXYZ(6,t.r,t.g,t.b),l.setXYZ(7,t.r,t.g,t.b),l.setXYZ(8,t.r,t.g,t.b),l.setXYZ(9,t.r,t.g,t.b),l.setXYZ(10,t.r,t.g,t.b),l.setXYZ(11,t.r,t.g,t.b),l.setXYZ(12,t.r,t.g,t.b),l.setXYZ(13,t.r,t.g,t.b),l.setXYZ(14,t.r,t.g,t.b),l.setXYZ(15,t.r,t.g,t.b),l.setXYZ(16,t.r,t.g,t.b),l.setXYZ(17,t.r,t.g,t.b),l.setXYZ(18,t.r,t.g,t.b),l.setXYZ(19,t.r,t.g,t.b),l.setXYZ(20,t.r,t.g,t.b),l.setXYZ(21,t.r,t.g,t.b),l.setXYZ(22,t.r,t.g,t.b),l.setXYZ(23,t.r,t.g,t.b),l.setXYZ(24,e.r,e.g,e.b),l.setXYZ(25,e.r,e.g,e.b),l.setXYZ(26,e.r,e.g,e.b),l.setXYZ(27,e.r,e.g,e.b),l.setXYZ(28,e.r,e.g,e.b),l.setXYZ(29,e.r,e.g,e.b),l.setXYZ(30,e.r,e.g,e.b),l.setXYZ(31,e.r,e.g,e.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,a.r,a.g,a.b),l.setXYZ(39,a.r,a.g,a.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,i=1,a=1;Dn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===ts?-1:0;zn("c",e,t,Dn,0,0,s),zn("t",e,t,Dn,0,0,1),zn("n1",e,t,Dn,-i,-a,s),zn("n2",e,t,Dn,i,-a,s),zn("n3",e,t,Dn,-i,a,s),zn("n4",e,t,Dn,i,a,s),zn("f1",e,t,Dn,-i,-a,1),zn("f2",e,t,Dn,i,-a,1),zn("f3",e,t,Dn,-i,a,1),zn("f4",e,t,Dn,i,a,1),zn("u1",e,t,Dn,i*.7,a*1.1,s),zn("u2",e,t,Dn,-i*.7,a*1.1,s),zn("u3",e,t,Dn,0,a*2,s),zn("cf1",e,t,Dn,-i,0,1),zn("cf2",e,t,Dn,i,0,1),zn("cf3",e,t,Dn,0,-a,1),zn("cf4",e,t,Dn,0,a,1),zn("cn1",e,t,Dn,-i,0,s),zn("cn2",e,t,Dn,i,0,s),zn("cn3",e,t,Dn,0,-a,s),zn("cn4",e,t,Dn,0,a,s),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function zn(n,t,e,i,a,s,r){Cg.set(a,s,r).unproject(i);const l=t[n];if(l!==void 0){const u=e.getAttribute("position");for(let f=0,d=l.length;f<d;f++)u.setXYZ(l[f],Cg.x,Cg.y,Cg.z)}}const wg=new Pi;class T8 extends tr{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(8*3),s=new Me;s.setIndex(new rn(i,1)),s.setAttribute("position",new rn(a,3)),super(s,new Wi({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&wg.setFromObject(this.object),wg.isEmpty())return;const t=wg.min,e=wg.max,i=this.geometry.attributes.position,a=i.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=t.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=e.z,a[9]=e.x,a[10]=t.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=t.z,a[15]=t.x,a[16]=e.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=e.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class A8 extends tr{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Me;s.setIndex(new rn(i,1)),s.setAttribute("position",new ee(a,3)),super(s,new Wi({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class C8 extends jo{constructor(t,e=1,i=16776960){const a=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new Me;r.setAttribute("position",new ee(s,3)),r.computeBoundingSphere(),super(r,new Wi({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Me;u.setAttribute("position",new ee(l,3)),u.computeBoundingSphere(),this.add(new jn(u,new Jo({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const tR=new V;let Rg,TS;class w8 extends Ge{constructor(t=new V(0,0,1),e=new V(0,0,0),i=1,a=16776960,s=i*.2,r=s*.2){super(),this.type="ArrowHelper",Rg===void 0&&(Rg=new Me,Rg.setAttribute("position",new ee([0,0,0,0,1,0],3)),TS=new Op(.5,1,5,1),TS.translate(0,-.5,0)),this.position.copy(e),this.line=new jo(Rg,new Wi({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new jn(TS,new Jo({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,s,r)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{tR.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(tR,e)}}setLength(t,e=t*.2,i=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class R8 extends tr{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Me;a.setAttribute("position",new ee(e,3)),a.setAttribute("color",new ee(i,3));const s=new Wi({vertexColors:!0,toneMapped:!1});super(a,s),this.type="AxesHelper"}setColors(t,e,i){const a=new Zt,s=this.geometry.attributes.color.array;return a.set(t),a.toArray(s,0),a.toArray(s,3),a.set(e),a.toArray(s,6),a.toArray(s,9),a.set(i),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class D8{constructor(){this.type="ShapePath",this.color=new Zt,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new bv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,a){return this.currentPath.quadraticCurveTo(t,e,i,a),this}bezierCurveTo(t,e,i,a,s,r){return this.currentPath.bezierCurveTo(t,e,i,a,s,r),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(v){const x=[];for(let b=0,T=v.length;b<T;b++){const w=v[b],R=new rc;R.curves=w.curves,x.push(R)}return x}function i(v,x){const b=x.length;let T=!1;for(let w=b-1,R=0;R<b;w=R++){let N=x[w],U=x[R],D=U.x-N.x,C=U.y-N.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(N=x[R],D=-D,U=x[w],C=-C),v.y<N.y||v.y>U.y)continue;if(v.y===N.y){if(v.x===N.x)return!0}else{const B=C*(v.x-N.x)-D*(v.y-N.y);if(B===0)return!0;if(B<0)continue;T=!T}}else{if(v.y!==N.y)continue;if(U.x<=v.x&&v.x<=N.x||N.x<=v.x&&v.x<=U.x)return!0}}return T}const a=xs.isClockWise,s=this.subPaths;if(s.length===0)return[];let r,l,u;const f=[];if(s.length===1)return l=s[0],u=new rc,u.curves=l.curves,f.push(u),f;let d=!a(s[0].getPoints());d=t?!d:d;const p=[],m=[];let g=[],_=0,E;m[_]=void 0,g[_]=[];for(let v=0,x=s.length;v<x;v++)l=s[v],E=l.getPoints(),r=a(E),r=t?!r:r,r?(!d&&m[_]&&_++,m[_]={s:new rc,p:E},m[_].s.curves=l.curves,d&&_++,g[_]=[]):g[_].push({h:l,p:E[0]});if(!m[0])return e(s);if(m.length>1){let v=!1,x=0;for(let b=0,T=m.length;b<T;b++)p[b]=[];for(let b=0,T=m.length;b<T;b++){const w=g[b];for(let R=0;R<w.length;R++){const N=w[R];let U=!0;for(let D=0;D<m.length;D++)i(N.p,m[D].p)&&(b!==D&&x++,U?(U=!1,p[D].push(N)):v=!0);U&&p[b].push(N)}}x>0&&v===!1&&(g=p)}let M;for(let v=0,x=m.length;v<x;v++){u=m[v].s,f.push(u),M=g[v];for(let b=0,T=M.length;b<T;b++)u.holes.push(M[b].h)}return f}}class N8 extends $s{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function U8(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function O8(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function L8(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function pM(n,t,e,i){const a=P8(i);switch(e){case Kb:return n*t;case ry:return n*t/a.components*a.byteLength;case Dp:return n*t/a.components*a.byteLength;case Jb:return n*t*2/a.components*a.byteLength;case oy:return n*t*2/a.components*a.byteLength;case Qb:return n*t*3/a.components*a.byteLength;case Ni:return n*t*4/a.components*a.byteLength;case ly:return n*t*4/a.components*a.byteLength;case pd:case md:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case gd:case vd:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case W0:case K0:return Math.max(n,16)*Math.max(t,8)/4;case Y0:case Z0:return Math.max(n,8)*Math.max(t,8)/2;case Q0:case J0:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case $0:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case tv:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case ev:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case nv:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case iv:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case av:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case sv:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case rv:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case ov:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case lv:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case cv:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case uv:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case fv:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case hv:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case dv:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case yd:case pv:case mv:return Math.ceil(n/4)*Math.ceil(t/4)*16;case $b:case gv:return Math.ceil(n/4)*Math.ceil(t/4)*8;case vv:case yv:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function P8(n){switch(n){case as:case Yb:return{byteLength:1,components:1};case vf:case Wb:case If:return{byteLength:2,components:1};case ay:case sy:return{byteLength:2,components:4};case Hr:case iy:case sa:return{byteLength:4,components:1};case Zb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class z8{static contain(t,e){return U8(t,e)}static cover(t,e){return O8(t,e)}static fill(t){return L8(t)}static getByteLength(t,e,i,a){return pM(t,e,i,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ty}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ty);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WL(){let n=null,t=!1,e=null,i=null;function a(s,r){e(s,r),i=n.requestAnimationFrame(a)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(a),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){n=s}}}function B8(n){const t=new WeakMap;function e(l,u){const f=l.array,d=l.usage,p=f.byteLength,m=n.createBuffer();n.bindBuffer(u,m),n.bufferData(u,f,d),l.onUploadCallback();let g;if(f instanceof Float32Array)g=n.FLOAT;else if(typeof Float16Array<"u"&&f instanceof Float16Array)g=n.HALF_FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)g=n.SHORT;else if(f instanceof Uint32Array)g=n.UNSIGNED_INT;else if(f instanceof Int32Array)g=n.INT;else if(f instanceof Int8Array)g=n.BYTE;else if(f instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:p}}function i(l,u,f){const d=u.array,p=u.updateRanges;if(n.bindBuffer(f,l),p.length===0)n.bufferSubData(f,0,d);else{p.sort((g,_)=>g.start-_.start);let m=0;for(let g=1;g<p.length;g++){const _=p[m],E=p[g];E.start<=_.start+_.count+1?_.count=Math.max(_.count,E.start+E.count-_.start):(++m,p[m]=E)}p.length=m+1;for(let g=0,_=p.length;g<_;g++){const E=p[g];n.bufferSubData(f,E.start*d.BYTES_PER_ELEMENT,d,E.start,E.count)}u.clearUpdateRanges()}u.onUploadCallback()}function a(l){return l.isInterleavedBufferAttribute&&(l=l.data),t.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=t.get(l);u&&(n.deleteBuffer(u.buffer),t.delete(l))}function r(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const d=t.get(l);(!d||d.version<l.version)&&t.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=t.get(l);if(f===void 0)t.set(l,e(l,u));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,l,u),f.version=l.version}}return{get:a,remove:s,update:r}}var I8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,V8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,H8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,F8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,G8=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,X8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,k8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,j8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,q8=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Y8=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,W8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Z8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,K8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Q8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,J8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,tG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,eG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,nG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,iG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,aG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,sG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,rG=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,oG=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,lG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cG=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,uG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,fG=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,hG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,pG="gl_FragColor = linearToOutputTexel( gl_FragColor );",mG=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,gG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,vG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,yG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_G=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,SG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,MG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,bG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,EG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,TG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,AG=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,CG=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wG=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,RG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,DG=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,NG=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,UG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,OG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,LG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,PG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,zG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,BG=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,IG=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,VG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,HG=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,FG=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,GG=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,XG=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,kG=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,jG=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,YG=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ZG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,KG=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,QG=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,JG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,$G=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,t7=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,e7=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,n7=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,i7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,a7=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,s7=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,r7=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,o7=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,l7=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,c7=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,u7=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,f7=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,h7=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,d7=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,p7=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,m7=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,g7=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,v7=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,y7=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_7=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,x7=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,S7=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,M7=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,b7=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,E7=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,T7=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,A7=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,C7=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,w7=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,R7=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,D7=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,N7=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,U7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,O7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,L7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,P7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,z7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const B7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,I7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,V7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,H7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,G7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,X7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,k7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,j7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,q7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Y7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,W7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Z7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,K7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Q7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,J7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,n9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,i9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,a9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,s9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,r9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,o9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,l9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,h9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,d9=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,p9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,m9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,g9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Te={alphahash_fragment:I8,alphahash_pars_fragment:V8,alphamap_fragment:H8,alphamap_pars_fragment:F8,alphatest_fragment:G8,alphatest_pars_fragment:X8,aomap_fragment:k8,aomap_pars_fragment:j8,batching_pars_vertex:q8,batching_vertex:Y8,begin_vertex:W8,beginnormal_vertex:Z8,bsdfs:K8,iridescence_fragment:Q8,bumpmap_pars_fragment:J8,clipping_planes_fragment:$8,clipping_planes_pars_fragment:tG,clipping_planes_pars_vertex:eG,clipping_planes_vertex:nG,color_fragment:iG,color_pars_fragment:aG,color_pars_vertex:sG,color_vertex:rG,common:oG,cube_uv_reflection_fragment:lG,defaultnormal_vertex:cG,displacementmap_pars_vertex:uG,displacementmap_vertex:fG,emissivemap_fragment:hG,emissivemap_pars_fragment:dG,colorspace_fragment:pG,colorspace_pars_fragment:mG,envmap_fragment:gG,envmap_common_pars_fragment:vG,envmap_pars_fragment:yG,envmap_pars_vertex:_G,envmap_physical_pars_fragment:DG,envmap_vertex:xG,fog_vertex:SG,fog_pars_vertex:MG,fog_fragment:bG,fog_pars_fragment:EG,gradientmap_pars_fragment:TG,lightmap_pars_fragment:AG,lights_lambert_fragment:CG,lights_lambert_pars_fragment:wG,lights_pars_begin:RG,lights_toon_fragment:NG,lights_toon_pars_fragment:UG,lights_phong_fragment:OG,lights_phong_pars_fragment:LG,lights_physical_fragment:PG,lights_physical_pars_fragment:zG,lights_fragment_begin:BG,lights_fragment_maps:IG,lights_fragment_end:VG,logdepthbuf_fragment:HG,logdepthbuf_pars_fragment:FG,logdepthbuf_pars_vertex:GG,logdepthbuf_vertex:XG,map_fragment:kG,map_pars_fragment:jG,map_particle_fragment:qG,map_particle_pars_fragment:YG,metalnessmap_fragment:WG,metalnessmap_pars_fragment:ZG,morphinstance_vertex:KG,morphcolor_vertex:QG,morphnormal_vertex:JG,morphtarget_pars_vertex:$G,morphtarget_vertex:t7,normal_fragment_begin:e7,normal_fragment_maps:n7,normal_pars_fragment:i7,normal_pars_vertex:a7,normal_vertex:s7,normalmap_pars_fragment:r7,clearcoat_normal_fragment_begin:o7,clearcoat_normal_fragment_maps:l7,clearcoat_pars_fragment:c7,iridescence_pars_fragment:u7,opaque_fragment:f7,packing:h7,premultiplied_alpha_fragment:d7,project_vertex:p7,dithering_fragment:m7,dithering_pars_fragment:g7,roughnessmap_fragment:v7,roughnessmap_pars_fragment:y7,shadowmap_pars_fragment:_7,shadowmap_pars_vertex:x7,shadowmap_vertex:S7,shadowmask_pars_fragment:M7,skinbase_vertex:b7,skinning_pars_vertex:E7,skinning_vertex:T7,skinnormal_vertex:A7,specularmap_fragment:C7,specularmap_pars_fragment:w7,tonemapping_fragment:R7,tonemapping_pars_fragment:D7,transmission_fragment:N7,transmission_pars_fragment:U7,uv_pars_fragment:O7,uv_pars_vertex:L7,uv_vertex:P7,worldpos_vertex:z7,background_vert:B7,background_frag:I7,backgroundCube_vert:V7,backgroundCube_frag:H7,cube_vert:F7,cube_frag:G7,depth_vert:X7,depth_frag:k7,distanceRGBA_vert:j7,distanceRGBA_frag:q7,equirect_vert:Y7,equirect_frag:W7,linedashed_vert:Z7,linedashed_frag:K7,meshbasic_vert:Q7,meshbasic_frag:J7,meshlambert_vert:$7,meshlambert_frag:t9,meshmatcap_vert:e9,meshmatcap_frag:n9,meshnormal_vert:i9,meshnormal_frag:a9,meshphong_vert:s9,meshphong_frag:r9,meshphysical_vert:o9,meshphysical_frag:l9,meshtoon_vert:c9,meshtoon_frag:u9,points_vert:f9,points_frag:h9,shadow_vert:d9,shadow_frag:p9,sprite_vert:m9,sprite_frag:g9},Ft={common:{diffuse:{value:new Zt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Se},alphaMap:{value:null},alphaMapTransform:{value:new Se},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Se}},envmap:{envMap:{value:null},envMapRotation:{value:new Se},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Se}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Se}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Se},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Se},normalScale:{value:new mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Se},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Se}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Se}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Se}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Se},alphaTest:{value:0},uvTransform:{value:new Se}},sprite:{diffuse:{value:new Zt(16777215)},opacity:{value:1},center:{value:new mt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Se},alphaMap:{value:null},alphaMapTransform:{value:new Se},alphaTest:{value:0}}},ys={basic:{uniforms:Gi([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.fog]),vertexShader:Te.meshbasic_vert,fragmentShader:Te.meshbasic_frag},lambert:{uniforms:Gi([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,Ft.lights,{emissive:{value:new Zt(0)}}]),vertexShader:Te.meshlambert_vert,fragmentShader:Te.meshlambert_frag},phong:{uniforms:Gi([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,Ft.lights,{emissive:{value:new Zt(0)},specular:{value:new Zt(1118481)},shininess:{value:30}}]),vertexShader:Te.meshphong_vert,fragmentShader:Te.meshphong_frag},standard:{uniforms:Gi([Ft.common,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.roughnessmap,Ft.metalnessmap,Ft.fog,Ft.lights,{emissive:{value:new Zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Te.meshphysical_vert,fragmentShader:Te.meshphysical_frag},toon:{uniforms:Gi([Ft.common,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.gradientmap,Ft.fog,Ft.lights,{emissive:{value:new Zt(0)}}]),vertexShader:Te.meshtoon_vert,fragmentShader:Te.meshtoon_frag},matcap:{uniforms:Gi([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,{matcap:{value:null}}]),vertexShader:Te.meshmatcap_vert,fragmentShader:Te.meshmatcap_frag},points:{uniforms:Gi([Ft.points,Ft.fog]),vertexShader:Te.points_vert,fragmentShader:Te.points_frag},dashed:{uniforms:Gi([Ft.common,Ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Te.linedashed_vert,fragmentShader:Te.linedashed_frag},depth:{uniforms:Gi([Ft.common,Ft.displacementmap]),vertexShader:Te.depth_vert,fragmentShader:Te.depth_frag},normal:{uniforms:Gi([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,{opacity:{value:1}}]),vertexShader:Te.meshnormal_vert,fragmentShader:Te.meshnormal_frag},sprite:{uniforms:Gi([Ft.sprite,Ft.fog]),vertexShader:Te.sprite_vert,fragmentShader:Te.sprite_frag},background:{uniforms:{uvTransform:{value:new Se},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Te.background_vert,fragmentShader:Te.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Se}},vertexShader:Te.backgroundCube_vert,fragmentShader:Te.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Te.cube_vert,fragmentShader:Te.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Te.equirect_vert,fragmentShader:Te.equirect_frag},distanceRGBA:{uniforms:Gi([Ft.common,Ft.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Te.distanceRGBA_vert,fragmentShader:Te.distanceRGBA_frag},shadow:{uniforms:Gi([Ft.lights,Ft.fog,{color:{value:new Zt(0)},opacity:{value:1}}]),vertexShader:Te.shadow_vert,fragmentShader:Te.shadow_frag}};ys.physical={uniforms:Gi([ys.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Se},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Se},clearcoatNormalScale:{value:new mt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Se},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Se},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Se},sheen:{value:0},sheenColor:{value:new Zt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Se},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Se},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Se},transmissionSamplerSize:{value:new mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Se},attenuationDistance:{value:0},attenuationColor:{value:new Zt(0)},specularColor:{value:new Zt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Se},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Se},anisotropyVector:{value:new mt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Se}}]),vertexShader:Te.meshphysical_vert,fragmentShader:Te.meshphysical_frag};const Dg={r:0,b:0,g:0},Ll=new Oa,v9=new pe;function y9(n,t,e,i,a,s,r){const l=new Zt(0);let u=s===!0?0:1,f,d,p=null,m=0,g=null;function _(b){let T=b.isScene===!0?b.background:null;return T&&T.isTexture&&(T=(b.backgroundBlurriness>0?e:t).get(T)),T}function E(b){let T=!1;const w=_(b);w===null?v(l,u):w&&w.isColor&&(v(w,1),T=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?i.buffers.color.setClear(0,0,0,1,r):R==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,r),(n.autoClear||T)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function M(b,T){const w=_(T);w&&(w.isCubeTexture||w.mapping===Bf)?(d===void 0&&(d=new jn(new Mc(1,1,1),new Ms({name:"BackgroundCubeMaterial",uniforms:bf(ys.backgroundCube.uniforms),vertexShader:ys.backgroundCube.vertexShader,fragmentShader:ys.backgroundCube.fragmentShader,side:Oi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(R,N,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(d)),Ll.copy(T.backgroundRotation),Ll.x*=-1,Ll.y*=-1,Ll.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Ll.y*=-1,Ll.z*=-1),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(v9.makeRotationFromEuler(Ll)),d.material.toneMapped=Be.getTransfer(w.colorSpace)!==Je,(p!==w||m!==w.version||g!==n.toneMapping)&&(d.material.needsUpdate=!0,p=w,m=w.version,g=n.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(f===void 0&&(f=new jn(new Hf(2,2),new Ms({name:"BackgroundMaterial",uniforms:bf(ys.background.uniforms),vertexShader:ys.background.vertexShader,fragmentShader:ys.background.fragmentShader,side:Ir,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(f)),f.material.uniforms.t2D.value=w,f.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,f.material.toneMapped=Be.getTransfer(w.colorSpace)!==Je,w.matrixAutoUpdate===!0&&w.updateMatrix(),f.material.uniforms.uvTransform.value.copy(w.matrix),(p!==w||m!==w.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,p=w,m=w.version,g=n.toneMapping),f.layers.enableAll(),b.unshift(f,f.geometry,f.material,0,0,null))}function v(b,T){b.getRGB(Dg,YO(n)),i.buffers.color.setClear(Dg.r,Dg.g,Dg.b,T,r)}function x(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(b,T=1){l.set(b),u=T,v(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(b){u=b,v(l,u)},render:E,addToRenderList:M,dispose:x}}function _9(n,t){const e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=m(null);let s=a,r=!1;function l(C,B,Z,q,it){let et=!1;const L=p(q,Z,B);s!==L&&(s=L,f(s.object)),et=g(C,q,Z,it),et&&_(C,q,Z,it),it!==null&&t.update(it,n.ELEMENT_ARRAY_BUFFER),(et||r)&&(r=!1,T(C,B,Z,q),it!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(it).buffer))}function u(){return n.createVertexArray()}function f(C){return n.bindVertexArray(C)}function d(C){return n.deleteVertexArray(C)}function p(C,B,Z){const q=Z.wireframe===!0;let it=i[C.id];it===void 0&&(it={},i[C.id]=it);let et=it[B.id];et===void 0&&(et={},it[B.id]=et);let L=et[q];return L===void 0&&(L=m(u()),et[q]=L),L}function m(C){const B=[],Z=[],q=[];for(let it=0;it<e;it++)B[it]=0,Z[it]=0,q[it]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:Z,attributeDivisors:q,object:C,attributes:{},index:null}}function g(C,B,Z,q){const it=s.attributes,et=B.attributes;let L=0;const G=Z.getAttributes();for(const H in G)if(G[H].location>=0){const rt=it[H];let vt=et[H];if(vt===void 0&&(H==="instanceMatrix"&&C.instanceMatrix&&(vt=C.instanceMatrix),H==="instanceColor"&&C.instanceColor&&(vt=C.instanceColor)),rt===void 0||rt.attribute!==vt||vt&&rt.data!==vt.data)return!0;L++}return s.attributesNum!==L||s.index!==q}function _(C,B,Z,q){const it={},et=B.attributes;let L=0;const G=Z.getAttributes();for(const H in G)if(G[H].location>=0){let rt=et[H];rt===void 0&&(H==="instanceMatrix"&&C.instanceMatrix&&(rt=C.instanceMatrix),H==="instanceColor"&&C.instanceColor&&(rt=C.instanceColor));const vt={};vt.attribute=rt,rt&&rt.data&&(vt.data=rt.data),it[H]=vt,L++}s.attributes=it,s.attributesNum=L,s.index=q}function E(){const C=s.newAttributes;for(let B=0,Z=C.length;B<Z;B++)C[B]=0}function M(C){v(C,0)}function v(C,B){const Z=s.newAttributes,q=s.enabledAttributes,it=s.attributeDivisors;Z[C]=1,q[C]===0&&(n.enableVertexAttribArray(C),q[C]=1),it[C]!==B&&(n.vertexAttribDivisor(C,B),it[C]=B)}function x(){const C=s.newAttributes,B=s.enabledAttributes;for(let Z=0,q=B.length;Z<q;Z++)B[Z]!==C[Z]&&(n.disableVertexAttribArray(Z),B[Z]=0)}function b(C,B,Z,q,it,et,L){L===!0?n.vertexAttribIPointer(C,B,Z,it,et):n.vertexAttribPointer(C,B,Z,q,it,et)}function T(C,B,Z,q){E();const it=q.attributes,et=Z.getAttributes(),L=B.defaultAttributeValues;for(const G in et){const H=et[G];if(H.location>=0){let W=it[G];if(W===void 0&&(G==="instanceMatrix"&&C.instanceMatrix&&(W=C.instanceMatrix),G==="instanceColor"&&C.instanceColor&&(W=C.instanceColor)),W!==void 0){const rt=W.normalized,vt=W.itemSize,Dt=t.get(W);if(Dt===void 0)continue;const Vt=Dt.buffer,J=Dt.type,yt=Dt.bytesPerElement,Yt=J===n.INT||J===n.UNSIGNED_INT||W.gpuType===iy;if(W.isInterleavedBufferAttribute){const Lt=W.data,Xt=Lt.stride,he=W.offset;if(Lt.isInstancedInterleavedBuffer){for(let qt=0;qt<H.locationSize;qt++)v(H.location+qt,Lt.meshPerAttribute);C.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Lt.meshPerAttribute*Lt.count)}else for(let qt=0;qt<H.locationSize;qt++)M(H.location+qt);n.bindBuffer(n.ARRAY_BUFFER,Vt);for(let qt=0;qt<H.locationSize;qt++)b(H.location+qt,vt/H.locationSize,J,rt,Xt*yt,(he+vt/H.locationSize*qt)*yt,Yt)}else{if(W.isInstancedBufferAttribute){for(let Lt=0;Lt<H.locationSize;Lt++)v(H.location+Lt,W.meshPerAttribute);C.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let Lt=0;Lt<H.locationSize;Lt++)M(H.location+Lt);n.bindBuffer(n.ARRAY_BUFFER,Vt);for(let Lt=0;Lt<H.locationSize;Lt++)b(H.location+Lt,vt/H.locationSize,J,rt,vt*yt,vt/H.locationSize*Lt*yt,Yt)}}else if(L!==void 0){const rt=L[G];if(rt!==void 0)switch(rt.length){case 2:n.vertexAttrib2fv(H.location,rt);break;case 3:n.vertexAttrib3fv(H.location,rt);break;case 4:n.vertexAttrib4fv(H.location,rt);break;default:n.vertexAttrib1fv(H.location,rt)}}}}x()}function w(){U();for(const C in i){const B=i[C];for(const Z in B){const q=B[Z];for(const it in q)d(q[it].object),delete q[it];delete B[Z]}delete i[C]}}function R(C){if(i[C.id]===void 0)return;const B=i[C.id];for(const Z in B){const q=B[Z];for(const it in q)d(q[it].object),delete q[it];delete B[Z]}delete i[C.id]}function N(C){for(const B in i){const Z=i[B];if(Z[C.id]===void 0)continue;const q=Z[C.id];for(const it in q)d(q[it].object),delete q[it];delete Z[C.id]}}function U(){D(),r=!0,s!==a&&(s=a,f(s.object))}function D(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:l,reset:U,resetDefaultState:D,dispose:w,releaseStatesOfGeometry:R,releaseStatesOfProgram:N,initAttributes:E,enableAttribute:M,disableUnusedAttributes:x}}function x9(n,t,e){let i;function a(f){i=f}function s(f,d){n.drawArrays(i,f,d),e.update(d,i,1)}function r(f,d,p){p!==0&&(n.drawArraysInstanced(i,f,d,p),e.update(d,i,p))}function l(f,d,p){if(p===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,d,0,p);let g=0;for(let _=0;_<p;_++)g+=d[_];e.update(g,i,1)}function u(f,d,p,m){if(p===0)return;const g=t.get("WEBGL_multi_draw");if(g===null)for(let _=0;_<f.length;_++)r(f[_],d[_],m[_]);else{g.multiDrawArraysInstancedWEBGL(i,f,0,d,0,m,0,p);let _=0;for(let E=0;E<p;E++)_+=d[E]*m[E];e.update(_,i,1)}}this.setMode=a,this.render=s,this.renderInstances=r,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function S9(n,t,e,i){let a;function s(){if(a!==void 0)return a;if(t.has("EXT_texture_filter_anisotropic")===!0){const N=t.get("EXT_texture_filter_anisotropic");a=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function r(N){return!(N!==Ni&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(N){const U=N===If&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(N!==as&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==sa&&!U)}function u(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=e.precision!==void 0?e.precision:"highp";const d=u(f);d!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",d,"instead."),f=d);const p=e.logarithmicDepthBuffer===!0,m=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=n.getParameter(n.MAX_TEXTURE_SIZE),M=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),b=n.getParameter(n.MAX_VARYING_VECTORS),T=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=_>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:r,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:p,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:_,maxTextureSize:E,maxCubemapSize:M,maxAttributes:v,maxVertexUniforms:x,maxVaryings:b,maxFragmentUniforms:T,vertexTextures:w,maxSamples:R}}function M9(n){const t=this;let e=null,i=0,a=!1,s=!1;const r=new Sr,l=new Se,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||i!==0||a;return a=m,i=p.length,g},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){e=d(p,m,0)},this.setState=function(p,m,g){const _=p.clippingPlanes,E=p.clipIntersection,M=p.clipShadows,v=n.get(p);if(!a||_===null||_.length===0||s&&!M)s?d(null):f();else{const x=s?0:i,b=x*4;let T=v.clippingState||null;u.value=T,T=d(_,m,b,g);for(let w=0;w!==b;++w)T[w]=e[w];v.clippingState=T,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=x}};function f(){u.value!==e&&(u.value=e,u.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function d(p,m,g,_){const E=p!==null?p.length:0;let M=null;if(E!==0){if(M=u.value,_!==!0||M===null){const v=g+E*4,x=m.matrixWorldInverse;l.getNormalMatrix(x),(M===null||M.length<v)&&(M=new Float32Array(v));for(let b=0,T=g;b!==E;++b,T+=4)r.copy(p[b]).applyMatrix4(x,l),r.normal.toArray(M,T),M[T+3]=r.constant}u.value=M,u.needsUpdate=!0}return t.numPlanes=E,t.numIntersection=0,M}}function b9(n){let t=new WeakMap;function e(r,l){return l===Gd?r.mapping=Vr:l===Xd&&(r.mapping=Xo),r}function i(r){if(r&&r.isTexture){const l=r.mapping;if(l===Gd||l===Xd)if(t.has(r)){const u=t.get(r).texture;return e(u,r.mapping)}else{const u=r.image;if(u&&u.height>0){const f=new KO(u.height);return f.fromEquirectangularTexture(n,r),t.set(r,f),r.addEventListener("dispose",a),e(f.texture,r.mapping)}else return null}}return r}function a(r){const l=r.target;l.removeEventListener("dispose",a);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}const Fu=4,eR=[.125,.215,.35,.446,.526,.582],jl=20,AS=new js,nR=new Zt;let CS=null,wS=0,RS=0,DS=!1;const Xl=(1+Math.sqrt(5))/2,yu=1/Xl,iR=[new V(-Xl,yu,0),new V(Xl,yu,0),new V(-yu,0,Xl),new V(yu,0,Xl),new V(0,Xl,-yu),new V(0,Xl,yu),new V(-1,1,-1),new V(1,1,-1),new V(-1,1,1),new V(1,1,1)],E9=new V;class mM{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,a=100,s={}){const{size:r=256,position:l=E9}=s;CS=this._renderer.getRenderTarget(),wS=this._renderer.getActiveCubeFace(),RS=this._renderer.getActiveMipmapLevel(),DS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(r);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(t,i,a,u,l),e>0&&this._blur(u,0,0,e),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=rR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(CS,wS,RS),this._renderer.xr.enabled=DS,t.scissorTest=!1,Ng(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Vr||t.mapping===Xo?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),CS=this._renderer.getRenderTarget(),wS=this._renderer.getActiveCubeFace(),RS=this._renderer.getActiveMipmapLevel(),DS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:Kn,minFilter:Kn,generateMipmaps:!1,type:If,format:Ni,colorSpace:ko,depthBuffer:!1},a=aR(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=aR(t,e,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=T9(s)),this._blurMaterial=A9(s,t,e)}return a}_compileMaterial(t){const e=new jn(this._lodPlanes[0],t);this._renderer.compile(e,AS)}_sceneToCubeUV(t,e,i,a,s){const u=new En(90,1,e,i),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,g=p.toneMapping;p.getClearColor(nR),p.toneMapping=Xs,p.autoClear=!1;const _=new Jo({name:"PMREM.Background",side:Oi,depthWrite:!1,depthTest:!1}),E=new jn(new Mc,_);let M=!1;const v=t.background;v?v.isColor&&(_.color.copy(v),t.background=null,M=!0):(_.color.copy(nR),M=!0);for(let x=0;x<6;x++){const b=x%3;b===0?(u.up.set(0,f[x],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+d[x],s.y,s.z)):b===1?(u.up.set(0,0,f[x]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+d[x],s.z)):(u.up.set(0,f[x],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+d[x]));const T=this._cubeSize;Ng(a,b*T,x>2?T:0,T,T),p.setRenderTarget(a),M&&p.render(E,u),p.render(t,u)}E.geometry.dispose(),E.material.dispose(),p.toneMapping=g,p.autoClear=m,t.background=v}_textureToCubeUV(t,e){const i=this._renderer,a=t.mapping===Vr||t.mapping===Xo;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=rR()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sR());const s=a?this._cubemapMaterial:this._equirectMaterial,r=new jn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=t;const u=this._cubeSize;Ng(e,0,0,3*u,2*u),i.setRenderTarget(e),i.render(r,AS)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;const a=this._lodPlanes.length;for(let s=1;s<a;s++){const r=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=iR[(a-s-1)%iR.length];this._blur(t,s-1,s,r,l)}e.autoClear=i}_blur(t,e,i,a,s){const r=this._pingPongRenderTarget;this._halfBlur(t,r,e,i,a,"latitudinal",s),this._halfBlur(r,t,i,i,a,"longitudinal",s)}_halfBlur(t,e,i,a,s,r,l){const u=this._renderer,f=this._blurMaterial;r!=="latitudinal"&&r!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,p=new jn(this._lodPlanes[a],f),m=f.uniforms,g=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*jl-1),E=s/_,M=isFinite(s)?1+Math.floor(d*E):jl;M>jl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${jl}`);const v=[];let x=0;for(let N=0;N<jl;++N){const U=N/E,D=Math.exp(-U*U/2);v.push(D),N===0?x+=D:N<M&&(x+=2*D)}for(let N=0;N<v.length;N++)v[N]=v[N]/x;m.envMap.value=t.texture,m.samples.value=M,m.weights.value=v,m.latitudinal.value=r==="latitudinal",l&&(m.poleAxis.value=l);const{_lodMax:b}=this;m.dTheta.value=_,m.mipInt.value=b-i;const T=this._sizeLods[a],w=3*T*(a>b-Fu?a-b+Fu:0),R=4*(this._cubeSize-T);Ng(e,w,R,3*T,2*T),u.setRenderTarget(e),u.render(p,AS)}}function T9(n){const t=[],e=[],i=[];let a=n;const s=n-Fu+1+eR.length;for(let r=0;r<s;r++){const l=Math.pow(2,a);e.push(l);let u=1/l;r>n-Fu?u=eR[r-n+Fu-1]:r===0&&(u=0),i.push(u);const f=1/(l-2),d=-f,p=1+f,m=[d,d,p,d,p,p,d,d,p,p,d,p],g=6,_=6,E=3,M=2,v=1,x=new Float32Array(E*_*g),b=new Float32Array(M*_*g),T=new Float32Array(v*_*g);for(let R=0;R<g;R++){const N=R%3*2/3-1,U=R>2?0:-1,D=[N,U,0,N+2/3,U,0,N+2/3,U+1,0,N,U,0,N+2/3,U+1,0,N,U+1,0];x.set(D,E*_*R),b.set(m,M*_*R);const C=[R,R,R,R,R,R];T.set(C,v*_*R)}const w=new Me;w.setAttribute("position",new rn(x,E)),w.setAttribute("uv",new rn(b,M)),w.setAttribute("faceIndex",new rn(T,v)),t.push(w),a>Fu&&a--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function aR(n,t,e){const i=new Ks(n,t,e);return i.texture.mapping=Bf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ng(n,t,e,i,a){n.viewport.set(t,e,i,a),n.scissor.set(t,e,i,a)}function A9(n,t,e){const i=new Float32Array(jl),a=new V(0,1,0);return new Ms({name:"SphericalGaussianBlur",defines:{n:jl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:NE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ur,depthTest:!1,depthWrite:!1})}function sR(){return new Ms({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:NE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ur,depthTest:!1,depthWrite:!1})}function rR(){return new Ms({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:NE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ur,depthTest:!1,depthWrite:!1})}function NE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function C9(n){let t=new WeakMap,e=null;function i(l){if(l&&l.isTexture){const u=l.mapping,f=u===Gd||u===Xd,d=u===Vr||u===Xo;if(f||d){let p=t.get(l);const m=p!==void 0?p.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==m)return e===null&&(e=new mM(n)),p=f?e.fromEquirectangular(l,p):e.fromCubemap(l,p),p.texture.pmremVersion=l.pmremVersion,t.set(l,p),p.texture;if(p!==void 0)return p.texture;{const g=l.image;return f&&g&&g.height>0||d&&g&&a(g)?(e===null&&(e=new mM(n)),p=f?e.fromEquirectangular(l):e.fromCubemap(l),p.texture.pmremVersion=l.pmremVersion,t.set(l,p),l.addEventListener("dispose",s),p.texture):null}}}return l}function a(l){let u=0;const f=6;for(let d=0;d<f;d++)l[d]!==void 0&&u++;return u===f}function s(l){const u=l.target;u.removeEventListener("dispose",s);const f=t.get(u);f!==void 0&&(t.delete(u),f.dispose())}function r(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:r}}function w9(n){const t={};function e(i){if(t[i]!==void 0)return t[i];let a;switch(i){case"WEBGL_depth_texture":a=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=n.getExtension(i)}return t[i]=a,a}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){const a=e(i);return a===null&&nf("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function R9(n,t,e,i){const a={},s=new WeakMap;function r(p){const m=p.target;m.index!==null&&t.remove(m.index);for(const _ in m.attributes)t.remove(m.attributes[_]);m.removeEventListener("dispose",r),delete a[m.id];const g=s.get(m);g&&(t.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,e.memory.geometries--}function l(p,m){return a[m.id]===!0||(m.addEventListener("dispose",r),a[m.id]=!0,e.memory.geometries++),m}function u(p){const m=p.attributes;for(const g in m)t.update(m[g],n.ARRAY_BUFFER)}function f(p){const m=[],g=p.index,_=p.attributes.position;let E=0;if(g!==null){const x=g.array;E=g.version;for(let b=0,T=x.length;b<T;b+=3){const w=x[b+0],R=x[b+1],N=x[b+2];m.push(w,R,R,N,N,w)}}else if(_!==void 0){const x=_.array;E=_.version;for(let b=0,T=x.length/3-1;b<T;b+=3){const w=b+0,R=b+1,N=b+2;m.push(w,R,R,N,N,w)}}else return;const M=new(XO(m)?sE:aE)(m,1);M.version=E;const v=s.get(p);v&&t.remove(v),s.set(p,M)}function d(p){const m=s.get(p);if(m){const g=p.index;g!==null&&m.version<g.version&&f(p)}else f(p);return s.get(p)}return{get:l,update:u,getWireframeAttribute:d}}function D9(n,t,e){let i;function a(m){i=m}let s,r;function l(m){s=m.type,r=m.bytesPerElement}function u(m,g){n.drawElements(i,g,s,m*r),e.update(g,i,1)}function f(m,g,_){_!==0&&(n.drawElementsInstanced(i,g,s,m*r,_),e.update(g,i,_))}function d(m,g,_){if(_===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,s,m,0,_);let M=0;for(let v=0;v<_;v++)M+=g[v];e.update(M,i,1)}function p(m,g,_,E){if(_===0)return;const M=t.get("WEBGL_multi_draw");if(M===null)for(let v=0;v<m.length;v++)f(m[v]/r,g[v],E[v]);else{M.multiDrawElementsInstancedWEBGL(i,g,0,s,m,0,E,0,_);let v=0;for(let x=0;x<_;x++)v+=g[x]*E[x];e.update(v,i,1)}}this.setMode=a,this.setIndex=l,this.render=u,this.renderInstances=f,this.renderMultiDraw=d,this.renderMultiDrawInstances=p}function N9(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,r,l){switch(e.calls++,r){case n.TRIANGLES:e.triangles+=l*(s/3);break;case n.LINES:e.lines+=l*(s/2);break;case n.LINE_STRIP:e.lines+=l*(s-1);break;case n.LINE_LOOP:e.lines+=l*s;break;case n.POINTS:e.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function a(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:a,update:i}}function U9(n,t,e){const i=new WeakMap,a=new Fe;function s(r,l,u){const f=r.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=d!==void 0?d.length:0;let m=i.get(l);if(m===void 0||m.count!==p){let C=function(){U.dispose(),i.delete(l),l.removeEventListener("dispose",C)};var g=C;m!==void 0&&m.texture.dispose();const _=l.morphAttributes.position!==void 0,E=l.morphAttributes.normal!==void 0,M=l.morphAttributes.color!==void 0,v=l.morphAttributes.position||[],x=l.morphAttributes.normal||[],b=l.morphAttributes.color||[];let T=0;_===!0&&(T=1),E===!0&&(T=2),M===!0&&(T=3);let w=l.attributes.position.count*T,R=1;w>t.maxTextureSize&&(R=Math.ceil(w/t.maxTextureSize),w=t.maxTextureSize);const N=new Float32Array(w*R*4*p),U=new uy(N,w,R,p);U.type=sa,U.needsUpdate=!0;const D=T*4;for(let B=0;B<p;B++){const Z=v[B],q=x[B],it=b[B],et=w*R*4*B;for(let L=0;L<Z.count;L++){const G=L*D;_===!0&&(a.fromBufferAttribute(Z,L),N[et+G+0]=a.x,N[et+G+1]=a.y,N[et+G+2]=a.z,N[et+G+3]=0),E===!0&&(a.fromBufferAttribute(q,L),N[et+G+4]=a.x,N[et+G+5]=a.y,N[et+G+6]=a.z,N[et+G+7]=0),M===!0&&(a.fromBufferAttribute(it,L),N[et+G+8]=a.x,N[et+G+9]=a.y,N[et+G+10]=a.z,N[et+G+11]=it.itemSize===4?a.w:1)}}m={count:p,texture:U,size:new mt(w,R)},i.set(l,m),l.addEventListener("dispose",C)}if(r.isInstancedMesh===!0&&r.morphTexture!==null)u.getUniforms().setValue(n,"morphTexture",r.morphTexture,e);else{let _=0;for(let M=0;M<f.length;M++)_+=f[M];const E=l.morphTargetsRelative?1:1-_;u.getUniforms().setValue(n,"morphTargetBaseInfluence",E),u.getUniforms().setValue(n,"morphTargetInfluences",f)}u.getUniforms().setValue(n,"morphTargetsTexture",m.texture,e),u.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:s}}function O9(n,t,e,i){let a=new WeakMap;function s(u){const f=i.render.frame,d=u.geometry,p=t.get(u,d);if(a.get(p)!==f&&(t.update(p),a.set(p,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),a.get(u)!==f&&(e.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&e.update(u.instanceColor,n.ARRAY_BUFFER),a.set(u,f))),u.isSkinnedMesh){const m=u.skeleton;a.get(m)!==f&&(m.update(),a.set(m,f))}return p}function r(){a=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),e.remove(f.instanceMatrix),f.instanceColor!==null&&e.remove(f.instanceColor)}return{update:s,dispose:r}}const ZL=new Ln,oR=new uE(1,1),KL=new uy,QL=new fy,JL=new Np,lR=[],cR=[],uR=new Float32Array(16),fR=new Float32Array(9),hR=new Float32Array(4);function Ff(n,t,e){const i=n[0];if(i<=0||i>0)return n;const a=t*e;let s=lR[a];if(s===void 0&&(s=new Float32Array(a),lR[a]=s),t!==0){i.toArray(s,0);for(let r=1,l=0;r!==t;++r)l+=e,n[r].toArray(s,l)}return s}function Jn(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function $n(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Oy(n,t){let e=cR[t];e===void 0&&(e=new Int32Array(t),cR[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function L9(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function P9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Jn(e,t))return;n.uniform2fv(this.addr,t),$n(e,t)}}function z9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Jn(e,t))return;n.uniform3fv(this.addr,t),$n(e,t)}}function B9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Jn(e,t))return;n.uniform4fv(this.addr,t),$n(e,t)}}function I9(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Jn(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),$n(e,t)}else{if(Jn(e,i))return;hR.set(i),n.uniformMatrix2fv(this.addr,!1,hR),$n(e,i)}}function V9(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Jn(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),$n(e,t)}else{if(Jn(e,i))return;fR.set(i),n.uniformMatrix3fv(this.addr,!1,fR),$n(e,i)}}function H9(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Jn(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),$n(e,t)}else{if(Jn(e,i))return;uR.set(i),n.uniformMatrix4fv(this.addr,!1,uR),$n(e,i)}}function F9(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function G9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Jn(e,t))return;n.uniform2iv(this.addr,t),$n(e,t)}}function X9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Jn(e,t))return;n.uniform3iv(this.addr,t),$n(e,t)}}function k9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Jn(e,t))return;n.uniform4iv(this.addr,t),$n(e,t)}}function j9(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function q9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Jn(e,t))return;n.uniform2uiv(this.addr,t),$n(e,t)}}function Y9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Jn(e,t))return;n.uniform3uiv(this.addr,t),$n(e,t)}}function W9(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Jn(e,t))return;n.uniform4uiv(this.addr,t),$n(e,t)}}function Z9(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a);let s;this.type===n.SAMPLER_2D_SHADOW?(oR.compareFunction=eE,s=oR):s=ZL,e.setTexture2D(t||s,a)}function K9(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTexture3D(t||QL,a)}function Q9(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTextureCube(t||JL,a)}function J9(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTexture2DArray(t||KL,a)}function $9(n){switch(n){case 5126:return L9;case 35664:return P9;case 35665:return z9;case 35666:return B9;case 35674:return I9;case 35675:return V9;case 35676:return H9;case 5124:case 35670:return F9;case 35667:case 35671:return G9;case 35668:case 35672:return X9;case 35669:case 35673:return k9;case 5125:return j9;case 36294:return q9;case 36295:return Y9;case 36296:return W9;case 35678:case 36198:case 36298:case 36306:case 35682:return Z9;case 35679:case 36299:case 36307:return K9;case 35680:case 36300:case 36308:case 36293:return Q9;case 36289:case 36303:case 36311:case 36292:return J9}}function tX(n,t){n.uniform1fv(this.addr,t)}function eX(n,t){const e=Ff(t,this.size,2);n.uniform2fv(this.addr,e)}function nX(n,t){const e=Ff(t,this.size,3);n.uniform3fv(this.addr,e)}function iX(n,t){const e=Ff(t,this.size,4);n.uniform4fv(this.addr,e)}function aX(n,t){const e=Ff(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function sX(n,t){const e=Ff(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function rX(n,t){const e=Ff(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function oX(n,t){n.uniform1iv(this.addr,t)}function lX(n,t){n.uniform2iv(this.addr,t)}function cX(n,t){n.uniform3iv(this.addr,t)}function uX(n,t){n.uniform4iv(this.addr,t)}function fX(n,t){n.uniform1uiv(this.addr,t)}function hX(n,t){n.uniform2uiv(this.addr,t)}function dX(n,t){n.uniform3uiv(this.addr,t)}function pX(n,t){n.uniform4uiv(this.addr,t)}function mX(n,t,e){const i=this.cache,a=t.length,s=Oy(e,a);Jn(i,s)||(n.uniform1iv(this.addr,s),$n(i,s));for(let r=0;r!==a;++r)e.setTexture2D(t[r]||ZL,s[r])}function gX(n,t,e){const i=this.cache,a=t.length,s=Oy(e,a);Jn(i,s)||(n.uniform1iv(this.addr,s),$n(i,s));for(let r=0;r!==a;++r)e.setTexture3D(t[r]||QL,s[r])}function vX(n,t,e){const i=this.cache,a=t.length,s=Oy(e,a);Jn(i,s)||(n.uniform1iv(this.addr,s),$n(i,s));for(let r=0;r!==a;++r)e.setTextureCube(t[r]||JL,s[r])}function yX(n,t,e){const i=this.cache,a=t.length,s=Oy(e,a);Jn(i,s)||(n.uniform1iv(this.addr,s),$n(i,s));for(let r=0;r!==a;++r)e.setTexture2DArray(t[r]||KL,s[r])}function _X(n){switch(n){case 5126:return tX;case 35664:return eX;case 35665:return nX;case 35666:return iX;case 35674:return aX;case 35675:return sX;case 35676:return rX;case 5124:case 35670:return oX;case 35667:case 35671:return lX;case 35668:case 35672:return cX;case 35669:case 35673:return uX;case 5125:return fX;case 36294:return hX;case 36295:return dX;case 36296:return pX;case 35678:case 36198:case 36298:case 36306:case 35682:return mX;case 35679:case 36299:case 36307:return gX;case 35680:case 36300:case 36308:case 36293:return vX;case 36289:case 36303:case 36311:case 36292:return yX}}class xX{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=$9(e.type)}}class SX{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=_X(e.type)}}class MX{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const a=this.seq;for(let s=0,r=a.length;s!==r;++s){const l=a[s];l.setValue(t,e[l.id],i)}}}const NS=/(\w+)(\])?(\[|\.)?/g;function dR(n,t){n.seq.push(t),n.map[t.id]=t}function bX(n,t,e){const i=n.name,a=i.length;for(NS.lastIndex=0;;){const s=NS.exec(i),r=NS.lastIndex;let l=s[1];const u=s[2]==="]",f=s[3];if(u&&(l=l|0),f===void 0||f==="["&&r+2===a){dR(e,f===void 0?new xX(l,n,t):new SX(l,n,t));break}else{let p=e.map[l];p===void 0&&(p=new MX(l),dR(e,p)),e=p}}}class n0{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const s=t.getActiveUniform(e,a),r=t.getUniformLocation(e,s.name);bX(s,r,this)}}setValue(t,e,i,a){const s=this.map[e];s!==void 0&&s.setValue(t,i,a)}setOptional(t,e,i){const a=e[i];a!==void 0&&this.setValue(t,i,a)}static upload(t,e,i,a){for(let s=0,r=e.length;s!==r;++s){const l=e[s],u=i[l.id];u.needsUpdate!==!1&&l.setValue(t,u.value,a)}}static seqWithValue(t,e){const i=[];for(let a=0,s=t.length;a!==s;++a){const r=t[a];r.id in e&&i.push(r)}return i}}function pR(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}const EX=37297;let TX=0;function AX(n,t){const e=n.split(`
`),i=[],a=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let r=a;r<s;r++){const l=r+1;i.push(`${l===t?">":" "} ${l}: ${e[r]}`)}return i.join(`
`)}const mR=new Se;function CX(n){Be._getMatrix(mR,Be.workingColorSpace,n);const t=`mat3( ${mR.elements.map(e=>e.toFixed(4))} )`;switch(Be.getTransfer(n)){case Wd:return[t,"LinearTransferOETF"];case Je:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function gR(n,t,e){const i=n.getShaderParameter(t,n.COMPILE_STATUS),a=n.getShaderInfoLog(t).trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const r=parseInt(s[1]);return e.toUpperCase()+`

`+a+`

`+AX(n.getShaderSource(t),r)}else return a}function wX(n,t){const e=CX(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function RX(n,t){let e;switch(t){case bO:e="Linear";break;case EO:e="Reinhard";break;case TO:e="Cineon";break;case jb:e="ACESFilmic";break;case CO:e="AgX";break;case wO:e="Neutral";break;case AO:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const Ug=new V;function DX(){Be.getLuminanceCoefficients(Ug);const n=Ug.x.toFixed(4),t=Ug.y.toFixed(4),e=Ug.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function NX(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Zh).join(`
`)}function UX(n){const t=[];for(const e in n){const i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function OX(n,t){const e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const s=n.getActiveAttrib(t,a),r=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),e[r]={type:s.type,location:n.getAttribLocation(t,r),locationSize:l}}return e}function Zh(n){return n!==""}function vR(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function yR(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const LX=/^[ \t]*#include +<([\w\d./]+)>/gm;function gM(n){return n.replace(LX,zX)}const PX=new Map;function zX(n,t){let e=Te[t];if(e===void 0){const i=PX.get(t);if(i!==void 0)e=Te[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return gM(e)}const BX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _R(n){return n.replace(BX,IX)}function IX(n,t,e,i){let a="";for(let s=parseInt(t);s<parseInt(e);s++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return a}function xR(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function VX(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ey?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===hd?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===gs&&(t="SHADOWMAP_TYPE_VSM"),t}function HX(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Vr:case Xo:t="ENVMAP_TYPE_CUBE";break;case Bf:t="ENVMAP_TYPE_CUBE_UV";break}return t}function FX(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Xo:t="ENVMAP_MODE_REFRACTION";break}return t}function GX(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Rp:t="ENVMAP_BLENDING_MULTIPLY";break;case SO:t="ENVMAP_BLENDING_MIX";break;case MO:t="ENVMAP_BLENDING_ADD";break}return t}function XX(n){const t=n.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function kX(n,t,e,i){const a=n.getContext(),s=e.defines;let r=e.vertexShader,l=e.fragmentShader;const u=VX(e),f=HX(e),d=FX(e),p=GX(e),m=XX(e),g=NX(e),_=UX(s),E=a.createProgram();let M,v,x=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,_].filter(Zh).join(`
`),M.length>0&&(M+=`
`),v=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,_].filter(Zh).join(`
`),v.length>0&&(v+=`
`)):(M=[xR(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,_,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Zh).join(`
`),v=[xR(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,_,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.envMap?"#define "+d:"",e.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Xs?"#define TONE_MAPPING":"",e.toneMapping!==Xs?Te.tonemapping_pars_fragment:"",e.toneMapping!==Xs?RX("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Te.colorspace_pars_fragment,wX("linearToOutputTexel",e.outputColorSpace),DX(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Zh).join(`
`)),r=gM(r),r=vR(r,e),r=yR(r,e),l=gM(l),l=vR(l,e),l=yR(l,e),r=_R(r),l=_R(l),e.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,M=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,v=["#define varying in",e.glslVersion===rM?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===rM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const b=x+M+r,T=x+v+l,w=pR(a,a.VERTEX_SHADER,b),R=pR(a,a.FRAGMENT_SHADER,T);a.attachShader(E,w),a.attachShader(E,R),e.index0AttributeName!==void 0?a.bindAttribLocation(E,0,e.index0AttributeName):e.morphTargets===!0&&a.bindAttribLocation(E,0,"position"),a.linkProgram(E);function N(B){if(n.debug.checkShaderErrors){const Z=a.getProgramInfoLog(E).trim(),q=a.getShaderInfoLog(w).trim(),it=a.getShaderInfoLog(R).trim();let et=!0,L=!0;if(a.getProgramParameter(E,a.LINK_STATUS)===!1)if(et=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,E,w,R);else{const G=gR(a,w,"vertex"),H=gR(a,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(E,a.VALIDATE_STATUS)+`

Material Name: `+B.name+`
Material Type: `+B.type+`

Program Info Log: `+Z+`
`+G+`
`+H)}else Z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(q===""||it==="")&&(L=!1);L&&(B.diagnostics={runnable:et,programLog:Z,vertexShader:{log:q,prefix:M},fragmentShader:{log:it,prefix:v}})}a.deleteShader(w),a.deleteShader(R),U=new n0(a,E),D=OX(a,E)}let U;this.getUniforms=function(){return U===void 0&&N(this),U};let D;this.getAttributes=function(){return D===void 0&&N(this),D};let C=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=a.getProgramParameter(E,EX)),C},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(E),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=TX++,this.cacheKey=t,this.usedTimes=1,this.program=E,this.vertexShader=w,this.fragmentShader=R,this}let jX=0;class qX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,a=this._getShaderStage(e),s=this._getShaderStage(i),r=this._getShaderCacheForMaterial(t);return r.has(a)===!1&&(r.add(a),a.usedTimes++),r.has(s)===!1&&(r.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return i===void 0&&(i=new YX(t),e.set(t,i)),i}}class YX{constructor(t){this.id=jX++,this.code=t,this.usedTimes=0}}function WX(n,t,e,i,a,s,r){const l=new Mf,u=new qX,f=new Set,d=[],p=a.logarithmicDepthBuffer,m=a.vertexTextures;let g=a.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(D){return f.add(D),D===0?"uv":`uv${D}`}function M(D,C,B,Z,q){const it=Z.fog,et=q.geometry,L=D.isMeshStandardMaterial?Z.environment:null,G=(D.isMeshStandardMaterial?e:t).get(D.envMap||L),H=G&&G.mapping===Bf?G.image.height:null,W=_[D.type];D.precision!==null&&(g=a.getMaxPrecision(D.precision),g!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",g,"instead."));const rt=et.morphAttributes.position||et.morphAttributes.normal||et.morphAttributes.color,vt=rt!==void 0?rt.length:0;let Dt=0;et.morphAttributes.position!==void 0&&(Dt=1),et.morphAttributes.normal!==void 0&&(Dt=2),et.morphAttributes.color!==void 0&&(Dt=3);let Vt,J,yt,Yt;if(W){const Ae=ys[W];Vt=Ae.vertexShader,J=Ae.fragmentShader}else Vt=D.vertexShader,J=D.fragmentShader,u.update(D),yt=u.getVertexShaderID(D),Yt=u.getFragmentShaderID(D);const Lt=n.getRenderTarget(),Xt=n.state.buffers.depth.getReversed(),he=q.isInstancedMesh===!0,qt=q.isBatchedMesh===!0,ie=!!D.map,ue=!!D.matcap,ne=!!G,I=!!D.aoMap,Nt=!!D.lightMap,Et=!!D.bumpMap,Tt=!!D.normalMap,dt=!!D.displacementMap,zt=!!D.emissiveMap,bt=!!D.metalnessMap,Ht=!!D.roughnessMap,fe=D.anisotropy>0,F=D.clearcoat>0,O=D.dispersion>0,nt=D.iridescence>0,ft=D.sheen>0,pt=D.transmission>0,ht=fe&&!!D.anisotropyMap,te=F&&!!D.clearcoatMap,Pt=F&&!!D.clearcoatNormalMap,Qt=F&&!!D.clearcoatRoughnessMap,Jt=nt&&!!D.iridescenceMap,xt=nt&&!!D.iridescenceThicknessMap,Bt=ft&&!!D.sheenColorMap,ae=ft&&!!D.sheenRoughnessMap,k=!!D.specularMap,st=!!D.specularColorMap,Ct=!!D.specularIntensityMap,X=pt&&!!D.transmissionMap,Rt=pt&&!!D.thicknessMap,St=!!D.gradientMap,Gt=!!D.alphaMap,wt=D.alphaTest>0,_t=!!D.alphaHash,kt=!!D.extensions;let se=Xs;D.toneMapped&&(Lt===null||Lt.isXRRenderTarget===!0)&&(se=n.toneMapping);const Ne={shaderID:W,shaderType:D.type,shaderName:D.name,vertexShader:Vt,fragmentShader:J,defines:D.defines,customVertexShaderID:yt,customFragmentShaderID:Yt,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:g,batching:qt,batchingColor:qt&&q._colorsTexture!==null,instancing:he,instancingColor:he&&q.instanceColor!==null,instancingMorph:he&&q.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Lt===null?n.outputColorSpace:Lt.isXRRenderTarget===!0?Lt.texture.colorSpace:ko,alphaToCoverage:!!D.alphaToCoverage,map:ie,matcap:ue,envMap:ne,envMapMode:ne&&G.mapping,envMapCubeUVHeight:H,aoMap:I,lightMap:Nt,bumpMap:Et,normalMap:Tt,displacementMap:m&&dt,emissiveMap:zt,normalMapObjectSpace:Tt&&D.normalMapType===PO,normalMapTangentSpace:Tt&&D.normalMapType===Qo,metalnessMap:bt,roughnessMap:Ht,anisotropy:fe,anisotropyMap:ht,clearcoat:F,clearcoatMap:te,clearcoatNormalMap:Pt,clearcoatRoughnessMap:Qt,dispersion:O,iridescence:nt,iridescenceMap:Jt,iridescenceThicknessMap:xt,sheen:ft,sheenColorMap:Bt,sheenRoughnessMap:ae,specularMap:k,specularColorMap:st,specularIntensityMap:Ct,transmission:pt,transmissionMap:X,thicknessMap:Rt,gradientMap:St,opaque:D.transparent===!1&&D.blending===ac&&D.alphaToCoverage===!1,alphaMap:Gt,alphaTest:wt,alphaHash:_t,combine:D.combine,mapUv:ie&&E(D.map.channel),aoMapUv:I&&E(D.aoMap.channel),lightMapUv:Nt&&E(D.lightMap.channel),bumpMapUv:Et&&E(D.bumpMap.channel),normalMapUv:Tt&&E(D.normalMap.channel),displacementMapUv:dt&&E(D.displacementMap.channel),emissiveMapUv:zt&&E(D.emissiveMap.channel),metalnessMapUv:bt&&E(D.metalnessMap.channel),roughnessMapUv:Ht&&E(D.roughnessMap.channel),anisotropyMapUv:ht&&E(D.anisotropyMap.channel),clearcoatMapUv:te&&E(D.clearcoatMap.channel),clearcoatNormalMapUv:Pt&&E(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Qt&&E(D.clearcoatRoughnessMap.channel),iridescenceMapUv:Jt&&E(D.iridescenceMap.channel),iridescenceThicknessMapUv:xt&&E(D.iridescenceThicknessMap.channel),sheenColorMapUv:Bt&&E(D.sheenColorMap.channel),sheenRoughnessMapUv:ae&&E(D.sheenRoughnessMap.channel),specularMapUv:k&&E(D.specularMap.channel),specularColorMapUv:st&&E(D.specularColorMap.channel),specularIntensityMapUv:Ct&&E(D.specularIntensityMap.channel),transmissionMapUv:X&&E(D.transmissionMap.channel),thicknessMapUv:Rt&&E(D.thicknessMap.channel),alphaMapUv:Gt&&E(D.alphaMap.channel),vertexTangents:!!et.attributes.tangent&&(Tt||fe),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!et.attributes.color&&et.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!et.attributes.uv&&(ie||Gt),fog:!!it,useFog:D.fog===!0,fogExp2:!!it&&it.isFogExp2,flatShading:D.flatShading===!0&&D.wireframe===!1,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:Xt,skinning:q.isSkinnedMesh===!0,morphTargets:et.morphAttributes.position!==void 0,morphNormals:et.morphAttributes.normal!==void 0,morphColors:et.morphAttributes.color!==void 0,morphTargetsCount:vt,morphTextureStride:Dt,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,dithering:D.dithering,shadowMapEnabled:n.shadowMap.enabled&&B.length>0,shadowMapType:n.shadowMap.type,toneMapping:se,decodeVideoTexture:ie&&D.map.isVideoTexture===!0&&Be.getTransfer(D.map.colorSpace)===Je,decodeVideoTextureEmissive:zt&&D.emissiveMap.isVideoTexture===!0&&Be.getTransfer(D.emissiveMap.colorSpace)===Je,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===_s,flipSided:D.side===Oi,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:kt&&D.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(kt&&D.extensions.multiDraw===!0||qt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return Ne.vertexUv1s=f.has(1),Ne.vertexUv2s=f.has(2),Ne.vertexUv3s=f.has(3),f.clear(),Ne}function v(D){const C=[];if(D.shaderID?C.push(D.shaderID):(C.push(D.customVertexShaderID),C.push(D.customFragmentShaderID)),D.defines!==void 0)for(const B in D.defines)C.push(B),C.push(D.defines[B]);return D.isRawShaderMaterial===!1&&(x(C,D),b(C,D),C.push(n.outputColorSpace)),C.push(D.customProgramCacheKey),C.join()}function x(D,C){D.push(C.precision),D.push(C.outputColorSpace),D.push(C.envMapMode),D.push(C.envMapCubeUVHeight),D.push(C.mapUv),D.push(C.alphaMapUv),D.push(C.lightMapUv),D.push(C.aoMapUv),D.push(C.bumpMapUv),D.push(C.normalMapUv),D.push(C.displacementMapUv),D.push(C.emissiveMapUv),D.push(C.metalnessMapUv),D.push(C.roughnessMapUv),D.push(C.anisotropyMapUv),D.push(C.clearcoatMapUv),D.push(C.clearcoatNormalMapUv),D.push(C.clearcoatRoughnessMapUv),D.push(C.iridescenceMapUv),D.push(C.iridescenceThicknessMapUv),D.push(C.sheenColorMapUv),D.push(C.sheenRoughnessMapUv),D.push(C.specularMapUv),D.push(C.specularColorMapUv),D.push(C.specularIntensityMapUv),D.push(C.transmissionMapUv),D.push(C.thicknessMapUv),D.push(C.combine),D.push(C.fogExp2),D.push(C.sizeAttenuation),D.push(C.morphTargetsCount),D.push(C.morphAttributeCount),D.push(C.numDirLights),D.push(C.numPointLights),D.push(C.numSpotLights),D.push(C.numSpotLightMaps),D.push(C.numHemiLights),D.push(C.numRectAreaLights),D.push(C.numDirLightShadows),D.push(C.numPointLightShadows),D.push(C.numSpotLightShadows),D.push(C.numSpotLightShadowsWithMaps),D.push(C.numLightProbes),D.push(C.shadowMapType),D.push(C.toneMapping),D.push(C.numClippingPlanes),D.push(C.numClipIntersection),D.push(C.depthPacking)}function b(D,C){l.disableAll(),C.supportsVertexTextures&&l.enable(0),C.instancing&&l.enable(1),C.instancingColor&&l.enable(2),C.instancingMorph&&l.enable(3),C.matcap&&l.enable(4),C.envMap&&l.enable(5),C.normalMapObjectSpace&&l.enable(6),C.normalMapTangentSpace&&l.enable(7),C.clearcoat&&l.enable(8),C.iridescence&&l.enable(9),C.alphaTest&&l.enable(10),C.vertexColors&&l.enable(11),C.vertexAlphas&&l.enable(12),C.vertexUv1s&&l.enable(13),C.vertexUv2s&&l.enable(14),C.vertexUv3s&&l.enable(15),C.vertexTangents&&l.enable(16),C.anisotropy&&l.enable(17),C.alphaHash&&l.enable(18),C.batching&&l.enable(19),C.dispersion&&l.enable(20),C.batchingColor&&l.enable(21),C.gradientMap&&l.enable(22),D.push(l.mask),l.disableAll(),C.fog&&l.enable(0),C.useFog&&l.enable(1),C.flatShading&&l.enable(2),C.logarithmicDepthBuffer&&l.enable(3),C.reverseDepthBuffer&&l.enable(4),C.skinning&&l.enable(5),C.morphTargets&&l.enable(6),C.morphNormals&&l.enable(7),C.morphColors&&l.enable(8),C.premultipliedAlpha&&l.enable(9),C.shadowMapEnabled&&l.enable(10),C.doubleSided&&l.enable(11),C.flipSided&&l.enable(12),C.useDepthPacking&&l.enable(13),C.dithering&&l.enable(14),C.transmission&&l.enable(15),C.sheen&&l.enable(16),C.opaque&&l.enable(17),C.pointsUvs&&l.enable(18),C.decodeVideoTexture&&l.enable(19),C.decodeVideoTextureEmissive&&l.enable(20),C.alphaToCoverage&&l.enable(21),D.push(l.mask)}function T(D){const C=_[D.type];let B;if(C){const Z=ys[C];B=WO.clone(Z.uniforms)}else B=D.uniforms;return B}function w(D,C){let B;for(let Z=0,q=d.length;Z<q;Z++){const it=d[Z];if(it.cacheKey===C){B=it,++B.usedTimes;break}}return B===void 0&&(B=new kX(n,C,D,s),d.push(B)),B}function R(D){if(--D.usedTimes===0){const C=d.indexOf(D);d[C]=d[d.length-1],d.pop(),D.destroy()}}function N(D){u.remove(D)}function U(){u.dispose()}return{getParameters:M,getProgramCacheKey:v,getUniforms:T,acquireProgram:w,releaseProgram:R,releaseShaderCache:N,programs:d,dispose:U}}function ZX(){let n=new WeakMap;function t(r){return n.has(r)}function e(r){let l=n.get(r);return l===void 0&&(l={},n.set(r,l)),l}function i(r){n.delete(r)}function a(r,l,u){n.get(r)[l]=u}function s(){n=new WeakMap}return{has:t,get:e,remove:i,update:a,dispose:s}}function KX(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function SR(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function MR(){const n=[];let t=0;const e=[],i=[],a=[];function s(){t=0,e.length=0,i.length=0,a.length=0}function r(p,m,g,_,E,M){let v=n[t];return v===void 0?(v={id:p.id,object:p,geometry:m,material:g,groupOrder:_,renderOrder:p.renderOrder,z:E,group:M},n[t]=v):(v.id=p.id,v.object=p,v.geometry=m,v.material=g,v.groupOrder=_,v.renderOrder=p.renderOrder,v.z=E,v.group=M),t++,v}function l(p,m,g,_,E,M){const v=r(p,m,g,_,E,M);g.transmission>0?i.push(v):g.transparent===!0?a.push(v):e.push(v)}function u(p,m,g,_,E,M){const v=r(p,m,g,_,E,M);g.transmission>0?i.unshift(v):g.transparent===!0?a.unshift(v):e.unshift(v)}function f(p,m){e.length>1&&e.sort(p||KX),i.length>1&&i.sort(m||SR),a.length>1&&a.sort(m||SR)}function d(){for(let p=t,m=n.length;p<m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:e,transmissive:i,transparent:a,init:s,push:l,unshift:u,finish:d,sort:f}}function QX(){let n=new WeakMap;function t(i,a){const s=n.get(i);let r;return s===void 0?(r=new MR,n.set(i,[r])):a>=s.length?(r=new MR,s.push(r)):r=s[a],r}function e(){n=new WeakMap}return{get:t,dispose:e}}function JX(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new V,color:new Zt};break;case"SpotLight":e={position:new V,direction:new V,color:new Zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new V,color:new Zt,distance:0,decay:0};break;case"HemisphereLight":e={direction:new V,skyColor:new Zt,groundColor:new Zt};break;case"RectAreaLight":e={color:new Zt,position:new V,halfWidth:new V,halfHeight:new V};break}return n[t.id]=e,e}}}function $X(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let tk=0;function ek(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function nk(n){const t=new JX,e=$X(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new V);const a=new V,s=new pe,r=new pe;function l(f){let d=0,p=0,m=0;for(let D=0;D<9;D++)i.probe[D].set(0,0,0);let g=0,_=0,E=0,M=0,v=0,x=0,b=0,T=0,w=0,R=0,N=0;f.sort(ek);for(let D=0,C=f.length;D<C;D++){const B=f[D],Z=B.color,q=B.intensity,it=B.distance,et=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)d+=Z.r*q,p+=Z.g*q,m+=Z.b*q;else if(B.isLightProbe){for(let L=0;L<9;L++)i.probe[L].addScaledVector(B.sh.coefficients[L],q);N++}else if(B.isDirectionalLight){const L=t.get(B);if(L.color.copy(B.color).multiplyScalar(B.intensity),B.castShadow){const G=B.shadow,H=e.get(B);H.shadowIntensity=G.intensity,H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,i.directionalShadow[g]=H,i.directionalShadowMap[g]=et,i.directionalShadowMatrix[g]=B.shadow.matrix,x++}i.directional[g]=L,g++}else if(B.isSpotLight){const L=t.get(B);L.position.setFromMatrixPosition(B.matrixWorld),L.color.copy(Z).multiplyScalar(q),L.distance=it,L.coneCos=Math.cos(B.angle),L.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),L.decay=B.decay,i.spot[E]=L;const G=B.shadow;if(B.map&&(i.spotLightMap[w]=B.map,w++,G.updateMatrices(B),B.castShadow&&R++),i.spotLightMatrix[E]=G.matrix,B.castShadow){const H=e.get(B);H.shadowIntensity=G.intensity,H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,i.spotShadow[E]=H,i.spotShadowMap[E]=et,T++}E++}else if(B.isRectAreaLight){const L=t.get(B);L.color.copy(Z).multiplyScalar(q),L.halfWidth.set(B.width*.5,0,0),L.halfHeight.set(0,B.height*.5,0),i.rectArea[M]=L,M++}else if(B.isPointLight){const L=t.get(B);if(L.color.copy(B.color).multiplyScalar(B.intensity),L.distance=B.distance,L.decay=B.decay,B.castShadow){const G=B.shadow,H=e.get(B);H.shadowIntensity=G.intensity,H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,H.shadowCameraNear=G.camera.near,H.shadowCameraFar=G.camera.far,i.pointShadow[_]=H,i.pointShadowMap[_]=et,i.pointShadowMatrix[_]=B.shadow.matrix,b++}i.point[_]=L,_++}else if(B.isHemisphereLight){const L=t.get(B);L.skyColor.copy(B.color).multiplyScalar(q),L.groundColor.copy(B.groundColor).multiplyScalar(q),i.hemi[v]=L,v++}}M>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ft.LTC_FLOAT_1,i.rectAreaLTC2=Ft.LTC_FLOAT_2):(i.rectAreaLTC1=Ft.LTC_HALF_1,i.rectAreaLTC2=Ft.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=p,i.ambient[2]=m;const U=i.hash;(U.directionalLength!==g||U.pointLength!==_||U.spotLength!==E||U.rectAreaLength!==M||U.hemiLength!==v||U.numDirectionalShadows!==x||U.numPointShadows!==b||U.numSpotShadows!==T||U.numSpotMaps!==w||U.numLightProbes!==N)&&(i.directional.length=g,i.spot.length=E,i.rectArea.length=M,i.point.length=_,i.hemi.length=v,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=T+w-R,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=N,U.directionalLength=g,U.pointLength=_,U.spotLength=E,U.rectAreaLength=M,U.hemiLength=v,U.numDirectionalShadows=x,U.numPointShadows=b,U.numSpotShadows=T,U.numSpotMaps=w,U.numLightProbes=N,i.version=tk++)}function u(f,d){let p=0,m=0,g=0,_=0,E=0;const M=d.matrixWorldInverse;for(let v=0,x=f.length;v<x;v++){const b=f[v];if(b.isDirectionalLight){const T=i.directional[p];T.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(a),T.direction.transformDirection(M),p++}else if(b.isSpotLight){const T=i.spot[g];T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(M),T.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(a),T.direction.transformDirection(M),g++}else if(b.isRectAreaLight){const T=i.rectArea[_];T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(M),r.identity(),s.copy(b.matrixWorld),s.premultiply(M),r.extractRotation(s),T.halfWidth.set(b.width*.5,0,0),T.halfHeight.set(0,b.height*.5,0),T.halfWidth.applyMatrix4(r),T.halfHeight.applyMatrix4(r),_++}else if(b.isPointLight){const T=i.point[m];T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(M),m++}else if(b.isHemisphereLight){const T=i.hemi[E];T.direction.setFromMatrixPosition(b.matrixWorld),T.direction.transformDirection(M),E++}}}return{setup:l,setupView:u,state:i}}function bR(n){const t=new nk(n),e=[],i=[];function a(d){f.camera=d,e.length=0,i.length=0}function s(d){e.push(d)}function r(d){i.push(d)}function l(){t.setup(e)}function u(d){t.setupView(e,d)}const f={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:a,state:f,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:r}}function ik(n){let t=new WeakMap;function e(a,s=0){const r=t.get(a);let l;return r===void 0?(l=new bR(n),t.set(a,[l])):s>=r.length?(l=new bR(n),r.push(l)):l=r[s],l}function i(){t=new WeakMap}return{get:e,dispose:i}}const ak=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sk=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function rk(n,t,e){let i=new Vf;const a=new mt,s=new mt,r=new Fe,l=new yE({depthPacking:LO}),u=new _E,f={},d=e.maxTextureSize,p={[Ir]:Oi,[Oi]:Ir,[_s]:_s},m=new Ms({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mt},radius:{value:4}},vertexShader:ak,fragmentShader:sk}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const _=new Me;_.setAttribute("position",new rn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new jn(_,m),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ey;let v=this.type;this.render=function(R,N,U){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||R.length===0)return;const D=n.getRenderTarget(),C=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),Z=n.state;Z.setBlending(Ur),Z.buffers.color.setClear(1,1,1,1),Z.buffers.depth.setTest(!0),Z.setScissorTest(!1);const q=v!==gs&&this.type===gs,it=v===gs&&this.type!==gs;for(let et=0,L=R.length;et<L;et++){const G=R[et],H=G.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;a.copy(H.mapSize);const W=H.getFrameExtents();if(a.multiply(W),s.copy(H.mapSize),(a.x>d||a.y>d)&&(a.x>d&&(s.x=Math.floor(d/W.x),a.x=s.x*W.x,H.mapSize.x=s.x),a.y>d&&(s.y=Math.floor(d/W.y),a.y=s.y*W.y,H.mapSize.y=s.y)),H.map===null||q===!0||it===!0){const vt=this.type!==gs?{minFilter:vi,magFilter:vi}:{};H.map!==null&&H.map.dispose(),H.map=new Ks(a.x,a.y,vt),H.map.texture.name=G.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const rt=H.getViewportCount();for(let vt=0;vt<rt;vt++){const Dt=H.getViewport(vt);r.set(s.x*Dt.x,s.y*Dt.y,s.x*Dt.z,s.y*Dt.w),Z.viewport(r),H.updateMatrices(G,vt),i=H.getFrustum(),T(N,U,H.camera,G,this.type)}H.isPointLightShadow!==!0&&this.type===gs&&x(H,U),H.needsUpdate=!1}v=this.type,M.needsUpdate=!1,n.setRenderTarget(D,C,B)};function x(R,N){const U=t.update(E);m.defines.VSM_SAMPLES!==R.blurSamples&&(m.defines.VSM_SAMPLES=R.blurSamples,g.defines.VSM_SAMPLES=R.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new Ks(a.x,a.y)),m.uniforms.shadow_pass.value=R.map.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(N,null,U,m,E,null),g.uniforms.shadow_pass.value=R.mapPass.texture,g.uniforms.resolution.value=R.mapSize,g.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(N,null,U,g,E,null)}function b(R,N,U,D){let C=null;const B=U.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(B!==void 0)C=B;else if(C=U.isPointLight===!0?u:l,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0||N.alphaToCoverage===!0){const Z=C.uuid,q=N.uuid;let it=f[Z];it===void 0&&(it={},f[Z]=it);let et=it[q];et===void 0&&(et=C.clone(),it[q]=et,N.addEventListener("dispose",w)),C=et}if(C.visible=N.visible,C.wireframe=N.wireframe,D===gs?C.side=N.shadowSide!==null?N.shadowSide:N.side:C.side=N.shadowSide!==null?N.shadowSide:p[N.side],C.alphaMap=N.alphaMap,C.alphaTest=N.alphaToCoverage===!0?.5:N.alphaTest,C.map=N.map,C.clipShadows=N.clipShadows,C.clippingPlanes=N.clippingPlanes,C.clipIntersection=N.clipIntersection,C.displacementMap=N.displacementMap,C.displacementScale=N.displacementScale,C.displacementBias=N.displacementBias,C.wireframeLinewidth=N.wireframeLinewidth,C.linewidth=N.linewidth,U.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const Z=n.properties.get(C);Z.light=U}return C}function T(R,N,U,D,C){if(R.visible===!1)return;if(R.layers.test(N.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&C===gs)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,R.matrixWorld);const q=t.update(R),it=R.material;if(Array.isArray(it)){const et=q.groups;for(let L=0,G=et.length;L<G;L++){const H=et[L],W=it[H.materialIndex];if(W&&W.visible){const rt=b(R,W,D,C);R.onBeforeShadow(n,R,N,U,q,rt,H),n.renderBufferDirect(U,null,q,rt,R,H),R.onAfterShadow(n,R,N,U,q,rt,H)}}}else if(it.visible){const et=b(R,it,D,C);R.onBeforeShadow(n,R,N,U,q,et,null),n.renderBufferDirect(U,null,q,et,R,null),R.onAfterShadow(n,R,N,U,q,et,null)}}const Z=R.children;for(let q=0,it=Z.length;q<it;q++)T(Z[q],N,U,D,C)}function w(R){R.target.removeEventListener("dispose",w);for(const U in f){const D=f[U],C=R.target.uuid;C in D&&(D[C].dispose(),delete D[C])}}}const ok={[H0]:F0,[G0]:j0,[X0]:q0,[dc]:k0,[F0]:H0,[j0]:G0,[q0]:X0,[k0]:dc};function lk(n,t){function e(){let X=!1;const Rt=new Fe;let St=null;const Gt=new Fe(0,0,0,0);return{setMask:function(wt){St!==wt&&!X&&(n.colorMask(wt,wt,wt,wt),St=wt)},setLocked:function(wt){X=wt},setClear:function(wt,_t,kt,se,Ne){Ne===!0&&(wt*=se,_t*=se,kt*=se),Rt.set(wt,_t,kt,se),Gt.equals(Rt)===!1&&(n.clearColor(wt,_t,kt,se),Gt.copy(Rt))},reset:function(){X=!1,St=null,Gt.set(-1,0,0,0)}}}function i(){let X=!1,Rt=!1,St=null,Gt=null,wt=null;return{setReversed:function(_t){if(Rt!==_t){const kt=t.get("EXT_clip_control");_t?kt.clipControlEXT(kt.LOWER_LEFT_EXT,kt.ZERO_TO_ONE_EXT):kt.clipControlEXT(kt.LOWER_LEFT_EXT,kt.NEGATIVE_ONE_TO_ONE_EXT),Rt=_t;const se=wt;wt=null,this.setClear(se)}},getReversed:function(){return Rt},setTest:function(_t){_t?Lt(n.DEPTH_TEST):Xt(n.DEPTH_TEST)},setMask:function(_t){St!==_t&&!X&&(n.depthMask(_t),St=_t)},setFunc:function(_t){if(Rt&&(_t=ok[_t]),Gt!==_t){switch(_t){case H0:n.depthFunc(n.NEVER);break;case F0:n.depthFunc(n.ALWAYS);break;case G0:n.depthFunc(n.LESS);break;case dc:n.depthFunc(n.LEQUAL);break;case X0:n.depthFunc(n.EQUAL);break;case k0:n.depthFunc(n.GEQUAL);break;case j0:n.depthFunc(n.GREATER);break;case q0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Gt=_t}},setLocked:function(_t){X=_t},setClear:function(_t){wt!==_t&&(Rt&&(_t=1-_t),n.clearDepth(_t),wt=_t)},reset:function(){X=!1,St=null,Gt=null,wt=null,Rt=!1}}}function a(){let X=!1,Rt=null,St=null,Gt=null,wt=null,_t=null,kt=null,se=null,Ne=null;return{setTest:function(Ae){X||(Ae?Lt(n.STENCIL_TEST):Xt(n.STENCIL_TEST))},setMask:function(Ae){Rt!==Ae&&!X&&(n.stencilMask(Ae),Rt=Ae)},setFunc:function(Ae,Vn,li){(St!==Ae||Gt!==Vn||wt!==li)&&(n.stencilFunc(Ae,Vn,li),St=Ae,Gt=Vn,wt=li)},setOp:function(Ae,Vn,li){(_t!==Ae||kt!==Vn||se!==li)&&(n.stencilOp(Ae,Vn,li),_t=Ae,kt=Vn,se=li)},setLocked:function(Ae){X=Ae},setClear:function(Ae){Ne!==Ae&&(n.clearStencil(Ae),Ne=Ae)},reset:function(){X=!1,Rt=null,St=null,Gt=null,wt=null,_t=null,kt=null,se=null,Ne=null}}}const s=new e,r=new i,l=new a,u=new WeakMap,f=new WeakMap;let d={},p={},m=new WeakMap,g=[],_=null,E=!1,M=null,v=null,x=null,b=null,T=null,w=null,R=null,N=new Zt(0,0,0),U=0,D=!1,C=null,B=null,Z=null,q=null,it=null;const et=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,G=0;const H=n.getParameter(n.VERSION);H.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(H)[1]),L=G>=1):H.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),L=G>=2);let W=null,rt={};const vt=n.getParameter(n.SCISSOR_BOX),Dt=n.getParameter(n.VIEWPORT),Vt=new Fe().fromArray(vt),J=new Fe().fromArray(Dt);function yt(X,Rt,St,Gt){const wt=new Uint8Array(4),_t=n.createTexture();n.bindTexture(X,_t),n.texParameteri(X,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(X,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let kt=0;kt<St;kt++)X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY?n.texImage3D(Rt,0,n.RGBA,1,1,Gt,0,n.RGBA,n.UNSIGNED_BYTE,wt):n.texImage2D(Rt+kt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,wt);return _t}const Yt={};Yt[n.TEXTURE_2D]=yt(n.TEXTURE_2D,n.TEXTURE_2D,1),Yt[n.TEXTURE_CUBE_MAP]=yt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Yt[n.TEXTURE_2D_ARRAY]=yt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Yt[n.TEXTURE_3D]=yt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),r.setClear(1),l.setClear(0),Lt(n.DEPTH_TEST),r.setFunc(dc),Et(!1),Tt(tM),Lt(n.CULL_FACE),I(Ur);function Lt(X){d[X]!==!0&&(n.enable(X),d[X]=!0)}function Xt(X){d[X]!==!1&&(n.disable(X),d[X]=!1)}function he(X,Rt){return p[X]!==Rt?(n.bindFramebuffer(X,Rt),p[X]=Rt,X===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=Rt),X===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=Rt),!0):!1}function qt(X,Rt){let St=g,Gt=!1;if(X){St=m.get(Rt),St===void 0&&(St=[],m.set(Rt,St));const wt=X.textures;if(St.length!==wt.length||St[0]!==n.COLOR_ATTACHMENT0){for(let _t=0,kt=wt.length;_t<kt;_t++)St[_t]=n.COLOR_ATTACHMENT0+_t;St.length=wt.length,Gt=!0}}else St[0]!==n.BACK&&(St[0]=n.BACK,Gt=!0);Gt&&n.drawBuffers(St)}function ie(X){return _!==X?(n.useProgram(X),_=X,!0):!1}const ue={[To]:n.FUNC_ADD,[aO]:n.FUNC_SUBTRACT,[sO]:n.FUNC_REVERSE_SUBTRACT};ue[rO]=n.MIN,ue[oO]=n.MAX;const ne={[lO]:n.ZERO,[cO]:n.ONE,[uO]:n.SRC_COLOR,[I0]:n.SRC_ALPHA,[gO]:n.SRC_ALPHA_SATURATE,[pO]:n.DST_COLOR,[hO]:n.DST_ALPHA,[fO]:n.ONE_MINUS_SRC_COLOR,[V0]:n.ONE_MINUS_SRC_ALPHA,[mO]:n.ONE_MINUS_DST_COLOR,[dO]:n.ONE_MINUS_DST_ALPHA,[vO]:n.CONSTANT_COLOR,[yO]:n.ONE_MINUS_CONSTANT_COLOR,[_O]:n.CONSTANT_ALPHA,[xO]:n.ONE_MINUS_CONSTANT_ALPHA};function I(X,Rt,St,Gt,wt,_t,kt,se,Ne,Ae){if(X===Ur){E===!0&&(Xt(n.BLEND),E=!1);return}if(E===!1&&(Lt(n.BLEND),E=!0),X!==iO){if(X!==M||Ae!==D){if((v!==To||T!==To)&&(n.blendEquation(n.FUNC_ADD),v=To,T=To),Ae)switch(X){case ac:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case eM:n.blendFunc(n.ONE,n.ONE);break;case nM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iM:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case ac:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case eM:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case nM:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case iM:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}x=null,b=null,w=null,R=null,N.set(0,0,0),U=0,M=X,D=Ae}return}wt=wt||Rt,_t=_t||St,kt=kt||Gt,(Rt!==v||wt!==T)&&(n.blendEquationSeparate(ue[Rt],ue[wt]),v=Rt,T=wt),(St!==x||Gt!==b||_t!==w||kt!==R)&&(n.blendFuncSeparate(ne[St],ne[Gt],ne[_t],ne[kt]),x=St,b=Gt,w=_t,R=kt),(se.equals(N)===!1||Ne!==U)&&(n.blendColor(se.r,se.g,se.b,Ne),N.copy(se),U=Ne),M=X,D=!1}function Nt(X,Rt){X.side===_s?Xt(n.CULL_FACE):Lt(n.CULL_FACE);let St=X.side===Oi;Rt&&(St=!St),Et(St),X.blending===ac&&X.transparent===!1?I(Ur):I(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.blendColor,X.blendAlpha,X.premultipliedAlpha),r.setFunc(X.depthFunc),r.setTest(X.depthTest),r.setMask(X.depthWrite),s.setMask(X.colorWrite);const Gt=X.stencilWrite;l.setTest(Gt),Gt&&(l.setMask(X.stencilWriteMask),l.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),l.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),zt(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),X.alphaToCoverage===!0?Lt(n.SAMPLE_ALPHA_TO_COVERAGE):Xt(n.SAMPLE_ALPHA_TO_COVERAGE)}function Et(X){C!==X&&(X?n.frontFace(n.CW):n.frontFace(n.CCW),C=X)}function Tt(X){X!==tO?(Lt(n.CULL_FACE),X!==B&&(X===tM?n.cullFace(n.BACK):X===eO?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Xt(n.CULL_FACE),B=X}function dt(X){X!==Z&&(L&&n.lineWidth(X),Z=X)}function zt(X,Rt,St){X?(Lt(n.POLYGON_OFFSET_FILL),(q!==Rt||it!==St)&&(n.polygonOffset(Rt,St),q=Rt,it=St)):Xt(n.POLYGON_OFFSET_FILL)}function bt(X){X?Lt(n.SCISSOR_TEST):Xt(n.SCISSOR_TEST)}function Ht(X){X===void 0&&(X=n.TEXTURE0+et-1),W!==X&&(n.activeTexture(X),W=X)}function fe(X,Rt,St){St===void 0&&(W===null?St=n.TEXTURE0+et-1:St=W);let Gt=rt[St];Gt===void 0&&(Gt={type:void 0,texture:void 0},rt[St]=Gt),(Gt.type!==X||Gt.texture!==Rt)&&(W!==St&&(n.activeTexture(St),W=St),n.bindTexture(X,Rt||Yt[X]),Gt.type=X,Gt.texture=Rt)}function F(){const X=rt[W];X!==void 0&&X.type!==void 0&&(n.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}function O(){try{n.compressedTexImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function nt(){try{n.compressedTexImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function ft(){try{n.texSubImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function pt(){try{n.texSubImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function ht(){try{n.compressedTexSubImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function te(){try{n.compressedTexSubImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Pt(){try{n.texStorage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Qt(){try{n.texStorage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Jt(){try{n.texImage2D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function xt(){try{n.texImage3D(...arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Bt(X){Vt.equals(X)===!1&&(n.scissor(X.x,X.y,X.z,X.w),Vt.copy(X))}function ae(X){J.equals(X)===!1&&(n.viewport(X.x,X.y,X.z,X.w),J.copy(X))}function k(X,Rt){let St=f.get(Rt);St===void 0&&(St=new WeakMap,f.set(Rt,St));let Gt=St.get(X);Gt===void 0&&(Gt=n.getUniformBlockIndex(Rt,X.name),St.set(X,Gt))}function st(X,Rt){const Gt=f.get(Rt).get(X);u.get(Rt)!==Gt&&(n.uniformBlockBinding(Rt,Gt,X.__bindingPointIndex),u.set(Rt,Gt))}function Ct(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),r.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},W=null,rt={},p={},m=new WeakMap,g=[],_=null,E=!1,M=null,v=null,x=null,b=null,T=null,w=null,R=null,N=new Zt(0,0,0),U=0,D=!1,C=null,B=null,Z=null,q=null,it=null,Vt.set(0,0,n.canvas.width,n.canvas.height),J.set(0,0,n.canvas.width,n.canvas.height),s.reset(),r.reset(),l.reset()}return{buffers:{color:s,depth:r,stencil:l},enable:Lt,disable:Xt,bindFramebuffer:he,drawBuffers:qt,useProgram:ie,setBlending:I,setMaterial:Nt,setFlipSided:Et,setCullFace:Tt,setLineWidth:dt,setPolygonOffset:zt,setScissorTest:bt,activeTexture:Ht,bindTexture:fe,unbindTexture:F,compressedTexImage2D:O,compressedTexImage3D:nt,texImage2D:Jt,texImage3D:xt,updateUBOMapping:k,uniformBlockBinding:st,texStorage2D:Pt,texStorage3D:Qt,texSubImage2D:ft,texSubImage3D:pt,compressedTexSubImage2D:ht,compressedTexSubImage3D:te,scissor:Bt,viewport:ae,reset:Ct}}function ck(n,t,e,i,a,s,r){const l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new mt,d=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(F,O){return g?new OffscreenCanvas(F,O):Qd("canvas")}function E(F,O,nt){let ft=1;const pt=fe(F);if((pt.width>nt||pt.height>nt)&&(ft=nt/Math.max(pt.width,pt.height)),ft<1)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap||typeof VideoFrame<"u"&&F instanceof VideoFrame){const ht=Math.floor(ft*pt.width),te=Math.floor(ft*pt.height);p===void 0&&(p=_(ht,te));const Pt=O?_(ht,te):p;return Pt.width=ht,Pt.height=te,Pt.getContext("2d").drawImage(F,0,0,ht,te),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pt.width+"x"+pt.height+") to ("+ht+"x"+te+")."),Pt}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pt.width+"x"+pt.height+")."),F;return F}function M(F){return F.generateMipmaps}function v(F){n.generateMipmap(F)}function x(F){return F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:F.isWebGL3DRenderTarget?n.TEXTURE_3D:F.isWebGLArrayRenderTarget||F.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function b(F,O,nt,ft,pt=!1){if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let ht=O;if(O===n.RED&&(nt===n.FLOAT&&(ht=n.R32F),nt===n.HALF_FLOAT&&(ht=n.R16F),nt===n.UNSIGNED_BYTE&&(ht=n.R8)),O===n.RED_INTEGER&&(nt===n.UNSIGNED_BYTE&&(ht=n.R8UI),nt===n.UNSIGNED_SHORT&&(ht=n.R16UI),nt===n.UNSIGNED_INT&&(ht=n.R32UI),nt===n.BYTE&&(ht=n.R8I),nt===n.SHORT&&(ht=n.R16I),nt===n.INT&&(ht=n.R32I)),O===n.RG&&(nt===n.FLOAT&&(ht=n.RG32F),nt===n.HALF_FLOAT&&(ht=n.RG16F),nt===n.UNSIGNED_BYTE&&(ht=n.RG8)),O===n.RG_INTEGER&&(nt===n.UNSIGNED_BYTE&&(ht=n.RG8UI),nt===n.UNSIGNED_SHORT&&(ht=n.RG16UI),nt===n.UNSIGNED_INT&&(ht=n.RG32UI),nt===n.BYTE&&(ht=n.RG8I),nt===n.SHORT&&(ht=n.RG16I),nt===n.INT&&(ht=n.RG32I)),O===n.RGB_INTEGER&&(nt===n.UNSIGNED_BYTE&&(ht=n.RGB8UI),nt===n.UNSIGNED_SHORT&&(ht=n.RGB16UI),nt===n.UNSIGNED_INT&&(ht=n.RGB32UI),nt===n.BYTE&&(ht=n.RGB8I),nt===n.SHORT&&(ht=n.RGB16I),nt===n.INT&&(ht=n.RGB32I)),O===n.RGBA_INTEGER&&(nt===n.UNSIGNED_BYTE&&(ht=n.RGBA8UI),nt===n.UNSIGNED_SHORT&&(ht=n.RGBA16UI),nt===n.UNSIGNED_INT&&(ht=n.RGBA32UI),nt===n.BYTE&&(ht=n.RGBA8I),nt===n.SHORT&&(ht=n.RGBA16I),nt===n.INT&&(ht=n.RGBA32I)),O===n.RGB&&nt===n.UNSIGNED_INT_5_9_9_9_REV&&(ht=n.RGB9_E5),O===n.RGBA){const te=pt?Wd:Be.getTransfer(ft);nt===n.FLOAT&&(ht=n.RGBA32F),nt===n.HALF_FLOAT&&(ht=n.RGBA16F),nt===n.UNSIGNED_BYTE&&(ht=te===Je?n.SRGB8_ALPHA8:n.RGBA8),nt===n.UNSIGNED_SHORT_4_4_4_4&&(ht=n.RGBA4),nt===n.UNSIGNED_SHORT_5_5_5_1&&(ht=n.RGB5_A1)}return(ht===n.R16F||ht===n.R32F||ht===n.RG16F||ht===n.RG32F||ht===n.RGBA16F||ht===n.RGBA32F)&&t.get("EXT_color_buffer_float"),ht}function T(F,O){let nt;return F?O===null||O===Hr||O===yf?nt=n.DEPTH24_STENCIL8:O===sa?nt=n.DEPTH32F_STENCIL8:O===vf&&(nt=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===Hr||O===yf?nt=n.DEPTH_COMPONENT24:O===sa?nt=n.DEPTH_COMPONENT32F:O===vf&&(nt=n.DEPTH_COMPONENT16),nt}function w(F,O){return M(F)===!0||F.isFramebufferTexture&&F.minFilter!==vi&&F.minFilter!==Kn?Math.log2(Math.max(O.width,O.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?O.mipmaps.length:1}function R(F){const O=F.target;O.removeEventListener("dispose",R),U(O),O.isVideoTexture&&d.delete(O)}function N(F){const O=F.target;O.removeEventListener("dispose",N),C(O)}function U(F){const O=i.get(F);if(O.__webglInit===void 0)return;const nt=F.source,ft=m.get(nt);if(ft){const pt=ft[O.__cacheKey];pt.usedTimes--,pt.usedTimes===0&&D(F),Object.keys(ft).length===0&&m.delete(nt)}i.remove(F)}function D(F){const O=i.get(F);n.deleteTexture(O.__webglTexture);const nt=F.source,ft=m.get(nt);delete ft[O.__cacheKey],r.memory.textures--}function C(F){const O=i.get(F);if(F.depthTexture&&(F.depthTexture.dispose(),i.remove(F.depthTexture)),F.isWebGLCubeRenderTarget)for(let ft=0;ft<6;ft++){if(Array.isArray(O.__webglFramebuffer[ft]))for(let pt=0;pt<O.__webglFramebuffer[ft].length;pt++)n.deleteFramebuffer(O.__webglFramebuffer[ft][pt]);else n.deleteFramebuffer(O.__webglFramebuffer[ft]);O.__webglDepthbuffer&&n.deleteRenderbuffer(O.__webglDepthbuffer[ft])}else{if(Array.isArray(O.__webglFramebuffer))for(let ft=0;ft<O.__webglFramebuffer.length;ft++)n.deleteFramebuffer(O.__webglFramebuffer[ft]);else n.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&n.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&n.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let ft=0;ft<O.__webglColorRenderbuffer.length;ft++)O.__webglColorRenderbuffer[ft]&&n.deleteRenderbuffer(O.__webglColorRenderbuffer[ft]);O.__webglDepthRenderbuffer&&n.deleteRenderbuffer(O.__webglDepthRenderbuffer)}const nt=F.textures;for(let ft=0,pt=nt.length;ft<pt;ft++){const ht=i.get(nt[ft]);ht.__webglTexture&&(n.deleteTexture(ht.__webglTexture),r.memory.textures--),i.remove(nt[ft])}i.remove(F)}let B=0;function Z(){B=0}function q(){const F=B;return F>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+a.maxTextures),B+=1,F}function it(F){const O=[];return O.push(F.wrapS),O.push(F.wrapT),O.push(F.wrapR||0),O.push(F.magFilter),O.push(F.minFilter),O.push(F.anisotropy),O.push(F.internalFormat),O.push(F.format),O.push(F.type),O.push(F.generateMipmaps),O.push(F.premultiplyAlpha),O.push(F.flipY),O.push(F.unpackAlignment),O.push(F.colorSpace),O.join()}function et(F,O){const nt=i.get(F);if(F.isVideoTexture&&bt(F),F.isRenderTargetTexture===!1&&F.version>0&&nt.__version!==F.version){const ft=F.image;if(ft===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ft.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Yt(nt,F,O);return}}e.bindTexture(n.TEXTURE_2D,nt.__webglTexture,n.TEXTURE0+O)}function L(F,O){const nt=i.get(F);if(F.version>0&&nt.__version!==F.version){Yt(nt,F,O);return}e.bindTexture(n.TEXTURE_2D_ARRAY,nt.__webglTexture,n.TEXTURE0+O)}function G(F,O){const nt=i.get(F);if(F.version>0&&nt.__version!==F.version){Yt(nt,F,O);return}e.bindTexture(n.TEXTURE_3D,nt.__webglTexture,n.TEXTURE0+O)}function H(F,O){const nt=i.get(F);if(F.version>0&&nt.__version!==F.version){Lt(nt,F,O);return}e.bindTexture(n.TEXTURE_CUBE_MAP,nt.__webglTexture,n.TEXTURE0+O)}const W={[kd]:n.REPEAT,[$a]:n.CLAMP_TO_EDGE,[jd]:n.MIRRORED_REPEAT},rt={[vi]:n.NEAREST,[qb]:n.NEAREST_MIPMAP_NEAREST,[Iu]:n.NEAREST_MIPMAP_LINEAR,[Kn]:n.LINEAR,[dd]:n.LINEAR_MIPMAP_NEAREST,[Is]:n.LINEAR_MIPMAP_LINEAR},vt={[zO]:n.NEVER,[GO]:n.ALWAYS,[BO]:n.LESS,[eE]:n.LEQUAL,[IO]:n.EQUAL,[FO]:n.GEQUAL,[VO]:n.GREATER,[HO]:n.NOTEQUAL};function Dt(F,O){if(O.type===sa&&t.has("OES_texture_float_linear")===!1&&(O.magFilter===Kn||O.magFilter===dd||O.magFilter===Iu||O.magFilter===Is||O.minFilter===Kn||O.minFilter===dd||O.minFilter===Iu||O.minFilter===Is)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(F,n.TEXTURE_WRAP_S,W[O.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,W[O.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,W[O.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,rt[O.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,rt[O.minFilter]),O.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,vt[O.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===vi||O.minFilter!==Iu&&O.minFilter!==Is||O.type===sa&&t.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||i.get(O).__currentAnisotropy){const nt=t.get("EXT_texture_filter_anisotropic");n.texParameterf(F,nt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,a.getMaxAnisotropy())),i.get(O).__currentAnisotropy=O.anisotropy}}}function Vt(F,O){let nt=!1;F.__webglInit===void 0&&(F.__webglInit=!0,O.addEventListener("dispose",R));const ft=O.source;let pt=m.get(ft);pt===void 0&&(pt={},m.set(ft,pt));const ht=it(O);if(ht!==F.__cacheKey){pt[ht]===void 0&&(pt[ht]={texture:n.createTexture(),usedTimes:0},r.memory.textures++,nt=!0),pt[ht].usedTimes++;const te=pt[F.__cacheKey];te!==void 0&&(pt[F.__cacheKey].usedTimes--,te.usedTimes===0&&D(O)),F.__cacheKey=ht,F.__webglTexture=pt[ht].texture}return nt}function J(F,O,nt){return Math.floor(Math.floor(F/nt)/O)}function yt(F,O,nt,ft){const ht=F.updateRanges;if(ht.length===0)e.texSubImage2D(n.TEXTURE_2D,0,0,0,O.width,O.height,nt,ft,O.data);else{ht.sort((xt,Bt)=>xt.start-Bt.start);let te=0;for(let xt=1;xt<ht.length;xt++){const Bt=ht[te],ae=ht[xt],k=Bt.start+Bt.count,st=J(ae.start,O.width,4),Ct=J(Bt.start,O.width,4);ae.start<=k+1&&st===Ct&&J(ae.start+ae.count-1,O.width,4)===st?Bt.count=Math.max(Bt.count,ae.start+ae.count-Bt.start):(++te,ht[te]=ae)}ht.length=te+1;const Pt=n.getParameter(n.UNPACK_ROW_LENGTH),Qt=n.getParameter(n.UNPACK_SKIP_PIXELS),Jt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,O.width);for(let xt=0,Bt=ht.length;xt<Bt;xt++){const ae=ht[xt],k=Math.floor(ae.start/4),st=Math.ceil(ae.count/4),Ct=k%O.width,X=Math.floor(k/O.width),Rt=st,St=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ct),n.pixelStorei(n.UNPACK_SKIP_ROWS,X),e.texSubImage2D(n.TEXTURE_2D,0,Ct,X,Rt,St,nt,ft,O.data)}F.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Pt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Qt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Jt)}}function Yt(F,O,nt){let ft=n.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(ft=n.TEXTURE_2D_ARRAY),O.isData3DTexture&&(ft=n.TEXTURE_3D);const pt=Vt(F,O),ht=O.source;e.bindTexture(ft,F.__webglTexture,n.TEXTURE0+nt);const te=i.get(ht);if(ht.version!==te.__version||pt===!0){e.activeTexture(n.TEXTURE0+nt);const Pt=Be.getPrimaries(Be.workingColorSpace),Qt=O.colorSpace===br?null:Be.getPrimaries(O.colorSpace),Jt=O.colorSpace===br||Pt===Qt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Jt);let xt=E(O.image,!1,a.maxTextureSize);xt=Ht(O,xt);const Bt=s.convert(O.format,O.colorSpace),ae=s.convert(O.type);let k=b(O.internalFormat,Bt,ae,O.colorSpace,O.isVideoTexture);Dt(ft,O);let st;const Ct=O.mipmaps,X=O.isVideoTexture!==!0,Rt=te.__version===void 0||pt===!0,St=ht.dataReady,Gt=w(O,xt);if(O.isDepthTexture)k=T(O.format===xf,O.type),Rt&&(X?e.texStorage2D(n.TEXTURE_2D,1,k,xt.width,xt.height):e.texImage2D(n.TEXTURE_2D,0,k,xt.width,xt.height,0,Bt,ae,null));else if(O.isDataTexture)if(Ct.length>0){X&&Rt&&e.texStorage2D(n.TEXTURE_2D,Gt,k,Ct[0].width,Ct[0].height);for(let wt=0,_t=Ct.length;wt<_t;wt++)st=Ct[wt],X?St&&e.texSubImage2D(n.TEXTURE_2D,wt,0,0,st.width,st.height,Bt,ae,st.data):e.texImage2D(n.TEXTURE_2D,wt,k,st.width,st.height,0,Bt,ae,st.data);O.generateMipmaps=!1}else X?(Rt&&e.texStorage2D(n.TEXTURE_2D,Gt,k,xt.width,xt.height),St&&yt(O,xt,Bt,ae)):e.texImage2D(n.TEXTURE_2D,0,k,xt.width,xt.height,0,Bt,ae,xt.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){X&&Rt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Gt,k,Ct[0].width,Ct[0].height,xt.depth);for(let wt=0,_t=Ct.length;wt<_t;wt++)if(st=Ct[wt],O.format!==Ni)if(Bt!==null)if(X){if(St)if(O.layerUpdates.size>0){const kt=pM(st.width,st.height,O.format,O.type);for(const se of O.layerUpdates){const Ne=st.data.subarray(se*kt/st.data.BYTES_PER_ELEMENT,(se+1)*kt/st.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,wt,0,0,se,st.width,st.height,1,Bt,Ne)}O.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,wt,0,0,0,st.width,st.height,xt.depth,Bt,st.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,wt,k,st.width,st.height,xt.depth,0,st.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else X?St&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,wt,0,0,0,st.width,st.height,xt.depth,Bt,ae,st.data):e.texImage3D(n.TEXTURE_2D_ARRAY,wt,k,st.width,st.height,xt.depth,0,Bt,ae,st.data)}else{X&&Rt&&e.texStorage2D(n.TEXTURE_2D,Gt,k,Ct[0].width,Ct[0].height);for(let wt=0,_t=Ct.length;wt<_t;wt++)st=Ct[wt],O.format!==Ni?Bt!==null?X?St&&e.compressedTexSubImage2D(n.TEXTURE_2D,wt,0,0,st.width,st.height,Bt,st.data):e.compressedTexImage2D(n.TEXTURE_2D,wt,k,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):X?St&&e.texSubImage2D(n.TEXTURE_2D,wt,0,0,st.width,st.height,Bt,ae,st.data):e.texImage2D(n.TEXTURE_2D,wt,k,st.width,st.height,0,Bt,ae,st.data)}else if(O.isDataArrayTexture)if(X){if(Rt&&e.texStorage3D(n.TEXTURE_2D_ARRAY,Gt,k,xt.width,xt.height,xt.depth),St)if(O.layerUpdates.size>0){const wt=pM(xt.width,xt.height,O.format,O.type);for(const _t of O.layerUpdates){const kt=xt.data.subarray(_t*wt/xt.data.BYTES_PER_ELEMENT,(_t+1)*wt/xt.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,_t,xt.width,xt.height,1,Bt,ae,kt)}O.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,xt.width,xt.height,xt.depth,Bt,ae,xt.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,k,xt.width,xt.height,xt.depth,0,Bt,ae,xt.data);else if(O.isData3DTexture)X?(Rt&&e.texStorage3D(n.TEXTURE_3D,Gt,k,xt.width,xt.height,xt.depth),St&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,xt.width,xt.height,xt.depth,Bt,ae,xt.data)):e.texImage3D(n.TEXTURE_3D,0,k,xt.width,xt.height,xt.depth,0,Bt,ae,xt.data);else if(O.isFramebufferTexture){if(Rt)if(X)e.texStorage2D(n.TEXTURE_2D,Gt,k,xt.width,xt.height);else{let wt=xt.width,_t=xt.height;for(let kt=0;kt<Gt;kt++)e.texImage2D(n.TEXTURE_2D,kt,k,wt,_t,0,Bt,ae,null),wt>>=1,_t>>=1}}else if(Ct.length>0){if(X&&Rt){const wt=fe(Ct[0]);e.texStorage2D(n.TEXTURE_2D,Gt,k,wt.width,wt.height)}for(let wt=0,_t=Ct.length;wt<_t;wt++)st=Ct[wt],X?St&&e.texSubImage2D(n.TEXTURE_2D,wt,0,0,Bt,ae,st):e.texImage2D(n.TEXTURE_2D,wt,k,Bt,ae,st);O.generateMipmaps=!1}else if(X){if(Rt){const wt=fe(xt);e.texStorage2D(n.TEXTURE_2D,Gt,k,wt.width,wt.height)}St&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Bt,ae,xt)}else e.texImage2D(n.TEXTURE_2D,0,k,Bt,ae,xt);M(O)&&v(ft),te.__version=ht.version,O.onUpdate&&O.onUpdate(O)}F.__version=O.version}function Lt(F,O,nt){if(O.image.length!==6)return;const ft=Vt(F,O),pt=O.source;e.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+nt);const ht=i.get(pt);if(pt.version!==ht.__version||ft===!0){e.activeTexture(n.TEXTURE0+nt);const te=Be.getPrimaries(Be.workingColorSpace),Pt=O.colorSpace===br?null:Be.getPrimaries(O.colorSpace),Qt=O.colorSpace===br||te===Pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qt);const Jt=O.isCompressedTexture||O.image[0].isCompressedTexture,xt=O.image[0]&&O.image[0].isDataTexture,Bt=[];for(let _t=0;_t<6;_t++)!Jt&&!xt?Bt[_t]=E(O.image[_t],!0,a.maxCubemapSize):Bt[_t]=xt?O.image[_t].image:O.image[_t],Bt[_t]=Ht(O,Bt[_t]);const ae=Bt[0],k=s.convert(O.format,O.colorSpace),st=s.convert(O.type),Ct=b(O.internalFormat,k,st,O.colorSpace),X=O.isVideoTexture!==!0,Rt=ht.__version===void 0||ft===!0,St=pt.dataReady;let Gt=w(O,ae);Dt(n.TEXTURE_CUBE_MAP,O);let wt;if(Jt){X&&Rt&&e.texStorage2D(n.TEXTURE_CUBE_MAP,Gt,Ct,ae.width,ae.height);for(let _t=0;_t<6;_t++){wt=Bt[_t].mipmaps;for(let kt=0;kt<wt.length;kt++){const se=wt[kt];O.format!==Ni?k!==null?X?St&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,kt,0,0,se.width,se.height,k,se.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,kt,Ct,se.width,se.height,0,se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):X?St&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,kt,0,0,se.width,se.height,k,st,se.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,kt,Ct,se.width,se.height,0,k,st,se.data)}}}else{if(wt=O.mipmaps,X&&Rt){wt.length>0&&Gt++;const _t=fe(Bt[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,Gt,Ct,_t.width,_t.height)}for(let _t=0;_t<6;_t++)if(xt){X?St&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,0,0,Bt[_t].width,Bt[_t].height,k,st,Bt[_t].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,Ct,Bt[_t].width,Bt[_t].height,0,k,st,Bt[_t].data);for(let kt=0;kt<wt.length;kt++){const Ne=wt[kt].image[_t].image;X?St&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,kt+1,0,0,Ne.width,Ne.height,k,st,Ne.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,kt+1,Ct,Ne.width,Ne.height,0,k,st,Ne.data)}}else{X?St&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,0,0,k,st,Bt[_t]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,Ct,k,st,Bt[_t]);for(let kt=0;kt<wt.length;kt++){const se=wt[kt];X?St&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,kt+1,0,0,k,st,se.image[_t]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,kt+1,Ct,k,st,se.image[_t])}}}M(O)&&v(n.TEXTURE_CUBE_MAP),ht.__version=pt.version,O.onUpdate&&O.onUpdate(O)}F.__version=O.version}function Xt(F,O,nt,ft,pt,ht){const te=s.convert(nt.format,nt.colorSpace),Pt=s.convert(nt.type),Qt=b(nt.internalFormat,te,Pt,nt.colorSpace),Jt=i.get(O),xt=i.get(nt);if(xt.__renderTarget=O,!Jt.__hasExternalTextures){const Bt=Math.max(1,O.width>>ht),ae=Math.max(1,O.height>>ht);pt===n.TEXTURE_3D||pt===n.TEXTURE_2D_ARRAY?e.texImage3D(pt,ht,Qt,Bt,ae,O.depth,0,te,Pt,null):e.texImage2D(pt,ht,Qt,Bt,ae,0,te,Pt,null)}e.bindFramebuffer(n.FRAMEBUFFER,F),zt(O)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ft,pt,xt.__webglTexture,0,dt(O)):(pt===n.TEXTURE_2D||pt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&pt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ft,pt,xt.__webglTexture,ht),e.bindFramebuffer(n.FRAMEBUFFER,null)}function he(F,O,nt){if(n.bindRenderbuffer(n.RENDERBUFFER,F),O.depthBuffer){const ft=O.depthTexture,pt=ft&&ft.isDepthTexture?ft.type:null,ht=T(O.stencilBuffer,pt),te=O.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Pt=dt(O);zt(O)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pt,ht,O.width,O.height):nt?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pt,ht,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,ht,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,te,n.RENDERBUFFER,F)}else{const ft=O.textures;for(let pt=0;pt<ft.length;pt++){const ht=ft[pt],te=s.convert(ht.format,ht.colorSpace),Pt=s.convert(ht.type),Qt=b(ht.internalFormat,te,Pt,ht.colorSpace),Jt=dt(O);nt&&zt(O)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Jt,Qt,O.width,O.height):zt(O)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Jt,Qt,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,Qt,O.width,O.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function qt(F,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,F),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ft=i.get(O.depthTexture);ft.__renderTarget=O,(!ft.__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),et(O.depthTexture,0);const pt=ft.__webglTexture,ht=dt(O);if(O.depthTexture.format===_f)zt(O)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pt,0,ht):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pt,0);else if(O.depthTexture.format===xf)zt(O)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pt,0,ht):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pt,0);else throw new Error("Unknown depthTexture format")}function ie(F){const O=i.get(F),nt=F.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==F.depthTexture){const ft=F.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),ft){const pt=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,ft.removeEventListener("dispose",pt)};ft.addEventListener("dispose",pt),O.__depthDisposeCallback=pt}O.__boundDepthTexture=ft}if(F.depthTexture&&!O.__autoAllocateDepthBuffer){if(nt)throw new Error("target.depthTexture not supported in Cube render targets");const ft=F.texture.mipmaps;ft&&ft.length>0?qt(O.__webglFramebuffer[0],F):qt(O.__webglFramebuffer,F)}else if(nt){O.__webglDepthbuffer=[];for(let ft=0;ft<6;ft++)if(e.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer[ft]),O.__webglDepthbuffer[ft]===void 0)O.__webglDepthbuffer[ft]=n.createRenderbuffer(),he(O.__webglDepthbuffer[ft],F,!1);else{const pt=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ht=O.__webglDepthbuffer[ft];n.bindRenderbuffer(n.RENDERBUFFER,ht),n.framebufferRenderbuffer(n.FRAMEBUFFER,pt,n.RENDERBUFFER,ht)}}else{const ft=F.texture.mipmaps;if(ft&&ft.length>0?e.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer[0]):e.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=n.createRenderbuffer(),he(O.__webglDepthbuffer,F,!1);else{const pt=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ht=O.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ht),n.framebufferRenderbuffer(n.FRAMEBUFFER,pt,n.RENDERBUFFER,ht)}}e.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(F,O,nt){const ft=i.get(F);O!==void 0&&Xt(ft.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),nt!==void 0&&ie(F)}function ne(F){const O=F.texture,nt=i.get(F),ft=i.get(O);F.addEventListener("dispose",N);const pt=F.textures,ht=F.isWebGLCubeRenderTarget===!0,te=pt.length>1;if(te||(ft.__webglTexture===void 0&&(ft.__webglTexture=n.createTexture()),ft.__version=O.version,r.memory.textures++),ht){nt.__webglFramebuffer=[];for(let Pt=0;Pt<6;Pt++)if(O.mipmaps&&O.mipmaps.length>0){nt.__webglFramebuffer[Pt]=[];for(let Qt=0;Qt<O.mipmaps.length;Qt++)nt.__webglFramebuffer[Pt][Qt]=n.createFramebuffer()}else nt.__webglFramebuffer[Pt]=n.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){nt.__webglFramebuffer=[];for(let Pt=0;Pt<O.mipmaps.length;Pt++)nt.__webglFramebuffer[Pt]=n.createFramebuffer()}else nt.__webglFramebuffer=n.createFramebuffer();if(te)for(let Pt=0,Qt=pt.length;Pt<Qt;Pt++){const Jt=i.get(pt[Pt]);Jt.__webglTexture===void 0&&(Jt.__webglTexture=n.createTexture(),r.memory.textures++)}if(F.samples>0&&zt(F)===!1){nt.__webglMultisampledFramebuffer=n.createFramebuffer(),nt.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,nt.__webglMultisampledFramebuffer);for(let Pt=0;Pt<pt.length;Pt++){const Qt=pt[Pt];nt.__webglColorRenderbuffer[Pt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,nt.__webglColorRenderbuffer[Pt]);const Jt=s.convert(Qt.format,Qt.colorSpace),xt=s.convert(Qt.type),Bt=b(Qt.internalFormat,Jt,xt,Qt.colorSpace,F.isXRRenderTarget===!0),ae=dt(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,ae,Bt,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.RENDERBUFFER,nt.__webglColorRenderbuffer[Pt])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(nt.__webglDepthRenderbuffer=n.createRenderbuffer(),he(nt.__webglDepthRenderbuffer,F,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ht){e.bindTexture(n.TEXTURE_CUBE_MAP,ft.__webglTexture),Dt(n.TEXTURE_CUBE_MAP,O);for(let Pt=0;Pt<6;Pt++)if(O.mipmaps&&O.mipmaps.length>0)for(let Qt=0;Qt<O.mipmaps.length;Qt++)Xt(nt.__webglFramebuffer[Pt][Qt],F,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pt,Qt);else Xt(nt.__webglFramebuffer[Pt],F,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pt,0);M(O)&&v(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(te){for(let Pt=0,Qt=pt.length;Pt<Qt;Pt++){const Jt=pt[Pt],xt=i.get(Jt);e.bindTexture(n.TEXTURE_2D,xt.__webglTexture),Dt(n.TEXTURE_2D,Jt),Xt(nt.__webglFramebuffer,F,Jt,n.COLOR_ATTACHMENT0+Pt,n.TEXTURE_2D,0),M(Jt)&&v(n.TEXTURE_2D)}e.unbindTexture()}else{let Pt=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(Pt=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Pt,ft.__webglTexture),Dt(Pt,O),O.mipmaps&&O.mipmaps.length>0)for(let Qt=0;Qt<O.mipmaps.length;Qt++)Xt(nt.__webglFramebuffer[Qt],F,O,n.COLOR_ATTACHMENT0,Pt,Qt);else Xt(nt.__webglFramebuffer,F,O,n.COLOR_ATTACHMENT0,Pt,0);M(O)&&v(Pt),e.unbindTexture()}F.depthBuffer&&ie(F)}function I(F){const O=F.textures;for(let nt=0,ft=O.length;nt<ft;nt++){const pt=O[nt];if(M(pt)){const ht=x(F),te=i.get(pt).__webglTexture;e.bindTexture(ht,te),v(ht),e.unbindTexture()}}}const Nt=[],Et=[];function Tt(F){if(F.samples>0){if(zt(F)===!1){const O=F.textures,nt=F.width,ft=F.height;let pt=n.COLOR_BUFFER_BIT;const ht=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,te=i.get(F),Pt=O.length>1;if(Pt)for(let Jt=0;Jt<O.length;Jt++)e.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Jt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,te.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Jt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,te.__webglMultisampledFramebuffer);const Qt=F.texture.mipmaps;Qt&&Qt.length>0?e.bindFramebuffer(n.DRAW_FRAMEBUFFER,te.__webglFramebuffer[0]):e.bindFramebuffer(n.DRAW_FRAMEBUFFER,te.__webglFramebuffer);for(let Jt=0;Jt<O.length;Jt++){if(F.resolveDepthBuffer&&(F.depthBuffer&&(pt|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&F.resolveStencilBuffer&&(pt|=n.STENCIL_BUFFER_BIT)),Pt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,te.__webglColorRenderbuffer[Jt]);const xt=i.get(O[Jt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,xt,0)}n.blitFramebuffer(0,0,nt,ft,0,0,nt,ft,pt,n.NEAREST),u===!0&&(Nt.length=0,Et.length=0,Nt.push(n.COLOR_ATTACHMENT0+Jt),F.depthBuffer&&F.resolveDepthBuffer===!1&&(Nt.push(ht),Et.push(ht),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Et)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Nt))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Pt)for(let Jt=0;Jt<O.length;Jt++){e.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Jt,n.RENDERBUFFER,te.__webglColorRenderbuffer[Jt]);const xt=i.get(O[Jt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,te.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Jt,n.TEXTURE_2D,xt,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,te.__webglMultisampledFramebuffer)}else if(F.depthBuffer&&F.resolveDepthBuffer===!1&&u){const O=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[O])}}}function dt(F){return Math.min(a.maxSamples,F.samples)}function zt(F){const O=i.get(F);return F.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function bt(F){const O=r.render.frame;d.get(F)!==O&&(d.set(F,O),F.update())}function Ht(F,O){const nt=F.colorSpace,ft=F.format,pt=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||nt!==ko&&nt!==br&&(Be.getTransfer(nt)===Je?(ft!==Ni||pt!==as)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",nt)),O}function fe(F){return typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement?(f.width=F.naturalWidth||F.width,f.height=F.naturalHeight||F.height):typeof VideoFrame<"u"&&F instanceof VideoFrame?(f.width=F.displayWidth,f.height=F.displayHeight):(f.width=F.width,f.height=F.height),f}this.allocateTextureUnit=q,this.resetTextureUnits=Z,this.setTexture2D=et,this.setTexture2DArray=L,this.setTexture3D=G,this.setTextureCube=H,this.rebindTextures=ue,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=I,this.updateMultisampleRenderTarget=Tt,this.setupDepthRenderbuffer=ie,this.setupFrameBufferTexture=Xt,this.useMultisampledRTT=zt}function $L(n,t){function e(i,a=br){let s;const r=Be.getTransfer(a);if(i===as)return n.UNSIGNED_BYTE;if(i===ay)return n.UNSIGNED_SHORT_4_4_4_4;if(i===sy)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Zb)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Yb)return n.BYTE;if(i===Wb)return n.SHORT;if(i===vf)return n.UNSIGNED_SHORT;if(i===iy)return n.INT;if(i===Hr)return n.UNSIGNED_INT;if(i===sa)return n.FLOAT;if(i===If)return n.HALF_FLOAT;if(i===Kb)return n.ALPHA;if(i===Qb)return n.RGB;if(i===Ni)return n.RGBA;if(i===_f)return n.DEPTH_COMPONENT;if(i===xf)return n.DEPTH_STENCIL;if(i===ry)return n.RED;if(i===Dp)return n.RED_INTEGER;if(i===Jb)return n.RG;if(i===oy)return n.RG_INTEGER;if(i===ly)return n.RGBA_INTEGER;if(i===pd||i===md||i===gd||i===vd)if(r===Je)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===pd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===md)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===gd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===vd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===pd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===md)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===gd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===vd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Y0||i===W0||i===Z0||i===K0)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Y0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===W0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Z0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===K0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Q0||i===J0||i===$0)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Q0||i===J0)return r===Je?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===$0)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===tv||i===ev||i===nv||i===iv||i===av||i===sv||i===rv||i===ov||i===lv||i===cv||i===uv||i===fv||i===hv||i===dv)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(i===tv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===ev)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===nv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===iv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===av)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===sv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===rv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ov)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===lv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===cv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===uv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===fv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===hv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===dv)return r===Je?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===yd||i===pv||i===mv)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(i===yd)return r===Je?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===pv)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===mv)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===$b||i===gv||i===vv||i===yv)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(i===yd)return s.COMPRESSED_RED_RGTC1_EXT;if(i===gv)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===vv)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===yv)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===yf?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}const uk=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fk=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class hk{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){const a=new Ln,s=t.properties.get(a);s.__webglTexture=e.texture,(e.depthNear!==i.depthNear||e.depthFar!==i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=a}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,i=new Ms({vertexShader:uk,fragmentShader:fk,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new jn(new Hf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class dk extends $s{constructor(t,e){super();const i=this;let a=null,s=1,r=null,l="local-floor",u=1,f=null,d=null,p=null,m=null,g=null,_=null;const E=new hk,M=e.getContextAttributes();let v=null,x=null;const b=[],T=[],w=new mt;let R=null;const N=new En;N.viewport=new Fe;const U=new En;U.viewport=new Fe;const D=[N,U],C=new GL;let B=null,Z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let yt=b[J];return yt===void 0&&(yt=new e0,b[J]=yt),yt.getTargetRaySpace()},this.getControllerGrip=function(J){let yt=b[J];return yt===void 0&&(yt=new e0,b[J]=yt),yt.getGripSpace()},this.getHand=function(J){let yt=b[J];return yt===void 0&&(yt=new e0,b[J]=yt),yt.getHandSpace()};function q(J){const yt=T.indexOf(J.inputSource);if(yt===-1)return;const Yt=b[yt];Yt!==void 0&&(Yt.update(J.inputSource,J.frame,f||r),Yt.dispatchEvent({type:J.type,data:J.inputSource}))}function it(){a.removeEventListener("select",q),a.removeEventListener("selectstart",q),a.removeEventListener("selectend",q),a.removeEventListener("squeeze",q),a.removeEventListener("squeezestart",q),a.removeEventListener("squeezeend",q),a.removeEventListener("end",it),a.removeEventListener("inputsourceschange",et);for(let J=0;J<b.length;J++){const yt=T[J];yt!==null&&(T[J]=null,b[J].disconnect(yt))}B=null,Z=null,E.reset(),t.setRenderTarget(v),g=null,m=null,p=null,a=null,x=null,Vt.stop(),i.isPresenting=!1,t.setPixelRatio(R),t.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){s=J,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){l=J,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||r},this.setReferenceSpace=function(J){f=J},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return _},this.getSession=function(){return a},this.setSession=async function(J){if(a=J,a!==null){if(v=t.getRenderTarget(),a.addEventListener("select",q),a.addEventListener("selectstart",q),a.addEventListener("selectend",q),a.addEventListener("squeeze",q),a.addEventListener("squeezestart",q),a.addEventListener("squeezeend",q),a.addEventListener("end",it),a.addEventListener("inputsourceschange",et),M.xrCompatible!==!0&&await e.makeXRCompatible(),R=t.getPixelRatio(),t.getSize(w),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Yt=null,Lt=null,Xt=null;M.depth&&(Xt=M.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Yt=M.stencil?xf:_f,Lt=M.stencil?yf:Hr);const he={colorFormat:e.RGBA8,depthFormat:Xt,scaleFactor:s};p=new XRWebGLBinding(a,e),m=p.createProjectionLayer(he),a.updateRenderState({layers:[m]}),t.setPixelRatio(1),t.setSize(m.textureWidth,m.textureHeight,!1),x=new Ks(m.textureWidth,m.textureHeight,{format:Ni,type:as,depthTexture:new uE(m.textureWidth,m.textureHeight,Lt,void 0,void 0,void 0,void 0,void 0,void 0,Yt),stencilBuffer:M.stencil,colorSpace:t.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const Yt={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(a,e,Yt),a.updateRenderState({baseLayer:g}),t.setPixelRatio(1),t.setSize(g.framebufferWidth,g.framebufferHeight,!1),x=new Ks(g.framebufferWidth,g.framebufferHeight,{format:Ni,type:as,colorSpace:t.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(u),f=null,r=await a.requestReferenceSpace(l),Vt.setContext(a),Vt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function et(J){for(let yt=0;yt<J.removed.length;yt++){const Yt=J.removed[yt],Lt=T.indexOf(Yt);Lt>=0&&(T[Lt]=null,b[Lt].disconnect(Yt))}for(let yt=0;yt<J.added.length;yt++){const Yt=J.added[yt];let Lt=T.indexOf(Yt);if(Lt===-1){for(let he=0;he<b.length;he++)if(he>=T.length){T.push(Yt),Lt=he;break}else if(T[he]===null){T[he]=Yt,Lt=he;break}if(Lt===-1)break}const Xt=b[Lt];Xt&&Xt.connect(Yt)}}const L=new V,G=new V;function H(J,yt,Yt){L.setFromMatrixPosition(yt.matrixWorld),G.setFromMatrixPosition(Yt.matrixWorld);const Lt=L.distanceTo(G),Xt=yt.projectionMatrix.elements,he=Yt.projectionMatrix.elements,qt=Xt[14]/(Xt[10]-1),ie=Xt[14]/(Xt[10]+1),ue=(Xt[9]+1)/Xt[5],ne=(Xt[9]-1)/Xt[5],I=(Xt[8]-1)/Xt[0],Nt=(he[8]+1)/he[0],Et=qt*I,Tt=qt*Nt,dt=Lt/(-I+Nt),zt=dt*-I;if(yt.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(zt),J.translateZ(dt),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert(),Xt[10]===-1)J.projectionMatrix.copy(yt.projectionMatrix),J.projectionMatrixInverse.copy(yt.projectionMatrixInverse);else{const bt=qt+dt,Ht=ie+dt,fe=Et-zt,F=Tt+(Lt-zt),O=ue*ie/Ht*bt,nt=ne*ie/Ht*bt;J.projectionMatrix.makePerspective(fe,F,O,nt,bt,Ht),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}}function W(J,yt){yt===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(yt.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(a===null)return;let yt=J.near,Yt=J.far;E.texture!==null&&(E.depthNear>0&&(yt=E.depthNear),E.depthFar>0&&(Yt=E.depthFar)),C.near=U.near=N.near=yt,C.far=U.far=N.far=Yt,(B!==C.near||Z!==C.far)&&(a.updateRenderState({depthNear:C.near,depthFar:C.far}),B=C.near,Z=C.far),N.layers.mask=J.layers.mask|2,U.layers.mask=J.layers.mask|4,C.layers.mask=N.layers.mask|U.layers.mask;const Lt=J.parent,Xt=C.cameras;W(C,Lt);for(let he=0;he<Xt.length;he++)W(Xt[he],Lt);Xt.length===2?H(C,N,U):C.projectionMatrix.copy(N.projectionMatrix),rt(J,C,Lt)};function rt(J,yt,Yt){Yt===null?J.matrix.copy(yt.matrixWorld):(J.matrix.copy(Yt.matrixWorld),J.matrix.invert(),J.matrix.multiply(yt.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(yt.projectionMatrix),J.projectionMatrixInverse.copy(yt.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=Sf*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(m===null&&g===null))return u},this.setFoveation=function(J){u=J,m!==null&&(m.fixedFoveation=J),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=J)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(C)};let vt=null;function Dt(J,yt){if(d=yt.getViewerPose(f||r),_=yt,d!==null){const Yt=d.views;g!==null&&(t.setRenderTargetFramebuffer(x,g.framebuffer),t.setRenderTarget(x));let Lt=!1;Yt.length!==C.cameras.length&&(C.cameras.length=0,Lt=!0);for(let qt=0;qt<Yt.length;qt++){const ie=Yt[qt];let ue=null;if(g!==null)ue=g.getViewport(ie);else{const I=p.getViewSubImage(m,ie);ue=I.viewport,qt===0&&(t.setRenderTargetTextures(x,I.colorTexture,I.depthStencilTexture),t.setRenderTarget(x))}let ne=D[qt];ne===void 0&&(ne=new En,ne.layers.enable(qt),ne.viewport=new Fe,D[qt]=ne),ne.matrix.fromArray(ie.transform.matrix),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale),ne.projectionMatrix.fromArray(ie.projectionMatrix),ne.projectionMatrixInverse.copy(ne.projectionMatrix).invert(),ne.viewport.set(ue.x,ue.y,ue.width,ue.height),qt===0&&(C.matrix.copy(ne.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),Lt===!0&&C.cameras.push(ne)}const Xt=a.enabledFeatures;if(Xt&&Xt.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&p){const qt=p.getDepthInformation(Yt[0]);qt&&qt.isValid&&qt.texture&&E.init(t,qt,a.renderState)}}for(let Yt=0;Yt<b.length;Yt++){const Lt=T[Yt],Xt=b[Yt];Lt!==null&&Xt!==void 0&&Xt.update(Lt,yt,f||r)}vt&&vt(J,yt),yt.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:yt}),_=null}const Vt=new WL;Vt.setAnimationLoop(Dt),this.setAnimationLoop=function(J){vt=J},this.dispose=function(){}}}const Pl=new Oa,pk=new pe;function mk(n,t){function e(M,v){M.matrixAutoUpdate===!0&&M.updateMatrix(),v.value.copy(M.matrix)}function i(M,v){v.color.getRGB(M.fogColor.value,YO(n)),v.isFog?(M.fogNear.value=v.near,M.fogFar.value=v.far):v.isFogExp2&&(M.fogDensity.value=v.density)}function a(M,v,x,b,T){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(M,v):v.isMeshToonMaterial?(s(M,v),p(M,v)):v.isMeshPhongMaterial?(s(M,v),d(M,v)):v.isMeshStandardMaterial?(s(M,v),m(M,v),v.isMeshPhysicalMaterial&&g(M,v,T)):v.isMeshMatcapMaterial?(s(M,v),_(M,v)):v.isMeshDepthMaterial?s(M,v):v.isMeshDistanceMaterial?(s(M,v),E(M,v)):v.isMeshNormalMaterial?s(M,v):v.isLineBasicMaterial?(r(M,v),v.isLineDashedMaterial&&l(M,v)):v.isPointsMaterial?u(M,v,x,b):v.isSpriteMaterial?f(M,v):v.isShadowMaterial?(M.color.value.copy(v.color),M.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(M,v){M.opacity.value=v.opacity,v.color&&M.diffuse.value.copy(v.color),v.emissive&&M.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(M.map.value=v.map,e(v.map,M.mapTransform)),v.alphaMap&&(M.alphaMap.value=v.alphaMap,e(v.alphaMap,M.alphaMapTransform)),v.bumpMap&&(M.bumpMap.value=v.bumpMap,e(v.bumpMap,M.bumpMapTransform),M.bumpScale.value=v.bumpScale,v.side===Oi&&(M.bumpScale.value*=-1)),v.normalMap&&(M.normalMap.value=v.normalMap,e(v.normalMap,M.normalMapTransform),M.normalScale.value.copy(v.normalScale),v.side===Oi&&M.normalScale.value.negate()),v.displacementMap&&(M.displacementMap.value=v.displacementMap,e(v.displacementMap,M.displacementMapTransform),M.displacementScale.value=v.displacementScale,M.displacementBias.value=v.displacementBias),v.emissiveMap&&(M.emissiveMap.value=v.emissiveMap,e(v.emissiveMap,M.emissiveMapTransform)),v.specularMap&&(M.specularMap.value=v.specularMap,e(v.specularMap,M.specularMapTransform)),v.alphaTest>0&&(M.alphaTest.value=v.alphaTest);const x=t.get(v),b=x.envMap,T=x.envMapRotation;b&&(M.envMap.value=b,Pl.copy(T),Pl.x*=-1,Pl.y*=-1,Pl.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Pl.y*=-1,Pl.z*=-1),M.envMapRotation.value.setFromMatrix4(pk.makeRotationFromEuler(Pl)),M.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=v.reflectivity,M.ior.value=v.ior,M.refractionRatio.value=v.refractionRatio),v.lightMap&&(M.lightMap.value=v.lightMap,M.lightMapIntensity.value=v.lightMapIntensity,e(v.lightMap,M.lightMapTransform)),v.aoMap&&(M.aoMap.value=v.aoMap,M.aoMapIntensity.value=v.aoMapIntensity,e(v.aoMap,M.aoMapTransform))}function r(M,v){M.diffuse.value.copy(v.color),M.opacity.value=v.opacity,v.map&&(M.map.value=v.map,e(v.map,M.mapTransform))}function l(M,v){M.dashSize.value=v.dashSize,M.totalSize.value=v.dashSize+v.gapSize,M.scale.value=v.scale}function u(M,v,x,b){M.diffuse.value.copy(v.color),M.opacity.value=v.opacity,M.size.value=v.size*x,M.scale.value=b*.5,v.map&&(M.map.value=v.map,e(v.map,M.uvTransform)),v.alphaMap&&(M.alphaMap.value=v.alphaMap,e(v.alphaMap,M.alphaMapTransform)),v.alphaTest>0&&(M.alphaTest.value=v.alphaTest)}function f(M,v){M.diffuse.value.copy(v.color),M.opacity.value=v.opacity,M.rotation.value=v.rotation,v.map&&(M.map.value=v.map,e(v.map,M.mapTransform)),v.alphaMap&&(M.alphaMap.value=v.alphaMap,e(v.alphaMap,M.alphaMapTransform)),v.alphaTest>0&&(M.alphaTest.value=v.alphaTest)}function d(M,v){M.specular.value.copy(v.specular),M.shininess.value=Math.max(v.shininess,1e-4)}function p(M,v){v.gradientMap&&(M.gradientMap.value=v.gradientMap)}function m(M,v){M.metalness.value=v.metalness,v.metalnessMap&&(M.metalnessMap.value=v.metalnessMap,e(v.metalnessMap,M.metalnessMapTransform)),M.roughness.value=v.roughness,v.roughnessMap&&(M.roughnessMap.value=v.roughnessMap,e(v.roughnessMap,M.roughnessMapTransform)),v.envMap&&(M.envMapIntensity.value=v.envMapIntensity)}function g(M,v,x){M.ior.value=v.ior,v.sheen>0&&(M.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),M.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(M.sheenColorMap.value=v.sheenColorMap,e(v.sheenColorMap,M.sheenColorMapTransform)),v.sheenRoughnessMap&&(M.sheenRoughnessMap.value=v.sheenRoughnessMap,e(v.sheenRoughnessMap,M.sheenRoughnessMapTransform))),v.clearcoat>0&&(M.clearcoat.value=v.clearcoat,M.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(M.clearcoatMap.value=v.clearcoatMap,e(v.clearcoatMap,M.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,e(v.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(M.clearcoatNormalMap.value=v.clearcoatNormalMap,e(v.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Oi&&M.clearcoatNormalScale.value.negate())),v.dispersion>0&&(M.dispersion.value=v.dispersion),v.iridescence>0&&(M.iridescence.value=v.iridescence,M.iridescenceIOR.value=v.iridescenceIOR,M.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(M.iridescenceMap.value=v.iridescenceMap,e(v.iridescenceMap,M.iridescenceMapTransform)),v.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=v.iridescenceThicknessMap,e(v.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),v.transmission>0&&(M.transmission.value=v.transmission,M.transmissionSamplerMap.value=x.texture,M.transmissionSamplerSize.value.set(x.width,x.height),v.transmissionMap&&(M.transmissionMap.value=v.transmissionMap,e(v.transmissionMap,M.transmissionMapTransform)),M.thickness.value=v.thickness,v.thicknessMap&&(M.thicknessMap.value=v.thicknessMap,e(v.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=v.attenuationDistance,M.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(M.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(M.anisotropyMap.value=v.anisotropyMap,e(v.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=v.specularIntensity,M.specularColor.value.copy(v.specularColor),v.specularColorMap&&(M.specularColorMap.value=v.specularColorMap,e(v.specularColorMap,M.specularColorMapTransform)),v.specularIntensityMap&&(M.specularIntensityMap.value=v.specularIntensityMap,e(v.specularIntensityMap,M.specularIntensityMapTransform))}function _(M,v){v.matcap&&(M.matcap.value=v.matcap)}function E(M,v){const x=t.get(v).light;M.referencePosition.value.setFromMatrixPosition(x.matrixWorld),M.nearDistance.value=x.shadow.camera.near,M.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function gk(n,t,e,i){let a={},s={},r=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(x,b){const T=b.program;i.uniformBlockBinding(x,T)}function f(x,b){let T=a[x.id];T===void 0&&(_(x),T=d(x),a[x.id]=T,x.addEventListener("dispose",M));const w=b.program;i.updateUBOMapping(x,w);const R=t.render.frame;s[x.id]!==R&&(m(x),s[x.id]=R)}function d(x){const b=p();x.__bindingPointIndex=b;const T=n.createBuffer(),w=x.__size,R=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,w,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,T),T}function p(){for(let x=0;x<l;x++)if(r.indexOf(x)===-1)return r.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(x){const b=a[x.id],T=x.uniforms,w=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let R=0,N=T.length;R<N;R++){const U=Array.isArray(T[R])?T[R]:[T[R]];for(let D=0,C=U.length;D<C;D++){const B=U[D];if(g(B,R,D,w)===!0){const Z=B.__offset,q=Array.isArray(B.value)?B.value:[B.value];let it=0;for(let et=0;et<q.length;et++){const L=q[et],G=E(L);typeof L=="number"||typeof L=="boolean"?(B.__data[0]=L,n.bufferSubData(n.UNIFORM_BUFFER,Z+it,B.__data)):L.isMatrix3?(B.__data[0]=L.elements[0],B.__data[1]=L.elements[1],B.__data[2]=L.elements[2],B.__data[3]=0,B.__data[4]=L.elements[3],B.__data[5]=L.elements[4],B.__data[6]=L.elements[5],B.__data[7]=0,B.__data[8]=L.elements[6],B.__data[9]=L.elements[7],B.__data[10]=L.elements[8],B.__data[11]=0):(L.toArray(B.__data,it),it+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Z,B.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(x,b,T,w){const R=x.value,N=b+"_"+T;if(w[N]===void 0)return typeof R=="number"||typeof R=="boolean"?w[N]=R:w[N]=R.clone(),!0;{const U=w[N];if(typeof R=="number"||typeof R=="boolean"){if(U!==R)return w[N]=R,!0}else if(U.equals(R)===!1)return U.copy(R),!0}return!1}function _(x){const b=x.uniforms;let T=0;const w=16;for(let N=0,U=b.length;N<U;N++){const D=Array.isArray(b[N])?b[N]:[b[N]];for(let C=0,B=D.length;C<B;C++){const Z=D[C],q=Array.isArray(Z.value)?Z.value:[Z.value];for(let it=0,et=q.length;it<et;it++){const L=q[it],G=E(L),H=T%w,W=H%G.boundary,rt=H+W;T+=W,rt!==0&&w-rt<G.storage&&(T+=w-rt),Z.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=T,T+=G.storage}}}const R=T%w;return R>0&&(T+=w-R),x.__size=T,x.__cache={},this}function E(x){const b={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(b.boundary=4,b.storage=4):x.isVector2?(b.boundary=8,b.storage=8):x.isVector3||x.isColor?(b.boundary=16,b.storage=12):x.isVector4?(b.boundary=16,b.storage=16):x.isMatrix3?(b.boundary=48,b.storage=48):x.isMatrix4?(b.boundary=64,b.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),b}function M(x){const b=x.target;b.removeEventListener("dispose",M);const T=r.indexOf(b.__bindingPointIndex);r.splice(T,1),n.deleteBuffer(a[b.id]),delete a[b.id],delete s[b.id]}function v(){for(const x in a)n.deleteBuffer(a[x]);r=[],a={},s={}}return{bind:u,update:f,dispose:v}}class tP{constructor(t={}){const{canvas:e=kO(),context:i=null,depth:a=!0,stencil:s=!1,alpha:r=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:m=!1}=t;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=r;const _=new Uint32Array(4),E=new Int32Array(4);let M=null,v=null;const x=[],b=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Xs,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const T=this;let w=!1;this._outputColorSpace=wi;let R=0,N=0,U=null,D=-1,C=null;const B=new Fe,Z=new Fe;let q=null;const it=new Zt(0);let et=0,L=e.width,G=e.height,H=1,W=null,rt=null;const vt=new Fe(0,0,L,G),Dt=new Fe(0,0,L,G);let Vt=!1;const J=new Vf;let yt=!1,Yt=!1;const Lt=new pe,Xt=new pe,he=new V,qt=new Fe,ie={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ue=!1;function ne(){return U===null?H:1}let I=i;function Nt(P,Y){return e.getContext(P,Y)}try{const P={alpha:!0,depth:a,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${ty}`),e.addEventListener("webglcontextlost",Gt,!1),e.addEventListener("webglcontextrestored",wt,!1),e.addEventListener("webglcontextcreationerror",_t,!1),I===null){const Y="webgl2";if(I=Nt(Y,P),I===null)throw Nt(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(P){throw console.error("THREE.WebGLRenderer: "+P.message),P}let Et,Tt,dt,zt,bt,Ht,fe,F,O,nt,ft,pt,ht,te,Pt,Qt,Jt,xt,Bt,ae,k,st,Ct,X;function Rt(){Et=new w9(I),Et.init(),st=new $L(I,Et),Tt=new S9(I,Et,t,st),dt=new lk(I,Et),Tt.reverseDepthBuffer&&m&&dt.buffers.depth.setReversed(!0),zt=new N9(I),bt=new ZX,Ht=new ck(I,Et,dt,bt,Tt,st,zt),fe=new b9(T),F=new C9(T),O=new B8(I),Ct=new _9(I,O),nt=new R9(I,O,zt,Ct),ft=new O9(I,nt,O,zt),Bt=new U9(I,Tt,Ht),Qt=new M9(bt),pt=new WX(T,fe,F,Et,Tt,Ct,Qt),ht=new mk(T,bt),te=new QX,Pt=new ik(Et),xt=new y9(T,fe,F,dt,ft,g,u),Jt=new rk(T,ft,Tt),X=new gk(I,zt,Tt,dt),ae=new x9(I,Et,zt),k=new D9(I,Et,zt),zt.programs=pt.programs,T.capabilities=Tt,T.extensions=Et,T.properties=bt,T.renderLists=te,T.shadowMap=Jt,T.state=dt,T.info=zt}Rt();const St=new dk(T,I);this.xr=St,this.getContext=function(){return I},this.getContextAttributes=function(){return I.getContextAttributes()},this.forceContextLoss=function(){const P=Et.get("WEBGL_lose_context");P&&P.loseContext()},this.forceContextRestore=function(){const P=Et.get("WEBGL_lose_context");P&&P.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(P){P!==void 0&&(H=P,this.setSize(L,G,!1))},this.getSize=function(P){return P.set(L,G)},this.setSize=function(P,Y,lt=!0){if(St.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=P,G=Y,e.width=Math.floor(P*H),e.height=Math.floor(Y*H),lt===!0&&(e.style.width=P+"px",e.style.height=Y+"px"),this.setViewport(0,0,P,Y)},this.getDrawingBufferSize=function(P){return P.set(L*H,G*H).floor()},this.setDrawingBufferSize=function(P,Y,lt){L=P,G=Y,H=lt,e.width=Math.floor(P*lt),e.height=Math.floor(Y*lt),this.setViewport(0,0,P,Y)},this.getCurrentViewport=function(P){return P.copy(B)},this.getViewport=function(P){return P.copy(vt)},this.setViewport=function(P,Y,lt,ct){P.isVector4?vt.set(P.x,P.y,P.z,P.w):vt.set(P,Y,lt,ct),dt.viewport(B.copy(vt).multiplyScalar(H).round())},this.getScissor=function(P){return P.copy(Dt)},this.setScissor=function(P,Y,lt,ct){P.isVector4?Dt.set(P.x,P.y,P.z,P.w):Dt.set(P,Y,lt,ct),dt.scissor(Z.copy(Dt).multiplyScalar(H).round())},this.getScissorTest=function(){return Vt},this.setScissorTest=function(P){dt.setScissorTest(Vt=P)},this.setOpaqueSort=function(P){W=P},this.setTransparentSort=function(P){rt=P},this.getClearColor=function(P){return P.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor(...arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha(...arguments)},this.clear=function(P=!0,Y=!0,lt=!0){let ct=0;if(P){let K=!1;if(U!==null){const At=U.texture.format;K=At===ly||At===oy||At===Dp}if(K){const At=U.texture.type,It=At===as||At===Hr||At===vf||At===yf||At===ay||At===sy,$t=xt.getClearColor(),Kt=xt.getClearAlpha(),de=$t.r,me=$t.g,re=$t.b;It?(_[0]=de,_[1]=me,_[2]=re,_[3]=Kt,I.clearBufferuiv(I.COLOR,0,_)):(E[0]=de,E[1]=me,E[2]=re,E[3]=Kt,I.clearBufferiv(I.COLOR,0,E))}else ct|=I.COLOR_BUFFER_BIT}Y&&(ct|=I.DEPTH_BUFFER_BIT),lt&&(ct|=I.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),I.clear(ct)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Gt,!1),e.removeEventListener("webglcontextrestored",wt,!1),e.removeEventListener("webglcontextcreationerror",_t,!1),xt.dispose(),te.dispose(),Pt.dispose(),bt.dispose(),fe.dispose(),F.dispose(),ft.dispose(),Ct.dispose(),X.dispose(),pt.dispose(),St.dispose(),St.removeEventListener("sessionstart",Wf),St.removeEventListener("sessionend",Tc),rs.stop()};function Gt(P){P.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function wt(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const P=zt.autoReset,Y=Jt.enabled,lt=Jt.autoUpdate,ct=Jt.needsUpdate,K=Jt.type;Rt(),zt.autoReset=P,Jt.enabled=Y,Jt.autoUpdate=lt,Jt.needsUpdate=ct,Jt.type=K}function _t(P){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",P.statusMessage)}function kt(P){const Y=P.target;Y.removeEventListener("dispose",kt),se(Y)}function se(P){Ne(P),bt.remove(P)}function Ne(P){const Y=bt.get(P).programs;Y!==void 0&&(Y.forEach(function(lt){pt.releaseProgram(lt)}),P.isShaderMaterial&&pt.releaseShaderCache(P))}this.renderBufferDirect=function(P,Y,lt,ct,K,At){Y===null&&(Y=ie);const It=K.isMesh&&K.matrixWorld.determinant()<0,$t=kp(P,Y,lt,ct,K);dt.setMaterial(ct,It);let Kt=lt.index,de=1;if(ct.wireframe===!0){if(Kt=nt.getWireframeAttribute(lt),Kt===void 0)return;de=2}const me=lt.drawRange,re=lt.attributes.position;let we=me.start*de,qe=(me.start+me.count)*de;At!==null&&(we=Math.max(we,At.start*de),qe=Math.min(qe,(At.start+At.count)*de)),Kt!==null?(we=Math.max(we,0),qe=Math.min(qe,Kt.count)):re!=null&&(we=Math.max(we,0),qe=Math.min(qe,re.count));const pn=qe-we;if(pn<0||pn===1/0)return;Ct.setup(K,ct,$t,lt,Kt);let Ke,Ze=ae;if(Kt!==null&&(Ke=O.get(Kt),Ze=k,Ze.setIndex(Ke)),K.isMesh)ct.wireframe===!0?(dt.setLineWidth(ct.wireframeLinewidth*ne()),Ze.setMode(I.LINES)):Ze.setMode(I.TRIANGLES);else if(K.isLine){let le=ct.linewidth;le===void 0&&(le=1),dt.setLineWidth(le*ne()),K.isLineSegments?Ze.setMode(I.LINES):K.isLineLoop?Ze.setMode(I.LINE_LOOP):Ze.setMode(I.LINE_STRIP)}else K.isPoints?Ze.setMode(I.POINTS):K.isSprite&&Ze.setMode(I.TRIANGLES);if(K.isBatchedMesh)if(K._multiDrawInstances!==null)nf("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ze.renderMultiDrawInstances(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount,K._multiDrawInstances);else if(Et.get("WEBGL_multi_draw"))Ze.renderMultiDraw(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount);else{const le=K._multiDrawStarts,un=K._multiDrawCounts,ze=K._multiDrawCount,_i=Kt?O.get(Kt).bytesPerElement:1,Ts=bt.get(ct).currentProgram.getUniforms();for(let xi=0;xi<ze;xi++)Ts.setValue(I,"_gl_DrawID",xi),Ze.render(le[xi]/_i,un[xi])}else if(K.isInstancedMesh)Ze.renderInstances(we,pn,K.count);else if(lt.isInstancedBufferGeometry){const le=lt._maxInstanceCount!==void 0?lt._maxInstanceCount:1/0,un=Math.min(lt.instanceCount,le);Ze.renderInstances(we,pn,un)}else Ze.render(we,pn)};function Ae(P,Y,lt){P.transparent===!0&&P.side===_s&&P.forceSinglePass===!1?(P.side=Oi,P.needsUpdate=!0,cn(P,Y,lt),P.side=Ir,P.needsUpdate=!0,cn(P,Y,lt),P.side=_s):cn(P,Y,lt)}this.compile=function(P,Y,lt=null){lt===null&&(lt=P),v=Pt.get(lt),v.init(Y),b.push(v),lt.traverseVisible(function(K){K.isLight&&K.layers.test(Y.layers)&&(v.pushLight(K),K.castShadow&&v.pushShadow(K))}),P!==lt&&P.traverseVisible(function(K){K.isLight&&K.layers.test(Y.layers)&&(v.pushLight(K),K.castShadow&&v.pushShadow(K))}),v.setupLights();const ct=new Set;return P.traverse(function(K){if(!(K.isMesh||K.isPoints||K.isLine||K.isSprite))return;const At=K.material;if(At)if(Array.isArray(At))for(let It=0;It<At.length;It++){const $t=At[It];Ae($t,lt,K),ct.add($t)}else Ae(At,lt,K),ct.add(At)}),v=b.pop(),ct},this.compileAsync=function(P,Y,lt=null){const ct=this.compile(P,Y,lt);return new Promise(K=>{function At(){if(ct.forEach(function(It){bt.get(It).currentProgram.isReady()&&ct.delete(It)}),ct.size===0){K(P);return}setTimeout(At,10)}Et.get("KHR_parallel_shader_compile")!==null?At():setTimeout(At,10)})};let Vn=null;function li(P){Vn&&Vn(P)}function Wf(){rs.stop()}function Tc(){rs.start()}const rs=new WL;rs.setAnimationLoop(li),typeof self<"u"&&rs.setContext(self),this.setAnimationLoop=function(P){Vn=P,St.setAnimationLoop(P),P===null?rs.stop():rs.start()},St.addEventListener("sessionstart",Wf),St.addEventListener("sessionend",Tc),this.render=function(P,Y){if(Y!==void 0&&Y.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(P.matrixWorldAutoUpdate===!0&&P.updateMatrixWorld(),Y.parent===null&&Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),St.enabled===!0&&St.isPresenting===!0&&(St.cameraAutoUpdate===!0&&St.updateCamera(Y),Y=St.getCamera()),P.isScene===!0&&P.onBeforeRender(T,P,Y,U),v=Pt.get(P,b.length),v.init(Y),b.push(v),Xt.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),J.setFromProjectionMatrix(Xt),Yt=this.localClippingEnabled,yt=Qt.init(this.clippingPlanes,Yt),M=te.get(P,x.length),M.init(),x.push(M),St.enabled===!0&&St.isPresenting===!0){const At=T.xr.getDepthSensingMesh();At!==null&&La(At,Y,-1/0,T.sortObjects)}La(P,Y,0,T.sortObjects),M.finish(),T.sortObjects===!0&&M.sort(W,rt),ue=St.enabled===!1||St.isPresenting===!1||St.hasDepthSensing()===!1,ue&&xt.addToRenderList(M,P),this.info.render.frame++,yt===!0&&Qt.beginShadows();const lt=v.state.shadowsArray;Jt.render(lt,P,Y),yt===!0&&Qt.endShadows(),this.info.autoReset===!0&&this.info.reset();const ct=M.opaque,K=M.transmissive;if(v.setupLights(),Y.isArrayCamera){const At=Y.cameras;if(K.length>0)for(let It=0,$t=At.length;It<$t;It++){const Kt=At[It];os(ct,K,P,Kt)}ue&&xt.render(P);for(let It=0,$t=At.length;It<$t;It++){const Kt=At[It];Zf(M,P,Kt,Kt.viewport)}}else K.length>0&&os(ct,K,P,Y),ue&&xt.render(P),Zf(M,P,Y);U!==null&&N===0&&(Ht.updateMultisampleRenderTarget(U),Ht.updateRenderTargetMipmap(U)),P.isScene===!0&&P.onAfterRender(T,P,Y),Ct.resetDefaultState(),D=-1,C=null,b.pop(),b.length>0?(v=b[b.length-1],yt===!0&&Qt.setGlobalState(T.clippingPlanes,v.state.camera)):v=null,x.pop(),x.length>0?M=x[x.length-1]:M=null};function La(P,Y,lt,ct){if(P.visible===!1)return;if(P.layers.test(Y.layers)){if(P.isGroup)lt=P.renderOrder;else if(P.isLOD)P.autoUpdate===!0&&P.update(Y);else if(P.isLight)v.pushLight(P),P.castShadow&&v.pushShadow(P);else if(P.isSprite){if(!P.frustumCulled||J.intersectsSprite(P)){ct&&qt.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Xt);const It=ft.update(P),$t=P.material;$t.visible&&M.push(P,It,$t,lt,qt.z,null)}}else if((P.isMesh||P.isLine||P.isPoints)&&(!P.frustumCulled||J.intersectsObject(P))){const It=ft.update(P),$t=P.material;if(ct&&(P.boundingSphere!==void 0?(P.boundingSphere===null&&P.computeBoundingSphere(),qt.copy(P.boundingSphere.center)):(It.boundingSphere===null&&It.computeBoundingSphere(),qt.copy(It.boundingSphere.center)),qt.applyMatrix4(P.matrixWorld).applyMatrix4(Xt)),Array.isArray($t)){const Kt=It.groups;for(let de=0,me=Kt.length;de<me;de++){const re=Kt[de],we=$t[re.materialIndex];we&&we.visible&&M.push(P,It,we,lt,qt.z,re)}}else $t.visible&&M.push(P,It,$t,lt,qt.z,null)}}const At=P.children;for(let It=0,$t=At.length;It<$t;It++)La(At[It],Y,lt,ct)}function Zf(P,Y,lt,ct){const K=P.opaque,At=P.transmissive,It=P.transparent;v.setupLightsView(lt),yt===!0&&Qt.setGlobalState(T.clippingPlanes,lt),ct&&dt.viewport(B.copy(ct)),K.length>0&&Zi(K,Y,lt),At.length>0&&Zi(At,Y,lt),It.length>0&&Zi(It,Y,lt),dt.buffers.depth.setTest(!0),dt.buffers.depth.setMask(!0),dt.buffers.color.setMask(!0),dt.setPolygonOffset(!1)}function os(P,Y,lt,ct){if((lt.isScene===!0?lt.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[ct.id]===void 0&&(v.state.transmissionRenderTarget[ct.id]=new Ks(1,1,{generateMipmaps:!0,type:Et.has("EXT_color_buffer_half_float")||Et.has("EXT_color_buffer_float")?If:as,minFilter:Is,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Be.workingColorSpace}));const At=v.state.transmissionRenderTarget[ct.id],It=ct.viewport||B;At.setSize(It.z*T.transmissionResolutionScale,It.w*T.transmissionResolutionScale);const $t=T.getRenderTarget(),Kt=T.getActiveCubeFace(),de=T.getActiveMipmapLevel();T.setRenderTarget(At),T.getClearColor(it),et=T.getClearAlpha(),et<1&&T.setClearColor(16777215,.5),T.clear(),ue&&xt.render(lt);const me=T.toneMapping;T.toneMapping=Xs;const re=ct.viewport;if(ct.viewport!==void 0&&(ct.viewport=void 0),v.setupLightsView(ct),yt===!0&&Qt.setGlobalState(T.clippingPlanes,ct),Zi(P,lt,ct),Ht.updateMultisampleRenderTarget(At),Ht.updateRenderTargetMipmap(At),Et.has("WEBGL_multisampled_render_to_texture")===!1){let we=!1;for(let qe=0,pn=Y.length;qe<pn;qe++){const Ke=Y[qe],Ze=Ke.object,le=Ke.geometry,un=Ke.material,ze=Ke.group;if(un.side===_s&&Ze.layers.test(ct.layers)){const _i=un.side;un.side=Oi,un.needsUpdate=!0,nl(Ze,lt,ct,le,un,ze),un.side=_i,un.needsUpdate=!0,we=!0}}we===!0&&(Ht.updateMultisampleRenderTarget(At),Ht.updateRenderTargetMipmap(At))}T.setRenderTarget($t,Kt,de),T.setClearColor(it,et),re!==void 0&&(ct.viewport=re),T.toneMapping=me}function Zi(P,Y,lt){const ct=Y.isScene===!0?Y.overrideMaterial:null;for(let K=0,At=P.length;K<At;K++){const It=P[K],$t=It.object,Kt=It.geometry,de=It.group;let me=It.material;me.allowOverride===!0&&ct!==null&&(me=ct),$t.layers.test(lt.layers)&&nl($t,Y,lt,Kt,me,de)}}function nl(P,Y,lt,ct,K,At){P.onBeforeRender(T,Y,lt,ct,K,At),P.modelViewMatrix.multiplyMatrices(lt.matrixWorldInverse,P.matrixWorld),P.normalMatrix.getNormalMatrix(P.modelViewMatrix),K.onBeforeRender(T,Y,lt,ct,P,At),K.transparent===!0&&K.side===_s&&K.forceSinglePass===!1?(K.side=Oi,K.needsUpdate=!0,T.renderBufferDirect(lt,Y,ct,K,P,At),K.side=Ir,K.needsUpdate=!0,T.renderBufferDirect(lt,Y,ct,K,P,At),K.side=_s):T.renderBufferDirect(lt,Y,ct,K,P,At),P.onAfterRender(T,Y,lt,ct,K,At)}function cn(P,Y,lt){Y.isScene!==!0&&(Y=ie);const ct=bt.get(P),K=v.state.lights,At=v.state.shadowsArray,It=K.state.version,$t=pt.getParameters(P,K.state,At,Y,lt),Kt=pt.getProgramCacheKey($t);let de=ct.programs;ct.environment=P.isMeshStandardMaterial?Y.environment:null,ct.fog=Y.fog,ct.envMap=(P.isMeshStandardMaterial?F:fe).get(P.envMap||ct.environment),ct.envMapRotation=ct.environment!==null&&P.envMap===null?Y.environmentRotation:P.envMapRotation,de===void 0&&(P.addEventListener("dispose",kt),de=new Map,ct.programs=de);let me=de.get(Kt);if(me!==void 0){if(ct.currentProgram===me&&ct.lightsStateVersion===It)return Cc(P,$t),me}else $t.uniforms=pt.getUniforms(P),P.onBeforeCompile($t,T),me=pt.acquireProgram($t,Kt),de.set(Kt,me),ct.uniforms=$t.uniforms;const re=ct.uniforms;return(!P.isShaderMaterial&&!P.isRawShaderMaterial||P.clipping===!0)&&(re.clippingPlanes=Qt.uniform),Cc(P,$t),ct.needsLights=Hy(P),ct.lightsStateVersion=It,ct.needsLights&&(re.ambientLightColor.value=K.state.ambient,re.lightProbe.value=K.state.probe,re.directionalLights.value=K.state.directional,re.directionalLightShadows.value=K.state.directionalShadow,re.spotLights.value=K.state.spot,re.spotLightShadows.value=K.state.spotShadow,re.rectAreaLights.value=K.state.rectArea,re.ltc_1.value=K.state.rectAreaLTC1,re.ltc_2.value=K.state.rectAreaLTC2,re.pointLights.value=K.state.point,re.pointLightShadows.value=K.state.pointShadow,re.hemisphereLights.value=K.state.hemi,re.directionalShadowMap.value=K.state.directionalShadowMap,re.directionalShadowMatrix.value=K.state.directionalShadowMatrix,re.spotShadowMap.value=K.state.spotShadowMap,re.spotLightMatrix.value=K.state.spotLightMatrix,re.spotLightMap.value=K.state.spotLightMap,re.pointShadowMap.value=K.state.pointShadowMap,re.pointShadowMatrix.value=K.state.pointShadowMatrix),ct.currentProgram=me,ct.uniformsList=null,me}function Ac(P){if(P.uniformsList===null){const Y=P.currentProgram.getUniforms();P.uniformsList=n0.seqWithValue(Y.seq,P.uniforms)}return P.uniformsList}function Cc(P,Y){const lt=bt.get(P);lt.outputColorSpace=Y.outputColorSpace,lt.batching=Y.batching,lt.batchingColor=Y.batchingColor,lt.instancing=Y.instancing,lt.instancingColor=Y.instancingColor,lt.instancingMorph=Y.instancingMorph,lt.skinning=Y.skinning,lt.morphTargets=Y.morphTargets,lt.morphNormals=Y.morphNormals,lt.morphColors=Y.morphColors,lt.morphTargetsCount=Y.morphTargetsCount,lt.numClippingPlanes=Y.numClippingPlanes,lt.numIntersection=Y.numClipIntersection,lt.vertexAlphas=Y.vertexAlphas,lt.vertexTangents=Y.vertexTangents,lt.toneMapping=Y.toneMapping}function kp(P,Y,lt,ct,K){Y.isScene!==!0&&(Y=ie),Ht.resetTextureUnits();const At=Y.fog,It=ct.isMeshStandardMaterial?Y.environment:null,$t=U===null?T.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:ko,Kt=(ct.isMeshStandardMaterial?F:fe).get(ct.envMap||It),de=ct.vertexColors===!0&&!!lt.attributes.color&&lt.attributes.color.itemSize===4,me=!!lt.attributes.tangent&&(!!ct.normalMap||ct.anisotropy>0),re=!!lt.morphAttributes.position,we=!!lt.morphAttributes.normal,qe=!!lt.morphAttributes.color;let pn=Xs;ct.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(pn=T.toneMapping);const Ke=lt.morphAttributes.position||lt.morphAttributes.normal||lt.morphAttributes.color,Ze=Ke!==void 0?Ke.length:0,le=bt.get(ct),un=v.state.lights;if(yt===!0&&(Yt===!0||P!==C)){const ci=P===C&&ct.id===D;Qt.setState(ct,P,ci)}let ze=!1;ct.version===le.__version?(le.needsLights&&le.lightsStateVersion!==un.state.version||le.outputColorSpace!==$t||K.isBatchedMesh&&le.batching===!1||!K.isBatchedMesh&&le.batching===!0||K.isBatchedMesh&&le.batchingColor===!0&&K.colorTexture===null||K.isBatchedMesh&&le.batchingColor===!1&&K.colorTexture!==null||K.isInstancedMesh&&le.instancing===!1||!K.isInstancedMesh&&le.instancing===!0||K.isSkinnedMesh&&le.skinning===!1||!K.isSkinnedMesh&&le.skinning===!0||K.isInstancedMesh&&le.instancingColor===!0&&K.instanceColor===null||K.isInstancedMesh&&le.instancingColor===!1&&K.instanceColor!==null||K.isInstancedMesh&&le.instancingMorph===!0&&K.morphTexture===null||K.isInstancedMesh&&le.instancingMorph===!1&&K.morphTexture!==null||le.envMap!==Kt||ct.fog===!0&&le.fog!==At||le.numClippingPlanes!==void 0&&(le.numClippingPlanes!==Qt.numPlanes||le.numIntersection!==Qt.numIntersection)||le.vertexAlphas!==de||le.vertexTangents!==me||le.morphTargets!==re||le.morphNormals!==we||le.morphColors!==qe||le.toneMapping!==pn||le.morphTargetsCount!==Ze)&&(ze=!0):(ze=!0,le.__version=ct.version);let _i=le.currentProgram;ze===!0&&(_i=cn(ct,Y,K));let Ts=!1,xi=!1,jr=!1;const on=_i.getUniforms(),Bi=le.uniforms;if(dt.useProgram(_i.program)&&(Ts=!0,xi=!0,jr=!0),ct.id!==D&&(D=ct.id,xi=!0),Ts||C!==P){dt.buffers.depth.getReversed()?(Lt.copy(P.projectionMatrix),aF(Lt),sF(Lt),on.setValue(I,"projectionMatrix",Lt)):on.setValue(I,"projectionMatrix",P.projectionMatrix),on.setValue(I,"viewMatrix",P.matrixWorldInverse);const ui=on.map.cameraPosition;ui!==void 0&&ui.setValue(I,he.setFromMatrixPosition(P.matrixWorld)),Tt.logarithmicDepthBuffer&&on.setValue(I,"logDepthBufFC",2/(Math.log(P.far+1)/Math.LN2)),(ct.isMeshPhongMaterial||ct.isMeshToonMaterial||ct.isMeshLambertMaterial||ct.isMeshBasicMaterial||ct.isMeshStandardMaterial||ct.isShaderMaterial)&&on.setValue(I,"isOrthographic",P.isOrthographicCamera===!0),C!==P&&(C=P,xi=!0,jr=!0)}if(K.isSkinnedMesh){on.setOptional(I,K,"bindMatrix"),on.setOptional(I,K,"bindMatrixInverse");const ci=K.skeleton;ci&&(ci.boneTexture===null&&ci.computeBoneTexture(),on.setValue(I,"boneTexture",ci.boneTexture,Ht))}K.isBatchedMesh&&(on.setOptional(I,K,"batchingTexture"),on.setValue(I,"batchingTexture",K._matricesTexture,Ht),on.setOptional(I,K,"batchingIdTexture"),on.setValue(I,"batchingIdTexture",K._indirectTexture,Ht),on.setOptional(I,K,"batchingColorTexture"),K._colorsTexture!==null&&on.setValue(I,"batchingColorTexture",K._colorsTexture,Ht));const Ii=lt.morphAttributes;if((Ii.position!==void 0||Ii.normal!==void 0||Ii.color!==void 0)&&Bt.update(K,lt,_i),(xi||le.receiveShadow!==K.receiveShadow)&&(le.receiveShadow=K.receiveShadow,on.setValue(I,"receiveShadow",K.receiveShadow)),ct.isMeshGouraudMaterial&&ct.envMap!==null&&(Bi.envMap.value=Kt,Bi.flipEnvMap.value=Kt.isCubeTexture&&Kt.isRenderTargetTexture===!1?-1:1),ct.isMeshStandardMaterial&&ct.envMap===null&&Y.environment!==null&&(Bi.envMapIntensity.value=Y.environmentIntensity),xi&&(on.setValue(I,"toneMappingExposure",T.toneMappingExposure),le.needsLights&&jp(Bi,jr),At&&ct.fog===!0&&ht.refreshFogUniforms(Bi,At),ht.refreshMaterialUniforms(Bi,ct,H,G,v.state.transmissionRenderTarget[P.id]),n0.upload(I,Ac(le),Bi,Ht)),ct.isShaderMaterial&&ct.uniformsNeedUpdate===!0&&(n0.upload(I,Ac(le),Bi,Ht),ct.uniformsNeedUpdate=!1),ct.isSpriteMaterial&&on.setValue(I,"center",K.center),on.setValue(I,"modelViewMatrix",K.modelViewMatrix),on.setValue(I,"normalMatrix",K.normalMatrix),on.setValue(I,"modelMatrix",K.matrixWorld),ct.isShaderMaterial||ct.isRawShaderMaterial){const ci=ct.uniformsGroups;for(let ui=0,As=ci.length;ui<As;ui++){const Cs=ci[ui];X.update(Cs,_i),X.bind(Cs,_i)}}return _i}function jp(P,Y){P.ambientLightColor.needsUpdate=Y,P.lightProbe.needsUpdate=Y,P.directionalLights.needsUpdate=Y,P.directionalLightShadows.needsUpdate=Y,P.pointLights.needsUpdate=Y,P.pointLightShadows.needsUpdate=Y,P.spotLights.needsUpdate=Y,P.spotLightShadows.needsUpdate=Y,P.rectAreaLights.needsUpdate=Y,P.hemisphereLights.needsUpdate=Y}function Hy(P){return P.isMeshLambertMaterial||P.isMeshToonMaterial||P.isMeshPhongMaterial||P.isMeshStandardMaterial||P.isShadowMaterial||P.isShaderMaterial&&P.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(P,Y,lt){const ct=bt.get(P);ct.__autoAllocateDepthBuffer=P.resolveDepthBuffer===!1,ct.__autoAllocateDepthBuffer===!1&&(ct.__useRenderToTexture=!1),bt.get(P.texture).__webglTexture=Y,bt.get(P.depthTexture).__webglTexture=ct.__autoAllocateDepthBuffer?void 0:lt,ct.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(P,Y){const lt=bt.get(P);lt.__webglFramebuffer=Y,lt.__useDefaultFramebuffer=Y===void 0};const Kf=I.createFramebuffer();this.setRenderTarget=function(P,Y=0,lt=0){U=P,R=Y,N=lt;let ct=!0,K=null,At=!1,It=!1;if(P){const Kt=bt.get(P);if(Kt.__useDefaultFramebuffer!==void 0)dt.bindFramebuffer(I.FRAMEBUFFER,null),ct=!1;else if(Kt.__webglFramebuffer===void 0)Ht.setupRenderTarget(P);else if(Kt.__hasExternalTextures)Ht.rebindTextures(P,bt.get(P.texture).__webglTexture,bt.get(P.depthTexture).__webglTexture);else if(P.depthBuffer){const re=P.depthTexture;if(Kt.__boundDepthTexture!==re){if(re!==null&&bt.has(re)&&(P.width!==re.image.width||P.height!==re.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ht.setupDepthRenderbuffer(P)}}const de=P.texture;(de.isData3DTexture||de.isDataArrayTexture||de.isCompressedArrayTexture)&&(It=!0);const me=bt.get(P).__webglFramebuffer;P.isWebGLCubeRenderTarget?(Array.isArray(me[Y])?K=me[Y][lt]:K=me[Y],At=!0):P.samples>0&&Ht.useMultisampledRTT(P)===!1?K=bt.get(P).__webglMultisampledFramebuffer:Array.isArray(me)?K=me[lt]:K=me,B.copy(P.viewport),Z.copy(P.scissor),q=P.scissorTest}else B.copy(vt).multiplyScalar(H).floor(),Z.copy(Dt).multiplyScalar(H).floor(),q=Vt;if(lt!==0&&(K=Kf),dt.bindFramebuffer(I.FRAMEBUFFER,K)&&ct&&dt.drawBuffers(P,K),dt.viewport(B),dt.scissor(Z),dt.setScissorTest(q),At){const Kt=bt.get(P.texture);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+Y,Kt.__webglTexture,lt)}else if(It){const Kt=bt.get(P.texture),de=Y;I.framebufferTextureLayer(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,Kt.__webglTexture,lt,de)}else if(P!==null&&lt!==0){const Kt=bt.get(P.texture);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,Kt.__webglTexture,lt)}D=-1},this.readRenderTargetPixels=function(P,Y,lt,ct,K,At,It,$t=0){if(!(P&&P.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Kt=bt.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&It!==void 0&&(Kt=Kt[It]),Kt){dt.bindFramebuffer(I.FRAMEBUFFER,Kt);try{const de=P.textures[$t],me=de.format,re=de.type;if(!Tt.textureFormatReadable(me)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Tt.textureTypeReadable(re)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Y>=0&&Y<=P.width-ct&&lt>=0&&lt<=P.height-K&&(P.textures.length>1&&I.readBuffer(I.COLOR_ATTACHMENT0+$t),I.readPixels(Y,lt,ct,K,st.convert(me),st.convert(re),At))}finally{const de=U!==null?bt.get(U).__webglFramebuffer:null;dt.bindFramebuffer(I.FRAMEBUFFER,de)}}},this.readRenderTargetPixelsAsync=async function(P,Y,lt,ct,K,At,It,$t=0){if(!(P&&P.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Kt=bt.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&It!==void 0&&(Kt=Kt[It]),Kt)if(Y>=0&&Y<=P.width-ct&&lt>=0&&lt<=P.height-K){dt.bindFramebuffer(I.FRAMEBUFFER,Kt);const de=P.textures[$t],me=de.format,re=de.type;if(!Tt.textureFormatReadable(me))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Tt.textureTypeReadable(re))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const we=I.createBuffer();I.bindBuffer(I.PIXEL_PACK_BUFFER,we),I.bufferData(I.PIXEL_PACK_BUFFER,At.byteLength,I.STREAM_READ),P.textures.length>1&&I.readBuffer(I.COLOR_ATTACHMENT0+$t),I.readPixels(Y,lt,ct,K,st.convert(me),st.convert(re),0);const qe=U!==null?bt.get(U).__webglFramebuffer:null;dt.bindFramebuffer(I.FRAMEBUFFER,qe);const pn=I.fenceSync(I.SYNC_GPU_COMMANDS_COMPLETE,0);return I.flush(),await iF(I,pn,4),I.bindBuffer(I.PIXEL_PACK_BUFFER,we),I.getBufferSubData(I.PIXEL_PACK_BUFFER,0,At),I.deleteBuffer(we),I.deleteSync(pn),At}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(P,Y=null,lt=0){const ct=Math.pow(2,-lt),K=Math.floor(P.image.width*ct),At=Math.floor(P.image.height*ct),It=Y!==null?Y.x:0,$t=Y!==null?Y.y:0;Ht.setTexture2D(P,0),I.copyTexSubImage2D(I.TEXTURE_2D,lt,0,0,It,$t,K,At),dt.unbindTexture()};const Qf=I.createFramebuffer(),Jf=I.createFramebuffer();this.copyTextureToTexture=function(P,Y,lt=null,ct=null,K=0,At=null){At===null&&(K!==0?(nf("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),At=K,K=0):At=0);let It,$t,Kt,de,me,re,we,qe,pn;const Ke=P.isCompressedTexture?P.mipmaps[At]:P.image;if(lt!==null)It=lt.max.x-lt.min.x,$t=lt.max.y-lt.min.y,Kt=lt.isBox3?lt.max.z-lt.min.z:1,de=lt.min.x,me=lt.min.y,re=lt.isBox3?lt.min.z:0;else{const Ii=Math.pow(2,-K);It=Math.floor(Ke.width*Ii),$t=Math.floor(Ke.height*Ii),P.isDataArrayTexture?Kt=Ke.depth:P.isData3DTexture?Kt=Math.floor(Ke.depth*Ii):Kt=1,de=0,me=0,re=0}ct!==null?(we=ct.x,qe=ct.y,pn=ct.z):(we=0,qe=0,pn=0);const Ze=st.convert(Y.format),le=st.convert(Y.type);let un;Y.isData3DTexture?(Ht.setTexture3D(Y,0),un=I.TEXTURE_3D):Y.isDataArrayTexture||Y.isCompressedArrayTexture?(Ht.setTexture2DArray(Y,0),un=I.TEXTURE_2D_ARRAY):(Ht.setTexture2D(Y,0),un=I.TEXTURE_2D),I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,Y.flipY),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),I.pixelStorei(I.UNPACK_ALIGNMENT,Y.unpackAlignment);const ze=I.getParameter(I.UNPACK_ROW_LENGTH),_i=I.getParameter(I.UNPACK_IMAGE_HEIGHT),Ts=I.getParameter(I.UNPACK_SKIP_PIXELS),xi=I.getParameter(I.UNPACK_SKIP_ROWS),jr=I.getParameter(I.UNPACK_SKIP_IMAGES);I.pixelStorei(I.UNPACK_ROW_LENGTH,Ke.width),I.pixelStorei(I.UNPACK_IMAGE_HEIGHT,Ke.height),I.pixelStorei(I.UNPACK_SKIP_PIXELS,de),I.pixelStorei(I.UNPACK_SKIP_ROWS,me),I.pixelStorei(I.UNPACK_SKIP_IMAGES,re);const on=P.isDataArrayTexture||P.isData3DTexture,Bi=Y.isDataArrayTexture||Y.isData3DTexture;if(P.isDepthTexture){const Ii=bt.get(P),ci=bt.get(Y),ui=bt.get(Ii.__renderTarget),As=bt.get(ci.__renderTarget);dt.bindFramebuffer(I.READ_FRAMEBUFFER,ui.__webglFramebuffer),dt.bindFramebuffer(I.DRAW_FRAMEBUFFER,As.__webglFramebuffer);for(let Cs=0;Cs<Kt;Cs++)on&&(I.framebufferTextureLayer(I.READ_FRAMEBUFFER,I.COLOR_ATTACHMENT0,bt.get(P).__webglTexture,K,re+Cs),I.framebufferTextureLayer(I.DRAW_FRAMEBUFFER,I.COLOR_ATTACHMENT0,bt.get(Y).__webglTexture,At,pn+Cs)),I.blitFramebuffer(de,me,It,$t,we,qe,It,$t,I.DEPTH_BUFFER_BIT,I.NEAREST);dt.bindFramebuffer(I.READ_FRAMEBUFFER,null),dt.bindFramebuffer(I.DRAW_FRAMEBUFFER,null)}else if(K!==0||P.isRenderTargetTexture||bt.has(P)){const Ii=bt.get(P),ci=bt.get(Y);dt.bindFramebuffer(I.READ_FRAMEBUFFER,Qf),dt.bindFramebuffer(I.DRAW_FRAMEBUFFER,Jf);for(let ui=0;ui<Kt;ui++)on?I.framebufferTextureLayer(I.READ_FRAMEBUFFER,I.COLOR_ATTACHMENT0,Ii.__webglTexture,K,re+ui):I.framebufferTexture2D(I.READ_FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,Ii.__webglTexture,K),Bi?I.framebufferTextureLayer(I.DRAW_FRAMEBUFFER,I.COLOR_ATTACHMENT0,ci.__webglTexture,At,pn+ui):I.framebufferTexture2D(I.DRAW_FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,ci.__webglTexture,At),K!==0?I.blitFramebuffer(de,me,It,$t,we,qe,It,$t,I.COLOR_BUFFER_BIT,I.NEAREST):Bi?I.copyTexSubImage3D(un,At,we,qe,pn+ui,de,me,It,$t):I.copyTexSubImage2D(un,At,we,qe,de,me,It,$t);dt.bindFramebuffer(I.READ_FRAMEBUFFER,null),dt.bindFramebuffer(I.DRAW_FRAMEBUFFER,null)}else Bi?P.isDataTexture||P.isData3DTexture?I.texSubImage3D(un,At,we,qe,pn,It,$t,Kt,Ze,le,Ke.data):Y.isCompressedArrayTexture?I.compressedTexSubImage3D(un,At,we,qe,pn,It,$t,Kt,Ze,Ke.data):I.texSubImage3D(un,At,we,qe,pn,It,$t,Kt,Ze,le,Ke):P.isDataTexture?I.texSubImage2D(I.TEXTURE_2D,At,we,qe,It,$t,Ze,le,Ke.data):P.isCompressedTexture?I.compressedTexSubImage2D(I.TEXTURE_2D,At,we,qe,Ke.width,Ke.height,Ze,Ke.data):I.texSubImage2D(I.TEXTURE_2D,At,we,qe,It,$t,Ze,le,Ke);I.pixelStorei(I.UNPACK_ROW_LENGTH,ze),I.pixelStorei(I.UNPACK_IMAGE_HEIGHT,_i),I.pixelStorei(I.UNPACK_SKIP_PIXELS,Ts),I.pixelStorei(I.UNPACK_SKIP_ROWS,xi),I.pixelStorei(I.UNPACK_SKIP_IMAGES,jr),At===0&&Y.generateMipmaps&&I.generateMipmap(un),dt.unbindTexture()},this.copyTextureToTexture3D=function(P,Y,lt=null,ct=null,K=0){return nf('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(P,Y,lt,ct,K)},this.initRenderTarget=function(P){bt.get(P).__webglFramebuffer===void 0&&Ht.setupRenderTarget(P)},this.initTexture=function(P){P.isCubeTexture?Ht.setTextureCube(P,0):P.isData3DTexture?Ht.setTexture3D(P,0):P.isDataArrayTexture||P.isCompressedArrayTexture?Ht.setTexture2DArray(P,0):Ht.setTexture2D(P,0),dt.unbindTexture()},this.resetState=function(){R=0,N=0,U=null,dt.reset(),Ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ts}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Be._getDrawingBufferColorSpace(t),e.unpackColorSpace=Be._getUnpackColorSpace()}}const vk=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:jb,AddEquation:To,AddOperation:MO,AdditiveAnimationBlendMode:tE,AdditiveBlending:eM,AgXToneMapping:CO,AlphaFormat:Kb,AlwaysCompare:GO,AlwaysDepth:F0,AlwaysStencilFunc:sM,AmbientLight:zL,AnimationAction:jL,AnimationClip:ip,AnimationLoader:U6,AnimationMixer:o8,AnimationObjectGroup:s8,AnimationUtils:w6,ArcCurve:oL,ArrayCamera:GL,ArrowHelper:w8,AttachedBindMode:aM,Audio:XL,AudioAnalyser:Z6,AudioContext:TE,AudioListener:q6,AudioLoader:X6,AxesHelper:R8,BackSide:Oi,BasicDepthPacking:OO,BasicShadowMap:nO,BatchedMesh:nL,Bone:lE,BooleanKeyframeTrack:bc,Box2:p8,Box3:Pi,Box3Helper:A8,BoxGeometry:Mc,BoxHelper:T8,BufferAttribute:rn,BufferGeometry:Me,BufferGeometryLoader:FL,ByteType:Yb,Cache:Vs,Camera:hy,CameraHelper:E8,CanvasTexture:QF,CapsuleGeometry:_y,CatmullRomCurve3:lL,CineonToneMapping:TO,CircleGeometry:xy,ClampToEdgeWrapping:$a,Clock:AE,Color:Zt,ColorKeyframeTrack:ME,ColorManagement:Be,CompressedArrayTexture:ZF,CompressedCubeTexture:KF,CompressedTexture:yy,CompressedTextureLoader:O6,ConeGeometry:Op,ConstantAlphaFactor:_O,ConstantColorFactor:vO,Controls:N8,CubeCamera:ZO,CubeReflectionMapping:Vr,CubeRefractionMapping:Xo,CubeTexture:Np,CubeTextureLoader:L6,CubeUVReflectionMapping:Bf,CubicBezierCurve:hE,CubicBezierCurve3:cL,CubicInterpolant:wL,CullFaceBack:tM,CullFaceFront:eO,CullFaceFrontBack:n5,CullFaceNone:tO,Curve:Es,CurvePath:fL,CustomBlending:iO,CustomToneMapping:AO,CylinderGeometry:Up,Cylindrical:d8,Data3DTexture:fy,DataArrayTexture:uy,DataTexture:ks,DataTextureLoader:P6,DataUtils:xF,DecrementStencilOp:g5,DecrementWrapStencilOp:y5,DefaultLoadingManager:NL,DepthFormat:_f,DepthStencilFormat:xf,DepthTexture:uE,DetachedBindMode:RO,DirectionalLight:PL,DirectionalLightHelper:b8,DiscreteInterpolant:RL,DodecahedronGeometry:Sy,DoubleSide:_s,DstAlphaFactor:hO,DstColorFactor:pO,DynamicCopyUsage:O5,DynamicDrawUsage:C5,DynamicReadUsage:D5,EdgesGeometry:rL,EllipseCurve:My,EqualCompare:IO,EqualDepth:X0,EqualStencilFunc:M5,EquirectangularReflectionMapping:Gd,EquirectangularRefractionMapping:Xd,Euler:Oa,EventDispatcher:$s,ExtrudeGeometry:by,FileLoader:Fr,Float16BufferAttribute:CF,Float32BufferAttribute:ee,FloatType:sa,Fog:py,FogExp2:dy,FramebufferTexture:WF,FrontSide:Ir,Frustum:Vf,FrustumArray:vy,GLBufferAttribute:h8,GLSL1:P5,GLSL3:rM,GreaterCompare:VO,GreaterDepth:j0,GreaterEqualCompare:FO,GreaterEqualDepth:k0,GreaterEqualStencilFunc:A5,GreaterStencilFunc:E5,GridHelper:S8,Group:Hu,HalfFloatType:If,HemisphereLight:UL,HemisphereLightHelper:x8,IcosahedronGeometry:Ey,ImageBitmapLoader:G6,ImageLoader:ap,ImageUtils:jO,IncrementStencilOp:m5,IncrementWrapStencilOp:v5,InstancedBufferAttribute:Ef,InstancedBufferGeometry:HL,InstancedInterleavedBuffer:f8,InstancedMesh:eL,Int16BufferAttribute:TF,Int32BufferAttribute:AF,Int8BufferAttribute:MF,IntType:iy,InterleavedBuffer:my,InterleavedBufferAttribute:pc,Interpolant:zp,InterpolateDiscrete:qd,InterpolateLinear:_v,InterpolateSmooth:t0,InterpolationSamplingMode:I5,InterpolationSamplingType:B5,InvertStencilOp:_5,KeepStencilOp:Gl,KeyframeTrack:ss,LOD:$O,LatheGeometry:Ty,Layers:Mf,LessCompare:BO,LessDepth:G0,LessEqualCompare:eE,LessEqualDepth:dc,LessEqualStencilFunc:b5,LessStencilFunc:S5,Light:tl,LightProbe:VL,Line:jo,Line3:m8,LineBasicMaterial:Wi,LineCurve:dE,LineCurve3:uL,LineDashedMaterial:TL,LineLoop:iL,LineSegments:tr,LinearFilter:Kn,LinearInterpolant:SE,LinearMipMapLinearFilter:r5,LinearMipMapNearestFilter:s5,LinearMipmapLinearFilter:Is,LinearMipmapNearestFilter:dd,LinearSRGBColorSpace:ko,LinearToneMapping:bO,LinearTransfer:Wd,Loader:ua,LoaderUtils:fM,LoadingManager:bE,LoopOnce:DO,LoopPingPong:UO,LoopRepeat:NO,MOUSE:Hl,Material:zi,MaterialLoader:Uy,MathUtils:eF,Matrix2:DE,Matrix3:Se,Matrix4:pe,MaxEquation:oO,Mesh:jn,MeshBasicMaterial:Jo,MeshDepthMaterial:yE,MeshDistanceMaterial:_E,MeshLambertMaterial:bL,MeshMatcapMaterial:EL,MeshNormalMaterial:ML,MeshPhongMaterial:xL,MeshPhysicalMaterial:_L,MeshStandardMaterial:vE,MeshToonMaterial:SL,MinEquation:rO,MirroredRepeatWrapping:jd,MixOperation:SO,MultiplyBlending:iM,MultiplyOperation:Rp,NearestFilter:vi,NearestMipMapLinearFilter:a5,NearestMipMapNearestFilter:i5,NearestMipmapLinearFilter:Iu,NearestMipmapNearestFilter:qb,NeutralToneMapping:wO,NeverCompare:zO,NeverDepth:H0,NeverStencilFunc:x5,NoBlending:Ur,NoColorSpace:br,NoToneMapping:Xs,NormalAnimationBlendMode:cy,NormalBlending:ac,NotEqualCompare:HO,NotEqualDepth:q0,NotEqualStencilFunc:T5,NumberKeyframeTrack:ep,Object3D:Ge,ObjectLoader:H6,ObjectSpaceNormalMap:PO,OctahedronGeometry:Lp,OneFactor:cO,OneMinusConstantAlphaFactor:xO,OneMinusConstantColorFactor:yO,OneMinusDstAlphaFactor:dO,OneMinusDstColorFactor:mO,OneMinusSrcAlphaFactor:V0,OneMinusSrcColorFactor:fO,OrthographicCamera:js,PCFShadowMap:ey,PCFSoftShadowMap:hd,PMREMGenerator:mM,Path:bv,PerspectiveCamera:En,Plane:Sr,PlaneGeometry:Hf,PlaneHelper:C8,PointLight:LL,PointLightHelper:y8,Points:aL,PointsMaterial:cE,PolarGridHelper:M8,PolyhedronGeometry:$o,PositionalAudio:W6,PropertyBinding:He,PropertyMixer:kL,QuadraticBezierCurve:pE,QuadraticBezierCurve3:mE,Quaternion:Li,QuaternionKeyframeTrack:Bp,QuaternionLinearInterpolant:DL,RED_GREEN_RGTC2_Format:vv,RED_RGTC1_Format:$b,REVISION:ty,RGBADepthPacking:LO,RGBAFormat:Ni,RGBAIntegerFormat:ly,RGBA_ASTC_10x10_Format:fv,RGBA_ASTC_10x5_Format:lv,RGBA_ASTC_10x6_Format:cv,RGBA_ASTC_10x8_Format:uv,RGBA_ASTC_12x10_Format:hv,RGBA_ASTC_12x12_Format:dv,RGBA_ASTC_4x4_Format:tv,RGBA_ASTC_5x4_Format:ev,RGBA_ASTC_5x5_Format:nv,RGBA_ASTC_6x5_Format:iv,RGBA_ASTC_6x6_Format:av,RGBA_ASTC_8x5_Format:sv,RGBA_ASTC_8x6_Format:rv,RGBA_ASTC_8x8_Format:ov,RGBA_BPTC_Format:yd,RGBA_ETC2_EAC_Format:$0,RGBA_PVRTC_2BPPV1_Format:K0,RGBA_PVRTC_4BPPV1_Format:Z0,RGBA_S3TC_DXT1_Format:md,RGBA_S3TC_DXT3_Format:gd,RGBA_S3TC_DXT5_Format:vd,RGBDepthPacking:f5,RGBFormat:Qb,RGBIntegerFormat:o5,RGB_BPTC_SIGNED_Format:pv,RGB_BPTC_UNSIGNED_Format:mv,RGB_ETC1_Format:Q0,RGB_ETC2_Format:J0,RGB_PVRTC_2BPPV1_Format:W0,RGB_PVRTC_4BPPV1_Format:Y0,RGB_S3TC_DXT1_Format:pd,RGDepthPacking:h5,RGFormat:Jb,RGIntegerFormat:oy,RawShaderMaterial:yL,Ray:Sc,Raycaster:qL,RectAreaLight:BL,RedFormat:ry,RedIntegerFormat:Dp,ReinhardToneMapping:EO,RenderTarget:iE,RenderTarget3D:l8,RepeatWrapping:kd,ReplaceStencilOp:p5,ReverseSubtractEquation:sO,RingGeometry:Ay,SIGNED_RED_GREEN_RGTC2_Format:yv,SIGNED_RED_RGTC1_Format:gv,SRGBColorSpace:wi,SRGBTransfer:Je,Scene:rE,ShaderChunk:Te,ShaderLib:ys,ShaderMaterial:Ms,ShadowMaterial:vL,Shape:rc,ShapeGeometry:Cy,ShapePath:D8,ShapeUtils:xs,ShortType:Wb,Skeleton:gy,SkeletonHelper:v8,SkinnedMesh:tL,Source:No,Sphere:yi,SphereGeometry:Pp,Spherical:dM,SphericalHarmonics3:IL,SplineCurve:gE,SpotLight:OL,SpotLightHelper:g8,Sprite:JO,SpriteMaterial:oE,SrcAlphaFactor:I0,SrcAlphaSaturateFactor:gO,SrcColorFactor:uO,StaticCopyUsage:U5,StaticDrawUsage:Zd,StaticReadUsage:R5,StereoCamera:k6,StreamCopyUsage:L5,StreamDrawUsage:w5,StreamReadUsage:N5,StringKeyframeTrack:Ec,SubtractEquation:aO,SubtractiveBlending:nM,TOUCH:Fl,TangentSpaceNormalMap:Qo,TetrahedronGeometry:wy,Texture:Ln,TextureLoader:z6,TextureUtils:z8,TimestampQuery:z5,TorusGeometry:Ry,TorusKnotGeometry:Dy,Triangle:aa,TriangleFanDrawMode:u5,TriangleStripDrawMode:c5,TrianglesDrawMode:l5,TubeGeometry:Ny,UVMapping:ny,Uint16BufferAttribute:aE,Uint32BufferAttribute:sE,Uint8BufferAttribute:bF,Uint8ClampedBufferAttribute:EF,Uniform:RE,UniformsGroup:u8,UniformsLib:Ft,UniformsUtils:WO,UnsignedByteType:as,UnsignedInt248Type:yf,UnsignedInt5999Type:Zb,UnsignedIntType:Hr,UnsignedShort4444Type:ay,UnsignedShort5551Type:sy,UnsignedShortType:vf,VSMShadowMap:gs,Vector2:mt,Vector3:V,Vector4:Fe,VectorKeyframeTrack:np,VideoFrameTexture:YF,VideoTexture:sL,WebGL3DRenderTarget:uF,WebGLArrayRenderTarget:cF,WebGLCoordinateSystem:ts,WebGLCubeRenderTarget:KO,WebGLRenderTarget:Ks,WebGLRenderer:tP,WebGLUtils:$L,WebGPUCoordinateSystem:Kd,WebXRController:e0,WireframeGeometry:gL,WrapAroundEnding:Yd,ZeroCurvatureEnding:ql,ZeroFactor:lO,ZeroSlopeEnding:Yl,ZeroStencilOp:d5,createCanvasElement:kO},Symbol.toStringTag,{value:"Module"}));var eP={exports:{}},nP={},iP={exports:{}},aP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=tt;function yk(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var _k=typeof Object.is=="function"?Object.is:yk,xk=Af.useState,Sk=Af.useEffect,Mk=Af.useLayoutEffect,bk=Af.useDebugValue;function Ek(n,t){var e=t(),i=xk({inst:{value:e,getSnapshot:t}}),a=i[0].inst,s=i[1];return Mk(function(){a.value=e,a.getSnapshot=t,US(a)&&s({inst:a})},[n,e,t]),Sk(function(){return US(a)&&s({inst:a}),n(function(){US(a)&&s({inst:a})})},[n]),bk(e),e}function US(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!_k(n,e)}catch{return!0}}function Tk(n,t){return t()}var Ak=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Tk:Ek;aP.useSyncExternalStore=Af.useSyncExternalStore!==void 0?Af.useSyncExternalStore:Ak;iP.exports=aP;var Ck=iP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly=tt,wk=Ck;function Rk(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Dk=typeof Object.is=="function"?Object.is:Rk,Nk=wk.useSyncExternalStore,Uk=Ly.useRef,Ok=Ly.useEffect,Lk=Ly.useMemo,Pk=Ly.useDebugValue;nP.useSyncExternalStoreWithSelector=function(n,t,e,i,a){var s=Uk(null);if(s.current===null){var r={hasValue:!1,value:null};s.current=r}else r=s.current;s=Lk(function(){function u(g){if(!f){if(f=!0,d=g,g=i(g),a!==void 0&&r.hasValue){var _=r.value;if(a(_,g))return p=_}return p=g}if(_=p,Dk(d,g))return _;var E=i(g);return a!==void 0&&a(_,E)?(d=g,_):(d=g,p=E)}var f=!1,d,p,m=e===void 0?null:e;return[function(){return u(t())},m===null?void 0:function(){return u(m())}]},[t,e,i,a]);var l=Nk(n,s[0],s[1]);return Ok(function(){r.hasValue=!0,r.value=l},[l]),Pk(l),l};eP.exports=nP;var zk=eP.exports;const Bk=jM(zk),ER=n=>{let t;const e=new Set,i=(f,d)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const m=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),e.forEach(g=>g(t,m))}},a=()=>t,l={setState:i,getState:a,getInitialState:()=>u,subscribe:f=>(e.add(f),()=>e.delete(f))},u=t=n(i,a,l);return l},sP=n=>n?ER(n):ER,{useSyncExternalStoreWithSelector:Ik}=Bk,Vk=n=>n;function Hk(n,t=Vk,e){const i=Ik(n.subscribe,n.getState,n.getInitialState,t,e);return a1.useDebugValue(i),i}const TR=(n,t)=>{const e=sP(n),i=(a,s=t)=>Hk(e,a,s);return Object.assign(i,e),i},Fk=(n,t)=>n?TR(n,t):TR;var rP={exports:{}},oP={exports:{}},OS={exports:{}},LS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AR;function Gk(){return AR||(AR=1,function(n){function t(L,G){var H=L.length;L.push(G);t:for(;0<H;){var W=H-1>>>1,rt=L[W];if(0<a(rt,G))L[W]=G,L[H]=rt,H=W;else break t}}function e(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var G=L[0],H=L.pop();if(H!==G){L[0]=H;t:for(var W=0,rt=L.length,vt=rt>>>1;W<vt;){var Dt=2*(W+1)-1,Vt=L[Dt],J=Dt+1,yt=L[J];if(0>a(Vt,H))J<rt&&0>a(yt,Vt)?(L[W]=yt,L[J]=H,W=J):(L[W]=Vt,L[Dt]=H,W=Dt);else if(J<rt&&0>a(yt,H))L[W]=yt,L[J]=H,W=J;else break t}}return G}function a(L,G){var H=L.sortIndex-G.sortIndex;return H!==0?H:L.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();n.unstable_now=function(){return r.now()-l}}var u=[],f=[],d=1,p=null,m=3,g=!1,_=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function b(L){for(var G=e(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=L)i(f),G.sortIndex=G.expirationTime,t(u,G);else break;G=e(f)}}function T(L){if(E=!1,b(L),!_)if(e(u)!==null)_=!0,it();else{var G=e(f);G!==null&&et(T,G.startTime-L)}}var w=!1,R=-1,N=5,U=-1;function D(){return!(n.unstable_now()-U<N)}function C(){if(w){var L=n.unstable_now();U=L;var G=!0;try{t:{_=!1,E&&(E=!1,v(R),R=-1),g=!0;var H=m;try{e:{for(b(L),p=e(u);p!==null&&!(p.expirationTime>L&&D());){var W=p.callback;if(typeof W=="function"){p.callback=null,m=p.priorityLevel;var rt=W(p.expirationTime<=L);if(L=n.unstable_now(),typeof rt=="function"){p.callback=rt,b(L),G=!0;break e}p===e(u)&&i(u),b(L)}else i(u);p=e(u)}if(p!==null)G=!0;else{var vt=e(f);vt!==null&&et(T,vt.startTime-L),G=!1}}break t}finally{p=null,m=H,g=!1}G=void 0}}finally{G?B():w=!1}}}var B;if(typeof x=="function")B=function(){x(C)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=C,B=function(){q.postMessage(null)}}else B=function(){M(C,0)};function it(){w||(w=!0,B())}function et(L,G){R=M(function(){L(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){_||g||(_=!0,it())},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return e(u)},n.unstable_next=function(L){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var H=m;m=G;try{return L()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=m;m=L;try{return G()}finally{m=H}},n.unstable_scheduleCallback=function(L,G,H){var W=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,L){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=H+rt,L={id:d++,callback:G,priorityLevel:L,startTime:H,expirationTime:rt,sortIndex:-1},H>W?(L.sortIndex=H,t(f,L),e(u)===null&&L===e(f)&&(E?(v(R),R=-1):E=!0,et(T,H-W))):(L.sortIndex=rt,t(u,L),_||g||(_=!0,it())),L},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(L){var G=m;return function(){var H=m;m=G;try{return L.apply(this,arguments)}finally{m=H}}}}(LS)),LS}var CR;function Xk(){return CR||(CR=1,OS.exports=Gk()),OS.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){n.exports=function(t){function e(o,c,h,y){return new EB(o,c,h,y)}function i(){}function a(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return o===null||typeof o!="object"?null:(o=XA&&o[XA]||o["@@iterator"],typeof o=="function"?o:null)}function r(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===DB?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Oc:return"Fragment";case Uc:return"Portal";case R_:return"Profiler";case HA:return"StrictMode";case N_:return"Suspense";case U_:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Qr:return(o.displayName||"Context")+".Provider";case FA:return(o._context.displayName||"Context")+".Consumer";case D_:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O_:return c=o.displayName||null,c!==null?c:r(o.type)||"Memo";case Jr:c=o._payload,o=o._init;try{return r(o(c))}catch{}}return null}function l(o){if(L_===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);L_=c&&c[1]||"",kA=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+L_+o+kA}function u(o,c){if(!o||P_)return"";P_=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var jt=function(){throw Error()};if(Object.defineProperty(jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(jt,[])}catch(be){var Wt=be}Reflect.construct(o,[],jt)}else{try{jt.call()}catch(be){Wt=be}o.call(jt.prototype)}}else{try{throw Error()}catch(be){Wt=be}(jt=o())&&typeof jt.catch=="function"&&jt.catch(function(){})}}catch(be){if(be&&Wt&&typeof be.stack=="string")return[be.stack,Wt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=y.DetermineComponentFrameRoot(),z=A[0],j=A[1];if(z&&j){var $=z.split(`
`),gt=j.split(`
`);for(S=y=0;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;for(;S<gt.length&&!gt[S].includes("DetermineComponentFrameRoot");)S++;if(y===$.length||S===gt.length)for(y=$.length-1,S=gt.length-1;1<=y&&0<=S&&$[y]!==gt[S];)S--;for(;1<=y&&0<=S;y--,S--)if($[y]!==gt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||$[y]!==gt[S]){var Ot=`
`+$[y].replace(" at new "," at ");return o.displayName&&Ot.includes("<anonymous>")&&(Ot=Ot.replace("<anonymous>",o.displayName)),Ot}while(1<=y&&0<=S);break}}}finally{P_=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?l(h):""}function f(o){switch(o.tag){case 26:case 27:case 5:return l(o.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return o=u(o.type,!1),o;case 11:return o=u(o.type.render,!1),o;case 1:return o=u(o.type,!0),o;default:return""}}function d(o){try{var c="";do c+=f(o),o=o.return;while(o);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function p(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,c.flags&4098&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function m(o){if(p(o)!==o)throw Error(a(188))}function g(o){var c=o.alternate;if(!c){if(c=p(o),c===null)throw Error(a(188));return c!==o?null:o}for(var h=o,y=c;;){var S=h.return;if(S===null)break;var A=S.alternate;if(A===null){if(y=S.return,y!==null){h=y;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===h)return m(S),o;if(A===y)return m(S),c;A=A.sibling}throw Error(a(188))}if(h.return!==y.return)h=S,y=A;else{for(var z=!1,j=S.child;j;){if(j===h){z=!0,h=S,y=A;break}if(j===y){z=!0,y=S,h=A;break}j=j.sibling}if(!z){for(j=A.child;j;){if(j===h){z=!0,h=A,y=S;break}if(j===y){z=!0,y=A,h=S;break}j=j.sibling}if(!z)throw Error(a(189))}}if(h.alternate!==y)throw Error(a(190))}if(h.tag!==3)throw Error(a(188));return h.stateNode.current===h?o:c}function _(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=_(o),c!==null)return c;o=o.sibling}return null}function E(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(o.tag!==4&&(c=E(o),c!==null))return c;o=o.sibling}return null}function M(o){return{current:o}}function v(o){0>Pc||(o.current=F_[Pc],F_[Pc]=null,Pc--)}function x(o,c){Pc++,F_[Pc]=o.current,o.current=c}function b(o){return o>>>=0,o===0?32:31-(j4(o)/q4|0)|0}function T(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function w(o,c){var h=o.pendingLanes;if(h===0)return 0;var y=0,S=o.suspendedLanes,A=o.pingedLanes,z=o.warmLanes;o=o.finishedLanes!==0;var j=h&134217727;return j!==0?(h=j&~S,h!==0?y=T(h):(A&=j,A!==0?y=T(A):o||(z=j&~z,z!==0&&(y=T(z))))):(j=h&~S,j!==0?y=T(j):A!==0?y=T(A):o||(z=h&~z,z!==0&&(y=T(z)))),y===0?0:c!==0&&c!==y&&!(c&S)&&(S=y&-y,z=c&-c,S>=z||S===32&&(z&4194176)!==0)?c:y}function R(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function N(o,c){switch(o){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var o=om;return om<<=1,!(om&4194176)&&(om=128),o}function D(){var o=lm;return lm<<=1,!(lm&62914560)&&(lm=4194304),o}function C(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function B(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Z(o,c,h,y,S,A){var z=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var j=o.entanglements,$=o.expirationTimes,gt=o.hiddenUpdates;for(h=z&~h;0<h;){var Ot=31-ga(h),jt=1<<Ot;j[Ot]=0,$[Ot]=-1;var Wt=gt[Ot];if(Wt!==null)for(gt[Ot]=null,Ot=0;Ot<Wt.length;Ot++){var be=Wt[Ot];be!==null&&(be.lane&=-536870913)}h&=~jt}y!==0&&q(o,y,0),A!==0&&S===0&&o.tag!==0&&(o.suspendedLanes|=A&~(z&~c))}function q(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var y=31-ga(c);o.entangledLanes|=c,o.entanglements[y]=o.entanglements[y]|1073741824|h&4194218}function it(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var y=31-ga(h),S=1<<y;S&c|o[y]&c&&(o[y]|=c),h&=~S}}function et(o){return o&=-o,2<o?8<o?o&134217727?32:268435456:8:2}function L(o){if(va&&typeof va.onCommitFiberRoot=="function")try{va.onCommitFiberRoot(uh,o,void 0,(o.current.flags&128)===128)}catch{}}function G(o){if(typeof Q4=="function"&&J4(o),va&&typeof va.setStrictMode=="function")try{va.setStrictMode(uh,o)}catch{}}function H(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}function W(o,c){if(typeof o=="object"&&o!==null){var h=g2.get(o);return h!==void 0?h:(c={value:o,source:c,stack:d(c)},g2.set(o,c),c)}return{value:o,source:c,stack:d(c)}}function rt(o,c){Bc[Ic++]=fm,Bc[Ic++]=um,um=o,fm=c}function vt(o,c,h){Ba[Ia++]=rr,Ba[Ia++]=or,Ba[Ia++]=fl,fl=o;var y=rr;o=or;var S=32-ga(y)-1;y&=~(1<<S),h+=1;var A=32-ga(c)+S;if(30<A){var z=S-S%5;A=(y&(1<<z)-1).toString(32),y>>=z,S-=z,rr=1<<32-ga(c)+S|h<<S|y,or=A+o}else rr=1<<A|h<<S|y,or=o}function Dt(o){o.return!==null&&(rt(o,1),vt(o,1,0))}function Vt(o){for(;o===um;)um=Bc[--Ic],Bc[Ic]=null,fm=Bc[--Ic],Bc[Ic]=null;for(;o===fl;)fl=Ba[--Ia],Ba[Ia]=null,or=Ba[--Ia],Ba[Ia]=null,rr=Ba[--Ia],Ba[Ia]=null}function J(o,c){x(to,c),x(fh,o),x(hi,null),o=OB(c),v(hi),x(hi,o)}function yt(){v(hi),v(fh),v(to)}function Yt(o){o.memoizedState!==null&&x(hm,o);var c=hi.current,h=LB(c,o.type);c!==h&&(x(fh,o),x(hi,h))}function Lt(o){fh.current===o&&(v(hi),v(fh)),hm.current===o&&(v(hm),sr?ul._currentValue=Lc:ul._currentValue2=Lc)}function Xt(o){var c=Error(a(418,""));throw ne(W(c,o)),k_}function he(o,c){if(!Pa)throw Error(a(175));C4(o.stateNode,o.type,o.memoizedProps,c,o)||Xt(o)}function qt(o){for(Hi=o.return;Hi;)switch(Hi.tag){case 3:case 27:ws=!0;return;case 5:case 13:ws=!1;return;default:Hi=Hi.return}}function ie(o){if(!Pa||o!==Hi)return!1;if(!Xe)return qt(o),Xe=!0,!1;var c=!1;if(bi?o.tag!==3&&o.tag!==27&&(o.tag!==5||s2(o.type)&&!rm(o.type,o.memoizedProps))&&(c=!0):o.tag!==3&&(o.tag!==5||s2(o.type)&&!rm(o.type,o.memoizedProps))&&(c=!0),c&&Ei&&Xt(o),qt(o),o.tag===13){if(!Pa)throw Error(a(316));if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));Ei=D4(o)}else Ei=Hi?i2(o.stateNode):null;return!0}function ue(){Pa&&(Ei=Hi=null,Xe=!1)}function ne(o){us===null?us=[o]:us.push(o)}function I(){for(var o=Vc,c=j_=Vc=0;c<o;){var h=Va[c];Va[c++]=null;var y=Va[c];Va[c++]=null;var S=Va[c];Va[c++]=null;var A=Va[c];if(Va[c++]=null,y!==null&&S!==null){var z=y.pending;z===null?S.next=S:(S.next=z.next,z.next=S),y.pending=S}A!==0&&dt(h,S,A)}}function Nt(o,c,h,y){Va[Vc++]=o,Va[Vc++]=c,Va[Vc++]=h,Va[Vc++]=y,j_|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Et(o,c,h,y){return Nt(o,c,h,y),zt(o)}function Tt(o,c){return Nt(o,null,null,c),zt(o)}function dt(o,c,h){o.lanes|=h;var y=o.alternate;y!==null&&(y.lanes|=h);for(var S=!1,A=o.return;A!==null;)A.childLanes|=h,y=A.alternate,y!==null&&(y.childLanes|=h),A.tag===22&&(o=A.stateNode,o===null||o._visibility&1||(S=!0)),o=A,A=A.return;S&&c!==null&&o.tag===3&&(A=o.stateNode,S=31-ga(h),A=A.hiddenUpdates,o=A[S],o===null?A[S]=[c]:o.push(c),c.lane=h|536870912)}function zt(o){if(50<xh)throw xh=0,ox=null,Error(a(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}function bt(o){o!==Hc&&o.next===null&&(Hc===null?dm=Hc=o:Hc=Hc.next=o),pm=!0,q_||(q_=!0,ft(fe))}function Ht(o,c){if(!Y_&&pm){Y_=!0;do for(var h=!1,y=dm;y!==null;){if(o!==0){var S=y.pendingLanes;if(S===0)var A=0;else{var z=y.suspendedLanes,j=y.pingedLanes;A=(1<<31-ga(42|o)+1)-1,A&=S&~(z&~j),A=A&201326677?A&201326677|1:A?A|2:0}A!==0&&(h=!0,nt(y,A))}else A=Ie,A=w(y,y===fn?A:0),!(A&3)||R(y,A)||(h=!0,nt(y,A));y=y.next}while(h);Y_=!1}}function fe(){pm=q_=!1;var o=0;Fc!==0&&(GB()&&(o=Fc),Fc=0);for(var c=cs(),h=null,y=dm;y!==null;){var S=y.next,A=F(y,c);A===0?(y.next=null,h===null?dm=S:h.next=S,S===null&&(Hc=h)):(h=y,(o!==0||A&3)&&(pm=!0)),y=S}Ht(o)}function F(o,c){for(var h=o.suspendedLanes,y=o.pingedLanes,S=o.expirationTimes,A=o.pendingLanes&-62914561;0<A;){var z=31-ga(A),j=1<<z,$=S[z];$===-1?(!(j&h)||j&y)&&(S[z]=N(j,c)):$<=c&&(o.expiredLanes|=j),A&=~j}if(c=fn,h=Ie,h=w(o,o===c?h:0),y=o.callbackNode,h===0||o===c&&hn===2||o.cancelPendingCommit!==null)return y!==null&&y!==null&&G_(y),o.callbackNode=null,o.callbackPriority=0;if(!(h&3)||R(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(y!==null&&G_(y),et(h)){case 2:case 8:h=Z4;break;case 32:h=X_;break;case 268435456:h=K4;break;default:h=X_}return y=O.bind(null,o),h=cm(h,y),o.callbackPriority=c,o.callbackNode=h,c}return y!==null&&y!==null&&G_(y),o.callbackPriority=2,o.callbackNode=null,2}function O(o,c){var h=o.callbackNode;if(ol()&&o.callbackNode!==h)return null;var y=Ie;return y=w(o,o===fn?y:0),y===0?null:(_A(o,y,c),F(o,cs()),o.callbackNode!=null&&o.callbackNode===h?O.bind(null,o):null)}function nt(o,c){if(ol())return null;_A(o,c,!0)}function ft(o){WB?ZB(function(){nn&6?cm(m2,o):o()}):cm(m2,o)}function pt(){return Fc===0&&(Fc=U()),Fc}function ht(o,c){if(hh===null){var h=hh=[];W_=0,Gc=pt(),Xc={status:"pending",value:void 0,then:function(y){h.push(y)}}}return W_++,c.then(te,te),c}function te(){if(--W_===0&&hh!==null){Xc!==null&&(Xc.status="fulfilled");var o=hh;hh=null,Gc=0,Xc=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function Pt(o,c){var h=[],y={status:"pending",value:null,reason:null,then:function(S){h.push(S)}};return o.then(function(){y.status="fulfilled",y.value=c;for(var S=0;S<h.length;S++)(0,h[S])(c)},function(S){for(y.status="rejected",y.reason=S,S=0;S<h.length;S++)(0,h[S])(void 0)}),y}function Qt(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jt(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function xt(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bt(o,c,h){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,nn&2){var S=y.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),y.pending=c,c=zt(o),dt(o,null,h),c}return Nt(o,y,c,h),zt(o)}function ae(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194176)!==0)){var y=c.lanes;y&=o.pendingLanes,h|=y,c.lanes=h,it(o,h)}}function k(o,c){var h=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var S=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var z={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?S=A=z:A=A.next=z,h=h.next}while(h!==null);A===null?S=A=c:A=A.next=c}else S=A=c;h={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:y.shared,callbacks:y.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function st(){if(Z_){var o=Xc;if(o!==null)throw o}}function Ct(o,c,h,y){Z_=!1;var S=o.updateQueue;eo=!1;var A=S.firstBaseUpdate,z=S.lastBaseUpdate,j=S.shared.pending;if(j!==null){S.shared.pending=null;var $=j,gt=$.next;$.next=null,z===null?A=gt:z.next=gt,z=$;var Ot=o.alternate;Ot!==null&&(Ot=Ot.updateQueue,j=Ot.lastBaseUpdate,j!==z&&(j===null?Ot.firstBaseUpdate=gt:j.next=gt,Ot.lastBaseUpdate=$))}if(A!==null){var jt=S.baseState;z=0,Ot=gt=$=null,j=A;do{var Wt=j.lane&-536870913,be=Wt!==j.lane;if(be?(Ie&Wt)===Wt:(y&Wt)===Wt){Wt!==0&&Wt===Gc&&(Z_=!0),Ot!==null&&(Ot=Ot.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});t:{var Ga=o,Sh=j;Wt=c;var xl=h;switch(Sh.tag){case 1:if(Ga=Sh.payload,typeof Ga=="function"){jt=Ga.call(xl,jt,Wt);break t}jt=Ga;break t;case 3:Ga.flags=Ga.flags&-65537|128;case 0:if(Ga=Sh.payload,Wt=typeof Ga=="function"?Ga.call(xl,jt,Wt):Ga,Wt==null)break t;jt=w_({},jt,Wt);break t;case 2:eo=!0}}Wt=j.callback,Wt!==null&&(o.flags|=64,be&&(o.flags|=8192),be=S.callbacks,be===null?S.callbacks=[Wt]:be.push(Wt))}else be={lane:Wt,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Ot===null?(gt=Ot=be,$=jt):Ot=Ot.next=be,z|=Wt;if(j=j.next,j===null){if(j=S.shared.pending,j===null)break;be=j,j=be.next,be.next=null,S.lastBaseUpdate=be,S.shared.pending=null}}while(!0);Ot===null&&($=jt),S.baseState=$,S.firstBaseUpdate=gt,S.lastBaseUpdate=Ot,A===null&&(S.shared.lanes=0),ao|=z,o.lanes=z,o.memoizedState=jt}}function X(o,c){if(typeof o!="function")throw Error(a(191,o));o.call(c)}function Rt(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)X(h[o],c)}function St(o,c){if(ya(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var S=h[y];if(!$4.call(c,S)||!ya(o[S],c[S]))return!1}return!0}function Gt(o){return o=o.status,o==="fulfilled"||o==="rejected"}function wt(){}function _t(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(wt,wt),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===dh?Error(a(483)):o;default:if(typeof c.status=="string")c.then(wt,wt);else{if(o=fn,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=c,o.status="pending",o.then(function(y){if(c.status==="pending"){var S=c;S.status="fulfilled",S.value=y}},function(y){if(c.status==="pending"){var S=c;S.status="rejected",S.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===dh?Error(a(483)):o}throw kc=c,dh}}function kt(){if(kc===null)throw Error(a(459));var o=kc;return kc=null,o}function se(o){var c=ph;return ph+=1,jc===null&&(jc=[]),_t(jc,o,c)}function Ne(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Ae(o,c){throw c.$$typeof===CB?Error(a(525)):(o=Object.prototype.toString.call(c),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function Vn(o){var c=o._init;return c(o._payload)}function li(o){function c(ot,Q){if(o){var ut=ot.deletions;ut===null?(ot.deletions=[Q],ot.flags|=16):ut.push(Q)}}function h(ot,Q){if(!o)return null;for(;Q!==null;)c(ot,Q),Q=Q.sibling;return null}function y(ot){for(var Q=new Map;ot!==null;)ot.key!==null?Q.set(ot.key,ot):Q.set(ot.index,ot),ot=ot.sibling;return Q}function S(ot,Q){return ot=Kr(ot,Q),ot.index=0,ot.sibling=null,ot}function A(ot,Q,ut){return ot.index=ut,o?(ut=ot.alternate,ut!==null?(ut=ut.index,ut<Q?(ot.flags|=33554434,Q):ut):(ot.flags|=33554434,Q)):(ot.flags|=1048576,Q)}function z(ot){return o&&ot.alternate===null&&(ot.flags|=33554434),ot}function j(ot,Q,ut,Ut){return Q===null||Q.tag!==6?(Q=T_(ut,ot.mode,Ut),Q.return=ot,Q):(Q=S(Q,ut),Q.return=ot,Q)}function $(ot,Q,ut,Ut){var oe=ut.type;return oe===Oc?Ot(ot,Q,ut.props.children,Ut,ut.key):Q!==null&&(Q.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Jr&&Vn(oe)===Q.type)?(Q=S(Q,ut.props),Ne(Q,ut),Q.return=ot,Q):(Q=im(ut.type,ut.key,ut.props,null,ot.mode,Ut),Ne(Q,ut),Q.return=ot,Q)}function gt(ot,Q,ut,Ut){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ut.containerInfo||Q.stateNode.implementation!==ut.implementation?(Q=A_(ut,ot.mode,Ut),Q.return=ot,Q):(Q=S(Q,ut.children||[]),Q.return=ot,Q)}function Ot(ot,Q,ut,Ut,oe){return Q===null||Q.tag!==7?(Q=ll(ut,ot.mode,Ut,oe),Q.return=ot,Q):(Q=S(Q,ut),Q.return=ot,Q)}function jt(ot,Q,ut){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=T_(""+Q,ot.mode,ut),Q.return=ot,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case am:return ut=im(Q.type,Q.key,Q.props,null,ot.mode,ut),Ne(ut,Q),ut.return=ot,ut;case Uc:return Q=A_(Q,ot.mode,ut),Q.return=ot,Q;case Jr:var Ut=Q._init;return Q=Ut(Q._payload),jt(ot,Q,ut)}if(sm(Q)||s(Q))return Q=ll(Q,ot.mode,ut,null),Q.return=ot,Q;if(typeof Q.then=="function")return jt(ot,se(Q),ut);if(Q.$$typeof===Qr)return jt(ot,Qp(ot,Q),ut);Ae(ot,Q)}return null}function Wt(ot,Q,ut,Ut){var oe=Q!==null?Q.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return oe!==null?null:j(ot,Q,""+ut,Ut);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case am:return ut.key===oe?$(ot,Q,ut,Ut):null;case Uc:return ut.key===oe?gt(ot,Q,ut,Ut):null;case Jr:return oe=ut._init,ut=oe(ut._payload),Wt(ot,Q,ut,Ut)}if(sm(ut)||s(ut))return oe!==null?null:Ot(ot,Q,ut,Ut,null);if(typeof ut.then=="function")return Wt(ot,Q,se(ut),Ut);if(ut.$$typeof===Qr)return Wt(ot,Q,Qp(ot,ut),Ut);Ae(ot,ut)}return null}function be(ot,Q,ut,Ut,oe){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return ot=ot.get(ut)||null,j(Q,ot,""+Ut,oe);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case am:return ot=ot.get(Ut.key===null?ut:Ut.key)||null,$(Q,ot,Ut,oe);case Uc:return ot=ot.get(Ut.key===null?ut:Ut.key)||null,gt(Q,ot,Ut,oe);case Jr:var mn=Ut._init;return Ut=mn(Ut._payload),be(ot,Q,ut,Ut,oe)}if(sm(Ut)||s(Ut))return ot=ot.get(ut)||null,Ot(Q,ot,Ut,oe,null);if(typeof Ut.then=="function")return be(ot,Q,ut,se(Ut),oe);if(Ut.$$typeof===Qr)return be(ot,Q,ut,Qp(Q,Ut),oe);Ae(Q,Ut)}return null}function Ga(ot,Q,ut,Ut){for(var oe=null,mn=null,ye=Q,ke=Q=0,ni=null;ye!==null&&ke<ut.length;ke++){ye.index>ke?(ni=ye,ye=null):ni=ye.sibling;var je=Wt(ot,ye,ut[ke],Ut);if(je===null){ye===null&&(ye=ni);break}o&&ye&&je.alternate===null&&c(ot,ye),Q=A(je,Q,ke),mn===null?oe=je:mn.sibling=je,mn=je,ye=ni}if(ke===ut.length)return h(ot,ye),Xe&&rt(ot,ke),oe;if(ye===null){for(;ke<ut.length;ke++)ye=jt(ot,ut[ke],Ut),ye!==null&&(Q=A(ye,Q,ke),mn===null?oe=ye:mn.sibling=ye,mn=ye);return Xe&&rt(ot,ke),oe}for(ye=y(ye);ke<ut.length;ke++)ni=be(ye,ot,ke,ut[ke],Ut),ni!==null&&(o&&ni.alternate!==null&&ye.delete(ni.key===null?ke:ni.key),Q=A(ni,Q,ke),mn===null?oe=ni:mn.sibling=ni,mn=ni);return o&&ye.forEach(function(ro){return c(ot,ro)}),Xe&&rt(ot,ke),oe}function Sh(ot,Q,ut,Ut){if(ut==null)throw Error(a(151));for(var oe=null,mn=null,ye=Q,ke=Q=0,ni=null,je=ut.next();ye!==null&&!je.done;ke++,je=ut.next()){ye.index>ke?(ni=ye,ye=null):ni=ye.sibling;var ro=Wt(ot,ye,je.value,Ut);if(ro===null){ye===null&&(ye=ni);break}o&&ye&&ro.alternate===null&&c(ot,ye),Q=A(ro,Q,ke),mn===null?oe=ro:mn.sibling=ro,mn=ro,ye=ni}if(je.done)return h(ot,ye),Xe&&rt(ot,ke),oe;if(ye===null){for(;!je.done;ke++,je=ut.next())je=jt(ot,je.value,Ut),je!==null&&(Q=A(je,Q,ke),mn===null?oe=je:mn.sibling=je,mn=je);return Xe&&rt(ot,ke),oe}for(ye=y(ye);!je.done;ke++,je=ut.next())je=be(ye,ot,ke,je.value,Ut),je!==null&&(o&&je.alternate!==null&&ye.delete(je.key===null?ke:je.key),Q=A(je,Q,ke),mn===null?oe=je:mn.sibling=je,mn=je);return o&&ye.forEach(function(rI){return c(ot,rI)}),Xe&&rt(ot,ke),oe}function xl(ot,Q,ut,Ut){if(typeof ut=="object"&&ut!==null&&ut.type===Oc&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case am:t:{for(var oe=ut.key;Q!==null;){if(Q.key===oe){if(oe=ut.type,oe===Oc){if(Q.tag===7){h(ot,Q.sibling),Ut=S(Q,ut.props.children),Ut.return=ot,ot=Ut;break t}}else if(Q.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===Jr&&Vn(oe)===Q.type){h(ot,Q.sibling),Ut=S(Q,ut.props),Ne(Ut,ut),Ut.return=ot,ot=Ut;break t}h(ot,Q);break}else c(ot,Q);Q=Q.sibling}ut.type===Oc?(Ut=ll(ut.props.children,ot.mode,Ut,ut.key),Ut.return=ot,ot=Ut):(Ut=im(ut.type,ut.key,ut.props,null,ot.mode,Ut),Ne(Ut,ut),Ut.return=ot,ot=Ut)}return z(ot);case Uc:t:{for(oe=ut.key;Q!==null;){if(Q.key===oe)if(Q.tag===4&&Q.stateNode.containerInfo===ut.containerInfo&&Q.stateNode.implementation===ut.implementation){h(ot,Q.sibling),Ut=S(Q,ut.children||[]),Ut.return=ot,ot=Ut;break t}else{h(ot,Q);break}else c(ot,Q);Q=Q.sibling}Ut=A_(ut,ot.mode,Ut),Ut.return=ot,ot=Ut}return z(ot);case Jr:return oe=ut._init,ut=oe(ut._payload),xl(ot,Q,ut,Ut)}if(sm(ut))return Ga(ot,Q,ut,Ut);if(s(ut)){if(oe=s(ut),typeof oe!="function")throw Error(a(150));return ut=oe.call(ut),Sh(ot,Q,ut,Ut)}if(typeof ut.then=="function")return xl(ot,Q,se(ut),Ut);if(ut.$$typeof===Qr)return xl(ot,Q,Qp(ot,ut),Ut);Ae(ot,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,Q!==null&&Q.tag===6?(h(ot,Q.sibling),Ut=S(Q,ut),Ut.return=ot,ot=Ut):(h(ot,Q),Ut=T_(ut,ot.mode,Ut),Ut.return=ot,ot=Ut),z(ot)):h(ot,Q)}return function(ot,Q,ut,Ut){try{ph=0;var oe=xl(ot,Q,ut,Ut);return jc=null,oe}catch(ye){if(ye===dh)throw ye;var mn=e(29,ye,null,ot.mode);return mn.lanes=Ut,mn.return=ot,mn}finally{}}}function Wf(o,c){o=fr,x(gm,o),x(qc,c),fr=o|c.baseLanes}function Tc(){x(gm,fr),x(qc,qc.current)}function rs(){fr=gm.current,v(qc),v(gm)}function La(o){var c=o.alternate;x(Yn,Yn.current&1),x(Ha,o),Rs===null&&(c===null||qc.current!==null||c.memoizedState!==null)&&(Rs=o)}function Zf(o){if(o.tag===22){if(x(Yn,Yn.current),x(Ha,o),Rs===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Rs=o)}}else os()}function os(){x(Yn,Yn.current),x(Ha,Ha.current)}function Zi(o){v(Ha),Rs===o&&(Rs=null),v(Yn)}function nl(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||I_(h)||V_(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function cn(){throw Error(a(321))}function Ac(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!ya(o[h],c[h]))return!1;return!0}function Cc(o,c,h,y,S,A){return no=A,Re=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,_e.H=o===null||o.memoizedState===null?pl:io,dl=!1,A=h(y,S),dl=!1,Yc&&(A=jp(c,h,y,S)),kp(o),A}function kp(o){_e.H=Ds;var c=en!==null&&en.next!==null;if(no=0,Hn=en=Re=null,vm=!1,mh=0,Wc=null,c)throw Error(a(300));o===null||ti||(o=o.dependencies,o!==null&&Kp(o)&&(ti=!0))}function jp(o,c,h,y){Re=o;var S=0;do{if(Yc&&(Wc=null),mh=0,Yc=!1,25<=S)throw Error(a(301));if(S+=1,Hn=en=null,o.updateQueue!=null){var A=o.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}_e.H=ml,A=c(h,y)}while(Yc);return A}function Hy(){var o=_e.H,c=o.useState()[0];return c=typeof c.then=="function"?lt(c):c,o=o.useState()[0],(en!==null?en.memoizedState:null)!==o&&(Re.flags|=1024),c}function Kf(){var o=ym!==0;return ym=0,o}function Qf(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function Jf(o){if(vm){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}vm=!1}no=0,Hn=en=Re=null,Yc=!1,mh=ym=0,Wc=null}function P(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?Re.memoizedState=Hn=o:Hn=Hn.next=o,Hn}function Y(){if(en===null){var o=Re.alternate;o=o!==null?o.memoizedState:null}else o=en.next;var c=Hn===null?Re.memoizedState:Hn.next;if(c!==null)Hn=c,en=o;else{if(o===null)throw Re.alternate===null?Error(a(467)):Error(a(310));en=o,o={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Hn===null?Re.memoizedState=Hn=o:Hn=Hn.next=o}return Hn}function lt(o){var c=mh;return mh+=1,Wc===null&&(Wc=[]),o=_t(Wc,o,c),c=Re,(Hn===null?c.memoizedState:Hn.next)===null&&(c=c.alternate,_e.H=c===null||c.memoizedState===null?pl:io),o}function ct(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return lt(o);if(o.$$typeof===Qr)return Si(o)}throw Error(a(438,String(o)))}function K(o){var c=null,h=Re.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var y=Re.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(S){return S.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=Q_(),Re.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),y=0;y<o;y++)h[y]=RB;return c.index++,h}function At(o,c){return typeof c=="function"?c(o):c}function It(o){var c=Y();return $t(c,en,o)}function $t(o,c,h){var y=o.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=h;var S=o.baseQueue,A=y.pending;if(A!==null){if(S!==null){var z=S.next;S.next=A.next,A.next=z}c.baseQueue=S=A,y.pending=null}if(A=o.baseState,S===null)o.memoizedState=A;else{c=S.next;var j=z=null,$=null,gt=c,Ot=!1;do{var jt=gt.lane&-536870913;if(jt!==gt.lane?(Ie&jt)===jt:(no&jt)===jt){var Wt=gt.revertLane;if(Wt===0)$!==null&&($=$.next={lane:0,revertLane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),jt===Gc&&(Ot=!0);else if((no&Wt)===Wt){gt=gt.next,Wt===Gc&&(Ot=!0);continue}else jt={lane:0,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},$===null?(j=$=jt,z=A):$=$.next=jt,Re.lanes|=Wt,ao|=Wt;jt=gt.action,dl&&h(A,jt),A=gt.hasEagerState?gt.eagerState:h(A,jt)}else Wt={lane:jt,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},$===null?(j=$=Wt,z=A):$=$.next=Wt,Re.lanes|=jt,ao|=jt;gt=gt.next}while(gt!==null&&gt!==c);if($===null?z=A:$.next=j,!ya(A,o.memoizedState)&&(ti=!0,Ot&&(h=Xc,h!==null)))throw h;o.memoizedState=A,o.baseState=z,o.baseQueue=$,y.lastRenderedState=A}return S===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function Kt(o){var c=Y(),h=c.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=o;var y=h.dispatch,S=h.pending,A=c.memoizedState;if(S!==null){h.pending=null;var z=S=S.next;do A=o(A,z.action),z=z.next;while(z!==S);ya(A,c.memoizedState)||(ti=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),h.lastRenderedState=A}return[A,y]}function de(o,c,h){var y=Re,S=Y(),A=Xe;if(A){if(h===void 0)throw Error(a(407));h=h()}else h=c();var z=!ya((en||S).memoizedState,h);if(z&&(S.memoizedState=h,ti=!0),S=S.queue,Fy(we.bind(null,y,S,o),[o]),S.getSnapshot!==c||z||Hn!==null&&Hn.memoizedState.tag&1){if(y.flags|=2048,As(9,re.bind(null,y,S,h,c),{destroy:void 0},null),fn===null)throw Error(a(349));A||no&60||me(y,c,h)}return h}function me(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Re.updateQueue,c===null?(c=Q_(),Re.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function re(o,c,h,y){c.value=h,c.getSnapshot=y,qe(c)&&pn(o)}function we(o,c,h){return h(function(){qe(c)&&pn(o)})}function qe(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!ya(o,h)}catch{return!0}}function pn(o){var c=Tt(o,2);c!==null&&Vi(c,o,2)}function Ke(o){var c=P();if(typeof o=="function"){var h=o;if(o=h(),dl){G(!0);try{h()}finally{G(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:At,lastRenderedState:o},c}function Ze(o,c,h,y){return o.baseState=h,$t(o,en,typeof y=="function"?y:At)}function le(o,c,h,y,S){if(Wp(o))throw Error(a(485));if(o=c.action,o!==null){var A={payload:S,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){A.listeners.push(z)}};_e.T!==null?h(!0):A.isTransition=!1,y(A),h=c.pending,h===null?(A.next=c.pending=A,un(c,A)):(A.next=h.next,c.pending=h.next=A)}}function un(o,c){var h=c.action,y=c.payload,S=o.state;if(c.isTransition){var A=_e.T,z={};_e.T=z;try{var j=h(S,y),$=_e.S;$!==null&&$(z,j),ze(o,c,j)}catch(gt){Ts(o,c,gt)}finally{_e.T=A}}else try{A=h(S,y),ze(o,c,A)}catch(gt){Ts(o,c,gt)}}function ze(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){_i(o,c,y)},function(y){return Ts(o,c,y)}):_i(o,c,h)}function _i(o,c,h){c.status="fulfilled",c.value=h,xi(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,un(o,h)))}function Ts(o,c,h){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=h,xi(c),c=c.next;while(c!==y)}o.action=null}function xi(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function jr(o,c){return c}function on(o,c){if(Xe){var h=fn.formState;if(h!==null){t:{var y=Re;if(Xe){if(Ei){var S=x4(Ei,ws);if(S){Ei=i2(S),y=S4(S);break t}}Xt(y)}y=!1}y&&(c=h[0])}}h=P(),h.memoizedState=h.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jr,lastRenderedState:c},h.queue=y,h=wT.bind(null,Re,y),y.dispatch=h,y=Ke(!1);var A=jy.bind(null,Re,!1,y.queue);return y=P(),S={state:c,dispatch:null,action:o,pending:null},y.queue=S,h=le.bind(null,Re,S,A,h),S.dispatch=h,y.memoizedState=o,[c,h,!1]}function Bi(o){var c=Y();return Ii(c,en,o)}function Ii(o,c,h){c=$t(o,c,jr)[0],o=It(At)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?lt(c):c;var y=Y(),S=y.queue,A=S.dispatch;return h!==y.memoizedState&&(Re.flags|=2048,As(9,ci.bind(null,S,h),{destroy:void 0},null)),[c,A,o]}function ci(o,c){o.action=c}function ui(o){var c=Y(),h=en;if(h!==null)return Ii(c,h,o);Y(),c=c.memoizedState,h=Y();var y=h.queue.dispatch;return h.memoizedState=o,[c,y,!1]}function As(o,c,h,y){return o={tag:o,create:c,inst:h,deps:y,next:null},c=Re.updateQueue,c===null&&(c=Q_(),Re.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(y=h.next,h.next=o,o.next=y,c.lastEffect=o),o}function Cs(){return Y().memoizedState}function qp(o,c,h,y){var S=P();Re.flags|=o,S.memoizedState=As(1|c,h,{destroy:void 0},y===void 0?null:y)}function Yp(o,c,h,y){var S=Y();y=y===void 0?null:y;var A=S.memoizedState.inst;en!==null&&y!==null&&Ac(y,en.memoizedState.deps)?S.memoizedState=As(c,h,A,y):(Re.flags|=o,S.memoizedState=As(1|c,h,A,y))}function gT(o,c){qp(8390656,8,o,c)}function Fy(o,c){Yp(2048,8,o,c)}function vT(o,c){return Yp(4,2,o,c)}function yT(o,c){return Yp(4,4,o,c)}function _T(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function xT(o,c,h){h=h!=null?h.concat([o]):null,Yp(4,4,_T.bind(null,c,o),h)}function Gy(){}function ST(o,c){var h=Y();c=c===void 0?null:c;var y=h.memoizedState;return c!==null&&Ac(c,y[1])?y[0]:(h.memoizedState=[o,c],o)}function MT(o,c){var h=Y();c=c===void 0?null:c;var y=h.memoizedState;if(c!==null&&Ac(c,y[1]))return y[0];if(y=o(),dl){G(!0);try{o()}finally{G(!1)}}return h.memoizedState=[y,c],y}function Xy(o,c,h){return h===void 0||no&1073741824?o.memoizedState=c:(o.memoizedState=h,o=yA(),Re.lanes|=o,ao|=o,h)}function bT(o,c,h,y){return ya(h,c)?h:qc.current!==null?(o=Xy(o,h,y),ya(o,c)||(ti=!0),o):no&42?(o=yA(),Re.lanes|=o,ao|=o,c):(ti=!0,o.memoizedState=h)}function ET(o,c,h,y,S){var A=cl();Qi(A!==0&&8>A?A:8);var z=_e.T,j={};_e.T=j,jy(o,!1,c,h);try{var $=S(),gt=_e.S;if(gt!==null&&gt(j,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var Ot=Pt($,y);$f(o,c,Ot,pa(o))}else $f(o,c,y,pa(o))}catch(jt){$f(o,c,{then:function(){},status:"rejected",reason:jt},pa())}finally{Qi(A),_e.T=z}}function TT(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:Lc,baseState:Lc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:At,lastRenderedState:Lc},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:At,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function ky(){return Si(ul)}function AT(){return Y().memoizedState}function CT(){return Y().memoizedState}function oB(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=pa();o=xt(h);var y=Bt(c,o,h);y!==null&&(Vi(y,c,h),ae(y,c,h)),c={cache:a_()},o.payload=c;return}c=c.return}}function lB(o,c,h){var y=pa();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Wp(o)?RT(c,h):(h=Et(o,c,h,y),h!==null&&(Vi(h,o,y),DT(h,c,y)))}function wT(o,c,h){var y=pa();$f(o,c,h,y)}function $f(o,c,h,y){var S={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Wp(o))RT(c,S);else{var A=o.alternate;if(o.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var z=c.lastRenderedState,j=A(z,h);if(S.hasEagerState=!0,S.eagerState=j,ya(j,z))return Nt(o,c,S,0),fn===null&&I(),!1}catch{}finally{}if(h=Et(o,c,S,y),h!==null)return Vi(h,o,y),DT(h,c,y),!0}return!1}function jy(o,c,h,y){if(y={lane:2,revertLane:pt(),action:y,hasEagerState:!1,eagerState:null,next:null},Wp(o)){if(c)throw Error(a(479))}else c=Et(o,h,y,2),c!==null&&Vi(c,o,2)}function Wp(o){var c=o.alternate;return o===Re||c!==null&&c===Re}function RT(o,c){Yc=vm=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function DT(o,c,h){if(h&4194176){var y=c.lanes;y&=o.pendingLanes,h|=y,c.lanes=h,it(o,h)}}function qy(o,c,h,y){c=o.memoizedState,h=h(y,c),h=h==null?c:w_({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}function NT(o,c,h,y,S,A,z){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,A,z):c.prototype&&c.prototype.isPureReactComponent?!St(h,y)||!St(S,A):!0}function UT(o,c,h,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==o&&J_.enqueueReplaceState(c,c.state,null)}function il(o,c){var h=c;if("ref"in c){h={};for(var y in c)y!=="ref"&&(h[y]=c[y])}if(o=o.defaultProps){h===c&&(h=w_({},h));for(var S in o)h[S]===void 0&&(h[S]=o[S])}return h}function Zp(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function OT(o,c,h){try{var y=o.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function Yy(o,c,h){return h=xt(h),h.tag=3,h.payload={element:null},h.callback=function(){Zp(o,c)},h}function LT(o){return o=xt(o),o.tag=3,o}function PT(o,c,h,y){var S=h.type.getDerivedStateFromError;if(typeof S=="function"){var A=y.value;o.payload=function(){return S(A)},o.callback=function(){OT(c,h,y)}}var z=h.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(o.callback=function(){OT(c,h,y),typeof S!="function"&&(so===null?so=new Set([this]):so.add(this));var j=y.stack;this.componentDidCatch(y.value,{componentStack:j!==null?j:""})})}function cB(o,c,h,y,S){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=h.alternate,c!==null&&eh(c,h,S,!0),h=Ha.current,h!==null){switch(h.tag){case 13:return Rs===null?S_():h.alternate===null&&Rn===0&&(Rn=3),h.flags&=-257,h.flags|=65536,h.lanes=S,y===mm?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([y]):c.add(y),b_(o,y,S)),!1;case 22:return h.flags|=65536,y===mm?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([y]):h.add(y)),b_(o,y,S)),!1}throw Error(a(435,h.tag))}return b_(o,y,S),S_(),!1}if(Xe)return c=Ha.current,c!==null?(!(c.flags&65536)&&(c.flags|=256),c.flags|=65536,c.lanes=S,y!==k_&&(o=Error(a(422),{cause:y}),ne(W(o,h)))):(y!==k_&&(c=Error(a(423),{cause:y}),ne(W(c,h))),o=o.current.alternate,o.flags|=65536,S&=-S,o.lanes|=S,y=W(y,h),S=Yy(o.stateNode,y,S),k(o,S),Rn!==4&&(Rn=2)),!1;var A=Error(a(520),{cause:y});if(A=W(A,h),vh===null?vh=[A]:vh.push(A),Rn!==4&&(Rn=2),c===null)return!0;y=W(y,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=S&-S,h.lanes|=o,o=Yy(h.stateNode,y,o),k(h,o),!1;case 1:if(c=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(so===null||!so.has(A))))return h.flags|=65536,S&=-S,h.lanes|=S,S=LT(S),PT(S,o,h,y),k(h,S),!1}h=h.return}while(h!==null);return!1}function fi(o,c,h,y){c.child=o===null?v2(c,null,h,y):hl(c,o.child,h,y)}function zT(o,c,h,y,S){h=h.render;var A=c.ref;if("ref"in y){var z={};for(var j in y)j!=="ref"&&(z[j]=y[j])}else z=y;return al(c),y=Cc(o,c,h,z,A,S),j=Kf(),o!==null&&!ti?(Qf(o,c,S),er(o,c,S)):(Xe&&j&&Dt(c),c.flags|=1,fi(o,c,y,S),c.child)}function BT(o,c,h,y,S){if(o===null){var A=h.type;return typeof A=="function"&&!E_(A)&&A.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=A,IT(o,c,A,y,S)):(o=im(h.type,null,y,c,c.mode,S),o.ref=c.ref,o.return=c,c.child=o)}if(A=o.child,!e_(o,S)){var z=A.memoizedProps;if(h=h.compare,h=h!==null?h:St,h(z,y)&&o.ref===c.ref)return er(o,c,S)}return c.flags|=1,o=Kr(A,y),o.ref=c.ref,o.return=c,c.child=o}function IT(o,c,h,y,S){if(o!==null){var A=o.memoizedProps;if(St(A,y)&&o.ref===c.ref)if(ti=!1,c.pendingProps=y=A,e_(o,S))o.flags&131072&&(ti=!0);else return c.lanes=o.lanes,er(o,c,S)}return Wy(o,c,h,y,S)}function VT(o,c,h){var y=c.pendingProps,S=y.children,A=(c.stateNode._pendingVisibility&2)!==0,z=o!==null?o.memoizedState:null;if(th(o,c),y.mode==="hidden"||A){if(c.flags&128){if(y=z!==null?z.baseLanes|h:h,o!==null){for(S=c.child=o.child,A=0;S!==null;)A=A|S.lanes|S.childLanes,S=S.sibling;c.childLanes=A&~y}else c.childLanes=0,c.child=null;return HT(o,c,y,h)}if(h&536870912)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Jp(c,z!==null?z.cachePool:null),z!==null?Wf(c,z):Tc(),Zf(c);else return c.lanes=c.childLanes=536870912,HT(o,c,z!==null?z.baseLanes|h:h,h)}else z!==null?(Jp(c,z.cachePool),Wf(c,z),os(),c.memoizedState=null):(o!==null&&Jp(c,null),Tc(),os());return fi(o,c,S,h),c.child}function HT(o,c,h,y){var S=s_();return S=S===null?null:{parent:sr?Cn._currentValue:Cn._currentValue2,pool:S},c.memoizedState={baseLanes:h,cachePool:S},o!==null&&Jp(c,null),Tc(),Zf(c),o!==null&&eh(o,c,y,!0),null}function th(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=2097664);else{if(typeof h!="function"&&typeof h!="object")throw Error(a(284));(o===null||o.ref!==h)&&(c.flags|=2097664)}}function Wy(o,c,h,y,S){return al(c),h=Cc(o,c,h,y,void 0,S),y=Kf(),o!==null&&!ti?(Qf(o,c,S),er(o,c,S)):(Xe&&y&&Dt(c),c.flags|=1,fi(o,c,h,S),c.child)}function FT(o,c,h,y,S,A){return al(c),c.updateQueue=null,h=jp(c,y,h,S),kp(o),y=Kf(),o!==null&&!ti?(Qf(o,c,A),er(o,c,A)):(Xe&&y&&Dt(c),c.flags|=1,fi(o,c,h,A),c.child)}function GT(o,c,h,y,S){if(al(c),c.stateNode===null){var A=zc,z=h.contextType;typeof z=="object"&&z!==null&&(A=Si(z)),A=new h(y,A),c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=J_,c.stateNode=A,A._reactInternals=c,A=c.stateNode,A.props=y,A.state=c.memoizedState,A.refs={},Qt(c),z=h.contextType,A.context=typeof z=="object"&&z!==null?Si(z):zc,A.state=c.memoizedState,z=h.getDerivedStateFromProps,typeof z=="function"&&(qy(c,h,z,y),A.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(z=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),z!==A.state&&J_.enqueueReplaceState(A,A.state,null),Ct(c,y,A,S),st(),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(o===null){A=c.stateNode;var j=c.memoizedProps,$=il(h,j);A.props=$;var gt=A.context,Ot=h.contextType;z=zc,typeof Ot=="object"&&Ot!==null&&(z=Si(Ot));var jt=h.getDerivedStateFromProps;Ot=typeof jt=="function"||typeof A.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,Ot||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(j||gt!==z)&&UT(c,A,y,z),eo=!1;var Wt=c.memoizedState;A.state=Wt,Ct(c,y,A,S),st(),gt=c.memoizedState,j||Wt!==gt||eo?(typeof jt=="function"&&(qy(c,h,jt,y),gt=c.memoizedState),($=eo||NT(c,h,$,y,Wt,gt,z))?(Ot||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=gt),A.props=y,A.state=gt,A.context=z,y=$):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{A=c.stateNode,Jt(o,c),z=c.memoizedProps,Ot=il(h,z),A.props=Ot,jt=c.pendingProps,Wt=A.context,gt=h.contextType,$=zc,typeof gt=="object"&&gt!==null&&($=Si(gt)),j=h.getDerivedStateFromProps,(gt=typeof j=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z!==jt||Wt!==$)&&UT(c,A,y,$),eo=!1,Wt=c.memoizedState,A.state=Wt,Ct(c,y,A,S),st();var be=c.memoizedState;z!==jt||Wt!==be||eo||o!==null&&o.dependencies!==null&&Kp(o.dependencies)?(typeof j=="function"&&(qy(c,h,j,y),be=c.memoizedState),(Ot=eo||NT(c,h,Ot,y,Wt,be,$)||o!==null&&o.dependencies!==null&&Kp(o.dependencies))?(gt||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(y,be,$),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(y,be,$)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||z===o.memoizedProps&&Wt===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&Wt===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=be),A.props=y,A.state=be,A.context=$,y=Ot):(typeof A.componentDidUpdate!="function"||z===o.memoizedProps&&Wt===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&Wt===o.memoizedState||(c.flags|=1024),y=!1)}return A=y,th(o,c),y=(c.flags&128)!==0,A||y?(A=c.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:A.render(),c.flags|=1,o!==null&&y?(c.child=hl(c,o.child,null,S),c.child=hl(c,null,h,S)):fi(o,c,h,S),c.memoizedState=A.state,o=c.child):o=er(o,c,S),o}function XT(o,c,h,y){return ue(),c.flags|=256,fi(o,c,h,y),c.child}function Zy(o){return{baseLanes:o,cachePool:ZT()}}function Ky(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=Fa),o}function kT(o,c,h){var y=c.pendingProps,S=!1,A=(c.flags&128)!==0,z;if((z=A)||(z=o!==null&&o.memoizedState===null?!1:(Yn.current&2)!==0),z&&(S=!0,c.flags&=-129),z=(c.flags&32)!==0,c.flags&=-33,o===null){if(Xe){if(S?La(c):os(),Xe){var j=Ei,$;($=j)&&(j=A4(j,ws),j!==null?(c.memoizedState={dehydrated:j,treeContext:fl!==null?{id:rr,overflow:or}:null,retryLane:536870912},$=e(18,null,null,0),$.stateNode=j,$.return=c,c.child=$,Hi=c,Ei=null,$=!0):$=!1),$||Xt(c)}if(j=c.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return V_(j)?c.lanes=16:c.lanes=536870912,null;Zi(c)}return j=y.children,y=y.fallback,S?(os(),S=c.mode,j=Jy({mode:"hidden",children:j},S),y=ll(y,S,h,null),j.return=c,y.return=c,j.sibling=y,c.child=j,S=c.child,S.memoizedState=Zy(h),S.childLanes=Ky(o,z,h),c.memoizedState=$_,y):(La(c),Qy(c,j))}if($=o.memoizedState,$!==null&&(j=$.dehydrated,j!==null)){if(A)c.flags&256?(La(c),c.flags&=-257,c=$y(o,c,h)):c.memoizedState!==null?(os(),c.child=o.child,c.flags|=128,c=null):(os(),S=y.fallback,j=c.mode,y=Jy({mode:"visible",children:y.children},j),S=ll(S,j,h,null),S.flags|=2,y.return=c,S.return=c,y.sibling=S,c.child=y,hl(c,o.child,null,h),y=c.child,y.memoizedState=Zy(h),y.childLanes=Ky(o,z,h),c.memoizedState=$_,c=S);else if(La(c),V_(j))z=y4(j).digest,y=Error(a(419)),y.stack="",y.digest=z,ne({value:y,source:null,stack:null}),c=$y(o,c,h);else if(ti||eh(o,c,h,!1),z=(h&o.childLanes)!==0,ti||z){if(z=fn,z!==null){if(y=h&-h,y&42)y=1;else switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=64;break;case 268435456:y=134217728;break;default:y=0}if(y=y&(z.suspendedLanes|h)?0:y,y!==0&&y!==$.retryLane)throw $.retryLane=y,Tt(o,y),Vi(z,o,y),_2}I_(j)||S_(),c=$y(o,c,h)}else I_(j)?(c.flags|=128,c.child=o.child,c=SB.bind(null,o),_4(j,c),c=null):(o=$.treeContext,Pa&&(Ei=b4(j),Hi=c,Xe=!0,us=null,ws=!1,o!==null&&(Ba[Ia++]=rr,Ba[Ia++]=or,Ba[Ia++]=fl,rr=o.id,or=o.overflow,fl=c)),c=Qy(c,y.children),c.flags|=4096);return c}return S?(os(),S=y.fallback,j=c.mode,$=o.child,A=$.sibling,y=Kr($,{mode:"hidden",children:y.children}),y.subtreeFlags=$.subtreeFlags&31457280,A!==null?S=Kr(A,S):(S=ll(S,j,h,null),S.flags|=2),S.return=c,y.return=c,y.sibling=S,c.child=y,y=S,S=c.child,j=o.child.memoizedState,j===null?j=Zy(h):($=j.cachePool,$!==null?(A=sr?Cn._currentValue:Cn._currentValue2,$=$.parent!==A?{parent:A,pool:A}:$):$=ZT(),j={baseLanes:j.baseLanes|h,cachePool:$}),S.memoizedState=j,S.childLanes=Ky(o,z,h),c.memoizedState=$_,y):(La(c),h=o.child,o=h.sibling,h=Kr(h,{mode:"visible",children:y.children}),h.return=c,h.sibling=null,o!==null&&(z=c.deletions,z===null?(c.deletions=[o],c.flags|=16):z.push(o)),c.child=h,c.memoizedState=null,h)}function Qy(o,c){return c=Jy({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Jy(o,c){return LA(o,c,0,null)}function $y(o,c,h){return hl(c,o.child,null,h),o=Qy(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function jT(o,c,h){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),n_(o.return,c,h)}function t_(o,c,h,y,S){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:S}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=h,A.tailMode=S)}function qT(o,c,h){var y=c.pendingProps,S=y.revealOrder,A=y.tail;if(fi(o,c,y.children,h),y=Yn.current,y&2)y=y&1|2,c.flags|=128;else{if(o!==null&&o.flags&128)t:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&jT(o,h,c);else if(o.tag===19)jT(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break t;for(;o.sibling===null;){if(o.return===null||o.return===c)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(x(Yn,y),S){case"forwards":for(h=c.child,S=null;h!==null;)o=h.alternate,o!==null&&nl(o)===null&&(S=h),h=h.sibling;h=S,h===null?(S=c.child,c.child=null):(S=h.sibling,h.sibling=null),t_(c,!1,S,h,A);break;case"backwards":for(h=null,S=c.child,c.child=null;S!==null;){if(o=S.alternate,o!==null&&nl(o)===null){c.child=S;break}o=S.sibling,S.sibling=h,h=S,S=o}t_(c,!0,h,null,A);break;case"together":t_(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function er(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),ao|=c.lanes,!(h&c.childLanes))if(o!==null){if(eh(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(a(153));if(c.child!==null){for(o=c.child,h=Kr(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=Kr(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function e_(o,c){return o.lanes&c?!0:(o=o.dependencies,!!(o!==null&&Kp(o)))}function uB(o,c,h){switch(c.tag){case 3:J(c,c.stateNode.containerInfo),qr(c,Cn,o.memoizedState.cache),ue();break;case 27:case 5:Yt(c);break;case 4:J(c,c.stateNode.containerInfo);break;case 10:qr(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(La(c),c.flags|=128,null):h&c.child.childLanes?kT(o,c,h):(La(c),o=er(o,c,h),o!==null?o.sibling:null);La(c);break;case 19:var S=(o.flags&128)!==0;if(y=(h&c.childLanes)!==0,y||(eh(o,c,h,!1),y=(h&c.childLanes)!==0),S){if(y)return qT(o,c,h);c.flags|=128}if(S=c.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),x(Yn,Yn.current),y)break;return null;case 22:case 23:return c.lanes=0,VT(o,c,h);case 24:qr(c,Cn,o.memoizedState.cache)}return er(o,c,h)}function YT(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)ti=!0;else{if(!e_(o,h)&&!(c.flags&128))return ti=!1,uB(o,c,h);ti=!!(o.flags&131072)}else ti=!1,Xe&&c.flags&1048576&&vt(c,fm,c.index);switch(c.lanes=0,c.tag){case 16:t:{o=c.pendingProps;var y=c.elementType,S=y._init;if(y=S(y._payload),c.type=y,typeof y=="function")E_(y)?(o=il(y,o),c.tag=1,c=GT(null,c,y,o,h)):(c.tag=0,c=Wy(null,c,y,o,h));else{if(y!=null){if(S=y.$$typeof,S===D_){c.tag=11,c=zT(null,c,y,o,h);break t}else if(S===O_){c.tag=14,c=BT(null,c,y,o,h);break t}}throw c=r(y)||y,Error(a(306,c,""))}}return c;case 0:return Wy(o,c,c.type,c.pendingProps,h);case 1:return y=c.type,S=il(y,c.pendingProps),GT(o,c,y,S,h);case 3:t:{if(J(c,c.stateNode.containerInfo),o===null)throw Error(a(387));var A=c.pendingProps;S=c.memoizedState,y=S.element,Jt(o,c),Ct(c,A,null,h);var z=c.memoizedState;if(A=z.cache,qr(c,Cn,A),A!==S.cache&&i_(c,[Cn],h,!0),st(),A=z.element,Pa&&S.isDehydrated)if(S={element:A,isDehydrated:!1,cache:z.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=XT(o,c,A,h);break t}else if(A!==y){y=W(Error(a(424)),c),ne(y),c=XT(o,c,A,h);break t}else for(Pa&&(Ei=M4(c.stateNode.containerInfo),Hi=c,Xe=!0,us=null,ws=!0),h=v2(c,null,A,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ue(),A===y){c=er(o,c,h);break t}fi(o,c,A,h)}c=c.child}return c;case 26:if(za)return th(o,c),o===null?(h=o2(c.type,null,c.pendingProps,null))?c.memoizedState=h:Xe||(c.stateNode=I4(c.type,c.pendingProps,to.current,c)):c.memoizedState=o2(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:if(bi)return Yt(c),o===null&&bi&&Xe&&(y=c.stateNode=d2(c.type,c.pendingProps,to.current,hi.current,!1),Hi=c,ws=!0,Ei=a2(y)),y=c.pendingProps.children,o!==null||Xe?fi(o,c,y,h):c.child=hl(c,null,y,h),th(o,c),c.child;case 5:return o===null&&Xe&&(P4(c.type,c.pendingProps,hi.current),(S=y=Ei)&&(y=E4(y,c.type,c.pendingProps,ws),y!==null?(c.stateNode=y,Hi=c,Ei=a2(y),ws=!1,S=!0):S=!1),S||Xt(c)),Yt(c),S=c.type,A=c.pendingProps,z=o!==null?o.memoizedProps:null,y=A.children,rm(S,A)?y=null:z!==null&&rm(S,z)&&(c.flags|=32),c.memoizedState!==null&&(S=Cc(o,c,Hy,null,null,h),sr?ul._currentValue=S:ul._currentValue2=S),th(o,c),fi(o,c,y,h),c.child;case 6:return o===null&&Xe&&(z4(c.pendingProps,hi.current),(o=h=Ei)&&(h=T4(h,c.pendingProps,ws),h!==null?(c.stateNode=h,Hi=c,Ei=null,o=!0):o=!1),o||Xt(c)),null;case 13:return kT(o,c,h);case 4:return J(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=hl(c,null,y,h):fi(o,c,y,h),c.child;case 11:return zT(o,c,c.type,c.pendingProps,h);case 7:return fi(o,c,c.pendingProps,h),c.child;case 8:return fi(o,c,c.pendingProps.children,h),c.child;case 12:return fi(o,c,c.pendingProps.children,h),c.child;case 10:return y=c.pendingProps,qr(c,c.type,y.value),fi(o,c,y.children,h),c.child;case 9:return S=c.type._context,y=c.pendingProps.children,al(c),S=Si(S),y=y(S),c.flags|=1,fi(o,c,y,h),c.child;case 14:return BT(o,c,c.type,c.pendingProps,h);case 15:return IT(o,c,c.type,c.pendingProps,h);case 19:return qT(o,c,h);case 22:return VT(o,c,h);case 24:return al(c),y=Si(Cn),o===null?(S=s_(),S===null&&(S=fn,A=a_(),S.pooledCache=A,A.refCount++,A!==null&&(S.pooledCacheLanes|=h),S=A),c.memoizedState={parent:y,cache:S},Qt(c),qr(c,Cn,S)):(o.lanes&h&&(Jt(o,c),Ct(c,null,null,h),st()),S=o.memoizedState,A=c.memoizedState,S.parent!==y?(S={parent:y,cache:y},c.memoizedState=S,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=S),qr(c,Cn,y)):(y=A.cache,qr(c,Cn,y),y!==S.cache&&i_(c,[Cn],h,!0))),fi(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function qr(o,c,h){sr?(x(_m,c._currentValue),c._currentValue=h):(x(_m,c._currentValue2),c._currentValue2=h)}function nr(o){var c=_m.current;sr?o._currentValue=c:o._currentValue2=c,v(_m)}function n_(o,c,h){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===h)break;o=o.return}}function i_(o,c,h,y){var S=o.child;for(S!==null&&(S.return=o);S!==null;){var A=S.dependencies;if(A!==null){var z=S.child;A=A.firstContext;t:for(;A!==null;){var j=A;A=S;for(var $=0;$<c.length;$++)if(j.context===c[$]){A.lanes|=h,j=A.alternate,j!==null&&(j.lanes|=h),n_(A.return,h,o),y||(z=null);break t}A=j.next}}else if(S.tag===18){if(z=S.return,z===null)throw Error(a(341));z.lanes|=h,A=z.alternate,A!==null&&(A.lanes|=h),n_(z,h,o),z=null}else z=S.child;if(z!==null)z.return=S;else for(z=S;z!==null;){if(z===o){z=null;break}if(S=z.sibling,S!==null){S.return=z.return,z=S;break}z=z.return}S=z}}function eh(o,c,h,y){o=null;for(var S=c,A=!1;S!==null;){if(!A){if(S.flags&524288)A=!0;else if(S.flags&262144)break}if(S.tag===10){var z=S.alternate;if(z===null)throw Error(a(387));if(z=z.memoizedProps,z!==null){var j=S.type;ya(S.pendingProps.value,z.value)||(o!==null?o.push(j):o=[j])}}else if(S===hm.current){if(z=S.alternate,z===null)throw Error(a(387));z.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(o!==null?o.push(ul):o=[ul])}S=S.return}o!==null&&i_(c,o,h,y),c.flags|=262144}function Kp(o){for(o=o.firstContext;o!==null;){var c=o.context;if(!ya(sr?c._currentValue:c._currentValue2,o.memoizedValue))return!0;o=o.next}return!1}function al(o){gl=o,lr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Si(o){return WT(gl,o)}function Qp(o,c){return gl===null&&al(o),WT(o,c)}function WT(o,c){var h=sr?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:h,next:null},lr===null){if(o===null)throw Error(a(308));lr=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else lr=lr.next=c;return h}function a_(){return{controller:new eI,data:new Map,refCount:0}}function nh(o){o.refCount--,o.refCount===0&&nI(iI,function(){o.controller.abort()})}function s_(){var o=vl.current;return o!==null?o:fn.pooledCache}function Jp(o,c){c===null?x(vl,vl.current):x(vl,c.pool)}function ZT(){var o=s_();return o===null?null:{parent:sr?Cn._currentValue:Cn._currentValue2,pool:o}}function fa(o){o.flags|=4}function KT(o,c){if(o!==null&&o.child===c.child)return!1;if(c.flags&16)return!0;for(o=c.child;o!==null;){if(o.flags&13878||o.subtreeFlags&13878)return!0;o=o.sibling}return!1}function r_(o,c,h,y){if(Mi)for(h=c.child;h!==null;){if(h.tag===5||h.tag===6)z_(o,h.stateNode);else if(!(h.tag===4||bi&&h.tag===27)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}else if($r)for(var S=c.child;S!==null;){if(S.tag===5){var A=S.stateNode;h&&y&&(A=e2(A,S.type,S.memoizedProps)),z_(o,A)}else if(S.tag===6)A=S.stateNode,h&&y&&(A=n2(A,S.memoizedProps)),z_(o,A);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)A=S.child,A!==null&&(A.return=S),r_(o,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function QT(o,c,h,y){if($r)for(var S=c.child;S!==null;){if(S.tag===5){var A=S.stateNode;h&&y&&(A=e2(A,S.type,S.memoizedProps)),$A(o,A)}else if(S.tag===6)A=S.stateNode,h&&y&&(A=n2(A,S.memoizedProps)),$A(o,A);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)A=S.child,A!==null&&(A.return=S),QT(o,S,!(S.memoizedProps!==null&&S.memoizedProps.mode==="manual"),!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function JT(o,c){if($r&&KT(o,c)){o=c.stateNode;var h=o.containerInfo,y=JA();QT(y,c,!1,!1),o.pendingChildren=y,fa(c),v4(h,y)}}function o_(o,c,h,y){if(Mi)o.memoizedProps!==y&&fa(c);else if($r){var S=o.stateNode,A=o.memoizedProps;if((o=KT(o,c))||A!==y){var z=hi.current;A=g4(S,h,A,y,!o,null),A===S?c.stateNode=S:(qA(A,h,y,z)&&fa(c),c.stateNode=A,o?r_(A,c,!1,!1):fa(c))}else c.stateNode=S}}function l_(o,c,h){if(kB(c,h)){if(o.flags|=16777216,!ZA(c,h))if(bA())o.flags|=8192;else throw kc=mm,K_}else o.flags&=-16777217}function $T(o,c){if(H4(c)){if(o.flags|=16777216,!h2(c))if(bA())o.flags|=8192;else throw kc=mm,K_}else o.flags&=-16777217}function $p(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?D():536870912,o.lanes|=c,Qc|=c)}function ih(o,c){if(!Xe)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Sn(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,y=0;if(c)for(var S=o.child;S!==null;)h|=S.lanes|S.childLanes,y|=S.subtreeFlags&31457280,y|=S.flags&31457280,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)h|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=y,o.childLanes=h,c}function fB(o,c,h){var y=c.pendingProps;switch(Vt(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(c),null;case 1:return Sn(c),null;case 3:return h=c.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),nr(Cn),yt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(ie(c)?fa(c):o===null||o.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,us!==null&&(__(us),us=null))),JT(o,c),Sn(c),null;case 26:if(za){h=c.type;var S=c.memoizedState;return o===null?(fa(c),S!==null?(Sn(c),$T(c,S)):(Sn(c),l_(c,h,y))):S?S!==o.memoizedState?(fa(c),Sn(c),$T(c,S)):(Sn(c),c.flags&=-16777217):(Mi?o.memoizedProps!==y&&fa(c):o_(o,c,h,y),Sn(c),l_(c,h,y)),null}case 27:if(bi){if(Lt(c),h=to.current,S=c.type,o!==null&&c.stateNode!=null)Mi?o.memoizedProps!==y&&fa(c):o_(o,c,S,y);else{if(!y){if(c.stateNode===null)throw Error(a(166));return Sn(c),null}o=hi.current,ie(c)?he(c,o):(o=d2(S,y,h,o,!0),c.stateNode=o,fa(c))}return Sn(c),null}case 5:if(Lt(c),h=c.type,o!==null&&c.stateNode!=null)o_(o,c,h,y);else{if(!y){if(c.stateNode===null)throw Error(a(166));return Sn(c),null}o=hi.current,ie(c)?he(c,o):(S=BB(h,y,to.current,o,c),r_(S,c,!1,!1),c.stateNode=S,qA(S,h,y,o)&&fa(c))}return Sn(c),l_(c,c.type,c.pendingProps),null;case 6:if(o&&c.stateNode!=null)h=o.memoizedProps,Mi?h!==y&&fa(c):$r&&(h!==y?(c.stateNode=YA(y,to.current,hi.current,c),fa(c)):c.stateNode=o.stateNode);else{if(typeof y!="string"&&c.stateNode===null)throw Error(a(166));if(o=to.current,h=hi.current,ie(c)){if(!Pa)throw Error(a(176));if(o=c.stateNode,h=c.memoizedProps,y=null,S=Hi,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}w4(o,h,c,y)||Xt(c)}else c.stateNode=YA(y,o,h,c)}return Sn(c),null;case 13:if(y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(S=ie(c),y!==null&&y.dehydrated!==null){if(o===null){if(!S)throw Error(a(318));if(!Pa)throw Error(a(344));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(a(317));R4(S,c)}else ue(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;Sn(c),S=!1}else us!==null&&(__(us),us=null),S=!0;if(!S)return c.flags&256?(Zi(c),c):(Zi(c),null)}if(Zi(c),c.flags&128)return c.lanes=h,c;if(h=y!==null,o=o!==null&&o.memoizedState!==null,h){y=c.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var A=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(A=y.memoizedState.cachePool.pool),A!==S&&(y.flags|=2048)}return h!==o&&h&&(c.child.flags|=8192),$p(c,c.updateQueue),Sn(c),null;case 4:return yt(),JT(o,c),o===null&&HB(c.stateNode.containerInfo),Sn(c),null;case 10:return nr(c.type),Sn(c),null;case 19:if(v(Yn),S=c.memoizedState,S===null)return Sn(c),null;if(y=(c.flags&128)!==0,A=S.rendering,A===null)if(y)ih(S,!1);else{if(Rn!==0||o!==null&&o.flags&128)for(o=c.child;o!==null;){if(A=nl(o),A!==null){for(c.flags|=128,ih(S,!1),o=A.updateQueue,c.updateQueue=o,$p(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)OA(h,o),h=h.sibling;return x(Yn,Yn.current&1|2),c.child}o=o.sibling}S.tail!==null&&cs()>yh&&(c.flags|=128,y=!0,ih(S,!1),c.lanes=4194304)}else{if(!y)if(o=nl(A),o!==null){if(c.flags|=128,y=!0,o=o.updateQueue,c.updateQueue=o,$p(c,o),ih(S,!0),S.tail===null&&S.tailMode==="hidden"&&!A.alternate&&!Xe)return Sn(c),null}else 2*cs()-S.renderingStartTime>yh&&h!==536870912&&(c.flags|=128,y=!0,ih(S,!1),c.lanes=4194304);S.isBackwards?(A.sibling=c.child,c.child=A):(o=S.last,o!==null?o.sibling=A:c.child=A,S.last=A)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=cs(),c.sibling=null,o=Yn.current,x(Yn,y?o&1|2:o&1),c):(Sn(c),null);case 22:case 23:return Zi(c),rs(),y=c.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?h&536870912&&!(c.flags&128)&&(Sn(c),c.subtreeFlags&6&&(c.flags|=8192)):Sn(c),h=c.updateQueue,h!==null&&$p(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048),o!==null&&v(vl),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),nr(Cn),Sn(c),null;case 25:return null}throw Error(a(156,c.tag))}function hB(o,c){switch(Vt(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return nr(Cn),yt(),o=c.flags,o&65536&&!(o&128)?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Lt(c),null;case 13:if(Zi(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(a(340));ue()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return v(Yn),null;case 4:return yt(),null;case 10:return nr(c.type),null;case 22:case 23:return Zi(c),rs(),o!==null&&v(vl),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return nr(Cn),null;case 25:return null;default:return null}}function tA(o,c){switch(Vt(c),c.tag){case 3:nr(Cn),yt();break;case 26:case 27:case 5:Lt(c);break;case 4:yt();break;case 13:Zi(c);break;case 19:v(Yn);break;case 10:nr(c.type);break;case 22:case 23:Zi(c),rs(),o!==null&&v(vl);break;case 24:nr(Cn)}}function ah(o,c){try{var h=c.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var S=y.next;h=S;do{if((h.tag&o)===o){y=void 0;var A=h.create,z=h.inst;y=A(),z.destroy=y}h=h.next}while(h!==S)}}catch(j){Qe(c,c.return,j)}}function Yr(o,c,h){try{var y=c.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var A=S.next;y=A;do{if((y.tag&o)===o){var z=y.inst,j=z.destroy;if(j!==void 0){z.destroy=void 0,S=c;var $=h;try{j()}catch(gt){Qe(S,$,gt)}}}y=y.next}while(y!==A)}}catch(gt){Qe(c,c.return,gt)}}function eA(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{Rt(c,h)}catch(y){Qe(o,o.return,y)}}}function nA(o,c,h){h.props=il(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(y){Qe(o,c,y)}}function sl(o,c){try{var h=o.ref;if(h!==null){var y=o.stateNode;switch(o.tag){case 26:case 27:case 5:var S=oh(y);break;default:S=y}typeof h=="function"?o.refCleanup=h(S):h.current=S}}catch(A){Qe(o,c,A)}}function ha(o,c){var h=o.ref,y=o.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(S){Qe(o,c,S)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(S){Qe(o,c,S)}else h.current=null}function iA(o){var c=o.type,h=o.memoizedProps,y=o.stateNode;try{s4(y,c,h,o)}catch(S){Qe(o,o.return,S)}}function aA(o,c,h){try{r4(o.stateNode,o.type,h,c,o)}catch(y){Qe(o,o.return,y)}}function sA(o){return o.tag===5||o.tag===3||(za?o.tag===26:!1)||(bi?o.tag===27:!1)||o.tag===4}function c_(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||sA(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&(!bi||o.tag!==27)&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function u_(o,c,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?l4(h,o,c):i4(h,o);else if(!(y===4||bi&&y===27)&&(o=o.child,o!==null))for(u_(o,c,h),o=o.sibling;o!==null;)u_(o,c,h),o=o.sibling}function tm(o,c,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?o4(h,o,c):n4(h,o);else if(!(y===4||bi&&y===27)&&(o=o.child,o!==null))for(tm(o,c,h),o=o.sibling;o!==null;)tm(o,c,h),o=o.sibling}function rA(o,c,h){o=o.containerInfo;try{t2(o,h)}catch(y){Qe(c,c.return,y)}}function dB(o,c){for(PB(o.containerInfo),ei=c;ei!==null;)if(o=ei,c=o.child,(o.subtreeFlags&1028)!==0&&c!==null)c.return=o,ei=c;else for(;ei!==null;){o=ei;var h=o.alternate;switch(c=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if(c&1024&&h!==null){c=void 0;var y=o,S=h.memoizedProps;h=h.memoizedState;var A=y.stateNode;try{var z=il(y.type,S,y.elementType===y.type);c=A.getSnapshotBeforeUpdate(z,h),A.__reactInternalSnapshotBeforeUpdate=c}catch(j){Qe(y,y.return,j)}}break;case 3:c&1024&&Mi&&m4(o.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(c&1024)throw Error(a(163))}if(c=o.sibling,c!==null){c.return=o.return,ei=c;break}ei=o.return}return z=M2,M2=!1,z}function oA(o,c,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:ir(o,h),y&4&&ah(5,h);break;case 1:if(ir(o,h),y&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(j){Qe(h,h.return,j)}else{var S=il(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(S,c,o.__reactInternalSnapshotBeforeUpdate)}catch(j){Qe(h,h.return,j)}}y&64&&eA(h),y&512&&sl(h,h.return);break;case 3:if(ir(o,h),y&64&&(y=h.updateQueue,y!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=oh(h.child.stateNode);break;case 1:o=h.child.stateNode}try{Rt(y,o)}catch(j){Qe(h,h.return,j)}}break;case 26:if(za){ir(o,h),y&512&&sl(h,h.return);break}case 27:case 5:ir(o,h),c===null&&y&4&&iA(h),y&512&&sl(h,h.return);break;case 12:ir(o,h);break;case 13:ir(o,h),y&4&&cA(o,h);break;case 22:if(S=h.memoizedState!==null||cr,!S){c=c!==null&&c.memoizedState!==null||wn;var A=cr,z=wn;cr=S,(wn=c)&&!z?Wr(o,h,(h.subtreeFlags&8772)!==0):ir(o,h),cr=A,wn=z}y&512&&(h.memoizedProps.mode==="manual"?sl(h,h.return):ha(h,h.return));break;default:ir(o,h)}}function lA(o){var c=o.alternate;c!==null&&(o.alternate=null,lA(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&XB(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function ls(o,c,h){for(h=h.child;h!==null;)f_(o,c,h),h=h.sibling}function f_(o,c,h){if(va&&typeof va.onCommitFiberUnmount=="function")try{va.onCommitFiberUnmount(uh,h)}catch{}switch(h.tag){case 26:if(za){wn||ha(h,c),ls(o,c,h),h.memoizedState?c2(h.memoizedState):h.stateNode&&f2(h.stateNode);break}case 27:if(bi){wn||ha(h,c);var y=Fn,S=_a;Fn=h.stateNode,ls(o,c,h),k4(h.stateNode),Fn=y,_a=S;break}case 5:wn||ha(h,c);case 6:if(Mi){if(y=Fn,S=_a,Fn=null,ls(o,c,h),Fn=y,_a=S,Fn!==null)if(_a)try{u4(Fn,h.stateNode)}catch(A){Qe(h,c,A)}else try{c4(Fn,h.stateNode)}catch(A){Qe(h,c,A)}}else ls(o,c,h);break;case 18:Mi&&Fn!==null&&(_a?L4(Fn,h.stateNode):O4(Fn,h.stateNode));break;case 4:Mi?(y=Fn,S=_a,Fn=h.stateNode.containerInfo,_a=!0,ls(o,c,h),Fn=y,_a=S):($r&&rA(h.stateNode,h,JA()),ls(o,c,h));break;case 0:case 11:case 14:case 15:wn||Yr(2,h,c),wn||Yr(4,h,c),ls(o,c,h);break;case 1:wn||(ha(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"&&nA(h,c,y)),ls(o,c,h);break;case 21:ls(o,c,h);break;case 22:wn||ha(h,c),wn=(y=wn)||h.memoizedState!==null,ls(o,c,h),wn=y;break;default:ls(o,c,h)}}function cA(o,c){if(Pa&&c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{U4(o)}catch(h){Qe(c,c.return,h)}}function pB(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new S2),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new S2),c;default:throw Error(a(435,o.tag))}}function h_(o,c){var h=pB(o);c.forEach(function(y){var S=MB.bind(null,o,y);h.has(y)||(h.add(y),y.then(S,S))})}function Ki(o,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var S=h[y],A=o,z=c;if(Mi){var j=z;t:for(;j!==null;){switch(j.tag){case 27:case 5:Fn=j.stateNode,_a=!1;break t;case 3:Fn=j.stateNode.containerInfo,_a=!0;break t;case 4:Fn=j.stateNode.containerInfo,_a=!0;break t}j=j.return}if(Fn===null)throw Error(a(160));f_(A,z,S),Fn=null,_a=!1}else f_(A,z,S);A=S.alternate,A!==null&&(A.return=null),S.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)uA(c,o),c=c.sibling}function uA(o,c){var h=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ki(c,o),da(o),y&4&&(Yr(3,o,o.return),ah(3,o),Yr(5,o,o.return));break;case 1:Ki(c,o),da(o),y&512&&(wn||h===null||ha(h,h.return)),y&64&&cr&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:if(za){var S=fs;Ki(c,o),da(o),y&512&&(wn||h===null||ha(h,h.return)),y&4&&(y=h!==null?h.memoizedState:null,c=o.memoizedState,h===null?c===null?o.stateNode===null?o.stateNode=B4(S,o.type,o.memoizedProps,o):u2(S,o.type,o.stateNode):o.stateNode=l2(S,c,o.memoizedProps):y!==c?(y===null?h.stateNode!==null&&f2(h.stateNode):c2(y),c===null?u2(S,o.type,o.stateNode):l2(S,c,o.memoizedProps)):c===null&&o.stateNode!==null&&aA(o,o.memoizedProps,h.memoizedProps));break}case 27:if(bi&&y&4&&o.alternate===null){S=o.stateNode;var A=o.memoizedProps;try{G4(S),X4(o.type,A,S,o)}catch(Ot){Qe(o,o.return,Ot)}}case 5:if(Ki(c,o),da(o),y&512&&(wn||h===null||ha(h,h.return)),Mi){if(o.flags&32){c=o.stateNode;try{QA(c)}catch(Ot){Qe(o,o.return,Ot)}}y&4&&o.stateNode!=null&&(c=o.memoizedProps,aA(o,c,h!==null?h.memoizedProps:c)),y&1024&&(tx=!0)}break;case 6:if(Ki(c,o),da(o),y&4&&Mi){if(o.stateNode===null)throw Error(a(162));y=o.memoizedProps,h=h!==null?h.memoizedProps:y,c=o.stateNode;try{a4(c,h,y)}catch(Ot){Qe(o,o.return,Ot)}}break;case 3:if(za?(V4(),S=fs,fs=H_(c.containerInfo),Ki(c,o),fs=S):Ki(c,o),da(o),y&4){if(Mi&&Pa&&h!==null&&h.memoizedState.isDehydrated)try{N4(c.containerInfo)}catch(Ot){Qe(o,o.return,Ot)}if($r){y=c.containerInfo,h=c.pendingChildren;try{t2(y,h)}catch(Ot){Qe(o,o.return,Ot)}}}tx&&(tx=!1,fA(o));break;case 4:za?(h=fs,fs=H_(o.stateNode.containerInfo),Ki(c,o),da(o),fs=h):(Ki(c,o),da(o)),y&4&&$r&&rA(o.stateNode,o,o.stateNode.pendingChildren);break;case 12:Ki(c,o),da(o);break;case 13:Ki(c,o),da(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(ax=cs()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,h_(o,y)));break;case 22:y&512&&(wn||h===null||ha(h,h.return)),S=o.memoizedState!==null;var z=h!==null&&h.memoizedState!==null,j=cr,$=wn;if(cr=j||S,wn=$||z,Ki(c,o),wn=$,cr=j,da(o),c=o.stateNode,c._current=o,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,y&8192&&(c._visibility=S?c._visibility&-2:c._visibility|1,S&&(c=cr||wn,h===null||z||c||wc(o)),Mi&&(o.memoizedProps===null||o.memoizedProps.mode!=="manual"))){t:if(h=null,Mi)for(c=o;;){if(c.tag===5||za&&c.tag===26||bi&&c.tag===27){if(h===null){z=h=c;try{A=z.stateNode,S?f4(A):d4(z.stateNode,z.memoizedProps)}catch(Ot){Qe(z,z.return,Ot)}}}else if(c.tag===6){if(h===null){z=c;try{var gt=z.stateNode;S?h4(gt):p4(gt,z.memoizedProps)}catch(Ot){Qe(z,z.return,Ot)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break t;for(;c.sibling===null;){if(c.return===null||c.return===o)break t;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}y&4&&(y=o.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,h_(o,h))));break;case 19:Ki(c,o),da(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,h_(o,y)));break;case 21:break;default:Ki(c,o),da(o)}}function da(o){var c=o.flags;if(c&2){try{if(Mi&&(!bi||o.tag!==27)){t:{for(var h=o.return;h!==null;){if(sA(h)){var y=h;break t}h=h.return}throw Error(a(160))}switch(y.tag){case 27:if(bi){var S=y.stateNode,A=c_(o);tm(o,A,S);break}case 5:var z=y.stateNode;y.flags&32&&(QA(z),y.flags&=-33);var j=c_(o);tm(o,j,z);break;case 3:case 4:var $=y.stateNode.containerInfo,gt=c_(o);u_(o,gt,$);break;default:throw Error(a(161))}}}catch(Ot){Qe(o,o.return,Ot)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function fA(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;fA(c),c.tag===5&&c.flags&1024&&YB(c.stateNode),o=o.sibling}}function ir(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)oA(o,c.alternate,c),c=c.sibling}function wc(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Yr(4,c,c.return),wc(c);break;case 1:ha(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&nA(c,c.return,h),wc(c);break;case 26:case 27:case 5:ha(c,c.return),wc(c);break;case 22:ha(c,c.return),c.memoizedState===null&&wc(c);break;default:wc(c)}o=o.sibling}}function Wr(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,S=o,A=c,z=A.flags;switch(A.tag){case 0:case 11:case 15:Wr(S,A,h),ah(4,A);break;case 1:if(Wr(S,A,h),y=A,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(gt){Qe(y,y.return,gt)}if(y=A,S=y.updateQueue,S!==null){var j=y.stateNode;try{var $=S.shared.hiddenCallbacks;if($!==null)for(S.shared.hiddenCallbacks=null,S=0;S<$.length;S++)X($[S],j)}catch(gt){Qe(y,y.return,gt)}}h&&z&64&&eA(A),sl(A,A.return);break;case 26:case 27:case 5:Wr(S,A,h),h&&y===null&&z&4&&iA(A),sl(A,A.return);break;case 12:Wr(S,A,h);break;case 13:Wr(S,A,h),h&&z&4&&cA(S,A);break;case 22:A.memoizedState===null&&Wr(S,A,h),sl(A,A.return);break;default:Wr(S,A,h)}c=c.sibling}}function d_(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&nh(h))}function p_(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&nh(o))}function Zr(o,c,h,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)hA(o,c,h,y),c=c.sibling}function hA(o,c,h,y){var S=c.flags;switch(c.tag){case 0:case 11:case 15:Zr(o,c,h,y),S&2048&&ah(9,c);break;case 3:Zr(o,c,h,y),S&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&nh(o)));break;case 12:if(S&2048){Zr(o,c,h,y),o=c.stateNode;try{var A=c.memoizedProps,z=A.id,j=A.onPostCommit;typeof j=="function"&&j(z,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch($){Qe(c,c.return,$)}}else Zr(o,c,h,y);break;case 23:break;case 22:A=c.stateNode,c.memoizedState!==null?A._visibility&4?Zr(o,c,h,y):sh(o,c):A._visibility&4?Zr(o,c,h,y):(A._visibility|=4,Rc(o,c,h,y,(c.subtreeFlags&10256)!==0)),S&2048&&d_(c.alternate,c);break;case 24:Zr(o,c,h,y),S&2048&&p_(c.alternate,c);break;default:Zr(o,c,h,y)}}function Rc(o,c,h,y,S){for(S=S&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var A=o,z=c,j=h,$=y,gt=z.flags;switch(z.tag){case 0:case 11:case 15:Rc(A,z,j,$,S),ah(8,z);break;case 23:break;case 22:var Ot=z.stateNode;z.memoizedState!==null?Ot._visibility&4?Rc(A,z,j,$,S):sh(A,z):(Ot._visibility|=4,Rc(A,z,j,$,S)),S&&gt&2048&&d_(z.alternate,z);break;case 24:Rc(A,z,j,$,S),S&&gt&2048&&p_(z.alternate,z);break;default:Rc(A,z,j,$,S)}c=c.sibling}}function sh(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,y=c,S=y.flags;switch(y.tag){case 22:sh(h,y),S&2048&&d_(y.alternate,y);break;case 24:sh(h,y),S&2048&&p_(y.alternate,y);break;default:sh(h,y)}c=c.sibling}}function rl(o){if(o.subtreeFlags&Zc)for(o=o.child;o!==null;)dA(o),o=o.sibling}function dA(o){switch(o.tag){case 26:rl(o),o.flags&Zc&&(o.memoizedState!==null?F4(fs,o.memoizedState,o.memoizedProps):KA(o.type,o.memoizedProps));break;case 5:rl(o),o.flags&Zc&&KA(o.type,o.memoizedProps);break;case 3:case 4:if(za){var c=fs;fs=H_(o.stateNode.containerInfo),rl(o),fs=c}else rl(o);break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Zc,Zc=16777216,rl(o),Zc=c):rl(o));break;default:rl(o)}}function pA(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function rh(o){var c=o.deletions;if(o.flags&16){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];ei=y,gA(y,o)}pA(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)mA(o),o=o.sibling}function mA(o){switch(o.tag){case 0:case 11:case 15:rh(o),o.flags&2048&&Yr(9,o,o.return);break;case 3:rh(o);break;case 12:rh(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&4&&(o.return===null||o.return.tag!==13)?(c._visibility&=-5,em(o)):rh(o);break;default:rh(o)}}function em(o){var c=o.deletions;if(o.flags&16){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];ei=y,gA(y,o)}pA(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Yr(8,c,c.return),em(c);break;case 22:h=c.stateNode,h._visibility&4&&(h._visibility&=-5,em(c));break;default:em(c)}o=o.sibling}}function gA(o,c){for(;ei!==null;){var h=ei;switch(h.tag){case 0:case 11:case 15:Yr(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:nh(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,ei=y;else t:for(h=o;ei!==null;){y=ei;var S=y.sibling,A=y.return;if(lA(y),y===h){ei=null;break t}if(S!==null){S.return=A,ei=S;break t}ei=A}}}function m_(o){var c=WA(o);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(o=KB(o),o===null)throw Error(a(362));return o.stateNode.current}function g_(o,c){var h=o.tag;switch(c.$$typeof){case xm:if(o.type===c.value)return!0;break;case Sm:t:{for(c=c.value,o=[o,0],h=0;h<o.length;){var y=o[h++],S=y.tag,A=o[h++],z=c[A];if(S!==5&&S!==26&&S!==27||!ch(y)){for(;z!=null&&g_(y,z);)A++,z=c[A];if(A===c.length){c=!0;break t}else for(y=y.child;y!==null;)o.push(y,A),y=y.sibling}}c=!1}return c;case Mm:if((h===5||h===26||h===27)&&$B(o.stateNode,c.value))return!0;break;case Em:if((h===5||h===6||h===26||h===27)&&(o=JB(o),o!==null&&0<=o.indexOf(c.value)))return!0;break;case bm:if((h===5||h===26||h===27)&&(o=o.memoizedProps["data-testname"],typeof o=="string"&&o.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function v_(o){switch(o.$$typeof){case xm:return"<"+(r(o.value)||"Unknown")+">";case Sm:return":has("+(v_(o)||"")+")";case Mm:return'[role="'+o.value+'"]';case Em:return'"'+o.value+'"';case bm:return'[data-testname="'+o.value+'"]';default:throw Error(a(365))}}function vA(o,c){var h=[];o=[o,0];for(var y=0;y<o.length;){var S=o[y++],A=S.tag,z=o[y++],j=c[z];if(A!==5&&A!==26&&A!==27||!ch(S)){for(;j!=null&&g_(S,j);)z++,j=c[z];if(z===c.length)h.push(S);else for(S=S.child;S!==null;)o.push(S,z),S=S.sibling}}return h}function y_(o,c){if(!lh)throw Error(a(363));o=m_(o),o=vA(o,c),c=[],o=Array.from(o);for(var h=0;h<o.length;){var y=o[h++],S=y.tag;if(S===5||S===26||S===27)ch(y)||c.push(y.stateNode);else for(y=y.child;y!==null;)o.push(y),y=y.sibling}return c}function pa(){if(nn&2&&Ie!==0)return Ie&-Ie;if(_e.T!==null){var o=Gc;return o!==0?o:pt()}return FB()}function yA(){Fa===0&&(Fa=!(Ie&536870912)||Xe?U():536870912);var o=Ha.current;return o!==null&&(o.flags|=32),Fa}function Vi(o,c,h){(o===fn&&hn===2||o.cancelPendingCommit!==null)&&(Dc(o,0),ar(o,Ie,Fa,!1)),B(o,h),(!(nn&2)||o!==fn)&&(o===fn&&(!(nn&2)&&(yl|=h),Rn===4&&ar(o,Ie,Fa,!1)),bt(o))}function _A(o,c,h){if(nn&6)throw Error(a(327));var y=!h&&(c&60)===0&&(c&o.expiredLanes)===0||R(o,c),S=y?vB(o,c):M_(o,c,!0),A=y;do{if(S===0){Kc&&!y&&ar(o,c,0,!1);break}else if(S===6)ar(o,c,0,!ur);else{if(h=o.current.alternate,A&&!mB(h)){S=M_(o,c,!1),A=!1;continue}if(S===2){if(A=c,o.errorRecoveryDisabledLanes&A)var z=0;else z=o.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){c=z;t:{var j=o;S=vh;var $=Pa&&j.current.memoizedState.isDehydrated;if($&&(Dc(j,z).flags|=256),z=M_(j,z,!1),z!==2){if(ex&&!$){j.errorRecoveryDisabledLanes|=A,yl|=A,S=4;break t}A=Ns,Ns=S,A!==null&&__(A)}S=z}if(A=!1,S!==2)continue}}if(S===1){Dc(o,0),ar(o,c,0,!0);break}t:{switch(y=o,S){case 0:case 1:throw Error(a(345));case 4:if((c&4194176)===c){ar(y,c,Fa,!ur);break t}break;case 2:Ns=null;break;case 3:case 5:break;default:throw Error(a(329))}if(y.finishedWork=h,y.finishedLanes=c,(c&62914560)===c&&(A=ax+300-cs(),10<A)){if(ar(y,c,Fa,!ur),w(y,0)!==0)break t;y.timeoutHandle=IB(xA.bind(null,y,h,Ns,Tm,ix,c,Fa,yl,Qc,ur,2,-0,0),A);break t}xA(y,h,Ns,Tm,ix,c,Fa,yl,Qc,ur,0,-0,0)}}break}while(!0);bt(o)}function __(o){Ns===null?Ns=o:Ns.push.apply(Ns,o)}function xA(o,c,h,y,S,A,z,j,$,gt,Ot,jt,Wt){var be=c.subtreeFlags;if((be&8192||(be&16785408)===16785408)&&(jB(),dA(c),c=qB(),c!==null)){o.cancelPendingCommit=c(RA.bind(null,o,h,y,S,z,j,$,1,jt,Wt)),ar(o,A,z,!gt);return}RA(o,h,y,S,z,j,$,Ot,jt,Wt)}function mB(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var S=h[y],A=S.getSnapshot;S=S.value;try{if(!ya(A(),S))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ar(o,c,h,y){c&=~nx,c&=~yl,o.suspendedLanes|=c,o.pingedLanes&=~c,y&&(o.warmLanes|=c),y=o.expirationTimes;for(var S=c;0<S;){var A=31-ga(S),z=1<<A;y[A]=-1,S&=~z}h!==0&&q(o,h,c)}function SA(){return nn&6?!0:(Ht(0),!1)}function x_(){if(Oe!==null){if(hn===0)var o=Oe.return;else o=Oe,lr=gl=null,Jf(o),jc=null,ph=0,o=Oe;for(;o!==null;)tA(o.alternate,o),o=o.return;Oe=null}}function Dc(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;h!==B_&&(o.timeoutHandle=B_,VB(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),x_(),fn=o,Oe=h=Kr(o.current,null),Ie=c,hn=0,xa=null,ur=!1,Kc=R(o,c),ex=!1,Qc=Fa=nx=yl=ao=Rn=0,Ns=vh=null,ix=!1,c&8&&(c|=c&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=c;0<y;){var S=31-ga(y),A=1<<S;c|=o[S],y&=~A}return fr=c,I(),h}function MA(o,c){Re=null,_e.H=Ds,c===dh?(c=kt(),hn=3):c===K_?(c=kt(),hn=4):hn=c===_2?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,xa=c,Oe===null&&(Rn=1,Zp(o,W(c,o.current)))}function bA(){var o=Ha.current;return o===null?!0:(Ie&4194176)===Ie?Rs===null:(Ie&62914560)===Ie||Ie&536870912?o===Rs:!1}function EA(){var o=_e.H;return _e.H=Ds,o===null?Ds:o}function TA(){var o=_e.A;return _e.A=aI,o}function S_(){Rn=4,ur||(Ie&4194176)!==Ie&&Ha.current!==null||(Kc=!0),!(ao&134217727)&&!(yl&134217727)||fn===null||ar(fn,Ie,Fa,!1)}function M_(o,c,h){var y=nn;nn|=2;var S=EA(),A=TA();(fn!==o||Ie!==c)&&(Tm=null,Dc(o,c)),c=!1;var z=Rn;t:do try{if(hn!==0&&Oe!==null){var j=Oe,$=xa;switch(hn){case 8:x_(),z=6;break t;case 3:case 2:case 6:Ha.current===null&&(c=!0);var gt=hn;if(hn=0,xa=null,Nc(o,j,$,gt),h&&Kc){z=0;break t}break;default:gt=hn,hn=0,xa=null,Nc(o,j,$,gt)}}gB(),z=Rn;break}catch(Ot){MA(o,Ot)}while(!0);return c&&o.shellSuspendCounter++,lr=gl=null,nn=y,_e.H=S,_e.A=A,Oe===null&&(fn=null,Ie=0,I()),z}function gB(){for(;Oe!==null;)AA(Oe)}function vB(o,c){var h=nn;nn|=2;var y=EA(),S=TA();fn!==o||Ie!==c?(Tm=null,yh=cs()+500,Dc(o,c)):Kc=R(o,c);t:do try{if(hn!==0&&Oe!==null){c=Oe;var A=xa;e:switch(hn){case 1:hn=0,xa=null,Nc(o,c,A,1);break;case 2:if(Gt(A)){hn=0,xa=null,CA(c);break}c=function(){hn===2&&fn===o&&(hn=7),bt(o)},A.then(c,c);break t;case 3:hn=7;break t;case 4:hn=5;break t;case 7:Gt(A)?(hn=0,xa=null,CA(c)):(hn=0,xa=null,Nc(o,c,A,7));break;case 5:var z=null;switch(Oe.tag){case 26:z=Oe.memoizedState;case 5:case 27:var j=Oe,$=j.type,gt=j.pendingProps;if(z?h2(z):ZA($,gt)){hn=0,xa=null;var Ot=j.sibling;if(Ot!==null)Oe=Ot;else{var jt=j.return;jt!==null?(Oe=jt,nm(jt)):Oe=null}break e}}hn=0,xa=null,Nc(o,c,A,5);break;case 6:hn=0,xa=null,Nc(o,c,A,6);break;case 8:x_(),Rn=6;break t;default:throw Error(a(462))}}yB();break}catch(Wt){MA(o,Wt)}while(!0);return lr=gl=null,_e.H=y,_e.A=S,nn=h,Oe!==null?0:(fn=null,Ie=0,I(),Rn)}function yB(){for(;Oe!==null&&!Y4();)AA(Oe)}function AA(o){var c=YT(o.alternate,o,fr);o.memoizedProps=o.pendingProps,c===null?nm(o):Oe=c}function CA(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=FT(h,c,c.pendingProps,c.type,void 0,Ie);break;case 11:c=FT(h,c,c.pendingProps,c.type.render,c.ref,Ie);break;case 5:Jf(c);default:tA(h,c),c=Oe=OA(c,fr),c=YT(h,c,fr)}o.memoizedProps=o.pendingProps,c===null?nm(o):Oe=c}function Nc(o,c,h,y){lr=gl=null,Jf(c),jc=null,ph=0;var S=c.return;try{if(cB(o,S,c,h,Ie)){Rn=1,Zp(o,W(h,o.current)),Oe=null;return}}catch(A){if(S!==null)throw Oe=S,A;Rn=1,Zp(o,W(h,o.current)),Oe=null;return}c.flags&32768?(Xe||y===1?o=!0:Kc||Ie&536870912?o=!1:(ur=o=!0,(y===2||y===3||y===6)&&(y=Ha.current,y!==null&&y.tag===13&&(y.flags|=16384))),wA(c,o)):nm(c)}function nm(o){var c=o;do{if(c.flags&32768){wA(c,ur);return}o=c.return;var h=fB(c.alternate,c,fr);if(h!==null){Oe=h;return}if(c=c.sibling,c!==null){Oe=c;return}Oe=c=o}while(c!==null);Rn===0&&(Rn=5)}function wA(o,c){do{var h=hB(o.alternate,o);if(h!==null){h.flags&=32767,Oe=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){Oe=o;return}Oe=o=h}while(o!==null);Rn=6,Oe=null}function RA(o,c,h,y,S,A,z,j,$,gt){var Ot=_e.T,jt=cl();try{Qi(2),_e.T=null,_B(o,c,h,y,jt,S,A,z,j,$,gt)}finally{_e.T=Ot,Qi(jt)}}function _B(o,c,h,y,S,A,z,j){do ol();while(_l!==null);if(nn&6)throw Error(a(327));var $=o.finishedWork;if(y=o.finishedLanes,$===null)return null;if(o.finishedWork=null,o.finishedLanes=0,$===o.current)throw Error(a(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var gt=$.lanes|$.childLanes;if(gt|=j_,Z(o,y,gt,A,z,j),o===fn&&(Oe=fn=null,Ie=0),!($.subtreeFlags&10256)&&!($.flags&10256)||Am||(Am=!0,sx=gt,rx=h,bB(X_,function(){return ol(),null})),h=($.flags&15990)!==0,$.subtreeFlags&15990||h?(h=_e.T,_e.T=null,A=cl(),Qi(2),z=nn,nn|=4,dB(o,$),uA($,o),zB(o.containerInfo),o.current=$,oA(o,$.alternate,$),W4(),nn=z,Qi(A),_e.T=h):o.current=$,Am?(Am=!1,_l=o,_h=y):DA(o,gt),gt=o.pendingLanes,gt===0&&(so=null),L($.stateNode),bt(o),c!==null)for(S=o.onRecoverableError,$=0;$<c.length;$++)gt=c[$],S(gt.value,{componentStack:gt.stack});return _h&3&&ol(),gt=o.pendingLanes,y&4194218&&gt&42?o===ox?xh++:(xh=0,ox=o):xh=0,Ht(0),null}function DA(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,nh(c)))}function ol(){if(_l!==null){var o=_l,c=sx;sx=0;var h=et(_h),y=32>h?32:h;h=_e.T;var S=cl();try{if(Qi(y),_e.T=null,_l===null)var A=!1;else{y=rx,rx=null;var z=_l,j=_h;if(_l=null,_h=0,nn&6)throw Error(a(331));var $=nn;if(nn|=4,mA(z.current),hA(z,z.current,j,y),nn=$,Ht(0,!1),va&&typeof va.onPostCommitFiberRoot=="function")try{va.onPostCommitFiberRoot(uh,z)}catch{}A=!0}return A}finally{Qi(S),_e.T=h,DA(o,c)}}return!1}function NA(o,c,h){c=W(h,c),c=Yy(o.stateNode,c,2),o=Bt(o,c,2),o!==null&&(B(o,2),bt(o))}function Qe(o,c,h){if(o.tag===3)NA(o,o,h);else for(;c!==null;){if(c.tag===3){NA(c,o,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(so===null||!so.has(y))){o=W(h,o),h=LT(2),y=Bt(c,h,2),y!==null&&(PT(h,y,c,o),B(y,2),bt(y));break}}c=c.return}}function b_(o,c,h){var y=o.pingCache;if(y===null){y=o.pingCache=new sI;var S=new Set;y.set(c,S)}else S=y.get(c),S===void 0&&(S=new Set,y.set(c,S));S.has(h)||(ex=!0,S.add(h),o=xB.bind(null,o,c,h),c.then(o,o))}function xB(o,c,h){var y=o.pingCache;y!==null&&y.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,fn===o&&(Ie&h)===h&&(Rn===4||Rn===3&&(Ie&62914560)===Ie&&300>cs()-ax?!(nn&2)&&Dc(o,0):nx|=h,Qc===Ie&&(Qc=0)),bt(o)}function UA(o,c){c===0&&(c=D()),o=Tt(o,c),o!==null&&(B(o,c),bt(o))}function SB(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),UA(o,h)}function MB(o,c){var h=0;switch(o.tag){case 13:var y=o.stateNode,S=o.memoizedState;S!==null&&(h=S.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(a(314))}y!==null&&y.delete(c),UA(o,h)}function bB(o,c){return cm(o,c)}function EB(o,c,h,y){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function E_(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Kr(o,c){var h=o.alternate;return h===null?(h=e(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&31457280,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function OA(o,c){o.flags&=31457282;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function im(o,c,h,y,S,A){var z=0;if(y=o,typeof o=="function")E_(o)&&(z=1);else if(typeof o=="string")z=za&&bi?r2(o,h,hi.current)?26:p2(o)?27:5:za?r2(o,h,hi.current)?26:5:bi&&p2(o)?27:5;else t:switch(o){case Oc:return ll(h.children,S,A,c);case HA:z=8,S|=24;break;case R_:return o=e(12,h,c,S|2),o.elementType=R_,o.lanes=A,o;case N_:return o=e(13,h,c,S),o.elementType=N_,o.lanes=A,o;case U_:return o=e(19,h,c,S),o.elementType=U_,o.lanes=A,o;case GA:return LA(h,S,A,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case wB:case Qr:z=10;break t;case FA:z=9;break t;case D_:z=11;break t;case O_:z=14;break t;case Jr:z=16,y=null;break t}z=29,h=Error(a(130,o===null?"null":typeof o,"")),y=null}return c=e(z,h,c,S),c.elementType=o,c.type=y,c.lanes=A,c}function ll(o,c,h,y){return o=e(7,o,y,c),o.lanes=h,o}function LA(o,c,h,y){o=e(22,o,y,c),o.elementType=GA,o.lanes=h;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var A=S._current;if(A===null)throw Error(a(456));if(!(S._pendingVisibility&2)){var z=Tt(A,2);z!==null&&(S._pendingVisibility|=2,Vi(z,A,2))}},attach:function(){var A=S._current;if(A===null)throw Error(a(456));if(S._pendingVisibility&2){var z=Tt(A,2);z!==null&&(S._pendingVisibility&=-3,Vi(z,A,2))}}};return o.stateNode=S,o}function T_(o,c,h){return o=e(6,o,null,c),o.lanes=h,o}function A_(o,c,h){return c=e(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function TB(o,c,h,y,S,A,z,j){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=B_,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C(0),this.hiddenUpdates=C(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=A,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function PA(o,c,h,y,S,A,z,j,$,gt,Ot,jt){return o=new TB(o,c,h,z,j,$,gt,jt),c=1,A===!0&&(c|=24),A=e(3,null,null,c),o.current=A,A.stateNode=o,c=a_(),c.refCount++,o.pooledCache=c,c.refCount++,A.memoizedState={element:y,isDehydrated:h,cache:c},Qt(A),o}function zA(o){return o?(o=zc,o):zc}function BA(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=g(c),o=o!==null?_(o):null,o===null?null:oh(o.stateNode)}function IA(o,c,h,y,S,A){S=zA(S),y.context===null?y.context=S:y.pendingContext=S,y=xt(c),y.payload={element:h},A=A===void 0?null:A,A!==null&&(y.callback=A),h=Bt(o,y,c),h!==null&&(Vi(h,o,c),ae(h,o,c))}function VA(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function C_(o,c){VA(o,c),(o=o.alternate)&&VA(o,c)}var Ue={},AB=tt,ma=Xk(),w_=Object.assign,CB=Symbol.for("react.element"),am=Symbol.for("react.transitional.element"),Uc=Symbol.for("react.portal"),Oc=Symbol.for("react.fragment"),HA=Symbol.for("react.strict_mode"),R_=Symbol.for("react.profiler"),wB=Symbol.for("react.provider"),FA=Symbol.for("react.consumer"),Qr=Symbol.for("react.context"),D_=Symbol.for("react.forward_ref"),N_=Symbol.for("react.suspense"),U_=Symbol.for("react.suspense_list"),O_=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),GA=Symbol.for("react.offscreen"),RB=Symbol.for("react.memo_cache_sentinel"),XA=Symbol.iterator,DB=Symbol.for("react.client.reference"),_e=AB.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L_,kA,P_=!1,sm=Array.isArray,NB=t.rendererVersion,UB=t.rendererPackageName,jA=t.extraDevToolsConfig,oh=t.getPublicInstance,OB=t.getRootHostContext,LB=t.getChildHostContext,PB=t.prepareForCommit,zB=t.resetAfterCommit,BB=t.createInstance,z_=t.appendInitialChild,qA=t.finalizeInitialChildren,rm=t.shouldSetTextContent,YA=t.createTextInstance,IB=t.scheduleTimeout,VB=t.cancelTimeout,B_=t.noTimeout,sr=t.isPrimaryRenderer;t.warnsIfNotActing;var Mi=t.supportsMutation,$r=t.supportsPersistence,Pa=t.supportsHydration,WA=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var HB=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Qi=t.setCurrentUpdatePriority,cl=t.getCurrentUpdatePriority,FB=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var GB=t.shouldAttemptEagerTransition,XB=t.detachDeletedInstance;t.requestPostPaintCallback;var kB=t.maySuspendCommit,ZA=t.preloadInstance,jB=t.startSuspendingCommit,KA=t.suspendInstance,qB=t.waitForCommitToBeReady,Lc=t.NotPendingTransition,ul=t.HostTransitionContext,YB=t.resetFormInstance;t.bindToConsole;var WB=t.supportsMicrotasks,ZB=t.scheduleMicrotask,lh=t.supportsTestSelectors,KB=t.findFiberRoot,QB=t.getBoundingRect,JB=t.getTextContent,ch=t.isHiddenSubtree,$B=t.matchAccessibilityRole,t4=t.setFocusIfFocusable,e4=t.setupIntersectionObserver,n4=t.appendChild,i4=t.appendChildToContainer,a4=t.commitTextUpdate,s4=t.commitMount,r4=t.commitUpdate,o4=t.insertBefore,l4=t.insertInContainerBefore,c4=t.removeChild,u4=t.removeChildFromContainer,QA=t.resetTextContent,f4=t.hideInstance,h4=t.hideTextInstance,d4=t.unhideInstance,p4=t.unhideTextInstance,m4=t.clearContainer,g4=t.cloneInstance,JA=t.createContainerChildSet,$A=t.appendChildToContainerChildSet,v4=t.finalizeContainerChildren,t2=t.replaceContainerChildren,e2=t.cloneHiddenInstance,n2=t.cloneHiddenTextInstance,I_=t.isSuspenseInstancePending,V_=t.isSuspenseInstanceFallback,y4=t.getSuspenseInstanceFallbackErrorDetails,_4=t.registerSuspenseInstanceRetry,x4=t.canHydrateFormStateMarker,S4=t.isFormStateMarkerMatching,i2=t.getNextHydratableSibling,a2=t.getFirstHydratableChild,M4=t.getFirstHydratableChildWithinContainer,b4=t.getFirstHydratableChildWithinSuspenseInstance,E4=t.canHydrateInstance,T4=t.canHydrateTextInstance,A4=t.canHydrateSuspenseInstance,C4=t.hydrateInstance,w4=t.hydrateTextInstance,R4=t.hydrateSuspenseInstance,D4=t.getNextHydratableInstanceAfterSuspenseInstance,N4=t.commitHydratedContainer,U4=t.commitHydratedSuspenseInstance,O4=t.clearSuspenseBoundary,L4=t.clearSuspenseBoundaryFromContainer,s2=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var P4=t.validateHydratableInstance,z4=t.validateHydratableTextInstance,za=t.supportsResources,r2=t.isHostHoistableType,H_=t.getHoistableRoot,o2=t.getResource,l2=t.acquireResource,c2=t.releaseResource,B4=t.hydrateHoistable,u2=t.mountHoistable,f2=t.unmountHoistable,I4=t.createHoistableInstance,V4=t.prepareToCommitHoistables,H4=t.mayResourceSuspendCommit,h2=t.preloadResource,F4=t.suspendResource,bi=t.supportsSingletons,d2=t.resolveSingletonInstance,G4=t.clearSingleton,X4=t.acquireSingletonInstance,k4=t.releaseSingletonInstance,p2=t.isHostSingletonType,F_=[],Pc=-1,zc={},ga=Math.clz32?Math.clz32:b,j4=Math.log,q4=Math.LN2,om=128,lm=4194304,cm=ma.unstable_scheduleCallback,G_=ma.unstable_cancelCallback,Y4=ma.unstable_shouldYield,W4=ma.unstable_requestPaint,cs=ma.unstable_now,m2=ma.unstable_ImmediatePriority,Z4=ma.unstable_UserBlockingPriority,X_=ma.unstable_NormalPriority,K4=ma.unstable_IdlePriority,Q4=ma.log,J4=ma.unstable_setDisableYieldValue,uh=null,va=null,ya=typeof Object.is=="function"?Object.is:H,g2=new WeakMap,Bc=[],Ic=0,um=null,fm=0,Ba=[],Ia=0,fl=null,rr=1,or="",hi=M(null),fh=M(null),to=M(null),hm=M(null),Hi=null,Ei=null,Xe=!1,us=null,ws=!1,k_=Error(a(519)),Va=[],Vc=0,j_=0,dm=null,Hc=null,q_=!1,pm=!1,Y_=!1,Fc=0,hh=null,W_=0,Gc=0,Xc=null,eo=!1,Z_=!1,$4=Object.prototype.hasOwnProperty,dh=Error(a(460)),K_=Error(a(474)),mm={then:function(){}},kc=null,jc=null,ph=0,hl=li(!0),v2=li(!1),qc=M(null),gm=M(0),Ha=M(null),Rs=null,Yn=M(0),no=0,Re=null,en=null,Hn=null,vm=!1,Yc=!1,dl=!1,ym=0,mh=0,Wc=null,tI=0,Q_=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ds={readContext:Si,use:ct,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn};Ds.useCacheRefresh=cn,Ds.useMemoCache=cn,Ds.useHostTransitionStatus=cn,Ds.useFormState=cn,Ds.useActionState=cn,Ds.useOptimistic=cn;var pl={readContext:Si,use:ct,useCallback:function(o,c){return P().memoizedState=[o,c===void 0?null:c],o},useContext:Si,useEffect:gT,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,qp(4194308,4,_T.bind(null,c,o),h)},useLayoutEffect:function(o,c){return qp(4194308,4,o,c)},useInsertionEffect:function(o,c){qp(4,2,o,c)},useMemo:function(o,c){var h=P();c=c===void 0?null:c;var y=o();if(dl){G(!0);try{o()}finally{G(!1)}}return h.memoizedState=[y,c],y},useReducer:function(o,c,h){var y=P();if(h!==void 0){var S=h(c);if(dl){G(!0);try{h(c)}finally{G(!1)}}}else S=c;return y.memoizedState=y.baseState=S,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:S},y.queue=o,o=o.dispatch=lB.bind(null,Re,o),[y.memoizedState,o]},useRef:function(o){var c=P();return o={current:o},c.memoizedState=o},useState:function(o){o=Ke(o);var c=o.queue,h=wT.bind(null,Re,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:Gy,useDeferredValue:function(o,c){var h=P();return Xy(h,o,c)},useTransition:function(){var o=Ke(!1);return o=ET.bind(null,Re,o.queue,!0,!1),P().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var y=Re,S=P();if(Xe){if(h===void 0)throw Error(a(407));h=h()}else{if(h=c(),fn===null)throw Error(a(349));Ie&60||me(y,c,h)}S.memoizedState=h;var A={value:h,getSnapshot:c};return S.queue=A,gT(we.bind(null,y,A,o),[o]),y.flags|=2048,As(9,re.bind(null,y,A,h,c),{destroy:void 0},null),h},useId:function(){var o=P(),c=fn.identifierPrefix;if(Xe){var h=or,y=rr;h=(y&~(1<<32-ga(y)-1)).toString(32)+h,c=":"+c+"R"+h,h=ym++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=tI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},useCacheRefresh:function(){return P().memoizedState=oB.bind(null,Re)}};pl.useMemoCache=K,pl.useHostTransitionStatus=ky,pl.useFormState=on,pl.useActionState=on,pl.useOptimistic=function(o){var c=P();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=jy.bind(null,Re,!0,h),h.dispatch=c,[o,c]};var io={readContext:Si,use:ct,useCallback:ST,useContext:Si,useEffect:Fy,useImperativeHandle:xT,useInsertionEffect:vT,useLayoutEffect:yT,useMemo:MT,useReducer:It,useRef:Cs,useState:function(){return It(At)},useDebugValue:Gy,useDeferredValue:function(o,c){var h=Y();return bT(h,en.memoizedState,o,c)},useTransition:function(){var o=It(At)[0],c=Y().memoizedState;return[typeof o=="boolean"?o:lt(o),c]},useSyncExternalStore:de,useId:AT};io.useCacheRefresh=CT,io.useMemoCache=K,io.useHostTransitionStatus=ky,io.useFormState=Bi,io.useActionState=Bi,io.useOptimistic=function(o,c){var h=Y();return Ze(h,en,o,c)};var ml={readContext:Si,use:ct,useCallback:ST,useContext:Si,useEffect:Fy,useImperativeHandle:xT,useInsertionEffect:vT,useLayoutEffect:yT,useMemo:MT,useReducer:Kt,useRef:Cs,useState:function(){return Kt(At)},useDebugValue:Gy,useDeferredValue:function(o,c){var h=Y();return en===null?Xy(h,o,c):bT(h,en.memoizedState,o,c)},useTransition:function(){var o=Kt(At)[0],c=Y().memoizedState;return[typeof o=="boolean"?o:lt(o),c]},useSyncExternalStore:de,useId:AT};ml.useCacheRefresh=CT,ml.useMemoCache=K,ml.useHostTransitionStatus=ky,ml.useFormState=ui,ml.useActionState=ui,ml.useOptimistic=function(o,c){var h=Y();return en!==null?Ze(h,en,o,c):(h.baseState=o,[o,h.queue.dispatch])};var J_={isMounted:function(o){return(o=o._reactInternals)?p(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var y=pa(),S=xt(y);S.payload=c,h!=null&&(S.callback=h),c=Bt(o,S,y),c!==null&&(Vi(c,o,y),ae(c,o,y))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var y=pa(),S=xt(y);S.tag=1,S.payload=c,h!=null&&(S.callback=h),c=Bt(o,S,y),c!==null&&(Vi(c,o,y),ae(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=pa(),y=xt(h);y.tag=2,c!=null&&(y.callback=c),c=Bt(o,y,h),c!==null&&(Vi(c,o,h),ae(c,o,h))}},y2=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},_2=Error(a(461)),ti=!1,$_={dehydrated:null,treeContext:null,retryLane:0},_m=M(null),gl=null,lr=null,eI=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,y){o.push(y)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},nI=ma.unstable_scheduleCallback,iI=ma.unstable_NormalPriority,Cn={$$typeof:Qr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},x2=_e.S;_e.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&ht(o,c),x2!==null&&x2(o,c)};var vl=M(null),cr=!1,wn=!1,tx=!1,S2=typeof WeakSet=="function"?WeakSet:Set,ei=null,M2=!1,Fn=null,_a=!1,fs=null,Zc=8192,aI={getCacheForType:function(o){var c=Si(Cn),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h}},xm=0,Sm=1,Mm=2,bm=3,Em=4;if(typeof Symbol=="function"&&Symbol.for){var gh=Symbol.for;xm=gh("selector.component"),Sm=gh("selector.has_pseudo_class"),Mm=gh("selector.role"),bm=gh("selector.test_id"),Em=gh("selector.text")}var sI=typeof WeakMap=="function"?WeakMap:Map,nn=0,fn=null,Oe=null,Ie=0,hn=0,xa=null,ur=!1,Kc=!1,ex=!1,fr=0,Rn=0,ao=0,yl=0,nx=0,Fa=0,Qc=0,vh=null,Ns=null,ix=!1,ax=0,yh=1/0,Tm=null,so=null,Am=!1,_l=null,_h=0,sx=0,rx=null,xh=0,ox=null;return Ue.attemptContinuousHydration=function(o){if(o.tag===13){var c=Tt(o,67108864);c!==null&&Vi(c,o,67108864),C_(o,67108864)}},Ue.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13){var c=pa(),h=Tt(o,c);h!==null&&Vi(h,o,c),C_(o,c)}},Ue.attemptSynchronousHydration=function(o){switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var c=T(o.pendingLanes);if(c!==0){for(o.pendingLanes|=2,o.entangledLanes|=2;c;){var h=1<<31-ga(c);o.entanglements[1]|=h,c&=~h}bt(o),!(nn&6)&&(yh=cs()+500,Ht(0))}}break;case 13:c=Tt(o,2),c!==null&&Vi(c,o,2),SA(),C_(o,2)}},Ue.batchedUpdates=function(o,c){return o(c)},Ue.createComponentSelector=function(o){return{$$typeof:xm,value:o}},Ue.createContainer=function(o,c,h,y,S,A,z,j,$,gt){return PA(o,c,!1,null,h,y,A,z,j,$,gt,null)},Ue.createHasPseudoClassSelector=function(o){return{$$typeof:Sm,value:o}},Ue.createHydrationContainer=function(o,c,h,y,S,A,z,j,$,gt,Ot,jt,Wt){return o=PA(h,y,!0,o,S,A,j,$,gt,Ot,jt,Wt),o.context=zA(null),h=o.current,y=pa(),S=xt(y),S.callback=c??null,Bt(h,S,y),o.current.lanes=y,B(o,y),bt(o),o},Ue.createPortal=function(o,c,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uc,key:y==null?null:""+y,children:o,containerInfo:c,implementation:h}},Ue.createRoleSelector=function(o){return{$$typeof:Mm,value:o}},Ue.createTestNameSelector=function(o){return{$$typeof:bm,value:o}},Ue.createTextSelector=function(o){return{$$typeof:Em,value:o}},Ue.defaultOnCaughtError=function(o){console.error(o)},Ue.defaultOnRecoverableError=function(o){y2(o)},Ue.defaultOnUncaughtError=function(o){y2(o)},Ue.deferredUpdates=function(o){var c=_e.T,h=cl();try{return Qi(32),_e.T=null,o()}finally{Qi(h),_e.T=c}},Ue.discreteUpdates=function(o,c,h,y,S){var A=_e.T,z=cl();try{return Qi(2),_e.T=null,o(c,h,y,S)}finally{Qi(z),_e.T=A,nn===0&&(yh=cs()+500)}},Ue.findAllNodes=y_,Ue.findBoundingRects=function(o,c){if(!lh)throw Error(a(363));c=y_(o,c),o=[];for(var h=0;h<c.length;h++)o.push(QB(c[h]));for(c=o.length-1;0<c;c--){h=o[c];for(var y=h.x,S=y+h.width,A=h.y,z=A+h.height,j=c-1;0<=j;j--)if(c!==j){var $=o[j],gt=$.x,Ot=gt+$.width,jt=$.y,Wt=jt+$.height;if(y>=gt&&A>=jt&&S<=Ot&&z<=Wt){o.splice(c,1);break}else if(y!==gt||h.width!==$.width||Wt<A||jt>z){if(!(A!==jt||h.height!==$.height||Ot<y||gt>S)){gt>y&&($.width+=gt-y,$.x=y),Ot<S&&($.width=S-gt),o.splice(c,1);break}}else{jt>A&&($.height+=jt-A,$.y=A),Wt<z&&($.height=z-jt),o.splice(c,1);break}}}return o},Ue.findHostInstance=BA,Ue.findHostInstanceWithNoPortals=function(o){return o=g(o),o=o!==null?E(o):null,o===null?null:oh(o.stateNode)},Ue.findHostInstanceWithWarning=function(o){return BA(o)},Ue.flushPassiveEffects=ol,Ue.flushSyncFromReconciler=function(o){var c=nn;nn|=1;var h=_e.T,y=cl();try{if(Qi(2),_e.T=null,o)return o()}finally{Qi(y),_e.T=h,nn=c,!(nn&6)&&Ht(0)}},Ue.flushSyncWork=SA,Ue.focusWithin=function(o,c){if(!lh)throw Error(a(363));for(o=m_(o),c=vA(o,c),c=Array.from(c),o=0;o<c.length;){var h=c[o++],y=h.tag;if(!ch(h)){if((y===5||y===26||y===27)&&t4(h.stateNode))return!0;for(h=h.child;h!==null;)c.push(h),h=h.sibling}}return!1},Ue.getFindAllNodesFailureDescription=function(o,c){if(!lh)throw Error(a(363));var h=0,y=[];o=[m_(o),0];for(var S=0;S<o.length;){var A=o[S++],z=A.tag,j=o[S++],$=c[j];if((z!==5&&z!==26&&z!==27||!ch(A))&&(g_(A,$)&&(y.push(v_($)),j++,j>h&&(h=j)),j<c.length))for(A=A.child;A!==null;)o.push(A,j),A=A.sibling}if(h<c.length){for(o=[];h<c.length;h++)o.push(v_(c[h]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+o.join(" > ")}return null},Ue.getPublicRootInstance=function(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 27:case 5:return oh(o.child.stateNode);default:return o.child.stateNode}},Ue.injectIntoDevTools=function(){var o={bundleType:0,version:NB,rendererPackageName:UB,currentDispatcherRef:_e,findFiberByHostInstance:WA,reconcilerVersion:"19.0.0"};if(jA!==null&&(o.rendererConfig=jA),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)o=!0;else{try{uh=c.inject(o),va=c}catch{}o=!!c.checkDCE}}return o},Ue.isAlreadyRendering=function(){return!1},Ue.observeVisibleRects=function(o,c,h,y){if(!lh)throw Error(a(363));o=y_(o,c);var S=e4(o,h,y).disconnect;return{disconnect:function(){S()}}},Ue.shouldError=function(){return null},Ue.shouldSuspend=function(){return!1},Ue.startHostTransition=function(o,c,h,y){if(o.tag!==5)throw Error(a(476));var S=TT(o).queue;ET(o,S,c,Lc,h===null?i:function(){var A=TT(o).next.queue;return $f(o,A,{},pa()),h(y)})},Ue.updateContainer=function(o,c,h,y){var S=c.current,A=pa();return IA(S,A,o,c,h,y),A},Ue.updateContainerSync=function(o,c,h,y){return c.tag===0&&ol(),IA(c.current,2,o,c,h,y),2},Ue},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(oP);var kk=oP.exports;rP.exports=kk;var jk=rP.exports;const qk=jM(jk);var lP={exports:{}},cP={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(L,G){var H=L.length;L.push(G);t:for(;0<H;){var W=H-1>>>1,rt=L[W];if(0<a(rt,G))L[W]=G,L[H]=rt,H=W;else break t}}function e(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var G=L[0],H=L.pop();if(H!==G){L[0]=H;t:for(var W=0,rt=L.length,vt=rt>>>1;W<vt;){var Dt=2*(W+1)-1,Vt=L[Dt],J=Dt+1,yt=L[J];if(0>a(Vt,H))J<rt&&0>a(yt,Vt)?(L[W]=yt,L[J]=H,W=J):(L[W]=Vt,L[Dt]=H,W=Dt);else if(J<rt&&0>a(yt,H))L[W]=yt,L[J]=H,W=J;else break t}}return G}function a(L,G){var H=L.sortIndex-G.sortIndex;return H!==0?H:L.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();n.unstable_now=function(){return r.now()-l}}var u=[],f=[],d=1,p=null,m=3,g=!1,_=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function b(L){for(var G=e(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=L)i(f),G.sortIndex=G.expirationTime,t(u,G);else break;G=e(f)}}function T(L){if(E=!1,b(L),!_)if(e(u)!==null)_=!0,it();else{var G=e(f);G!==null&&et(T,G.startTime-L)}}var w=!1,R=-1,N=5,U=-1;function D(){return!(n.unstable_now()-U<N)}function C(){if(w){var L=n.unstable_now();U=L;var G=!0;try{t:{_=!1,E&&(E=!1,v(R),R=-1),g=!0;var H=m;try{e:{for(b(L),p=e(u);p!==null&&!(p.expirationTime>L&&D());){var W=p.callback;if(typeof W=="function"){p.callback=null,m=p.priorityLevel;var rt=W(p.expirationTime<=L);if(L=n.unstable_now(),typeof rt=="function"){p.callback=rt,b(L),G=!0;break e}p===e(u)&&i(u),b(L)}else i(u);p=e(u)}if(p!==null)G=!0;else{var vt=e(f);vt!==null&&et(T,vt.startTime-L),G=!1}}break t}finally{p=null,m=H,g=!1}G=void 0}}finally{G?B():w=!1}}}var B;if(typeof x=="function")B=function(){x(C)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=C,B=function(){q.postMessage(null)}}else B=function(){M(C,0)};function it(){w||(w=!0,B())}function et(L,G){R=M(function(){L(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){_||g||(_=!0,it())},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return e(u)},n.unstable_next=function(L){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var H=m;m=G;try{return L()}finally{m=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=m;m=L;try{return G()}finally{m=H}},n.unstable_scheduleCallback=function(L,G,H){var W=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,L){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=H+rt,L={id:d++,callback:G,priorityLevel:L,startTime:H,expirationTime:rt,sortIndex:-1},H>W?(L.sortIndex=H,t(f,L),e(u)===null&&L===e(f)&&(E?(v(R),R=-1):E=!0,et(T,H-W))):(L.sortIndex=rt,t(u,L),_||g||(_=!0,it())),L},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(L){var G=m;return function(){var H=m;m=G;try{return L.apply(this,arguments)}finally{m=H}}}})(cP);lP.exports=cP;var wR=lP.exports;function UE(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=t?n.return:n.child;for(;i;){const a=UE(i,t,e);if(a)return a;i=t?null:i.sibling}}function uP(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const OE=uP(tt.createContext(null));class fP extends tt.Component{render(){return tt.createElement(OE.Provider,{value:this._reactInternals},this.props.children)}}function hP(){const n=tt.useContext(OE);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=tt.useId();return tt.useMemo(()=>{for(const e of[n,n==null?void 0:n.alternate]){if(!e)continue;const i=UE(e,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===t)return!0;s=s.next}});if(i)return i}},[n,t])}const Yk=Symbol.for("react.context"),Wk=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Yk;function Zk(){const n=hP(),[t]=tt.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;Wk(i)&&i!==OE&&!t.has(i)&&t.set(i,tt.use(uP(i))),e=e.return}return t}function Kk(){const n=Zk();return tt.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>tt.createElement(t,null,tt.createElement(e.Provider,{...i,value:n.get(e)})),t=>tt.createElement(fP,{...t})),[n])}function dP(n){let t=n.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const pP=n=>n&&n.isOrthographicCamera,Qk=n=>n&&n.hasOwnProperty("current"),Jk=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),Ip=((n,t)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?tt.useLayoutEffect:tt.useEffect;function mP(n){const t=tt.useRef(n);return Ip(()=>void(t.current=n),[n]),t}function $k(){const n=hP(),t=Kk();return tt.useMemo(()=>({children:e})=>{const a=!!UE(n,!0,s=>s.type===tt.StrictMode)?tt.StrictMode:tt.Fragment;return at.jsx(a,{children:at.jsx(t,{children:e})})},[n,t])}function tj({set:n}){return Ip(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const ej=(n=>(n=class extends tt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function gP(n){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}function _u(n){var t;return(t=n.__r3f)==null?void 0:t.root.getState()}const bn={obj:n=>n===Object(n)&&!bn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,t,{arrays:e="shallow",objects:i="reference",strict:a=!0}={}){if(typeof n!=typeof t||!!n!=!!t)return!1;if(bn.str(n)||bn.num(n)||bn.boo(n))return n===t;const s=bn.obj(n);if(s&&i==="reference")return n===t;const r=bn.arr(n);if(r&&e==="reference")return n===t;if((r||s)&&n===t)return!0;let l;for(l in n)if(!(l in t))return!1;if(s&&e==="shallow"&&i==="shallow"){for(l in a?t:n)if(!bn.equ(n[l],t[l],{strict:a,objects:"reference"}))return!1}else for(l in a?t:n)if(n[l]!==t[l])return!1;if(bn.und(l)){if(r&&n.length===0&&t.length===0||s&&Object.keys(n).length===0&&Object.keys(t).length===0)return!0;if(n!==t)return!1}return!0}};function nj(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const t in n){const e=n[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const vP=["children","key","ref"];function ij(n){const t={};for(const e in n)vP.includes(e)||(t[e]=n[e]);return t}function Ev(n,t,e,i){const a=n;let s=a==null?void 0:a.__r3f;return s||(s={root:t,type:e,parent:null,children:[],props:ij(i),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=s)),s}function sp(n,t){let e=n[t];if(!t.includes("-"))return{root:n,key:t,target:e};e=n;for(const a of t.split("-")){var i;t=a,n=e,e=(i=e)==null?void 0:i[t]}return{root:n,key:t,target:e}}const RR=/-\d+$/;function Tv(n,t){if(bn.str(t.props.attach)){if(RR.test(t.props.attach)){const a=t.props.attach.replace(RR,""),{root:s,key:r}=sp(n.object,a);Array.isArray(s[r])||(s[r]=[])}const{root:e,key:i}=sp(n.object,t.props.attach);t.previousAttach=e[i],e[i]=t.object}else bn.fun(t.props.attach)&&(t.previousAttach=t.props.attach(n.object,t.object))}function Av(n,t){if(bn.str(t.props.attach)){const{root:e,key:i}=sp(n.object,t.props.attach),a=t.previousAttach;a===void 0?delete e[i]:e[i]=a}else t.previousAttach==null||t.previousAttach(n.object,t.object);delete t.previousAttach}const vM=[...vP,"args","dispose","attach","object","onUpdate","dispose"],DR=new Map;function aj(n){let t=DR.get(n.constructor);try{t||(t=new n.constructor,DR.set(n.constructor,t))}catch{}return t}function sj(n,t){const e={};for(const i in t)if(!vM.includes(i)&&!bn.equ(t[i],n.props[i])){e[i]=t[i];for(const a in t)a.startsWith(`${i}-`)&&(e[a]=t[a])}for(const i in n.props){if(vM.includes(i)||t.hasOwnProperty(i))continue;const{root:a,key:s}=sp(n.object,i);if(a.constructor&&a.constructor.length===0){const r=aj(a);bn.und(r)||(e[s]=r[s])}else e[s]=0}return e}const rj=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],oj=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ao(n,t){var e;const i=n.__r3f,a=i&&dP(i).getState(),s=i==null?void 0:i.eventCount;for(const l in t){let u=t[l];if(vM.includes(l))continue;if(i&&oj.test(l)){typeof u=="function"?i.handlers[l]=u:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(u===void 0)continue;let{root:f,key:d,target:p}=sp(n,l);if(p instanceof Mf&&u instanceof Mf)p.mask=u.mask;else if(p instanceof Zt&&Jk(u))p.set(u);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&u!=null&&u.constructor&&p.constructor===u.constructor)p.copy(u);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(u))typeof p.fromArray=="function"?p.fromArray(u):p.set(...u);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof u=="number")typeof p.setScalar=="function"?p.setScalar(u):p.set(u);else{var r;f[d]=u,a&&!a.linear&&rj.includes(d)&&(r=f[d])!=null&&r.isTexture&&f[d].format===Ni&&f[d].type===as&&(f[d].colorSpace=wi)}}if(i!=null&&i.parent&&a!=null&&a.internal&&(e=i.object)!=null&&e.isObject3D&&s!==i.eventCount){const l=i.object,u=a.internal.interaction.indexOf(l);u>-1&&a.internal.interaction.splice(u,1),i.eventCount&&l.raycast!==null&&a.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Gf(i),n}function Gf(n){var t;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const e=(t=n.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function lj(n,t){n.manual||(pP(n)?(n.left=t.width/-2,n.right=t.width/2,n.top=t.height/2,n.bottom=t.height/-2):n.aspect=t.width/t.height,n.updateProjectionMatrix())}const ia=n=>n==null?void 0:n.isObject3D;function Og(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function yP(n,t,e,i){const a=e.get(t);a&&(e.delete(t),e.size===0&&(n.delete(i),a.target.releasePointerCapture(i)))}function cj(n,t){const{internal:e}=n.getState();e.interaction=e.interaction.filter(i=>i!==t),e.initialHits=e.initialHits.filter(i=>i!==t),e.hovered.forEach((i,a)=>{(i.eventObject===t||i.object===t)&&e.hovered.delete(a)}),e.capturedMap.forEach((i,a)=>{yP(e.capturedMap,t,i,a)})}function uj(n){function t(u){const{internal:f}=n.getState(),d=u.offsetX-f.initialClick[0],p=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(d*d+p*p))}function e(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(d=>{var p;return(p=f.__r3f)==null?void 0:p.handlers["onPointer"+d]}))}function i(u,f){const d=n.getState(),p=new Set,m=[],g=f?f(d.internal.interaction):d.internal.interaction;for(let v=0;v<g.length;v++){const x=_u(g[v]);x&&(x.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(u,d);function _(v){const x=_u(v);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var b;x.events.compute==null||x.events.compute(u,x,(b=x.previousRoot)==null?void 0:b.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(v,!0):[]}let E=g.flatMap(_).sort((v,x)=>{const b=_u(v.object),T=_u(x.object);return!b||!T?v.distance-x.distance:T.events.priority-b.events.priority||v.distance-x.distance}).filter(v=>{const x=Og(v);return p.has(x)?!1:(p.add(x),!0)});d.events.filter&&(E=d.events.filter(E,d));for(const v of E){let x=v.object;for(;x;){var M;(M=x.__r3f)!=null&&M.eventCount&&m.push({...v,eventObject:x}),x=x.parent}}if("pointerId"in u&&d.internal.capturedMap.has(u.pointerId))for(let v of d.internal.capturedMap.get(u.pointerId).values())p.has(Og(v.intersection))||m.push(v.intersection);return m}function a(u,f,d,p){if(u.length){const m={stopped:!1};for(const g of u){let _=_u(g.object);if(_||g.object.traverseAncestors(E=>{const M=_u(E);if(M)return _=M,!1}),_){const{raycaster:E,pointer:M,camera:v,internal:x}=_,b=new V(M.x,M.y,0).unproject(v),T=D=>{var C,B;return(C=(B=x.capturedMap.get(D))==null?void 0:B.has(g.eventObject))!=null?C:!1},w=D=>{const C={intersection:g,target:f.target};x.capturedMap.has(D)?x.capturedMap.get(D).set(g.eventObject,C):x.capturedMap.set(D,new Map([[g.eventObject,C]])),f.target.setPointerCapture(D)},R=D=>{const C=x.capturedMap.get(D);C&&yP(x.capturedMap,g.eventObject,C,D)};let N={};for(let D in f){let C=f[D];typeof C!="function"&&(N[D]=C)}let U={...g,...N,pointer:M,intersections:u,stopped:m.stopped,delta:d,unprojectedPoint:b,ray:E.ray,camera:v,stopPropagation(){const D="pointerId"in f&&x.capturedMap.get(f.pointerId);if((!D||D.has(g.eventObject))&&(U.stopped=m.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(C=>C.eventObject===g.eventObject))){const C=u.slice(0,u.indexOf(g));s([...C,g])}},target:{hasPointerCapture:T,setPointerCapture:w,releasePointerCapture:R},currentTarget:{hasPointerCapture:T,setPointerCapture:w,releasePointerCapture:R},nativeEvent:f};if(p(U),m.stopped===!0)break}}}return u}function s(u){const{internal:f}=n.getState();for(const d of f.hovered.values())if(!u.length||!u.find(p=>p.object===d.object&&p.index===d.index&&p.instanceId===d.instanceId)){const m=d.eventObject.__r3f;if(f.hovered.delete(Og(d)),m!=null&&m.eventCount){const g=m.handlers,_={...d,intersections:u};g.onPointerOut==null||g.onPointerOut(_),g.onPointerLeave==null||g.onPointerLeave(_)}}}function r(u,f){for(let d=0;d<f.length;d++){const p=f[d].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:d}=n.getState();"pointerId"in f&&d.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(f.pointerId)&&(d.capturedMap.delete(f.pointerId),s([]))})}}return function(d){const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=d;const g=u==="onPointerMove",_=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",M=i(d,g?e:void 0),v=_?t(d):0;u==="onPointerDown"&&(m.initialClick=[d.offsetX,d.offsetY],m.initialHits=M.map(b=>b.eventObject)),_&&!M.length&&v<=2&&(r(d,m.interaction),p&&p(d)),g&&s(M);function x(b){const T=b.eventObject,w=T.__r3f;if(!(w!=null&&w.eventCount))return;const R=w.handlers;if(g){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const N=Og(b),U=m.hovered.get(N);U?U.stopped&&b.stopPropagation():(m.hovered.set(N,b),R.onPointerOver==null||R.onPointerOver(b),R.onPointerEnter==null||R.onPointerEnter(b))}R.onPointerMove==null||R.onPointerMove(b)}else{const N=R[u];N?(!_||m.initialHits.includes(T))&&(r(d,m.interaction.filter(U=>!m.initialHits.includes(U))),N(b)):_&&m.initialHits.includes(T)&&r(d,m.interaction.filter(U=>!m.initialHits.includes(U)))}}a(M,d,v,x)}}return{handlePointer:l}}const NR=n=>!!(n!=null&&n.render),_P=tt.createContext(null),fj=(n,t)=>{const e=Fk((l,u)=>{const f=new V,d=new V,p=new V;function m(v=u().camera,x=d,b=u().size){const{width:T,height:w,top:R,left:N}=b,U=T/w;x.isVector3?p.copy(x):p.set(...x);const D=v.getWorldPosition(f).distanceTo(p);if(pP(v))return{width:T/v.zoom,height:w/v.zoom,top:R,left:N,factor:1,distance:D,aspect:U};{const C=v.fov*Math.PI/180,B=2*Math.tan(C/2)*D,Z=B*(T/w);return{width:Z,height:B,top:R,left:N,factor:T/Z,distance:D,aspect:U}}}let g;const _=v=>l(x=>({performance:{...x.performance,current:v}})),E=new mt;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(v=1)=>n(u(),v),advance:(v,x)=>t(v,x,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new AE,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=u();g&&clearTimeout(g),v.performance.current!==v.performance.min&&_(v.performance.min),g=setTimeout(()=>_(u().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:v=>l(x=>({...x,events:{...x.events,...v}})),setSize:(v,x,b=0,T=0)=>{const w=u().camera,R={width:v,height:x,top:b,left:T};l(N=>({size:R,viewport:{...N.viewport,...m(w,d,R)}}))},setDpr:v=>l(x=>{const b=gP(v);return{viewport:{...x.viewport,dpr:b,initialDpr:x.viewport.initialDpr||b}}}),setFrameloop:(v="always")=>{const x=u().clock;x.stop(),x.elapsedTime=0,v!=="never"&&(x.start(),x.elapsedTime=0),l(()=>({frameloop:v}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:tt.createRef(),active:!1,frames:0,priority:0,subscribe:(v,x,b)=>{const T=u().internal;return T.priority=T.priority+(x>0?1:0),T.subscribers.push({ref:v,priority:x,store:b}),T.subscribers=T.subscribers.sort((w,R)=>w.priority-R.priority),()=>{const w=u().internal;w!=null&&w.subscribers&&(w.priority=w.priority-(x>0?1:0),w.subscribers=w.subscribers.filter(R=>R.ref!==v))}}}}}),i=e.getState();let a=i.size,s=i.viewport.dpr,r=i.camera;return e.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:d,set:p}=e.getState();if(u.width!==a.width||u.height!==a.height||f.dpr!==s){a=u,s=f.dpr,lj(l,u),f.dpr>0&&d.setPixelRatio(f.dpr);const m=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(u.width,u.height,m)}l!==r&&(r=l,p(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(l)}})))}),e.subscribe(l=>n(l)),e};function xP(){const n=tt.useContext(_P);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ps(n=e=>e,t){return xP()(n,t)}function Xf(n,t=0){const e=xP(),i=e.getState().internal.subscribe,a=mP(n);return Ip(()=>i(a,t,e),[t,i,e]),null}function hj(n){const t=qk(n);return t.injectIntoDevTools({bundleType:(typeof process<"u",0),rendererPackageName:"@react-three/fiber",version:tt.version}),t}const SP=0,Cf={},dj=/^three(?=[A-Z])/,Py=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let pj=0;const mj=n=>typeof n=="function";function gj(n){if(mj(n)){const t=`${pj++}`;return Cf[t]=n,t}else Object.assign(Cf,n)}function MP(n,t){const e=Py(n),i=Cf[e];if(n!=="primitive"&&!i)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function vj(n,t,e){var i;return n=Py(n)in Cf?n:n.replace(dj,""),MP(n,t),n==="primitive"&&(i=t.object)!=null&&i.__r3f&&delete t.object.__r3f,Ev(t.object,e,n,t)}function yj(n){if(!n.isHidden){var t;n.props.attach&&(t=n.parent)!=null&&t.object?Av(n.parent,n):ia(n.object)&&(n.object.visible=!1),n.isHidden=!0,Gf(n)}}function bP(n){if(n.isHidden){var t;n.props.attach&&(t=n.parent)!=null&&t.object?Tv(n.parent,n):ia(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Gf(n)}}function LE(n,t,e){const i=t.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!t.object){var a,s;const r=Cf[Py(t.type)];t.object=(a=t.props.object)!=null?a:new r(...(s=t.props.args)!=null?s:[]),t.object.__r3f=t}if(Ao(t.object,t.props),t.props.attach)Tv(n,t);else if(ia(t.object)&&ia(n.object)){const r=n.object.children.indexOf(e==null?void 0:e.object);if(e&&r!==-1){const l=n.object.children.indexOf(t.object);if(l!==-1){n.object.children.splice(l,1);const u=l<r?r-1:r;n.object.children.splice(u,0,t.object)}else t.object.parent=n.object,n.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:t.object})}else n.object.add(t.object)}for(const r of t.children)LE(t,r);Gf(t)}}function PS(n,t){t&&(t.parent=n,n.children.push(t),LE(n,t))}function UR(n,t,e){if(!t||!e)return;t.parent=n;const i=n.children.indexOf(e);i!==-1?n.children.splice(i,0,t):n.children.push(t),LE(n,t,e)}function EP(n){if(typeof n.dispose=="function"){const t=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():wR.unstable_scheduleCallback(wR.unstable_IdlePriority,t)}}function yM(n,t,e){if(!t)return;t.parent=null;const i=n.children.indexOf(t);i!==-1&&n.children.splice(i,1),t.props.attach?Av(n,t):ia(t.object)&&ia(n.object)&&(n.object.remove(t.object),cj(dP(t),t.object));const a=t.props.dispose!==null&&e!==!1;for(let s=t.children.length-1;s>=0;s--){const r=t.children[s];yM(t,r,a)}t.children.length=0,delete t.object.__r3f,a&&t.type!=="primitive"&&t.object.type!=="Scene"&&EP(t.object),e===void 0&&Gf(t)}function _j(n,t){for(const e of[n,n.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const i=e.ref(t);typeof i=="function"&&(e.refCleanup=i)}else e.ref&&(e.ref.current=t)}const i0=[];function xj(){for(const[e]of i0){const i=e.parent;if(i){e.props.attach?Av(i,e):ia(e.object)&&ia(i.object)&&i.object.remove(e.object);for(const a of e.children)a.props.attach?Av(e,a):ia(a.object)&&ia(e.object)&&e.object.remove(a.object)}e.isHidden&&bP(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&EP(e.object)}for(const[e,i,a]of i0){e.props=i;const s=e.parent;if(s){var n,t;const r=Cf[Py(e.type)];e.object=(n=e.props.object)!=null?n:new r(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,_j(a,e.object),Ao(e.object,e.props),e.props.attach?Tv(s,e):ia(e.object)&&ia(s.object)&&s.object.add(e.object);for(const l of e.children)l.props.attach?Tv(e,l):ia(l.object)&&ia(e.object)&&e.object.add(l.object);Gf(e)}}i0.length=0}const zS=()=>{},OR={};let Lg=SP;const Sj=0,Mj=4,_M=hj({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:vj,removeChild:yM,appendChild:PS,appendInitialChild:PS,insertBefore:UR,appendChildToContainer(n,t){const e=n.getState().scene.__r3f;!t||!e||PS(e,t)},removeChildFromContainer(n,t){const e=n.getState().scene.__r3f;!t||!e||yM(e,t)},insertInContainerBefore(n,t,e){const i=n.getState().scene.__r3f;!t||!e||!i||UR(i,t,e)},getRootHostContext:()=>OR,getChildHostContext:()=>OR,commitUpdate(n,t,e,i,a){var s,r,l;MP(t,i);let u=!1;if((n.type==="primitive"&&e.object!==i.object||((s=i.args)==null?void 0:s.length)!==((r=e.args)==null?void 0:r.length)||(l=i.args)!=null&&l.some((d,p)=>{var m;return d!==((m=e.args)==null?void 0:m[p])}))&&(u=!0),u)i0.push([n,{...i},a]);else{const d=sj(n,i);Object.keys(d).length&&(Object.assign(n.props,d),Ao(n.object,d))}(a.sibling===null||(a.flags&Mj)===Sj)&&xj()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>Ev(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:yj,unhideInstance:bP,createTextInstance:zS,hideTextInstance:zS,unhideTextInstance:zS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:tt.createContext(null),setCurrentUpdatePriority(n){Lg=n},getCurrentUpdatePriority(){return Lg},resolveUpdatePriority(){var n;if(Lg!==SP)return Lg;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $g.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $g.ContinuousEventPriority;default:return $g.DefaultEventPriority}},resetFormInstance(){}}),gc=new Map,xu={objects:"shallow",strict:!1};function bj(n,t){if(!t&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:e,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:e,height:i,top:a,left:s}}else if(!t&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function Ej(n){const t=gc.get(n),e=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,s=i||fj(MM,PR),r=e||_M.createContainer(s,$g.ConcurrentRoot,null,!1,null,"",a,a,a,null);t||gc.set(n,{fiber:r,store:s});let l,u,f=!1,d=null;return{async configure(p={}){let m;d=new Promise(vt=>m=vt);let{gl:g,size:_,scene:E,events:M,onCreated:v,shadows:x=!1,linear:b=!1,flat:T=!1,legacy:w=!1,orthographic:R=!1,frameloop:N="always",dpr:U=[1,2],performance:D,raycaster:C,camera:B,onPointerMissed:Z}=p,q=s.getState(),it=q.gl;if(!q.gl){const vt={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},Dt=typeof g=="function"?await g(vt):g;NR(Dt)?it=Dt:it=new tP({...vt,...g}),q.set({gl:it})}let et=q.raycaster;et||q.set({raycaster:et=new qL});const{params:L,...G}=C||{};if(bn.equ(G,et,xu)||Ao(et,{...G}),bn.equ(L,et.params,xu)||Ao(et,{params:{...et.params,...L}}),!q.camera||q.camera===u&&!bn.equ(u,B,xu)){u=B;const vt=B==null?void 0:B.isCamera,Dt=vt?B:R?new js(0,0,0,0,.1,1e3):new En(75,0,.1,1e3);vt||(Dt.position.z=5,B&&(Ao(Dt,B),Dt.manual||("aspect"in B||"left"in B||"right"in B||"bottom"in B||"top"in B)&&(Dt.manual=!0,Dt.updateProjectionMatrix())),!q.camera&&!(B!=null&&B.rotation)&&Dt.lookAt(0,0,0)),q.set({camera:Dt}),et.camera=Dt}if(!q.scene){let vt;E!=null&&E.isScene?(vt=E,Ev(vt,s,"",{})):(vt=new rE,Ev(vt,s,"",{}),E&&Ao(vt,E)),q.set({scene:vt})}M&&!q.events.handlers&&q.set({events:M(s)});const H=bj(n,_);if(bn.equ(H,q.size,xu)||q.setSize(H.width,H.height,H.top,H.left),U&&q.viewport.dpr!==gP(U)&&q.setDpr(U),q.frameloop!==N&&q.setFrameloop(N),q.onPointerMissed||q.set({onPointerMissed:Z}),D&&!bn.equ(D,q.performance,xu)&&q.set(vt=>({performance:{...vt.performance,...D}})),!q.xr){var W;const vt=(J,yt)=>{const Yt=s.getState();Yt.frameloop!=="never"&&PR(J,!0,Yt,yt)},Dt=()=>{const J=s.getState();J.gl.xr.enabled=J.gl.xr.isPresenting,J.gl.xr.setAnimationLoop(J.gl.xr.isPresenting?vt:null),J.gl.xr.isPresenting||MM(J)},Vt={connect(){const J=s.getState().gl;J.xr.addEventListener("sessionstart",Dt),J.xr.addEventListener("sessionend",Dt)},disconnect(){const J=s.getState().gl;J.xr.removeEventListener("sessionstart",Dt),J.xr.removeEventListener("sessionend",Dt)}};typeof((W=it.xr)==null?void 0:W.addEventListener)=="function"&&Vt.connect(),q.set({xr:Vt})}if(it.shadowMap){const vt=it.shadowMap.enabled,Dt=it.shadowMap.type;if(it.shadowMap.enabled=!!x,bn.boo(x))it.shadowMap.type=hd;else if(bn.str(x)){var rt;const Vt={basic:nO,percentage:ey,soft:hd,variance:gs};it.shadowMap.type=(rt=Vt[x])!=null?rt:hd}else bn.obj(x)&&Object.assign(it.shadowMap,x);(vt!==it.shadowMap.enabled||Dt!==it.shadowMap.type)&&(it.shadowMap.needsUpdate=!0)}return Be.enabled=!w,f||(it.outputColorSpace=b?ko:wi,it.toneMapping=T?Xs:jb),q.legacy!==w&&q.set(()=>({legacy:w})),q.linear!==b&&q.set(()=>({linear:b})),q.flat!==T&&q.set(()=>({flat:T})),g&&!bn.fun(g)&&!NR(g)&&!bn.equ(g,it,xu)&&Ao(it,g),l=v,f=!0,m(),this},render(p){return!f&&!d&&this.configure(),d.then(()=>{_M.updateContainer(at.jsx(Tj,{store:s,children:p,onCreated:l,rootElement:n}),r,null,()=>{})}),s},unmount(){TP(n)}}}function Tj({store:n,children:t,onCreated:e,rootElement:i}){return Ip(()=>{const a=n.getState();a.set(s=>({internal:{...s.internal,active:!0}})),e&&e(a),n.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),at.jsx(_P.Provider,{value:n,children:t})}function TP(n,t){const e=gc.get(n),i=e==null?void 0:e.fiber;if(i){const a=e==null?void 0:e.store.getState();a&&(a.internal.active=!1),_M.updateContainer(null,i,null,()=>{a&&setTimeout(()=>{try{var s,r,l,u;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(r=s.renderLists)==null||r.dispose==null||r.dispose(),(l=a.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=a.gl)!=null&&u.xr&&a.xr.disconnect(),nj(a.scene),gc.delete(n)}catch{}},500)})}}const Aj=new Set,Cj=new Set,wj=new Set;function BS(n,t){if(n.size)for(const{callback:e}of n.values())e(t)}function Md(n,t){switch(n){case"before":return BS(Aj,t);case"after":return BS(Cj,t);case"tail":return BS(wj,t)}}let IS,VS;function xM(n,t,e){let i=t.clock.getDelta();t.frameloop==="never"&&typeof n=="number"&&(i=n-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=n),IS=t.internal.subscribers;for(let a=0;a<IS.length;a++)VS=IS[a],VS.ref.current(VS.store.getState(),i,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let Cv=!1,SM=!1,HS,LR,Su;function AP(n){LR=requestAnimationFrame(AP),Cv=!0,HS=0,Md("before",n),SM=!0;for(const e of gc.values()){var t;Su=e.store.getState(),Su.internal.active&&(Su.frameloop==="always"||Su.internal.frames>0)&&!((t=Su.gl.xr)!=null&&t.isPresenting)&&(HS+=xM(n,Su))}if(SM=!1,Md("after",n),HS===0)return Md("tail",n),Cv=!1,cancelAnimationFrame(LR)}function MM(n,t=1){var e;if(!n)return gc.forEach(i=>MM(i.store.getState(),t));(e=n.gl.xr)!=null&&e.isPresenting||!n.internal.active||n.frameloop==="never"||(t>1?n.internal.frames=Math.min(60,n.internal.frames+t):SM?n.internal.frames=2:n.internal.frames=1,Cv||(Cv=!0,requestAnimationFrame(AP)))}function PR(n,t=!0,e,i){if(t&&Md("before",n),e)xM(n,e,i);else for(const a of gc.values())xM(n,a.store.getState());t&&Md("after",n)}const FS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Rj(n){const{handlePointer:t}=uj(n);return{priority:1,enabled:!0,compute(e,i,a){i.pointer.set(e.offsetX/i.size.width*2-1,-(e.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(FS).reduce((e,i)=>({...e,[i]:t(i)}),{}),update:()=>{var e;const{events:i,internal:a}=n.getState();(e=a.lastEvent)!=null&&e.current&&i.handlers&&i.handlers.onPointerMove(a.lastEvent.current)},connect:e=>{const{set:i,events:a}=n.getState();if(a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:e}})),a.handlers)for(const s in a.handlers){const r=a.handlers[s],[l,u]=FS[s];e.addEventListener(l,r,{passive:u})}},disconnect:()=>{const{set:e,events:i}=n.getState();if(i.connected){if(i.handlers)for(const a in i.handlers){const s=i.handlers[a],[r]=FS[a];i.connected.removeEventListener(r,s)}e(a=>({events:{...a.events,connected:void 0}}))}}}}function zR(n,t){let e;return(...i)=>{window.clearTimeout(e),e=window.setTimeout(()=>n(...i),t)}}function Dj({debounce:n,scroll:t,polyfill:e,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const a=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,r]=tt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=tt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,d=tt.useRef(!1);tt.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,g]=tt.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:x,top:b,width:T,height:w,bottom:R,right:N,x:U,y:D}=l.current.element.getBoundingClientRect(),C={left:x,top:b,width:T,height:w,bottom:R,right:N,x:U,y:D};l.current.element instanceof HTMLElement&&i&&(C.height=l.current.element.offsetHeight,C.width=l.current.element.offsetWidth),Object.freeze(C),d.current&&!Lj(l.current.lastBounds,C)&&r(l.current.lastBounds=C)};return[v,f?zR(v,f):v,u?zR(v,u):v]},[r,i,u,f]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function E(){l.current.element&&(l.current.resizeObserver=new a(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",g,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=v=>{!v||v===l.current.element||(_(),l.current.element=v,l.current.scrollContainers=CP(v),E())};return Uj(g,!!t),Nj(m),tt.useEffect(()=>{_(),E()},[t,g,m]),tt.useEffect(()=>_,[]),[M,s,p]}function Nj(n){tt.useEffect(()=>{const t=n;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[n])}function Uj(n,t){tt.useEffect(()=>{if(t){const e=n;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[n,t])}function CP(n){const t=[];if(!n||n===document.body)return t;const{overflow:e,overflowX:i,overflowY:a}=window.getComputedStyle(n);return[e,i,a].some(s=>s==="auto"||s==="scroll")&&t.push(n),[...t,...CP(n.parentElement)]}const Oj=["x","y","top","bottom","left","right","width","height"],Lj=(n,t)=>Oj.every(e=>n[e]===t[e]);function Pj({ref:n,children:t,fallback:e,resize:i,style:a,gl:s,events:r=Rj,eventSource:l,eventPrefix:u,shadows:f,linear:d,flat:p,legacy:m,orthographic:g,frameloop:_,dpr:E,performance:M,raycaster:v,camera:x,scene:b,onPointerMissed:T,onCreated:w,...R}){tt.useMemo(()=>gj(vk),[]);const N=$k(),[U,D]=Dj({scroll:!0,debounce:{scroll:50,resize:0},...i}),C=tt.useRef(null),B=tt.useRef(null);tt.useImperativeHandle(n,()=>C.current);const Z=mP(T),[q,it]=tt.useState(!1),[et,L]=tt.useState(!1);if(q)throw q;if(et)throw et;const G=tt.useRef(null);Ip(()=>{const W=C.current;if(D.width>0&&D.height>0&&W){G.current||(G.current=Ej(W));async function rt(){await G.current.configure({gl:s,scene:b,events:r,shadows:f,linear:d,flat:p,legacy:m,orthographic:g,frameloop:_,dpr:E,performance:M,raycaster:v,camera:x,size:D,onPointerMissed:(...vt)=>Z.current==null?void 0:Z.current(...vt),onCreated:vt=>{vt.events.connect==null||vt.events.connect(l?Qk(l)?l.current:l:B.current),u&&vt.setEvents({compute:(Dt,Vt)=>{const J=Dt[u+"X"],yt=Dt[u+"Y"];Vt.pointer.set(J/Vt.size.width*2-1,-(yt/Vt.size.height)*2+1),Vt.raycaster.setFromCamera(Vt.pointer,Vt.camera)}}),w==null||w(vt)}}),G.current.render(at.jsx(N,{children:at.jsx(ej,{set:L,children:at.jsx(tt.Suspense,{fallback:at.jsx(tj,{set:it}),children:t??null})})}))}rt()}}),tt.useEffect(()=>{const W=C.current;if(W)return()=>TP(W)},[]);const H=l?"none":"auto";return at.jsx("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...a},...R,children:at.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:at.jsx("canvas",{ref:C,style:{display:"block"},children:e})})})}function zj(n){return at.jsx(fP,{children:at.jsx(Pj,{...n})})}function Bj(){const n=tt.useRef(null),t=tt.useMemo(()=>{const i=new Float32Array(15e3);for(let a=0;a<5e3;a++){const l=120+Math.random()*80,u=Math.random()*2*Math.PI,f=Math.acos(2*Math.random()-1);i[a*3]=l*Math.sin(f)*Math.cos(u),i[a*3+1]=l*Math.sin(f)*Math.sin(u),i[a*3+2]=l*Math.cos(f)}return i},[]);return Xf(()=>{n.current&&(n.current.rotation.y+=3e-4,n.current.rotation.x+=1e-4)}),at.jsxs("points",{ref:n,frustumCulled:!1,children:[at.jsx("bufferGeometry",{children:at.jsx("bufferAttribute",{attach:"attributes-position",args:[t,3]})}),at.jsx("pointsMaterial",{transparent:!0,color:"#ffffff",size:.6,sizeAttenuation:!0,depthWrite:!1,opacity:.85})]})}function wv(){return wv=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},wv.apply(null,arguments)}const Vp=new V,PE=new V,Ij=new V,BR=new mt;function Vj(n,t,e){const i=Vp.setFromMatrixPosition(n.matrixWorld);i.project(t);const a=e.width/2,s=e.height/2;return[i.x*a+a,-(i.y*s)+s]}function Hj(n,t){const e=Vp.setFromMatrixPosition(n.matrixWorld),i=PE.setFromMatrixPosition(t.matrixWorld),a=e.sub(i),s=t.getWorldDirection(Ij);return a.angleTo(s)>Math.PI/2}function Fj(n,t,e,i){const a=Vp.setFromMatrixPosition(n.matrixWorld),s=a.clone();s.project(t),BR.set(s.x,s.y),e.setFromCamera(BR,t);const r=e.intersectObjects(i,!0);if(r.length){const l=r[0].distance;return a.distanceTo(e.ray.origin)<l}return!0}function Gj(n,t){if(t instanceof js)return t.zoom;if(t instanceof En){const e=Vp.setFromMatrixPosition(n.matrixWorld),i=PE.setFromMatrixPosition(t.matrixWorld),a=t.fov*Math.PI/180,s=e.distanceTo(i);return 1/(2*Math.tan(a/2)*s)}else return 1}function Xj(n,t,e){if(t instanceof En||t instanceof js){const i=Vp.setFromMatrixPosition(n.matrixWorld),a=PE.setFromMatrixPosition(t.matrixWorld),s=i.distanceTo(a),r=(e[1]-e[0])/(t.far-t.near),l=e[1]-r*t.far;return Math.round(r*s+l)}}const bM=n=>Math.abs(n)<1e-10?0:n;function wP(n,t,e=""){let i="matrix3d(";for(let a=0;a!==16;a++)i+=bM(t[a]*n.elements[a])+(a!==15?",":")");return e+i}const kj=(n=>t=>wP(t,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),jj=(n=>(t,e)=>wP(t,n(e),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function qj(n){return n&&typeof n=="object"&&"current"in n}const Yj=tt.forwardRef(({children:n,eps:t=.001,style:e,className:i,prepend:a,center:s,fullscreen:r,portal:l,distanceFactor:u,sprite:f=!1,transform:d=!1,occlude:p,onOcclude:m,castShadow:g,receiveShadow:_,material:E,geometry:M,zIndexRange:v=[16777271,0],calculatePosition:x=Vj,as:b="div",wrapperClass:T,pointerEvents:w="auto",...R},N)=>{const{gl:U,camera:D,scene:C,size:B,raycaster:Z,events:q,viewport:it}=Ps(),[et]=tt.useState(()=>document.createElement(b)),L=tt.useRef(null),G=tt.useRef(null),H=tt.useRef(0),W=tt.useRef([0,0]),rt=tt.useRef(null),vt=tt.useRef(null),Dt=(l==null?void 0:l.current)||q.connected||U.domElement.parentNode,Vt=tt.useRef(null),J=tt.useRef(!1),yt=tt.useMemo(()=>p&&p!=="blending"||Array.isArray(p)&&p.length&&qj(p[0]),[p]);tt.useLayoutEffect(()=>{const qt=U.domElement;p&&p==="blending"?(qt.style.zIndex=`${Math.floor(v[0]/2)}`,qt.style.position="absolute",qt.style.pointerEvents="none"):(qt.style.zIndex=null,qt.style.position=null,qt.style.pointerEvents=null)},[p]),tt.useLayoutEffect(()=>{if(G.current){const qt=L.current=JU.createRoot(et);if(C.updateMatrixWorld(),d)et.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ie=x(G.current,D,B);et.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ie[0]}px,${ie[1]}px,0);transform-origin:0 0;`}return Dt&&(a?Dt.prepend(et):Dt.appendChild(et)),()=>{Dt&&Dt.removeChild(et),qt.unmount()}}},[Dt,d]),tt.useLayoutEffect(()=>{T&&(et.className=T)},[T]);const Yt=tt.useMemo(()=>d?{position:"absolute",top:0,left:0,width:B.width,height:B.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...r&&{top:-B.height/2,left:-B.width/2,width:B.width,height:B.height},...e},[e,s,r,B,d]),Lt=tt.useMemo(()=>({position:"absolute",pointerEvents:w}),[w]);tt.useLayoutEffect(()=>{if(J.current=!1,d){var qt;(qt=L.current)==null||qt.render(tt.createElement("div",{ref:rt,style:Yt},tt.createElement("div",{ref:vt,style:Lt},tt.createElement("div",{ref:N,className:i,style:e,children:n}))))}else{var ie;(ie=L.current)==null||ie.render(tt.createElement("div",{ref:N,style:Yt,className:i,children:n}))}});const Xt=tt.useRef(!0);Xf(qt=>{if(G.current){D.updateMatrixWorld(),G.current.updateWorldMatrix(!0,!1);const ie=d?W.current:x(G.current,D,B);if(d||Math.abs(H.current-D.zoom)>t||Math.abs(W.current[0]-ie[0])>t||Math.abs(W.current[1]-ie[1])>t){const ue=Hj(G.current,D);let ne=!1;yt&&(Array.isArray(p)?ne=p.map(Tt=>Tt.current):p!=="blending"&&(ne=[C]));const I=Xt.current;if(ne){const Tt=Fj(G.current,D,Z,ne);Xt.current=Tt&&!ue}else Xt.current=!ue;I!==Xt.current&&(m?m(!Xt.current):et.style.display=Xt.current?"block":"none");const Nt=Math.floor(v[0]/2),Et=p?yt?[v[0],Nt]:[Nt-1,0]:v;if(et.style.zIndex=`${Xj(G.current,D,Et)}`,d){const[Tt,dt]=[B.width/2,B.height/2],zt=D.projectionMatrix.elements[5]*dt,{isOrthographicCamera:bt,top:Ht,left:fe,bottom:F,right:O}=D,nt=kj(D.matrixWorldInverse),ft=bt?`scale(${zt})translate(${bM(-(O+fe)/2)}px,${bM((Ht+F)/2)}px)`:`translateZ(${zt}px)`;let pt=G.current.matrixWorld;f&&(pt=D.matrixWorldInverse.clone().transpose().copyPosition(pt).scale(G.current.scale),pt.elements[3]=pt.elements[7]=pt.elements[11]=0,pt.elements[15]=1),et.style.width=B.width+"px",et.style.height=B.height+"px",et.style.perspective=bt?"":`${zt}px`,rt.current&&vt.current&&(rt.current.style.transform=`${ft}${nt}translate(${Tt}px,${dt}px)`,vt.current.style.transform=jj(pt,1/((u||10)/400)))}else{const Tt=u===void 0?1:Gj(G.current,D)*u;et.style.transform=`translate3d(${ie[0]}px,${ie[1]}px,0) scale(${Tt})`}W.current=ie,H.current=D.zoom}}if(!yt&&Vt.current&&!J.current)if(d){if(rt.current){const ie=rt.current.children[0];if(ie!=null&&ie.clientWidth&&ie!=null&&ie.clientHeight){const{isOrthographicCamera:ue}=D;if(ue||M)R.scale&&(Array.isArray(R.scale)?R.scale instanceof V?Vt.current.scale.copy(R.scale.clone().divideScalar(1)):Vt.current.scale.set(1/R.scale[0],1/R.scale[1],1/R.scale[2]):Vt.current.scale.setScalar(1/R.scale));else{const ne=(u||10)/400,I=ie.clientWidth*ne,Nt=ie.clientHeight*ne;Vt.current.scale.set(I,Nt,1)}J.current=!0}}}else{const ie=et.children[0];if(ie!=null&&ie.clientWidth&&ie!=null&&ie.clientHeight){const ue=1/it.factor,ne=ie.clientWidth*ue,I=ie.clientHeight*ue;Vt.current.scale.set(ne,I,1),J.current=!0}Vt.current.lookAt(qt.camera.position)}});const he=tt.useMemo(()=>({vertexShader:d?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[d]);return tt.createElement("group",wv({},R,{ref:G}),p&&!yt&&tt.createElement("mesh",{castShadow:g,receiveShadow:_,ref:Vt},M||tt.createElement("planeGeometry",null),E||tt.createElement("shaderMaterial",{side:_s,vertexShader:he.vertexShader,fragmentShader:he.fragmentShader})))}),Wj=n=>n;function Zj(n,t=Wj){const e=a1.useSyncExternalStore(n.subscribe,()=>t(n.getState()),()=>t(n.getInitialState()));return a1.useDebugValue(e),e}const IR=n=>{const t=sP(n),e=i=>Zj(t,i);return Object.assign(e,t),e},Kj=n=>n?IR(n):IR;var Qj=Object.defineProperty,Jj=(n,t,e)=>t in n?Qj(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,$j=(n,t,e)=>(Jj(n,t+"",e),e);class tq{constructor(){$j(this,"_listeners")}addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const a=this._listeners[t];if(a!==void 0){const s=a.indexOf(e);s!==-1&&a.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const a=i.slice(0);for(let s=0,r=a.length;s<r;s++)a[s].call(this,t);t.target=null}}}var eq=Object.defineProperty,nq=(n,t,e)=>t in n?eq(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,ce=(n,t,e)=>(nq(n,typeof t!="symbol"?t+"":t,e),e);const Pg=new Sc,VR=new Sr,iq=Math.cos(70*(Math.PI/180)),HR=(n,t)=>(n%t+t)%t;let aq=class extends tq{constructor(t,e){super(),ce(this,"object"),ce(this,"domElement"),ce(this,"enabled",!0),ce(this,"target",new V),ce(this,"minDistance",0),ce(this,"maxDistance",1/0),ce(this,"minZoom",0),ce(this,"maxZoom",1/0),ce(this,"minPolarAngle",0),ce(this,"maxPolarAngle",Math.PI),ce(this,"minAzimuthAngle",-1/0),ce(this,"maxAzimuthAngle",1/0),ce(this,"enableDamping",!1),ce(this,"dampingFactor",.05),ce(this,"enableZoom",!0),ce(this,"zoomSpeed",1),ce(this,"enableRotate",!0),ce(this,"rotateSpeed",1),ce(this,"enablePan",!0),ce(this,"panSpeed",1),ce(this,"screenSpacePanning",!0),ce(this,"keyPanSpeed",7),ce(this,"zoomToCursor",!1),ce(this,"autoRotate",!1),ce(this,"autoRotateSpeed",2),ce(this,"reverseOrbit",!1),ce(this,"reverseHorizontalOrbit",!1),ce(this,"reverseVerticalOrbit",!1),ce(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ce(this,"mouseButtons",{LEFT:Hl.ROTATE,MIDDLE:Hl.DOLLY,RIGHT:Hl.PAN}),ce(this,"touches",{ONE:Fl.ROTATE,TWO:Fl.DOLLY_PAN}),ce(this,"target0"),ce(this,"position0"),ce(this,"zoom0"),ce(this,"_domElementKeyEvents",null),ce(this,"getPolarAngle"),ce(this,"getAzimuthalAngle"),ce(this,"setPolarAngle"),ce(this,"setAzimuthalAngle"),ce(this,"getDistance"),ce(this,"getZoomScale"),ce(this,"listenToKeyEvents"),ce(this,"stopListenToKeyEvents"),ce(this,"saveState"),ce(this,"reset"),ce(this,"update"),ce(this,"connect"),ce(this,"dispose"),ce(this,"dollyIn"),ce(this,"dollyOut"),ce(this,"getScale"),ce(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=k=>{let st=HR(k,2*Math.PI),Ct=d.phi;Ct<0&&(Ct+=2*Math.PI),st<0&&(st+=2*Math.PI);let X=Math.abs(st-Ct);2*Math.PI-X<X&&(st<Ct?st+=2*Math.PI:Ct+=2*Math.PI),p.phi=st-Ct,i.update()},this.setAzimuthalAngle=k=>{let st=HR(k,2*Math.PI),Ct=d.theta;Ct<0&&(Ct+=2*Math.PI),st<0&&(st+=2*Math.PI);let X=Math.abs(st-Ct);2*Math.PI-X<X&&(st<Ct?st+=2*Math.PI:Ct+=2*Math.PI),p.theta=st-Ct,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=k=>{k.addEventListener("keydown",ht),this._domElementKeyEvents=k},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ht),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(a),i.update(),u=l.NONE},this.update=(()=>{const k=new V,st=new V(0,1,0),Ct=new Li().setFromUnitVectors(t.up,st),X=Ct.clone().invert(),Rt=new V,St=new Li,Gt=2*Math.PI;return function(){const _t=i.object.position;Ct.setFromUnitVectors(t.up,st),X.copy(Ct).invert(),k.copy(_t).sub(i.target),k.applyQuaternion(Ct),d.setFromVector3(k),i.autoRotate&&u===l.NONE&&it(Z()),i.enableDamping?(d.theta+=p.theta*i.dampingFactor,d.phi+=p.phi*i.dampingFactor):(d.theta+=p.theta,d.phi+=p.phi);let kt=i.minAzimuthAngle,se=i.maxAzimuthAngle;isFinite(kt)&&isFinite(se)&&(kt<-Math.PI?kt+=Gt:kt>Math.PI&&(kt-=Gt),se<-Math.PI?se+=Gt:se>Math.PI&&(se-=Gt),kt<=se?d.theta=Math.max(kt,Math.min(se,d.theta)):d.theta=d.theta>(kt+se)/2?Math.max(kt,d.theta):Math.min(se,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(g,i.dampingFactor):i.target.add(g),i.zoomToCursor&&D||i.object.isOrthographicCamera?d.radius=Vt(d.radius):d.radius=Vt(d.radius*m),k.setFromSpherical(d),k.applyQuaternion(X),_t.copy(i.target).add(k),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,g.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),g.set(0,0,0));let Ne=!1;if(i.zoomToCursor&&D){let Ae=null;if(i.object instanceof En&&i.object.isPerspectiveCamera){const Vn=k.length();Ae=Vt(Vn*m);const li=Vn-Ae;i.object.position.addScaledVector(N,li),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Vn=new V(U.x,U.y,0);Vn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/m)),i.object.updateProjectionMatrix(),Ne=!0;const li=new V(U.x,U.y,0);li.unproject(i.object),i.object.position.sub(li).add(Vn),i.object.updateMatrixWorld(),Ae=k.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ae!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ae).add(i.object.position):(Pg.origin.copy(i.object.position),Pg.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Pg.direction))<iq?t.lookAt(i.target):(VR.setFromNormalAndCoplanarPoint(i.object.up,i.target),Pg.intersectPlane(VR,i.target))))}else i.object instanceof js&&i.object.isOrthographicCamera&&(Ne=m!==1,Ne&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/m)),i.object.updateProjectionMatrix()));return m=1,D=!1,Ne||Rt.distanceToSquared(i.object.position)>f||8*(1-St.dot(i.object.quaternion))>f?(i.dispatchEvent(a),Rt.copy(i.object.position),St.copy(i.object.quaternion),Ne=!1,!0):!1}})(),this.connect=k=>{i.domElement=k,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Qt),i.domElement.addEventListener("pointerdown",fe),i.domElement.addEventListener("pointercancel",O),i.domElement.addEventListener("wheel",pt)},this.dispose=()=>{var k,st,Ct,X,Rt,St;i.domElement&&(i.domElement.style.touchAction="auto"),(k=i.domElement)==null||k.removeEventListener("contextmenu",Qt),(st=i.domElement)==null||st.removeEventListener("pointerdown",fe),(Ct=i.domElement)==null||Ct.removeEventListener("pointercancel",O),(X=i.domElement)==null||X.removeEventListener("wheel",pt),(Rt=i.domElement)==null||Rt.ownerDocument.removeEventListener("pointermove",F),(St=i.domElement)==null||St.ownerDocument.removeEventListener("pointerup",O),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ht)};const i=this,a={type:"change"},s={type:"start"},r={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const f=1e-6,d=new dM,p=new dM;let m=1;const g=new V,_=new mt,E=new mt,M=new mt,v=new mt,x=new mt,b=new mt,T=new mt,w=new mt,R=new mt,N=new V,U=new mt;let D=!1;const C=[],B={};function Z(){return 2*Math.PI/60/60*i.autoRotateSpeed}function q(){return Math.pow(.95,i.zoomSpeed)}function it(k){i.reverseOrbit||i.reverseHorizontalOrbit?p.theta+=k:p.theta-=k}function et(k){i.reverseOrbit||i.reverseVerticalOrbit?p.phi+=k:p.phi-=k}const L=(()=>{const k=new V;return function(Ct,X){k.setFromMatrixColumn(X,0),k.multiplyScalar(-Ct),g.add(k)}})(),G=(()=>{const k=new V;return function(Ct,X){i.screenSpacePanning===!0?k.setFromMatrixColumn(X,1):(k.setFromMatrixColumn(X,0),k.crossVectors(i.object.up,k)),k.multiplyScalar(Ct),g.add(k)}})(),H=(()=>{const k=new V;return function(Ct,X){const Rt=i.domElement;if(Rt&&i.object instanceof En&&i.object.isPerspectiveCamera){const St=i.object.position;k.copy(St).sub(i.target);let Gt=k.length();Gt*=Math.tan(i.object.fov/2*Math.PI/180),L(2*Ct*Gt/Rt.clientHeight,i.object.matrix),G(2*X*Gt/Rt.clientHeight,i.object.matrix)}else Rt&&i.object instanceof js&&i.object.isOrthographicCamera?(L(Ct*(i.object.right-i.object.left)/i.object.zoom/Rt.clientWidth,i.object.matrix),G(X*(i.object.top-i.object.bottom)/i.object.zoom/Rt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function W(k){i.object instanceof En&&i.object.isPerspectiveCamera||i.object instanceof js&&i.object.isOrthographicCamera?m=k:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function rt(k){W(m/k)}function vt(k){W(m*k)}function Dt(k){if(!i.zoomToCursor||!i.domElement)return;D=!0;const st=i.domElement.getBoundingClientRect(),Ct=k.clientX-st.left,X=k.clientY-st.top,Rt=st.width,St=st.height;U.x=Ct/Rt*2-1,U.y=-(X/St)*2+1,N.set(U.x,U.y,1).unproject(i.object).sub(i.object.position).normalize()}function Vt(k){return Math.max(i.minDistance,Math.min(i.maxDistance,k))}function J(k){_.set(k.clientX,k.clientY)}function yt(k){Dt(k),T.set(k.clientX,k.clientY)}function Yt(k){v.set(k.clientX,k.clientY)}function Lt(k){E.set(k.clientX,k.clientY),M.subVectors(E,_).multiplyScalar(i.rotateSpeed);const st=i.domElement;st&&(it(2*Math.PI*M.x/st.clientHeight),et(2*Math.PI*M.y/st.clientHeight)),_.copy(E),i.update()}function Xt(k){w.set(k.clientX,k.clientY),R.subVectors(w,T),R.y>0?rt(q()):R.y<0&&vt(q()),T.copy(w),i.update()}function he(k){x.set(k.clientX,k.clientY),b.subVectors(x,v).multiplyScalar(i.panSpeed),H(b.x,b.y),v.copy(x),i.update()}function qt(k){Dt(k),k.deltaY<0?vt(q()):k.deltaY>0&&rt(q()),i.update()}function ie(k){let st=!1;switch(k.code){case i.keys.UP:H(0,i.keyPanSpeed),st=!0;break;case i.keys.BOTTOM:H(0,-i.keyPanSpeed),st=!0;break;case i.keys.LEFT:H(i.keyPanSpeed,0),st=!0;break;case i.keys.RIGHT:H(-i.keyPanSpeed,0),st=!0;break}st&&(k.preventDefault(),i.update())}function ue(){if(C.length==1)_.set(C[0].pageX,C[0].pageY);else{const k=.5*(C[0].pageX+C[1].pageX),st=.5*(C[0].pageY+C[1].pageY);_.set(k,st)}}function ne(){if(C.length==1)v.set(C[0].pageX,C[0].pageY);else{const k=.5*(C[0].pageX+C[1].pageX),st=.5*(C[0].pageY+C[1].pageY);v.set(k,st)}}function I(){const k=C[0].pageX-C[1].pageX,st=C[0].pageY-C[1].pageY,Ct=Math.sqrt(k*k+st*st);T.set(0,Ct)}function Nt(){i.enableZoom&&I(),i.enablePan&&ne()}function Et(){i.enableZoom&&I(),i.enableRotate&&ue()}function Tt(k){if(C.length==1)E.set(k.pageX,k.pageY);else{const Ct=ae(k),X=.5*(k.pageX+Ct.x),Rt=.5*(k.pageY+Ct.y);E.set(X,Rt)}M.subVectors(E,_).multiplyScalar(i.rotateSpeed);const st=i.domElement;st&&(it(2*Math.PI*M.x/st.clientHeight),et(2*Math.PI*M.y/st.clientHeight)),_.copy(E)}function dt(k){if(C.length==1)x.set(k.pageX,k.pageY);else{const st=ae(k),Ct=.5*(k.pageX+st.x),X=.5*(k.pageY+st.y);x.set(Ct,X)}b.subVectors(x,v).multiplyScalar(i.panSpeed),H(b.x,b.y),v.copy(x)}function zt(k){const st=ae(k),Ct=k.pageX-st.x,X=k.pageY-st.y,Rt=Math.sqrt(Ct*Ct+X*X);w.set(0,Rt),R.set(0,Math.pow(w.y/T.y,i.zoomSpeed)),rt(R.y),T.copy(w)}function bt(k){i.enableZoom&&zt(k),i.enablePan&&dt(k)}function Ht(k){i.enableZoom&&zt(k),i.enableRotate&&Tt(k)}function fe(k){var st,Ct;i.enabled!==!1&&(C.length===0&&((st=i.domElement)==null||st.ownerDocument.addEventListener("pointermove",F),(Ct=i.domElement)==null||Ct.ownerDocument.addEventListener("pointerup",O)),Jt(k),k.pointerType==="touch"?te(k):nt(k))}function F(k){i.enabled!==!1&&(k.pointerType==="touch"?Pt(k):ft(k))}function O(k){var st,Ct,X;xt(k),C.length===0&&((st=i.domElement)==null||st.releasePointerCapture(k.pointerId),(Ct=i.domElement)==null||Ct.ownerDocument.removeEventListener("pointermove",F),(X=i.domElement)==null||X.ownerDocument.removeEventListener("pointerup",O)),i.dispatchEvent(r),u=l.NONE}function nt(k){let st;switch(k.button){case 0:st=i.mouseButtons.LEFT;break;case 1:st=i.mouseButtons.MIDDLE;break;case 2:st=i.mouseButtons.RIGHT;break;default:st=-1}switch(st){case Hl.DOLLY:if(i.enableZoom===!1)return;yt(k),u=l.DOLLY;break;case Hl.ROTATE:if(k.ctrlKey||k.metaKey||k.shiftKey){if(i.enablePan===!1)return;Yt(k),u=l.PAN}else{if(i.enableRotate===!1)return;J(k),u=l.ROTATE}break;case Hl.PAN:if(k.ctrlKey||k.metaKey||k.shiftKey){if(i.enableRotate===!1)return;J(k),u=l.ROTATE}else{if(i.enablePan===!1)return;Yt(k),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(s)}function ft(k){if(i.enabled!==!1)switch(u){case l.ROTATE:if(i.enableRotate===!1)return;Lt(k);break;case l.DOLLY:if(i.enableZoom===!1)return;Xt(k);break;case l.PAN:if(i.enablePan===!1)return;he(k);break}}function pt(k){i.enabled===!1||i.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(k.preventDefault(),i.dispatchEvent(s),qt(k),i.dispatchEvent(r))}function ht(k){i.enabled===!1||i.enablePan===!1||ie(k)}function te(k){switch(Bt(k),C.length){case 1:switch(i.touches.ONE){case Fl.ROTATE:if(i.enableRotate===!1)return;ue(),u=l.TOUCH_ROTATE;break;case Fl.PAN:if(i.enablePan===!1)return;ne(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(i.touches.TWO){case Fl.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Nt(),u=l.TOUCH_DOLLY_PAN;break;case Fl.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Et(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(s)}function Pt(k){switch(Bt(k),u){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;Tt(k),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;dt(k),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;bt(k),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ht(k),i.update();break;default:u=l.NONE}}function Qt(k){i.enabled!==!1&&k.preventDefault()}function Jt(k){C.push(k)}function xt(k){delete B[k.pointerId];for(let st=0;st<C.length;st++)if(C[st].pointerId==k.pointerId){C.splice(st,1);return}}function Bt(k){let st=B[k.pointerId];st===void 0&&(st=new mt,B[k.pointerId]=st),st.set(k.pageX,k.pageY)}function ae(k){const st=k.pointerId===C[0].pointerId?C[1]:C[0];return B[st.pointerId]}this.dollyIn=(k=q())=>{vt(k),i.update()},this.dollyOut=(k=q())=>{rt(k),i.update()},this.getScale=()=>m,this.setScale=k=>{W(k),i.update()},this.getZoomScale=()=>q(),e!==void 0&&this.connect(e),this.update()}};const sq=tt.forwardRef(({makeDefault:n,camera:t,regress:e,domElement:i,enableDamping:a=!0,keyEvents:s=!1,onChange:r,onStart:l,onEnd:u,...f},d)=>{const p=Ps(R=>R.invalidate),m=Ps(R=>R.camera),g=Ps(R=>R.gl),_=Ps(R=>R.events),E=Ps(R=>R.setEvents),M=Ps(R=>R.set),v=Ps(R=>R.get),x=Ps(R=>R.performance),b=t||m,T=i||_.connected||g.domElement,w=tt.useMemo(()=>new aq(b),[b]);return Xf(()=>{w.enabled&&w.update()},-1),tt.useEffect(()=>(s&&w.connect(s===!0?T:s),w.connect(T),()=>void w.dispose()),[s,T,e,w,p]),tt.useEffect(()=>{const R=D=>{p(),e&&x.regress(),r&&r(D)},N=D=>{l&&l(D)},U=D=>{u&&u(D)};return w.addEventListener("change",R),w.addEventListener("start",N),w.addEventListener("end",U),()=>{w.removeEventListener("start",N),w.removeEventListener("end",U),w.removeEventListener("change",R)}},[r,l,u,w,p,E]),tt.useEffect(()=>{if(n){const R=v().controls;return M({controls:w}),()=>M({controls:R})}},[n,w]),tt.createElement("primitive",wv({ref:d,object:w,enableDamping:a},f))}),zE=tt.createContext({});function BE(n){const t=tt.useRef(null);return t.current===null&&(t.current=n()),t.current}const IE=typeof window<"u",RP=IE?tt.useLayoutEffect:tt.useEffect,zy=tt.createContext(null);function VE(n,t){n.indexOf(t)===-1&&n.push(t)}function HE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Gr=(n,t,e)=>e>t?t:e<n?n:e;let Rv=()=>{};const Xr={},DP=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function NP(n){return typeof n=="object"&&n!==null}const UP=n=>/^0[^.\s]+$/u.test(n);function FE(n){let t;return()=>(t===void 0&&(t=n()),t)}const es=n=>n,rq=(n,t)=>e=>t(n(e)),Hp=(...n)=>n.reduce(rq),rp=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class GE{constructor(){this.subscriptions=[]}add(t){return VE(this.subscriptions,t),()=>HE(this.subscriptions,t)}notify(t,e,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,i);else for(let s=0;s<a;s++){const r=this.subscriptions[s];r&&r(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qs=n=>n*1e3,Ys=n=>n/1e3;function OP(n,t){return t?n*(1e3/t):0}const LP=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,oq=1e-7,lq=12;function cq(n,t,e,i,a){let s,r,l=0;do r=t+(e-t)/2,s=LP(r,i,a)-n,s>0?e=r:t=r;while(Math.abs(s)>oq&&++l<lq);return r}function Fp(n,t,e,i){if(n===t&&e===i)return es;const a=s=>cq(s,0,1,n,e);return s=>s===0||s===1?s:LP(a(s),t,i)}const PP=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,zP=n=>t=>1-n(1-t),BP=Fp(.33,1.53,.69,.99),XE=zP(BP),IP=PP(XE),VP=n=>(n*=2)<1?.5*XE(n):.5*(2-Math.pow(2,-10*(n-1))),kE=n=>1-Math.sin(Math.acos(n)),HP=zP(kE),FP=PP(kE),uq=Fp(.42,0,1,1),fq=Fp(0,0,.58,1),GP=Fp(.42,0,.58,1),hq=n=>Array.isArray(n)&&typeof n[0]!="number",XP=n=>Array.isArray(n)&&typeof n[0]=="number",FR={linear:es,easeIn:uq,easeInOut:GP,easeOut:fq,circIn:kE,circInOut:FP,circOut:HP,backIn:XE,backInOut:IP,backOut:BP,anticipate:VP},dq=n=>typeof n=="string",GR=n=>{if(XP(n)){Rv(n.length===4);const[t,e,i,a]=n;return Fp(t,e,i,a)}else if(dq(n))return Rv(FR[n]!==void 0),FR[n];return n},zg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],XR={value:null,addProjectionMetrics:null};function pq(n,t){let e=new Set,i=new Set,a=!1,s=!1;const r=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},u=0;function f(p){r.has(p)&&(d.schedule(p),n()),u++,p(l)}const d={schedule:(p,m=!1,g=!1)=>{const E=g&&a?e:i;return m&&r.add(p),E.has(p)||E.add(p),p},cancel:p=>{i.delete(p),r.delete(p)},process:p=>{if(l=p,a){s=!0;return}a=!0,[e,i]=[i,e],e.forEach(f),t&&XR.value&&XR.value.frameloop[t].push(u),u=0,e.clear(),a=!1,s&&(s=!1,d.process(p))}};return d}const mq=40;function kP(n,t){let e=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,r=zg.reduce((b,T)=>(b[T]=pq(s,t?T:void 0),b),{}),{setup:l,read:u,resolveKeyframes:f,preUpdate:d,update:p,preRender:m,render:g,postRender:_}=r,E=()=>{const b=Xr.useManualTiming?a.timestamp:performance.now();e=!1,Xr.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(b-a.timestamp,mq),1)),a.timestamp=b,a.isProcessing=!0,l.process(a),u.process(a),f.process(a),d.process(a),p.process(a),m.process(a),g.process(a),_.process(a),a.isProcessing=!1,e&&t&&(i=!1,n(E))},M=()=>{e=!0,i=!0,a.isProcessing||n(E)};return{schedule:zg.reduce((b,T)=>{const w=r[T];return b[T]=(R,N=!1,U=!1)=>(e||M(),w.schedule(R,N,U)),b},{}),cancel:b=>{for(let T=0;T<zg.length;T++)r[zg[T]].cancel(b)},state:a,steps:r}}const{schedule:xn,cancel:qo,state:di,steps:GS}=kP(typeof requestAnimationFrame<"u"?requestAnimationFrame:es,!0);let a0;function gq(){a0=void 0}const ra={now:()=>(a0===void 0&&ra.set(di.isProcessing||Xr.useManualTiming?di.timestamp:performance.now()),a0),set:n=>{a0=n,queueMicrotask(gq)}},jP=n=>t=>typeof t=="string"&&t.startsWith(n),jE=jP("--"),vq=jP("var(--"),qE=n=>vq(n)?yq.test(n.split("/*")[0].trim()):!1,yq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,kf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},op={...kf,transform:n=>Gr(0,1,n)},Bg={...kf,default:1},bd=n=>Math.round(n*1e5)/1e5,YE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _q(n){return n==null}const xq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WE=(n,t)=>e=>!!(typeof e=="string"&&xq.test(e)&&e.startsWith(n)||t&&!_q(e)&&Object.prototype.hasOwnProperty.call(e,t)),qP=(n,t,e)=>i=>{if(typeof i!="string")return i;const[a,s,r,l]=i.match(YE);return{[n]:parseFloat(a),[t]:parseFloat(s),[e]:parseFloat(r),alpha:l!==void 0?parseFloat(l):1}},Sq=n=>Gr(0,255,n),XS={...kf,transform:n=>Math.round(Sq(n))},Zl={test:WE("rgb","red"),parse:qP("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+XS.transform(n)+", "+XS.transform(t)+", "+XS.transform(e)+", "+bd(op.transform(i))+")"};function Mq(n){let t="",e="",i="",a="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),a=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),a=n.substring(4,5),t+=t,e+=e,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const EM={test:WE("#"),parse:Mq,transform:Zl.transform},Gp=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),yo=Gp("deg"),Ws=Gp("%"),ge=Gp("px"),bq=Gp("vh"),Eq=Gp("vw"),kR={...Ws,parse:n=>Ws.parse(n)/100,transform:n=>Ws.transform(n*100)},Gu={test:WE("hsl","hue"),parse:qP("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Ws.transform(bd(t))+", "+Ws.transform(bd(e))+", "+bd(op.transform(i))+")"},Xn={test:n=>Zl.test(n)||EM.test(n)||Gu.test(n),parse:n=>Zl.test(n)?Zl.parse(n):Gu.test(n)?Gu.parse(n):EM.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Zl.transform(n):Gu.transform(n),getAnimatableNone:n=>{const t=Xn.parse(n);return t.alpha=0,Xn.transform(t)}},Tq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Aq(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(YE))==null?void 0:t.length)||0)+(((e=n.match(Tq))==null?void 0:e.length)||0)>0}const YP="number",WP="color",Cq="var",wq="var(",jR="${}",Rq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function lp(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},a=[];let s=0;const l=t.replace(Rq,u=>(Xn.test(u)?(i.color.push(s),a.push(WP),e.push(Xn.parse(u))):u.startsWith(wq)?(i.var.push(s),a.push(Cq),e.push(u)):(i.number.push(s),a.push(YP),e.push(parseFloat(u))),++s,jR)).split(jR);return{values:e,split:l,indexes:i,types:a}}function ZP(n){return lp(n).values}function KP(n){const{split:t,types:e}=lp(n),i=t.length;return a=>{let s="";for(let r=0;r<i;r++)if(s+=t[r],a[r]!==void 0){const l=e[r];l===YP?s+=bd(a[r]):l===WP?s+=Xn.transform(a[r]):s+=a[r]}return s}}const Dq=n=>typeof n=="number"?0:Xn.test(n)?Xn.getAnimatableNone(n):n;function Nq(n){const t=ZP(n);return KP(n)(t.map(Dq))}const Yo={test:Aq,parse:ZP,createTransformer:KP,getAnimatableNone:Nq};function kS(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function Uq({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let a=0,s=0,r=0;if(!t)a=s=r=e;else{const l=e<.5?e*(1+t):e+t-e*t,u=2*e-l;a=kS(u,l,n+1/3),s=kS(u,l,n),r=kS(u,l,n-1/3)}return{red:Math.round(a*255),green:Math.round(s*255),blue:Math.round(r*255),alpha:i}}function Dv(n,t){return e=>e>0?t:n}const An=(n,t,e)=>n+(t-n)*e,jS=(n,t,e)=>{const i=n*n,a=e*(t*t-i)+i;return a<0?0:Math.sqrt(a)},Oq=[EM,Zl,Gu],Lq=n=>Oq.find(t=>t.test(n));function qR(n){const t=Lq(n);if(!t)return!1;let e=t.parse(n);return t===Gu&&(e=Uq(e)),e}const YR=(n,t)=>{const e=qR(n),i=qR(t);if(!e||!i)return Dv(n,t);const a={...e};return s=>(a.red=jS(e.red,i.red,s),a.green=jS(e.green,i.green,s),a.blue=jS(e.blue,i.blue,s),a.alpha=An(e.alpha,i.alpha,s),Zl.transform(a))},TM=new Set(["none","hidden"]);function Pq(n,t){return TM.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function zq(n,t){return e=>An(n,t,e)}function ZE(n){return typeof n=="number"?zq:typeof n=="string"?qE(n)?Dv:Xn.test(n)?YR:Vq:Array.isArray(n)?QP:typeof n=="object"?Xn.test(n)?YR:Bq:Dv}function QP(n,t){const e=[...n],i=e.length,a=n.map((s,r)=>ZE(s)(s,t[r]));return s=>{for(let r=0;r<i;r++)e[r]=a[r](s);return e}}function Bq(n,t){const e={...n,...t},i={};for(const a in e)n[a]!==void 0&&t[a]!==void 0&&(i[a]=ZE(n[a])(n[a],t[a]));return a=>{for(const s in i)e[s]=i[s](a);return e}}function Iq(n,t){const e=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],r=n.indexes[s][i[s]],l=n.values[r]??0;e[a]=l,i[s]++}return e}const Vq=(n,t)=>{const e=Yo.createTransformer(t),i=lp(n),a=lp(t);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?TM.has(n)&&!a.values.length||TM.has(t)&&!i.values.length?Pq(n,t):Hp(QP(Iq(i,a),a.values),e):Dv(n,t)};function JP(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?An(n,t,e):ZE(n)(n,t)}const Hq=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>xn.update(t,e),stop:()=>qo(t),now:()=>di.isProcessing?di.timestamp:ra.now()}},$P=(n,t,e=10)=>{let i="";const a=Math.max(Math.round(t/e),2);for(let s=0;s<a;s++)i+=Math.round(n(s/(a-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Nv=2e4;function KE(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<Nv;)t+=e,i=n.next(t);return t>=Nv?1/0:t}function Fq(n,t=100,e){const i=e({...n,keyframes:[0,t]}),a=Math.min(KE(i),Nv);return{type:"keyframes",ease:s=>i.next(a*s).value/t,duration:Ys(a)}}const Gq=5;function tz(n,t,e){const i=Math.max(t-Gq,0);return OP(e-n(i),t-i)}const Nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qS=.001;function Xq({duration:n=Nn.duration,bounce:t=Nn.bounce,velocity:e=Nn.velocity,mass:i=Nn.mass}){let a,s,r=1-t;r=Gr(Nn.minDamping,Nn.maxDamping,r),n=Gr(Nn.minDuration,Nn.maxDuration,Ys(n)),r<1?(a=f=>{const d=f*r,p=d*n,m=d-e,g=AM(f,r),_=Math.exp(-p);return qS-m/g*_},s=f=>{const p=f*r*n,m=p*e+e,g=Math.pow(r,2)*Math.pow(f,2)*n,_=Math.exp(-p),E=AM(Math.pow(f,2),r);return(-a(f)+qS>0?-1:1)*((m-g)*_)/E}):(a=f=>{const d=Math.exp(-f*n),p=(f-e)*n+1;return-qS+d*p},s=f=>{const d=Math.exp(-f*n),p=(e-f)*(n*n);return d*p});const l=5/n,u=jq(a,s,l);if(n=qs(n),isNaN(u))return{stiffness:Nn.stiffness,damping:Nn.damping,duration:n};{const f=Math.pow(u,2)*i;return{stiffness:f,damping:r*2*Math.sqrt(i*f),duration:n}}}const kq=12;function jq(n,t,e){let i=e;for(let a=1;a<kq;a++)i=i-n(i)/t(i);return i}function AM(n,t){return n*Math.sqrt(1-t*t)}const qq=["duration","bounce"],Yq=["stiffness","damping","mass"];function WR(n,t){return t.some(e=>n[e]!==void 0)}function Wq(n){let t={velocity:Nn.velocity,stiffness:Nn.stiffness,damping:Nn.damping,mass:Nn.mass,isResolvedFromDuration:!1,...n};if(!WR(n,Yq)&&WR(n,qq))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),a=i*i,s=2*Gr(.05,1,1-(n.bounce||0))*Math.sqrt(a);t={...t,mass:Nn.mass,stiffness:a,damping:s}}else{const e=Xq(n);t={...t,...e,mass:Nn.mass},t.isResolvedFromDuration=!0}return t}function Uv(n=Nn.visualDuration,t=Nn.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:a}=e;const s=e.keyframes[0],r=e.keyframes[e.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:f,mass:d,duration:p,velocity:m,isResolvedFromDuration:g}=Wq({...e,velocity:-Ys(e.velocity||0)}),_=m||0,E=f/(2*Math.sqrt(u*d)),M=r-s,v=Ys(Math.sqrt(u/d)),x=Math.abs(M)<5;i||(i=x?Nn.restSpeed.granular:Nn.restSpeed.default),a||(a=x?Nn.restDelta.granular:Nn.restDelta.default);let b;if(E<1){const w=AM(v,E);b=R=>{const N=Math.exp(-E*v*R);return r-N*((_+E*v*M)/w*Math.sin(w*R)+M*Math.cos(w*R))}}else if(E===1)b=w=>r-Math.exp(-v*w)*(M+(_+v*M)*w);else{const w=v*Math.sqrt(E*E-1);b=R=>{const N=Math.exp(-E*v*R),U=Math.min(w*R,300);return r-N*((_+E*v*M)*Math.sinh(U)+w*M*Math.cosh(U))/w}}const T={calculatedDuration:g&&p||null,next:w=>{const R=b(w);if(g)l.done=w>=p;else{let N=w===0?_:0;E<1&&(N=w===0?qs(_):tz(b,w,R));const U=Math.abs(N)<=i,D=Math.abs(r-R)<=a;l.done=U&&D}return l.value=l.done?r:R,l},toString:()=>{const w=Math.min(KE(T),Nv),R=$P(N=>T.next(w*N).value,w,30);return w+"ms "+R},toTransition:()=>{}};return T}Uv.applyToOptions=n=>{const t=Fq(n,100,Uv);return n.ease=t.ease,n.duration=qs(t.duration),n.type="keyframes",n};function CM({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:r,min:l,max:u,restDelta:f=.5,restSpeed:d}){const p=n[0],m={done:!1,value:p},g=U=>l!==void 0&&U<l||u!==void 0&&U>u,_=U=>l===void 0?u:u===void 0||Math.abs(l-U)<Math.abs(u-U)?l:u;let E=e*t;const M=p+E,v=r===void 0?M:r(M);v!==M&&(E=v-p);const x=U=>-E*Math.exp(-U/i),b=U=>v+x(U),T=U=>{const D=x(U),C=b(U);m.done=Math.abs(D)<=f,m.value=m.done?v:C};let w,R;const N=U=>{g(m.value)&&(w=U,R=Uv({keyframes:[m.value,_(m.value)],velocity:tz(b,U,m.value),damping:a,stiffness:s,restDelta:f,restSpeed:d}))};return N(0),{calculatedDuration:null,next:U=>{let D=!1;return!R&&w===void 0&&(D=!0,T(U),N(U)),w!==void 0&&U>=w?R.next(U-w):(!D&&T(U),m)}}}function Zq(n,t,e){const i=[],a=e||Xr.mix||JP,s=n.length-1;for(let r=0;r<s;r++){let l=a(n[r],n[r+1]);if(t){const u=Array.isArray(t)?t[r]||es:t;l=Hp(u,l)}i.push(l)}return i}function Kq(n,t,{clamp:e=!0,ease:i,mixer:a}={}){const s=n.length;if(Rv(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const r=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),t=[...t].reverse());const l=Zq(t,i,a),u=l.length,f=d=>{if(r&&d<n[0])return t[0];let p=0;if(u>1)for(;p<n.length-2&&!(d<n[p+1]);p++);const m=rp(n[p],n[p+1],d);return l[p](m)};return e?d=>f(Gr(n[0],n[s-1],d)):f}function Qq(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const a=rp(0,t,i);n.push(An(e,1,a))}}function Jq(n){const t=[0];return Qq(t,n.length-1),t}function $q(n,t){return n.map(e=>e*t)}function tY(n,t){return n.map(()=>t||GP).splice(0,n.length-1)}function Ed({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const a=hq(i)?i.map(GR):GR(i),s={done:!1,value:t[0]},r=$q(e&&e.length===t.length?e:Jq(t),n),l=Kq(r,t,{ease:Array.isArray(a)?a:tY(t,a)});return{calculatedDuration:n,next:u=>(s.value=l(u),s.done=u>=n,s)}}const eY=n=>n!==null;function QE(n,{repeat:t,repeatType:e="loop"},i,a=1){const s=n.filter(eY),l=a<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!l||i===void 0?s[l]:i}const nY={decay:CM,inertia:CM,tween:Ed,keyframes:Ed,spring:Uv};function ez(n){typeof n.type=="string"&&(n.type=nY[n.type])}class JE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const iY=n=>n/100;class $E extends JE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,a;const{motionValue:e}=this.options;e&&e.updatedAt!==ra.now()&&this.tick(ra.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(i=this.options).onStop)==null||a.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ez(t);const{type:e=Ed,repeat:i=0,repeatDelay:a=0,repeatType:s,velocity:r=0}=t;let{keyframes:l}=t;const u=e||Ed;u!==Ed&&typeof l[0]!="number"&&(this.mixKeyframes=Hp(iY,JP(l[0],l[1])),l=[0,100]);const f=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-r})),f.calculatedDuration===null&&(f.calculatedDuration=KE(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:a,mixKeyframes:s,mirroredGenerator:r,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:d,repeat:p,repeatType:m,repeatDelay:g,type:_,onUpdate:E,finalKeyframe:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const v=this.currentTime-f*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>a;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let b=this.currentTime,T=i;if(p){const U=Math.min(this.currentTime,a)/l;let D=Math.floor(U),C=U%1;!C&&U>=1&&(C=1),C===1&&D--,D=Math.min(D,p+1),!!(D%2)&&(m==="reverse"?(C=1-C,g&&(C-=g/l)):m==="mirror"&&(T=r)),b=Gr(0,1,C)*l}const w=x?{done:!1,value:d[0]}:T.next(b);s&&(w.value=s(w.value));let{done:R}=w;!x&&u!==null&&(R=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return N&&_!==CM&&(w.value=QE(d,this.options,M,this.speed)),E&&E(w.value),N&&this.finish(),w}then(t,e){return this.finished.then(t,e)}get duration(){return Ys(this.calculatedDuration)}get time(){return Ys(this.currentTime)}set time(t){var e;t=qs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ra.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Ys(this.currentTime))}play(){var a,s;if(this.isStopped)return;const{driver:t=Hq,startTime:e}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),(s=(a=this.options).onPlay)==null||s.call(a);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ra.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function aY(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const Kl=n=>n*180/Math.PI,wM=n=>{const t=Kl(Math.atan2(n[1],n[0]));return RM(t)},sY={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:wM,rotateZ:wM,skewX:n=>Kl(Math.atan(n[1])),skewY:n=>Kl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},RM=n=>(n=n%360,n<0&&(n+=360),n),ZR=wM,KR=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),QR=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),rY={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:KR,scaleY:QR,scale:n=>(KR(n)+QR(n))/2,rotateX:n=>RM(Kl(Math.atan2(n[6],n[5]))),rotateY:n=>RM(Kl(Math.atan2(-n[2],n[0]))),rotateZ:ZR,rotate:ZR,skewX:n=>Kl(Math.atan(n[4])),skewY:n=>Kl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function DM(n){return n.includes("scale")?1:0}function NM(n,t){if(!n||n==="none")return DM(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(e)i=rY,a=e;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=sY,a=l}if(!a)return DM(t);const s=i[t],r=a[1].split(",").map(lY);return typeof s=="function"?s(r):r[s]}const oY=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return NM(e,t)};function lY(n){return parseFloat(n.trim())}const jf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qf=new Set(jf),JR=n=>n===kf||n===ge,cY=new Set(["x","y","z"]),uY=jf.filter(n=>!cY.has(n));function fY(n){const t=[];return uY.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const oc={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>NM(t,"x"),y:(n,{transform:t})=>NM(t,"y")};oc.translateX=oc.x;oc.translateY=oc.y;const lc=new Set;let UM=!1,OM=!1,LM=!1;function nz(){if(OM){const n=Array.from(lc).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const a=fY(i);a.length&&(e.set(i,a),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const a=e.get(i);a&&a.forEach(([s,r])=>{var l;(l=i.getValue(s))==null||l.set(r)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}OM=!1,UM=!1,lc.forEach(n=>n.complete(LM)),lc.clear()}function iz(){lc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(OM=!0)})}function hY(){LM=!0,iz(),nz(),LM=!1}class tT{constructor(t,e,i,a,s,r=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=a,this.element=s,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(lc.add(this),UM||(UM=!0,xn.read(iz),xn.resolveKeyframes(nz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:a}=this;if(t[0]===null){const s=a==null?void 0:a.get(),r=t[t.length-1];if(s!==void 0)t[0]=s;else if(i&&e){const l=i.readValue(e,r);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=r),a&&s===void 0&&a.set(t[0])}aY(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),lc.delete(this)}cancel(){this.state==="scheduled"&&(lc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const dY=n=>n.startsWith("--");function pY(n,t,e){dY(t)?n.style.setProperty(t,e):n.style[t]=e}const mY=FE(()=>window.ScrollTimeline!==void 0),gY={};function vY(n,t){const e=FE(n);return()=>gY[t]??e()}const az=vY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Kh=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,$R={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kh([0,.65,.55,1]),circOut:Kh([.55,0,1,.45]),backIn:Kh([.31,.01,.66,-.59]),backOut:Kh([.33,1.53,.69,.99])};function sz(n,t){if(n)return typeof n=="function"?az()?$P(n,t):"ease-out":XP(n)?Kh(n):Array.isArray(n)?n.map(e=>sz(e,t)||$R.easeOut):$R[n]}function yY(n,t,e,{delay:i=0,duration:a=300,repeat:s=0,repeatType:r="loop",ease:l="easeOut",times:u}={},f=void 0){const d={[t]:e};u&&(d.offset=u);const p=sz(l,a);Array.isArray(p)&&(d.easing=p);const m={delay:i,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:r==="reverse"?"alternate":"normal"};return f&&(m.pseudoElement=f),n.animate(d,m)}function rz(n){return typeof n=="function"&&"applyToOptions"in n}function _Y({type:n,...t}){return rz(n)&&az()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class xY extends JE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:a,pseudoElement:s,allowFlatten:r=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=r,this.options=t,Rv(typeof t.type!="string");const f=_Y(t);this.animation=yY(e,i,a,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=QE(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):pY(e,i,d),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,i;const t=((i=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:i.call(e).duration)||0;return Ys(Number(t))}get time(){return Ys(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=qs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&mY()?(this.animation.timeline=t,es):e(this)}}const oz={anticipate:VP,backInOut:IP,circInOut:FP};function SY(n){return n in oz}function MY(n){typeof n.ease=="string"&&SY(n.ease)&&(n.ease=oz[n.ease])}const t3=10;class bY extends xY{constructor(t){MY(t),ez(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:a,element:s,...r}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const l=new $E({...r,autoplay:!1}),u=qs(this.finishedTime??this.time);e.setWithVelocity(l.sample(u-t3).value,l.sample(u).value,t3),l.stop()}}const e3=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Yo.test(n)||n==="0")&&!n.startsWith("url("));function EY(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function TY(n,t,e,i){const a=n[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const s=n[n.length-1],r=e3(a,t),l=e3(s,t);return!r||!l?!1:EY(n)||(e==="spring"||rz(e))&&i}function PM(n){n.duration=0,n.type}const AY=new Set(["opacity","clipPath","filter","transform"]),CY=FE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wY(n){var d;const{motionValue:t,name:e,repeatDelay:i,repeatType:a,damping:s,type:r}=n;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:f}=t.owner.getProps();return CY()&&e&&AY.has(e)&&(e!=="transform"||!f)&&!u&&!i&&a!=="mirror"&&s!==0&&r!=="inertia"}const RY=40;class DY extends JE{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:r="loop",keyframes:l,name:u,motionValue:f,element:d,...p}){var _;super(),this.stop=()=>{var E,M;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(M=this.keyframeResolver)==null||M.cancel()},this.createdAt=ra.now();const m={autoplay:t,delay:e,type:i,repeat:a,repeatDelay:s,repeatType:r,name:u,motionValue:f,element:d,...p},g=(d==null?void 0:d.KeyframeResolver)||tT;this.keyframeResolver=new g(l,(E,M,v)=>this.onKeyframesResolved(E,M,m,!v),u,f,d),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(t,e,i,a){this.keyframeResolver=void 0;const{name:s,type:r,velocity:l,delay:u,isHandoff:f,onUpdate:d}=i;this.resolvedAt=ra.now(),TY(t,s,r,l)||((Xr.instantAnimations||!u)&&(d==null||d(QE(t,i,e))),t[0]=t[t.length-1],PM(i),i.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>RY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},g=!f&&wY(m)?new bY({...m,element:m.motionValue.owner.current}):new $E(m);g.finished.then(()=>this.notifyFinished()).catch(es),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),hY()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const NY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function UY(n){const t=NY.exec(n);if(!t)return[,];const[,e,i,a]=t;return[`--${e??i}`,a]}function lz(n,t,e=1){const[i,a]=UY(n);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const r=s.trim();return DP(r)?parseFloat(r):r}return qE(a)?lz(a,t,e+1):a}function eT(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const cz=new Set(["width","height","top","left","right","bottom",...jf]),OY={test:n=>n==="auto",parse:n=>n},uz=n=>t=>t.test(n),fz=[kf,ge,Ws,yo,Eq,bq,OY],n3=n=>fz.find(uz(n));function LY(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||UP(n):!0}const PY=new Set(["brightness","contrast","saturate","opacity"]);function zY(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(YE)||[];if(!i)return n;const a=e.replace(i,"");let s=PY.has(t)?1:0;return i!==e&&(s*=100),t+"("+s+a+")"}const BY=/\b([a-z-]*)\(.*?\)/gu,zM={...Yo,getAnimatableNone:n=>{const t=n.match(BY);return t?t.map(zY).join(" "):n}},i3={...kf,transform:Math.round},IY={rotate:yo,rotateX:yo,rotateY:yo,rotateZ:yo,scale:Bg,scaleX:Bg,scaleY:Bg,scaleZ:Bg,skew:yo,skewX:yo,skewY:yo,distance:ge,translateX:ge,translateY:ge,translateZ:ge,x:ge,y:ge,z:ge,perspective:ge,transformPerspective:ge,opacity:op,originX:kR,originY:kR,originZ:ge},nT={borderWidth:ge,borderTopWidth:ge,borderRightWidth:ge,borderBottomWidth:ge,borderLeftWidth:ge,borderRadius:ge,radius:ge,borderTopLeftRadius:ge,borderTopRightRadius:ge,borderBottomRightRadius:ge,borderBottomLeftRadius:ge,width:ge,maxWidth:ge,height:ge,maxHeight:ge,top:ge,right:ge,bottom:ge,left:ge,padding:ge,paddingTop:ge,paddingRight:ge,paddingBottom:ge,paddingLeft:ge,margin:ge,marginTop:ge,marginRight:ge,marginBottom:ge,marginLeft:ge,backgroundPositionX:ge,backgroundPositionY:ge,...IY,zIndex:i3,fillOpacity:op,strokeOpacity:op,numOctaves:i3},VY={...nT,color:Xn,backgroundColor:Xn,outlineColor:Xn,fill:Xn,stroke:Xn,borderColor:Xn,borderTopColor:Xn,borderRightColor:Xn,borderBottomColor:Xn,borderLeftColor:Xn,filter:zM,WebkitFilter:zM},hz=n=>VY[n];function dz(n,t){let e=hz(n);return e!==zM&&(e=Yo),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const HY=new Set(["auto","none","0"]);function FY(n,t,e){let i=0,a;for(;i<n.length&&!a;){const s=n[i];typeof s=="string"&&!HY.has(s)&&lp(s).values.length&&(a=n[i]),i++}if(a&&e)for(const s of t)n[s]=dz(e,a)}class GY extends tT{constructor(t,e,i,a,s){super(t,e,i,a,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let f=t[u];if(typeof f=="string"&&(f=f.trim(),qE(f))){const d=lz(f,e.current);d!==void 0&&(t[u]=d),u===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!cz.has(i)||t.length!==2)return;const[a,s]=t,r=n3(a),l=n3(s);if(r!==l)if(JR(r)&&JR(l))for(let u=0;u<t.length;u++){const f=t[u];typeof f=="string"&&(t[u]=parseFloat(f))}else oc[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let a=0;a<t.length;a++)(t[a]===null||LY(t[a]))&&i.push(a);i.length&&FY(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oc[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(i,a).jump(a,!1)}measureEndState(){var l;const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const a=t.getValue(e);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,r=i[s];i[s]=oc[e](t.measureViewportBox(),window.getComputedStyle(t.current)),r!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=r),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,f])=>{t.getValue(u).set(f)}),this.resolveNoneKeyframes()}}function XY(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const a=document.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}const pz=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function mz(n){return NP(n)&&"offsetHeight"in n}const a3=30,kY=n=>!isNaN(parseFloat(n));class jY{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var s;const a=ra.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=ra.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=kY(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new GE);const i=this.events[t].add(e);return t==="change"?()=>{i(),xn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ra.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>a3)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,a3);return OP(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wf(n,t){return new jY(n,t)}const{schedule:iT,cancel:cQ}=kP(queueMicrotask,!1),ms={x:!1,y:!1};function gz(){return ms.x||ms.y}function qY(n){return n==="x"||n==="y"?ms[n]?null:(ms[n]=!0,()=>{ms[n]=!1}):ms.x||ms.y?null:(ms.x=ms.y=!0,()=>{ms.x=ms.y=!1})}function vz(n,t){const e=XY(n),i=new AbortController,a={passive:!0,...t,signal:i.signal};return[e,a,()=>i.abort()]}function s3(n){return!(n.pointerType==="touch"||gz())}function YY(n,t,e={}){const[i,a,s]=vz(n,e),r=l=>{if(!s3(l))return;const{target:u}=l,f=t(u,l);if(typeof f!="function"||!u)return;const d=p=>{s3(p)&&(f(p),u.removeEventListener("pointerleave",d))};u.addEventListener("pointerleave",d,a)};return i.forEach(l=>{l.addEventListener("pointerenter",r,a)}),s}const yz=(n,t)=>t?n===t?!0:yz(n,t.parentElement):!1,aT=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,WY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ZY(n){return WY.has(n.tagName)||n.tabIndex!==-1}const s0=new WeakSet;function r3(n){return t=>{t.key==="Enter"&&n(t)}}function YS(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const KY=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=r3(()=>{if(s0.has(e))return;YS(e,"down");const a=r3(()=>{YS(e,"up")}),s=()=>YS(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function o3(n){return aT(n)&&!gz()}function QY(n,t,e={}){const[i,a,s]=vz(n,e),r=l=>{const u=l.currentTarget;if(!o3(l))return;s0.add(u);const f=t(u,l),d=(g,_)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),s0.has(u)&&s0.delete(u),o3(g)&&typeof f=="function"&&f(g,{success:_})},p=g=>{d(g,u===window||u===document||e.useGlobalTarget||yz(u,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",p,a),window.addEventListener("pointercancel",m,a)};return i.forEach(l=>{(e.useGlobalTarget?window:l).addEventListener("pointerdown",r,a),mz(l)&&(l.addEventListener("focus",f=>KY(f,a)),!ZY(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function _z(n){return NP(n)&&"ownerSVGElement"in n}function JY(n){return _z(n)&&n.tagName==="svg"}const Ui=n=>!!(n&&n.getVelocity),$Y=[...fz,Xn,Yo],tW=n=>$Y.find(uz(n)),sT=tt.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class eW extends tt.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const i=e.offsetParent,a=mz(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function nW({children:n,isPresent:t,anchorX:e,root:i}){const a=tt.useId(),s=tt.useRef(null),r=tt.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=tt.useContext(sT);return tt.useInsertionEffect(()=>{const{width:u,height:f,top:d,left:p,right:m}=r.current;if(t||!s.current||!u||!f)return;const g=e==="left"?`left: ${p}`:`right: ${m}`;s.current.dataset.motionPopId=a;const _=document.createElement("style");l&&(_.nonce=l);const E=i??document.head;return E.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{E.contains(_)&&E.removeChild(_)}},[t]),at.jsx(eW,{isPresent:t,childRef:s,sizeRef:r,children:tt.cloneElement(n,{ref:s})})}const iW=({children:n,initial:t,isPresent:e,onExitComplete:i,custom:a,presenceAffectsLayout:s,mode:r,anchorX:l,root:u})=>{const f=BE(aW),d=tt.useId();let p=!0,m=tt.useMemo(()=>(p=!1,{id:d,initial:t,isPresent:e,custom:a,onExitComplete:g=>{f.set(g,!0);for(const _ of f.values())if(!_)return;i&&i()},register:g=>(f.set(g,!1),()=>f.delete(g))}),[e,f,i]);return s&&p&&(m={...m}),tt.useMemo(()=>{f.forEach((g,_)=>f.set(_,!1))},[e]),tt.useEffect(()=>{!e&&!f.size&&i&&i()},[e]),r==="popLayout"&&(n=at.jsx(nW,{isPresent:e,anchorX:l,root:u,children:n})),at.jsx(zy.Provider,{value:m,children:n})};function aW(){return new Map}function xz(n=!0){const t=tt.useContext(zy);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:a}=t,s=tt.useId();tt.useEffect(()=>{if(n)return a(s)},[n]);const r=tt.useCallback(()=>n&&i&&i(s),[s,i,n]);return!e&&i?[!1,r]:[!0]}const Ig=n=>n.key||"";function l3(n){const t=[];return tt.Children.forEach(n,e=>{tt.isValidElement(e)&&t.push(e)}),t}const Ov=({children:n,custom:t,initial:e=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:s="sync",propagate:r=!1,anchorX:l="left",root:u})=>{const[f,d]=xz(r),p=tt.useMemo(()=>l3(n),[n]),m=r&&!f?[]:p.map(Ig),g=tt.useRef(!0),_=tt.useRef(p),E=BE(()=>new Map),[M,v]=tt.useState(p),[x,b]=tt.useState(p);RP(()=>{g.current=!1,_.current=p;for(let R=0;R<x.length;R++){const N=Ig(x[R]);m.includes(N)?E.delete(N):E.get(N)!==!0&&E.set(N,!1)}},[x,m.length,m.join("-")]);const T=[];if(p!==M){let R=[...p];for(let N=0;N<x.length;N++){const U=x[N],D=Ig(U);m.includes(D)||(R.splice(N,0,U),T.push(U))}return s==="wait"&&T.length&&(R=T),b(l3(R)),v(p),null}const{forceRender:w}=tt.useContext(zE);return at.jsx(at.Fragment,{children:x.map(R=>{const N=Ig(R),U=r&&!f?!1:p===x||m.includes(N),D=()=>{if(E.has(N))E.set(N,!0);else return;let C=!0;E.forEach(B=>{B||(C=!1)}),C&&(w==null||w(),b(_.current),r&&(d==null||d()),i&&i())};return at.jsx(iW,{isPresent:U,initial:!g.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:s,root:u,onExitComplete:U?void 0:D,anchorX:l,children:R},N)})})},Sz=tt.createContext({strict:!1}),c3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rf={};for(const n in c3)Rf[n]={isEnabled:t=>c3[n].some(e=>!!t[e])};function sW(n){for(const t in n)Rf[t]={...Rf[t],...n[t]}}const rW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||rW.has(n)}let Mz=n=>!Lv(n);function oW(n){typeof n=="function"&&(Mz=t=>t.startsWith("on")?!Lv(t):n(t))}try{oW(require("@emotion/is-prop-valid").default)}catch{}function lW(n,t,e){const i={};for(const a in n)a==="values"&&typeof n.values=="object"||(Mz(a)||e===!0&&Lv(a)||!t&&!Lv(a)||n.draggable&&a.startsWith("onDrag"))&&(i[a]=n[a]);return i}const By=tt.createContext({});function Iy(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function cp(n){return typeof n=="string"||Array.isArray(n)}const rT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oT=["initial",...rT];function Vy(n){return Iy(n.animate)||oT.some(t=>cp(n[t]))}function bz(n){return!!(Vy(n)||n.variants)}function cW(n,t){if(Vy(n)){const{initial:e,animate:i}=n;return{initial:e===!1||cp(e)?e:void 0,animate:cp(i)?i:void 0}}return n.inherit!==!1?t:{}}function uW(n){const{initial:t,animate:e}=cW(n,tt.useContext(By));return tt.useMemo(()=>({initial:t,animate:e}),[u3(t),u3(e)])}function u3(n){return Array.isArray(n)?n.join(" "):n}const up={};function fW(n){for(const t in n)up[t]=n[t],jE(t)&&(up[t].isCSSVariable=!0)}function Ez(n,{layout:t,layoutId:e}){return qf.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!up[n]||n==="opacity")}const hW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dW=jf.length;function pW(n,t,e){let i="",a=!0;for(let s=0;s<dW;s++){const r=jf[s],l=n[r];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(r.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||e){const f=pz(l,nT[r]);if(!u){a=!1;const d=hW[r]||r;i+=`${d}(${f}) `}e&&(t[r]=f)}}return i=i.trim(),e?i=e(t,a?"":i):a&&(i="none"),i}function lT(n,t,e){const{style:i,vars:a,transformOrigin:s}=n;let r=!1,l=!1;for(const u in t){const f=t[u];if(qf.has(u)){r=!0;continue}else if(jE(u)){a[u]=f;continue}else{const d=pz(f,nT[u]);u.startsWith("origin")?(l=!0,s[u]=d):i[u]=d}}if(t.transform||(r||e?i.transform=pW(t,n.transform,e):i.transform&&(i.transform="none")),l){const{originX:u="50%",originY:f="50%",originZ:d=0}=s;i.transformOrigin=`${u} ${f} ${d}`}}const cT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Tz(n,t,e){for(const i in t)!Ui(t[i])&&!Ez(i,e)&&(n[i]=t[i])}function mW({transformTemplate:n},t){return tt.useMemo(()=>{const e=cT();return lT(e,t,n),Object.assign({},e.vars,e.style)},[t])}function gW(n,t){const e=n.style||{},i={};return Tz(i,e,n),Object.assign(i,mW(n,t)),i}function vW(n,t){const e={},i=gW(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const yW={offset:"stroke-dashoffset",array:"stroke-dasharray"},_W={offset:"strokeDashoffset",array:"strokeDasharray"};function xW(n,t,e=1,i=0,a=!0){n.pathLength=1;const s=a?yW:_W;n[s.offset]=ge.transform(-i);const r=ge.transform(t),l=ge.transform(e);n[s.array]=`${r} ${l}`}function Az(n,{attrX:t,attrY:e,attrScale:i,pathLength:a,pathSpacing:s=1,pathOffset:r=0,...l},u,f,d){if(lT(n,l,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m}=n;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),e!==void 0&&(p.y=e),i!==void 0&&(p.scale=i),a!==void 0&&xW(p,a,s,r,!1)}const Cz=()=>({...cT(),attrs:{}}),wz=n=>typeof n=="string"&&n.toLowerCase()==="svg";function SW(n,t,e,i){const a=tt.useMemo(()=>{const s=Cz();return Az(s,t,wz(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[t]);if(n.style){const s={};Tz(s,n.style,n),a.style={...s,...a.style}}return a}const MW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uT(n){return typeof n!="string"||n.includes("-")?!1:!!(MW.indexOf(n)>-1||/[A-Z]/u.test(n))}function bW(n,t,e,{latestValues:i},a,s=!1){const l=(uT(n)?SW:vW)(t,i,a,n),u=lW(t,typeof n=="string",s),f=n!==tt.Fragment?{...u,...l,ref:e}:{},{children:d}=t,p=tt.useMemo(()=>Ui(d)?d.get():d,[d]);return tt.createElement(n,{...f,children:p})}function f3(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function fT(n,t,e,i){if(typeof t=="function"){const[a,s]=f3(i);t=t(e!==void 0?e:n.custom,a,s)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[a,s]=f3(i);t=t(e!==void 0?e:n.custom,a,s)}return t}function r0(n){return Ui(n)?n.get():n}function EW({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,a){return{latestValues:TW(e,i,a,n),renderState:t()}}function TW(n,t,e,i){const a={},s=i(n,{});for(const m in s)a[m]=r0(s[m]);let{initial:r,animate:l}=n;const u=Vy(n),f=bz(n);t&&f&&!u&&n.inherit!==!1&&(r===void 0&&(r=t.initial),l===void 0&&(l=t.animate));let d=e?e.initial===!1:!1;d=d||r===!1;const p=d?l:r;if(p&&typeof p!="boolean"&&!Iy(p)){const m=Array.isArray(p)?p:[p];for(let g=0;g<m.length;g++){const _=fT(n,m[g]);if(_){const{transitionEnd:E,transition:M,...v}=_;for(const x in v){let b=v[x];if(Array.isArray(b)){const T=d?b.length-1:0;b=b[T]}b!==null&&(a[x]=b)}for(const x in E)a[x]=E[x]}}}return a}const Rz=n=>(t,e)=>{const i=tt.useContext(By),a=tt.useContext(zy),s=()=>EW(n,t,i,a);return e?s():BE(s)};function hT(n,t,e){var s;const{style:i}=n,a={};for(const r in i)(Ui(i[r])||t.style&&Ui(t.style[r])||Ez(r,n)||((s=e==null?void 0:e.getValue(r))==null?void 0:s.liveStyle)!==void 0)&&(a[r]=i[r]);return a}const AW=Rz({scrapeMotionValuesFromProps:hT,createRenderState:cT});function Dz(n,t,e){const i=hT(n,t,e);for(const a in n)if(Ui(n[a])||Ui(t[a])){const s=jf.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[s]=n[a]}return i}const CW=Rz({scrapeMotionValuesFromProps:Dz,createRenderState:Cz}),wW=Symbol.for("motionComponentSymbol");function Xu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function RW(n,t,e){return tt.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Xu(e)&&(e.current=i))},[t])}const dT=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),DW="framerAppearId",Nz="data-"+dT(DW),Uz=tt.createContext({});function NW(n,t,e,i,a){var E,M;const{visualElement:s}=tt.useContext(By),r=tt.useContext(Sz),l=tt.useContext(zy),u=tt.useContext(sT).reducedMotion,f=tt.useRef(null);i=i||r.renderer,!f.current&&i&&(f.current=i(n,{visualState:t,parent:s,props:e,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const d=f.current,p=tt.useContext(Uz);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&UW(f.current,e,a,p);const m=tt.useRef(!1);tt.useInsertionEffect(()=>{d&&m.current&&d.update(e,l)});const g=e[Nz],_=tt.useRef(!!g&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,g))&&((M=window.MotionHasOptimisedAnimation)==null?void 0:M.call(window,g)));return RP(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),_.current&&d.animationState&&d.animationState.animateChanges())}),tt.useEffect(()=>{d&&(!_.current&&d.animationState&&d.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,g)}),_.current=!1),d.enteringChildren=void 0)}),d}function UW(n,t,e,i){const{layoutId:a,layout:s,drag:r,dragConstraints:l,layoutScroll:u,layoutRoot:f,layoutCrossfade:d}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:Oz(n.parent)),n.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!r||l&&Xu(l),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:u,layoutRoot:f})}function Oz(n){if(n)return n.options.allowProjection!==!1?n.projection:Oz(n.parent)}function WS(n,{forwardMotionProps:t=!1}={},e,i){e&&sW(e);const a=uT(n)?CW:AW;function s(l,u){let f;const d={...tt.useContext(sT),...l,layoutId:OW(l)},{isStatic:p}=d,m=uW(l),g=a(l,p);if(!p&&IE){LW();const _=PW(d);f=_.MeasureLayout,m.visualElement=NW(n,g,d,i,_.ProjectionNode)}return at.jsxs(By.Provider,{value:m,children:[f&&m.visualElement?at.jsx(f,{visualElement:m.visualElement,...d}):null,bW(n,l,RW(g,m.visualElement,u),g,p,t)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const r=tt.forwardRef(s);return r[wW]=n,r}function OW({layoutId:n}){const t=tt.useContext(zE).id;return t&&n!==void 0?t+"-"+n:n}function LW(n,t){tt.useContext(Sz).strict}function PW(n){const{drag:t,layout:e}=Rf;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function zW(n,t){if(typeof Proxy>"u")return WS;const e=new Map,i=(s,r)=>WS(s,r,n,t),a=(s,r)=>i(s,r);return new Proxy(a,{get:(s,r)=>r==="create"?i:(e.has(r)||e.set(r,WS(r,void 0,n,t)),e.get(r))})}function Lz({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function BW({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function IW(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function ZS(n){return n===void 0||n===1}function BM({scale:n,scaleX:t,scaleY:e}){return!ZS(n)||!ZS(t)||!ZS(e)}function kl(n){return BM(n)||Pz(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Pz(n){return h3(n.x)||h3(n.y)}function h3(n){return n&&n!=="0%"}function Pv(n,t,e){const i=n-e,a=t*i;return e+a}function d3(n,t,e,i,a){return a!==void 0&&(n=Pv(n,a,i)),Pv(n,e,i)+t}function IM(n,t=0,e=1,i,a){n.min=d3(n.min,t,e,i,a),n.max=d3(n.max,t,e,i,a)}function zz(n,{x:t,y:e}){IM(n.x,t.translate,t.scale,t.originPoint),IM(n.y,e.translate,e.scale,e.originPoint)}const p3=.999999999999,m3=1.0000000000001;function VW(n,t,e,i=!1){const a=e.length;if(!a)return;t.x=t.y=1;let s,r;for(let l=0;l<a;l++){s=e[l],r=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ju(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),r&&(t.x*=r.x.scale,t.y*=r.y.scale,zz(n,r)),i&&kl(s.latestValues)&&ju(n,s.latestValues))}t.x<m3&&t.x>p3&&(t.x=1),t.y<m3&&t.y>p3&&(t.y=1)}function ku(n,t){n.min=n.min+t,n.max=n.max+t}function g3(n,t,e,i,a=.5){const s=An(n.min,n.max,a);IM(n,t,e,s,i)}function ju(n,t){g3(n.x,t.x,t.scaleX,t.scale,t.originX),g3(n.y,t.y,t.scaleY,t.scale,t.originY)}function Bz(n,t){return Lz(IW(n.getBoundingClientRect(),t))}function HW(n,t,e){const i=Bz(n,e),{scroll:a}=t;return a&&(ku(i.x,a.offset.x),ku(i.y,a.offset.y)),i}const v3=()=>({translate:0,scale:1,origin:0,originPoint:0}),qu=()=>({x:v3(),y:v3()}),y3=()=>({min:0,max:0}),Bn=()=>({x:y3(),y:y3()}),VM={current:null},Iz={current:!1};function FW(){if(Iz.current=!0,!!IE)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>VM.current=n.matches;n.addEventListener("change",t),t()}else VM.current=!1}const GW=new WeakMap;function XW(n,t,e){for(const i in t){const a=t[i],s=e[i];if(Ui(a))n.addValue(i,a);else if(Ui(s))n.addValue(i,wf(a,{owner:n}));else if(s!==a)if(n.hasValue(i)){const r=n.getValue(i);r.liveStyle===!0?r.jump(a):r.hasAnimated||r.set(a)}else{const r=n.getStaticValue(i);n.addValue(i,wf(r!==void 0?r:a,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const _3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kW{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:s,visualState:r},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ra.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,xn.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=r;this.latestValues=u,this.baseTarget={...u},this.initialValues=e.initial?{...u}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Vy(e),this.isVariantNode=bz(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(e,{},this);for(const m in p){const g=p[m];u[m]!==void 0&&Ui(g)&&g.set(u[m])}}mount(t){var e;this.current=t,GW.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,a)=>this.bindToMotionValue(a,i)),Iz.current||FW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:VM.current,(e=this.parent)==null||e.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),qo(this.notifyUpdate),qo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=qf.has(t);i&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",r=>{this.latestValues[t]=r,this.props.onUpdate&&xn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Rf){const e=Rf[t];if(!e)continue;const{isEnabled:i,Feature:a}=e;if(!this.features[t]&&a&&i(this.props)&&(this.features[t]=new a(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<_3.length;i++){const a=_3[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const s="on"+a,r=t[s];r&&(this.propEventSubscriptions[a]=this.on(a,r))}this.prevMotionValues=XW(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=wf(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(DP(i)||UP(i))?i=parseFloat(i):!tW(i)&&Yo.test(e)&&(i=dz(t,e)),this.setBaseTarget(t,Ui(i)?i.get():i)),Ui(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var s;const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const r=fT(this.props,e,(s=this.presenceContext)==null?void 0:s.custom);r&&(i=r[t])}if(e&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Ui(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new GE),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){iT.render(this.render)}}class Vz extends kW{constructor(){super(...arguments),this.KeyframeResolver=GY}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ui(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function Hz(n,{style:t,vars:e},i,a){const s=n.style;let r;for(r in t)s[r]=t[r];a==null||a.applyProjectionStyles(s,i);for(r in e)s.setProperty(r,e[r])}function jW(n){return window.getComputedStyle(n)}class qW extends Vz{constructor(){super(...arguments),this.type="html",this.renderInstance=Hz}readValueFromInstance(t,e){var i;if(qf.has(e))return(i=this.projection)!=null&&i.isProjecting?DM(e):oY(t,e);{const a=jW(t),s=(jE(e)?a.getPropertyValue(e):a[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return Bz(t,e)}build(t,e,i){lT(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return hT(t,e,i)}}const Fz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function YW(n,t,e,i){Hz(n,t,void 0,i);for(const a in t.attrs)n.setAttribute(Fz.has(a)?a:dT(a),t.attrs[a])}class WW extends Vz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(qf.has(e)){const i=hz(e);return i&&i.default||0}return e=Fz.has(e)?e:dT(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return Dz(t,e,i)}build(t,e,i){Az(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,a){YW(t,e,i,a)}mount(t){this.isSVGTag=wz(t.tagName),super.mount(t)}}const ZW=(n,t)=>uT(n)?new WW(t):new qW(t,{allowProjection:n!==tt.Fragment});function sf(n,t,e){const i=n.getProps();return fT(i,t,e!==void 0?e:i.custom,n)}const HM=n=>Array.isArray(n);function KW(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,wf(e))}function QW(n){return HM(n)?n[n.length-1]||0:n}function JW(n,t){const e=sf(n,t);let{transitionEnd:i={},transition:a={},...s}=e||{};s={...s,...i};for(const r in s){const l=QW(s[r]);KW(n,r,l)}}function $W(n){return!!(Ui(n)&&n.add)}function FM(n,t){const e=n.getValue("willChange");if($W(e))return e.add(t);if(!e&&Xr.WillChange){const i=new Xr.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function Gz(n){return n.props[Nz]}const tZ=n=>n!==null;function eZ(n,{repeat:t,repeatType:e="loop"},i){const a=n.filter(tZ),s=t&&e!=="loop"&&t%2===1?0:a.length-1;return!s||i===void 0?a[s]:i}const nZ={type:"spring",stiffness:500,damping:25,restSpeed:10},iZ=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),aZ={type:"keyframes",duration:.8},sZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rZ=(n,{keyframes:t})=>t.length>2?aZ:qf.has(n)?n.startsWith("scale")?iZ(t[1]):nZ:sZ;function oZ({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:a,repeat:s,repeatType:r,repeatDelay:l,from:u,elapsed:f,...d}){return!!Object.keys(d).length}const pT=(n,t,e,i={},a,s)=>r=>{const l=eT(i,n)||{},u=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-qs(u);const d={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-f,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{r(),l.onComplete&&l.onComplete()},name:n,motionValue:t,element:s?void 0:a};oZ(l)||Object.assign(d,rZ(n,d)),d.duration&&(d.duration=qs(d.duration)),d.repeatDelay&&(d.repeatDelay=qs(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(PM(d),d.delay===0&&(p=!0)),(Xr.instantAnimations||Xr.skipAnimations)&&(p=!0,PM(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const m=eZ(d.keyframes,l);if(m!==void 0){xn.update(()=>{d.onUpdate(m),d.onComplete()});return}}return l.isSync?new $E(d):new DY(d)};function lZ({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function Xz(n,t,{delay:e=0,transitionOverride:i,type:a}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:r,...l}=t;i&&(s=i);const u=[],f=a&&n.animationState&&n.animationState.getState()[a];for(const d in l){const p=n.getValue(d,n.latestValues[d]??null),m=l[d];if(m===void 0||f&&lZ(f,d))continue;const g={delay:e,...eT(s||{},d)},_=p.get();if(_!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===_&&!g.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const v=Gz(n);if(v){const x=window.MotionHandoffAnimation(v,d,xn);x!==null&&(g.startTime=x,E=!0)}}FM(n,d),p.start(pT(d,p,m,n.shouldReduceMotion&&cz.has(d)?{type:!1}:g,n,E));const M=p.animation;M&&u.push(M)}return r&&Promise.all(u).then(()=>{xn.update(()=>{r&&JW(n,r)})}),u}function kz(n,t,e,i=0,a=1){const s=Array.from(n).sort((f,d)=>f.sortNodePosition(d)).indexOf(t),r=n.size,l=(r-1)*i;return typeof e=="function"?e(s,r):a===1?s*i:l-s*i}function GM(n,t,e={}){var u;const i=sf(n,t,e.type==="exit"?(u=n.presenceContext)==null?void 0:u.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(a=e.transitionOverride);const s=i?()=>Promise.all(Xz(n,i,e)):()=>Promise.resolve(),r=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:m}=a;return cZ(n,t,f,d,p,m,e)}:()=>Promise.resolve(),{when:l}=a;if(l){const[f,d]=l==="beforeChildren"?[s,r]:[r,s];return f().then(()=>d())}else return Promise.all([s(),r(e.delay)])}function cZ(n,t,e=0,i=0,a=0,s=1,r){const l=[];for(const u of n.variantChildren)u.notify("AnimationStart",t),l.push(GM(u,t,{...r,delay:e+(typeof i=="function"?0:i)+kz(n.variantChildren,u,i,a,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function uZ(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(s=>GM(n,s,e));i=Promise.all(a)}else if(typeof t=="string")i=GM(n,t,e);else{const a=typeof t=="function"?sf(n,t,e.custom):t;i=Promise.all(Xz(n,a,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function jz(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const fZ=oT.length;function qz(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?qz(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<fZ;e++){const i=oT[e],a=n.props[i];(cp(a)||a===!1)&&(t[i]=a)}return t}const hZ=[...rT].reverse(),dZ=rT.length;function pZ(n){return t=>Promise.all(t.map(({animation:e,options:i})=>uZ(n,e,i)))}function mZ(n){let t=pZ(n),e=x3(),i=!0;const a=u=>(f,d)=>{var m;const p=sf(n,d,u==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);if(p){const{transition:g,transitionEnd:_,...E}=p;f={...f,...E,..._}}return f};function s(u){t=u(n)}function r(u){const{props:f}=n,d=qz(n.parent)||{},p=[],m=new Set;let g={},_=1/0;for(let M=0;M<dZ;M++){const v=hZ[M],x=e[v],b=f[v]!==void 0?f[v]:d[v],T=cp(b),w=v===u?x.isActive:null;w===!1&&(_=M);let R=b===d[v]&&b!==f[v]&&T;if(R&&i&&n.manuallyAnimateOnMount&&(R=!1),x.protectedKeys={...g},!x.isActive&&w===null||!b&&!x.prevProp||Iy(b)||typeof b=="boolean")continue;const N=gZ(x.prevProp,b);let U=N||v===u&&x.isActive&&!R&&T||M>_&&T,D=!1;const C=Array.isArray(b)?b:[b];let B=C.reduce(a(v),{});w===!1&&(B={});const{prevResolvedValues:Z={}}=x,q={...Z,...B},it=G=>{U=!0,m.has(G)&&(D=!0,m.delete(G)),x.needsAnimating[G]=!0;const H=n.getValue(G);H&&(H.liveStyle=!1)};for(const G in q){const H=B[G],W=Z[G];if(g.hasOwnProperty(G))continue;let rt=!1;HM(H)&&HM(W)?rt=!jz(H,W):rt=H!==W,rt?H!=null?it(G):m.add(G):H!==void 0&&m.has(G)?it(G):x.protectedKeys[G]=!0}x.prevProp=b,x.prevResolvedValues=B,x.isActive&&(g={...g,...B}),i&&n.blockInitialAnimation&&(U=!1);const et=R&&N;U&&(!et||D)&&p.push(...C.map(G=>{const H={type:v};if(typeof G=="string"&&i&&!et&&n.manuallyAnimateOnMount&&n.parent){const{parent:W}=n,rt=sf(W,G);if(W.enteringChildren&&rt){const{delayChildren:vt}=rt.transition||{};H.delay=kz(W.enteringChildren,n,vt)}}return{animation:G,options:H}}))}if(m.size){const M={};if(typeof f.initial!="boolean"){const v=sf(n,Array.isArray(f.initial)?f.initial[0]:f.initial);v&&v.transition&&(M.transition=v.transition)}m.forEach(v=>{const x=n.getBaseTarget(v),b=n.getValue(v);b&&(b.liveStyle=!0),M[v]=x??null}),p.push({animation:M})}let E=!!p.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(E=!1),i=!1,E?t(p):Promise.resolve()}function l(u,f){var p;if(e[u].isActive===f)return Promise.resolve();(p=n.variantChildren)==null||p.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(u,f)}),e[u].isActive=f;const d=r(u);for(const m in e)e[m].protectedKeys={};return d}return{animateChanges:r,setActive:l,setAnimateFunction:s,getState:()=>e,reset:()=>{e=x3(),i=!0}}}function gZ(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!jz(t,n):!1}function zl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x3(){return{animate:zl(!0),whileInView:zl(),whileHover:zl(),whileTap:zl(),whileDrag:zl(),whileFocus:zl(),exit:zl()}}class el{constructor(t){this.isMounted=!1,this.node=t}update(){}}class vZ extends el{constructor(t){super(t),t.animationState||(t.animationState=mZ(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Iy(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let yZ=0;class _Z extends el{constructor(){super(...arguments),this.id=yZ++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const xZ={animation:{Feature:vZ},exit:{Feature:_Z}};function fp(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function Xp(n){return{point:{x:n.pageX,y:n.pageY}}}const SZ=n=>t=>aT(t)&&n(t,Xp(t));function Td(n,t,e,i){return fp(n,t,SZ(e),i)}const Yz=1e-4,MZ=1-Yz,bZ=1+Yz,Wz=.01,EZ=0-Wz,TZ=0+Wz;function qi(n){return n.max-n.min}function AZ(n,t,e){return Math.abs(n-t)<=e}function S3(n,t,e,i=.5){n.origin=i,n.originPoint=An(t.min,t.max,n.origin),n.scale=qi(e)/qi(t),n.translate=An(e.min,e.max,n.origin)-n.originPoint,(n.scale>=MZ&&n.scale<=bZ||isNaN(n.scale))&&(n.scale=1),(n.translate>=EZ&&n.translate<=TZ||isNaN(n.translate))&&(n.translate=0)}function Ad(n,t,e,i){S3(n.x,t.x,e.x,i?i.originX:void 0),S3(n.y,t.y,e.y,i?i.originY:void 0)}function M3(n,t,e){n.min=e.min+t.min,n.max=n.min+qi(t)}function CZ(n,t,e){M3(n.x,t.x,e.x),M3(n.y,t.y,e.y)}function b3(n,t,e){n.min=t.min-e.min,n.max=n.min+qi(t)}function Cd(n,t,e){b3(n.x,t.x,e.x),b3(n.y,t.y,e.y)}function ja(n){return[n("x"),n("y")]}const Zz=({current:n})=>n?n.ownerDocument.defaultView:null,E3=(n,t)=>Math.abs(n-t);function wZ(n,t){const e=E3(n.x,t.x),i=E3(n.y,t.y);return Math.sqrt(e**2+i**2)}class Kz{constructor(t,e,{transformPagePoint:i,contextWindow:a=window,dragSnapToOrigin:s=!1,distanceThreshold:r=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=QS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,_=wZ(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!_)return;const{point:E}=m,{timestamp:M}=di;this.history.push({...E,timestamp:M});const{onStart:v,onMove:x}=this.handlers;g||(v&&v(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=KS(g,this.transformPagePoint),xn.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:_,onSessionEnd:E,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=QS(m.type==="pointercancel"?this.lastMoveEventInfo:KS(g,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,v),E&&E(m,v)},!aT(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=r,this.contextWindow=a||window;const l=Xp(t),u=KS(l,this.transformPagePoint),{point:f}=u,{timestamp:d}=di;this.history=[{...f,timestamp:d}];const{onSessionStart:p}=e;p&&p(t,QS(u,this.history)),this.removeListeners=Hp(Td(this.contextWindow,"pointermove",this.handlePointerMove),Td(this.contextWindow,"pointerup",this.handlePointerUp),Td(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),qo(this.updatePoint)}}function KS(n,t){return t?{point:t(n.point)}:n}function T3(n,t){return{x:n.x-t.x,y:n.y-t.y}}function QS({point:n},t){return{point:n,delta:T3(n,Qz(t)),offset:T3(n,RZ(t)),velocity:DZ(t,.1)}}function RZ(n){return n[0]}function Qz(n){return n[n.length-1]}function DZ(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const a=Qz(n);for(;e>=0&&(i=n[e],!(a.timestamp-i.timestamp>qs(t)));)e--;if(!i)return{x:0,y:0};const s=Ys(a.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const r={x:(a.x-i.x)/s,y:(a.y-i.y)/s};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function NZ(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?An(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?An(e,n,i.max):Math.min(n,e)),n}function A3(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function UZ(n,{top:t,left:e,bottom:i,right:a}){return{x:A3(n.x,e,a),y:A3(n.y,t,i)}}function C3(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function OZ(n,t){return{x:C3(n.x,t.x),y:C3(n.y,t.y)}}function LZ(n,t){let e=.5;const i=qi(n),a=qi(t);return a>i?e=rp(t.min,t.max-i,n.min):i>a&&(e=rp(n.min,n.max-a,t.min)),Gr(0,1,e)}function PZ(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const XM=.35;function zZ(n=XM){return n===!1?n=0:n===!0&&(n=XM),{x:w3(n,"left","right"),y:w3(n,"top","bottom")}}function w3(n,t,e){return{min:R3(n,t),max:R3(n,e)}}function R3(n,t){return typeof n=="number"?n:n[t]||0}const BZ=new WeakMap;class IZ{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Xp(p).point)},r=(p,m)=>{const{drag:g,dragPropagation:_,onDragStart:E}=this.getProps();if(g&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qY(g),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ja(v=>{let x=this.getAxisMotionValue(v).get()||0;if(Ws.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const T=b.layout.layoutBox[v];T&&(x=qi(T)*(parseFloat(x)/100))}}this.originPoint[v]=x}),E&&xn.postRender(()=>E(p,m)),FM(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:_,onDirectionLock:E,onDrag:M}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:v}=m;if(_&&this.currentDirection===null){this.currentDirection=VZ(v),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,v),this.updateAxis("y",m.point,v),this.visualElement.render(),M&&M(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>ja(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Kz(t,{onSessionStart:s,onStart:r,onMove:l,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:i,contextWindow:Zz(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,a=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!a||!i)return;const{velocity:r}=a;this.startAnimation(r);const{onDragEnd:l}=this.getProps();l&&xn.postRender(()=>l(i,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:a}=this.getProps();if(!i||!Vg(t,a,this.currentDirection))return;const s=this.getAxisMotionValue(t);let r=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(r=NZ(r,this.constraints[t],this.elastic[t])),s.set(r)}resolveConstraints(){var s;const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,a=this.constraints;t&&Xu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=UZ(i.layoutBox,t):this.constraints=!1,this.elastic=zZ(e),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ja(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=PZ(i.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Xu(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const s=HW(i,a.root,this.visualElement.getTransformPagePoint());let r=OZ(a.layout.layoutBox,s);if(e){const l=e(BW(r));this.hasMutatedConstraints=!!l,l&&(r=Lz(l))}return r}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:a,dragTransition:s,dragSnapToOrigin:r,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},f=ja(d=>{if(!Vg(d,e,this.currentDirection))return;let p=u&&u[d]||{};r&&(p={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,_={type:"inertia",velocity:i?t[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(d,_)});return Promise.all(f).then(l)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return FM(this.visualElement,t),i.start(pT(t,i,0,e,this.visualElement,!1))}stopAnimation(){ja(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ja(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),a=i[e];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ja(e=>{const{drag:i}=this.getProps();if(!Vg(e,i,this.currentDirection))return;const{projection:a}=this.visualElement,s=this.getAxisMotionValue(e);if(a&&a.layout){const{min:r,max:l}=a.layout.layoutBox[e];s.set(t[e]-An(r,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Xu(e)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ja(r=>{const l=this.getAxisMotionValue(r);if(l&&this.constraints!==!1){const u=l.get();a[r]=LZ({min:u,max:u},this.constraints[r])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ja(r=>{if(!Vg(r,t,null))return;const l=this.getAxisMotionValue(r),{min:u,max:f}=this.constraints[r];l.set(An(u,f,a[r]))})}addListeners(){if(!this.visualElement.current)return;BZ.set(this.visualElement,this);const t=this.visualElement.current,e=Td(t,"pointerdown",u=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();Xu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),xn.read(i);const r=fp(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(ja(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=u[d].translate,p.set(p.get()+u[d].translate))}),this.visualElement.render())});return()=>{r(),e(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:s=!1,dragElastic:r=XM,dragMomentum:l=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:a,dragConstraints:s,dragElastic:r,dragMomentum:l}}}function Vg(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function VZ(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class HZ extends el{constructor(t){super(t),this.removeGroupControls=es,this.removeListeners=es,this.controls=new IZ(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||es}unmount(){this.removeGroupControls(),this.removeListeners()}}const D3=n=>(t,e)=>{n&&xn.postRender(()=>n(t,e))};class FZ extends el{constructor(){super(...arguments),this.removePointerDownListener=es}onPointerDown(t){this.session=new Kz(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zz(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:D3(t),onStart:D3(e),onMove:i,onEnd:(s,r)=>{delete this.session,a&&xn.postRender(()=>a(s,r))}}}mount(){this.removePointerDownListener=Td(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const o0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function N3(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Gh={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(ge.test(n))n=parseFloat(n);else return n;const e=N3(n,t.target.x),i=N3(n,t.target.y);return`${e}% ${i}%`}},GZ={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,a=Yo.parse(n);if(a.length>5)return i;const s=Yo.createTransformer(n),r=typeof a[0]!="number"?1:0,l=e.x.scale*t.x,u=e.y.scale*t.y;a[0+r]/=l,a[1+r]/=u;const f=An(l,u,.5);return typeof a[2+r]=="number"&&(a[2+r]/=f),typeof a[3+r]=="number"&&(a[3+r]/=f),s(a)}};let JS=!1;class XZ extends tt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:a}=this.props,{projection:s}=t;fW(kZ),s&&(e.group&&e.group.add(s),i&&i.register&&a&&i.register(s),JS&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),o0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:a,isPresent:s}=this.props,{projection:r}=i;return r&&(r.isPresent=s,JS=!0,a||t.layoutDependency!==e||e===void 0||t.isPresent!==s?r.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?r.promote():r.relegate()||xn.postRender(()=>{const l=r.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),iT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:a}=t;JS=!0,a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Jz(n){const[t,e]=xz(),i=tt.useContext(zE);return at.jsx(XZ,{...n,layoutGroup:i,switchLayoutGroup:tt.useContext(Uz),isPresent:t,safeToRemove:e})}const kZ={borderRadius:{...Gh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gh,borderTopRightRadius:Gh,borderBottomLeftRadius:Gh,borderBottomRightRadius:Gh,boxShadow:GZ};function jZ(n,t,e){const i=Ui(n)?n:wf(n);return i.start(pT("",i,t,e)),i.animation}const qZ=(n,t)=>n.depth-t.depth;class YZ{constructor(){this.children=[],this.isDirty=!1}add(t){VE(this.children,t),this.isDirty=!0}remove(t){HE(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(qZ),this.isDirty=!1,this.children.forEach(t)}}function WZ(n,t){const e=ra.now(),i=({timestamp:a})=>{const s=a-e;s>=t&&(qo(i),n(s-t))};return xn.setup(i,!0),()=>qo(i)}const $z=["TopLeft","TopRight","BottomLeft","BottomRight"],ZZ=$z.length,U3=n=>typeof n=="string"?parseFloat(n):n,O3=n=>typeof n=="number"||ge.test(n);function KZ(n,t,e,i,a,s){a?(n.opacity=An(0,e.opacity??1,QZ(i)),n.opacityExit=An(t.opacity??1,0,JZ(i))):s&&(n.opacity=An(t.opacity??1,e.opacity??1,i));for(let r=0;r<ZZ;r++){const l=`border${$z[r]}Radius`;let u=L3(t,l),f=L3(e,l);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||O3(u)===O3(f)?(n[l]=Math.max(An(U3(u),U3(f),i),0),(Ws.test(f)||Ws.test(u))&&(n[l]+="%")):n[l]=f}(t.rotate||e.rotate)&&(n.rotate=An(t.rotate||0,e.rotate||0,i))}function L3(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const QZ=tB(0,.5,HP),JZ=tB(.5,.95,es);function tB(n,t,e){return i=>i<n?0:i>t?1:e(rp(n,t,i))}function P3(n,t){n.min=t.min,n.max=t.max}function ka(n,t){P3(n.x,t.x),P3(n.y,t.y)}function z3(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function B3(n,t,e,i,a){return n-=t,n=Pv(n,1/e,i),a!==void 0&&(n=Pv(n,1/a,i)),n}function $Z(n,t=0,e=1,i=.5,a,s=n,r=n){if(Ws.test(t)&&(t=parseFloat(t),t=An(r.min,r.max,t/100)-r.min),typeof t!="number")return;let l=An(s.min,s.max,i);n===s&&(l-=t),n.min=B3(n.min,t,e,l,a),n.max=B3(n.max,t,e,l,a)}function I3(n,t,[e,i,a],s,r){$Z(n,t[e],t[i],t[a],t.scale,s,r)}const tK=["x","scaleX","originX"],eK=["y","scaleY","originY"];function V3(n,t,e,i){I3(n.x,t,tK,e?e.x:void 0,i?i.x:void 0),I3(n.y,t,eK,e?e.y:void 0,i?i.y:void 0)}function H3(n){return n.translate===0&&n.scale===1}function eB(n){return H3(n.x)&&H3(n.y)}function F3(n,t){return n.min===t.min&&n.max===t.max}function nK(n,t){return F3(n.x,t.x)&&F3(n.y,t.y)}function G3(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function nB(n,t){return G3(n.x,t.x)&&G3(n.y,t.y)}function X3(n){return qi(n.x)/qi(n.y)}function k3(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class iK{constructor(){this.members=[]}add(t){VE(this.members,t),t.scheduleRender()}remove(t){if(HE(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let i;for(let a=e;a>=0;a--){const s=this.members[a];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aK(n,t,e){let i="";const a=n.x.translate/t.x,s=n.y.translate/t.y,r=(e==null?void 0:e.z)||0;if((a||s||r)&&(i=`translate3d(${a}px, ${s}px, ${r}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:d,rotateX:p,rotateY:m,skewX:g,skewY:_}=e;f&&(i=`perspective(${f}px) ${i}`),d&&(i+=`rotate(${d}deg) `),p&&(i+=`rotateX(${p}deg) `),m&&(i+=`rotateY(${m}deg) `),g&&(i+=`skewX(${g}deg) `),_&&(i+=`skewY(${_}deg) `)}const l=n.x.scale*t.x,u=n.y.scale*t.y;return(l!==1||u!==1)&&(i+=`scale(${l}, ${u})`),i||"none"}const $S=["","X","Y","Z"],sK=1e3;let rK=0;function t1(n,t,e,i){const{latestValues:a}=t;a[n]&&(e[n]=a[n],t.setStaticValue(n,0),i&&(i[n]=0))}function iB(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=Gz(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",xn,!(a||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&iB(i)}function aB({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(r={},l=t==null?void 0:t()){this.id=rK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cK),this.nodes.forEach(dK),this.nodes.forEach(pK),this.nodes.forEach(uK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new YZ)}addEventListener(r,l){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new GE),this.eventHandlers.get(r).add(l)}notifyListeners(r,...l){const u=this.eventHandlers.get(r);u&&u.notify(...l)}hasListeners(r){return this.eventHandlers.has(r)}mount(r){if(this.instance)return;this.isSVG=_z(r)&&!JY(r),this.instance=r;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),n){let d,p=0;const m=()=>this.root.updateBlockedByResize=!1;xn.read(()=>{p=window.innerWidth}),n(r,()=>{const g=window.innerWidth;g!==p&&(p=g,this.root.updateBlockedByResize=!0,d&&d(),d=WZ(m,250),o0.hasAnimatedSinceResize&&(o0.hasAnimatedSinceResize=!1,this.nodes.forEach(Y3)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||f.getDefaultTransition()||_K,{onLayoutAnimationStart:E,onLayoutAnimationComplete:M}=f.getProps(),v=!this.targetLayout||!nB(this.targetLayout,g),x=!p&&m;if(this.options.layoutRoot||this.resumeFrom||x||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...eT(_,"layout"),onPlay:E,onComplete:M};(f.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,x)}else p||Y3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mK),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(j3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(q3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hK),this.nodes.forEach(oK),this.nodes.forEach(lK)):this.nodes.forEach(q3),this.clearAllSnapshots();const l=ra.now();di.delta=Gr(0,1e3/60,l-di.timestamp),di.timestamp=l,di.isProcessing=!0,GS.update.process(di),GS.preRender.process(di),GS.render.process(di),di.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,iT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fK),this.sharedNodes.forEach(gK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qi(this.snapshot.measuredBox.x)&&!qi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(l=!1),l&&this.instance){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:u,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!eB(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;r&&this.instance&&(l||kl(this.latestValues)||d)&&(a(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return r&&(u=this.removeTransform(u)),xK(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:r}=this.options;if(!r)return Bn();const l=r.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(SK))){const{scroll:d}=this.root;d&&(ku(l.x,d.offset.x),ku(l.y,d.offset.y))}return l}removeElementScroll(r){var u;const l=Bn();if(ka(l,r),(u=this.scroll)!=null&&u.wasRoot)return l;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:p,options:m}=d;d!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&ka(l,r),ku(l.x,p.offset.x),ku(l.y,p.offset.y))}return l}applyTransform(r,l=!1){const u=Bn();ka(u,r);for(let f=0;f<this.path.length;f++){const d=this.path[f];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ju(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),kl(d.latestValues)&&ju(u,d.latestValues)}return kl(this.latestValues)&&ju(u,this.latestValues),u}removeTransform(r){const l=Bn();ka(l,r);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!kl(f.latestValues))continue;BM(f.latestValues)&&f.updateSnapshot();const d=Bn(),p=f.measurePageBox();ka(d,p),V3(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return kl(this.latestValues)&&V3(l,this.latestValues),l}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==di.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(r||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=di.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bn(),this.relativeTargetOrigin=Bn(),Cd(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ka(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bn(),this.targetWithTransforms=Bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ka(this.target,this.layout.layoutBox),zz(this.target,this.targetDelta)):ka(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bn(),this.relativeTargetOrigin=Bn(),Cd(this.relativeTargetOrigin,this.target,g.target),ka(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||BM(this.parent.latestValues)||Pz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const r=this.getLead(),l=!!this.resumingFrom||this!==r;let u=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===di.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;ka(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;VW(this.layoutCorrected,this.treeScale,this.path,l),r.layout&&!r.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(r.target=r.layout.layoutBox,r.targetWithTransforms=Bn());const{target:g}=r;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(z3(this.prevProjectionDelta.x,this.projectionDelta.x),z3(this.prevProjectionDelta.y,this.projectionDelta.y)),Ad(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!k3(this.projectionDelta.x,this.prevProjectionDelta.x)||!k3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),r){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qu(),this.projectionDelta=qu(),this.projectionDeltaWithTransform=qu()}setAnimationOrigin(r,l=!1){const u=this.snapshot,f=u?u.latestValues:{},d={...this.latestValues},p=qu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Bn(),g=u?u.source:void 0,_=this.layout?this.layout.source:void 0,E=g!==_,M=this.getStack(),v=!M||M.members.length<=1,x=!!(E&&!v&&this.options.crossfade===!0&&!this.path.some(yK));this.animationProgress=0;let b;this.mixTargetDelta=T=>{const w=T/1e3;W3(p.x,r.x,w),W3(p.y,r.y,w),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vK(this.relativeTarget,this.relativeTargetOrigin,m,w),b&&nK(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Bn()),ka(b,this.relativeTarget)),E&&(this.animationValues=d,KZ(d,f,this.latestValues,w,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){var l,u,f;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(f=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||f.stop(),this.pendingAnimation&&(qo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xn.update(()=>{o0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wf(0)),this.currentAnimation=jZ(this.motionValue,[0,1e3],{...r,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),r.onUpdate&&r.onUpdate(d)},onStop:()=>{},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:l,target:u,layout:f,latestValues:d}=r;if(!(!l||!u||!f)){if(this!==r&&this.layout&&f&&sB(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||Bn();const p=qi(this.layout.layoutBox.x);u.x.min=r.target.x.min,u.x.max=u.x.min+p;const m=qi(this.layout.layoutBox.y);u.y.min=r.target.y.min,u.y.max=u.y.min+m}ka(l,u),ju(l,d),Ad(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(r,l){this.sharedNodes.has(r)||this.sharedNodes.set(r,new iK),this.sharedNodes.get(r).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){var l;const{layoutId:r}=this.options;return r?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:r}=this.options;return r?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:l,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),r&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let l=!1;const{latestValues:u}=r;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const f={};u.z&&t1("z",r,f,this.animationValues);for(let d=0;d<$S.length;d++)t1(`rotate${$S[d]}`,r,f,this.animationValues),t1(`skew${$S[d]}`,r,f,this.animationValues);r.render();for(const d in f)r.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);r.scheduleRender()}applyProjectionStyles(r,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){r.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,r.visibility="",r.opacity="",r.pointerEvents=r0(l==null?void 0:l.pointerEvents)||"",r.transform=u?u(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(r.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,r.pointerEvents=r0(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!kl(this.latestValues)&&(r.transform=u?u({},""):"none",this.hasProjected=!1);return}r.visibility="";const d=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=aK(this.projectionDeltaWithTransform,this.treeScale,d);u&&(p=u(d,p)),r.transform=p;const{x:m,y:g}=this.projectionDelta;r.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?r.opacity=f===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:r.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const _ in up){if(d[_]===void 0)continue;const{correct:E,applyTo:M,isCSSVariable:v}=up[_],x=p==="none"?d[_]:E(d[_],f);if(M){const b=M.length;for(let T=0;T<b;T++)r[M[T]]=x}else v?this.options.visualElement.renderState.vars[_]=x:r[_]=x}this.options.layoutId&&(r.pointerEvents=f===this?r0(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>{var l;return(l=r.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(j3),this.root.sharedNodes.clear()}}}function oK(n){n.updateLayout()}function lK(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=n.layout,{animationType:s}=n.options,r=t.source!==n.layout.source;s==="size"?ja(p=>{const m=r?t.measuredBox[p]:t.layoutBox[p],g=qi(m);m.min=i[p].min,m.max=m.min+g}):sB(s,t.layoutBox,i)&&ja(p=>{const m=r?t.measuredBox[p]:t.layoutBox[p],g=qi(i[p]);m.max=m.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+g)});const l=qu();Ad(l,i,t.layoutBox);const u=qu();r?Ad(u,n.applyTransform(a,!0),t.measuredBox):Ad(u,i,t.layoutBox);const f=!eB(l);let d=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:g}=p;if(m&&g){const _=Bn();Cd(_,t.layoutBox,m.layoutBox);const E=Bn();Cd(E,i,g.layoutBox),nB(_,E)||(d=!0),p.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=_,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:u,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function cK(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function uK(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function fK(n){n.clearSnapshot()}function j3(n){n.clearMeasurements()}function q3(n){n.isLayoutDirty=!1}function hK(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function Y3(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function dK(n){n.resolveTargetDelta()}function pK(n){n.calcProjection()}function mK(n){n.resetSkewAndRotation()}function gK(n){n.removeLeadSnapshot()}function W3(n,t,e){n.translate=An(t.translate,0,e),n.scale=An(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function Z3(n,t,e,i){n.min=An(t.min,e.min,i),n.max=An(t.max,e.max,i)}function vK(n,t,e,i){Z3(n.x,t.x,e.x,i),Z3(n.y,t.y,e.y,i)}function yK(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const _K={duration:.45,ease:[.4,0,.1,1]},K3=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Q3=K3("applewebkit/")&&!K3("chrome/")?Math.round:es;function J3(n){n.min=Q3(n.min),n.max=Q3(n.max)}function xK(n){J3(n.x),J3(n.y)}function sB(n,t,e){return n==="position"||n==="preserve-aspect"&&!AZ(X3(t),X3(e),.2)}function SK(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const MK=aB({attachResizeListener:(n,t)=>fp(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),e1={current:void 0},rB=aB({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!e1.current){const n=new MK({});n.mount(window),n.setOptions({layoutScroll:!0}),e1.current=n}return e1.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),bK={pan:{Feature:FZ},drag:{Feature:HZ,ProjectionNode:rB,MeasureLayout:Jz}};function $3(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,s=i[a];s&&xn.postRender(()=>s(t,Xp(t)))}class EK extends el{mount(){const{current:t}=this.node;t&&(this.unmount=YY(t,(e,i)=>($3(this.node,i,"Start"),a=>$3(this.node,a,"End"))))}unmount(){}}class TK extends el{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hp(fp(this.node.current,"focus",()=>this.onFocus()),fp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function tD(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),s=i[a];s&&xn.postRender(()=>s(t,Xp(t)))}class AK extends el{mount(){const{current:t}=this.node;t&&(this.unmount=QY(t,(e,i)=>(tD(this.node,i,"Start"),(a,{success:s})=>tD(this.node,a,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const kM=new WeakMap,n1=new WeakMap,CK=n=>{const t=kM.get(n.target);t&&t(n)},wK=n=>{n.forEach(CK)};function RK({root:n,...t}){const e=n||document;n1.has(e)||n1.set(e,{});const i=n1.get(e),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(wK,{root:n,...t})),i[a]}function DK(n,t,e){const i=RK(t);return kM.set(n,e),i.observe(n),()=>{kM.delete(n),i.unobserve(n)}}const NK={some:0,all:1};class UK extends el{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:a="some",once:s}=t,r={root:e?e.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:NK[a]},l=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),m=f?d:p;m&&m(u)};return DK(this.node.current,r,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(OK(t,e))&&this.startObserver()}unmount(){}}function OK({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const LK={inView:{Feature:UK},tap:{Feature:AK},focus:{Feature:TK},hover:{Feature:EK}},PK={layout:{ProjectionNode:rB,MeasureLayout:Jz}},zK={...xZ,...LK,...bK,...PK},Zs=zW(zK,ZW),oa=Kj(n=>({selectedProject:null,setSelectedProject:t=>n({selectedProject:t}),searchTerm:"",setSearchTerm:t=>n({searchTerm:t}),activeFilters:["ai","quantum","fullstack","personal"],setActiveFilters:t=>n({activeFilters:t}),cameraTarget:null,setCameraTarget:t=>n({cameraTarget:t}),centerNodeId:"about-me",setCenterNodeId:t=>n({centerNodeId:t})})),BK={ai:"#06B6D4",quantum:"#8B5CF6",fullstack:"#14B8A6",personal:"#F59E0B"},IK={ai:"#0891B2",quantum:"#7C3AED",fullstack:"#0F766E",personal:"#D97706"};function VK({project:n}){const t=tt.useRef(null),e=tt.useRef(null),[i,a]=tt.useState(!1),s=oa(f=>f.setCameraTarget),r=oa(f=>f.setSelectedProject),l=n.size==="large"?.5:n.size==="medium"?.3:.2,u=i?l*1.5:l;return Xf(f=>{if(t.current){const d=u+Math.sin(f.clock.elapsedTime*2+n.position[0])*.05;t.current.scale.setScalar(d)}if(e.current){const d=u*2+Math.sin(f.clock.elapsedTime*1.5+n.position[0])*.1;e.current.scale.setScalar(d)}}),at.jsxs("group",{position:n.position,children:[at.jsxs("mesh",{ref:t,onPointerEnter:()=>a(!0),onPointerLeave:()=>a(!1),onClick:()=>{s(n.position),r(n)},children:[at.jsx("sphereGeometry",{args:[u,16,16]}),at.jsx("meshBasicMaterial",{color:BK[n.category],transparent:!0,opacity:.9})]}),at.jsxs("mesh",{ref:e,children:[at.jsx("sphereGeometry",{args:[u*2,16,16]}),at.jsx("meshBasicMaterial",{color:IK[n.category],transparent:!0,opacity:i?.3:.1,side:Oi})]}),i&&at.jsx(Yj,{position:[0,u+1,0],center:!0,distanceFactor:10,className:"pointer-events-none",children:at.jsx(Zs.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"bg-gray-900/90 backdrop-blur-sm text-white px-3 py-2 rounded-lg border border-gray-700 text-sm whitespace-nowrap",children:n.title})})]})}function i1(n,t,e){return[n*Math.sin(e)*Math.cos(t),n*Math.sin(e)*Math.sin(t),n*Math.cos(e)]}const hp=[{id:"about-me",title:"About Me",category:"personal",position:[0,0,0],description:`
Hi, I'm Eesh — a passionate engineer, creative thinker, and lifelong learner driven by curiosity and a desire to solve real-world problems through technology. Whether I’m building intelligent systems, optimizing digital workflows, or experimenting with emerging tech, I’m always pushing boundaries to craft solutions that are not only functional but meaningful.

With a background in computer science and hands-on experience across the full development lifecycle, I thrive at the intersection of software engineering, data-driven insight, and user-focused design. I’ve worked on a diverse range of projects — from AI-powered applications and web platforms to automation tools and research initiatives — each one deepening my understanding of how code can create tangible impact.

I’m especially excited about innovation in areas like artificial intelligence, distributed systems, and intelligent automation. My recent work includes building LLM-powered agents for supply chain optimization, creating disaster response platforms that combine machine learning with geospatial data, and developing hybrid quantum-classical models for financial forecasting.

Outside of work, I enjoy mentoring budding developers, writing about tech, and exploring ideas at the cutting edge of computing and society. I believe that great engineering is as much about empathy and clarity as it is about algorithms and architecture.

If you're looking for someone who blends technical depth with a love for problem-solving, you’re in the right place. Let’s build something meaningful together.
  `.trim(),size:"large",connections:["projects","resume","contact"]},{id:"projects",title:"Projects",category:"personal",position:i1(8,0,Math.PI/2),description:"Explore my featured projects in AI, Quantum Computing, and Full-Stack development.",technologies:["PennyLane","TensorFlow","Agentic AI Frameworks","ReAct Framework","Python","JavaScript","SQL","Flask","ReactJS","Node.js","Express.js","MySQL","MongoDB","Git","CI/CD Pipelines","RESTful APIs","OAuth","Multer","Postman","HTML","CSS"],size:"large",connections:["about-me","disaster-reporting-tool"]},{id:"resume",title:"Resume",category:"personal",position:i1(8,2*Math.PI/3,Math.PI/2),description:"Download my resume and view my professional timeline.",technologies:[],demoUrl:"/resume.pdf",size:"large",connections:["about-me"]},{id:"contact",title:"Contact Me",category:"personal",position:i1(8,4*Math.PI/3,Math.PI/2),description:"Get in touch via email or social links.",email:"eesh.khanna19@gmail.com",githubUrl:"https://github.com/Eesh-487",size:"large",connections:["about-me"]},{id:"disaster-reporting-tool",title:"Disaster Reporting Tool",category:"ai",position:[6,2,-3],description:"A real-time disaster reporting and visualization platform using AI and fullstack technologies.",technologies:["React","TypeScript","Node.js","MongoDB","AI","Mapbox"],size:"medium",demoUrl:"https://disasterfront.vercel.app/",githubUrl:"https://github.com/Eesh-487/disasterfront",connections:["projects"]}];function HK(){const n=tt.useMemo(()=>{const t=[];return hp.forEach(e=>{e.connections&&e.connections.forEach(i=>{const a=hp.find(s=>s.id===i);a&&t.push({points:[e.position,a.position],color:"#4A5568"})})}),t},[]);return at.jsx(at.Fragment,{children:n.map((t,e)=>{const i=t.points.map(s=>new V(...s)),a=new Me().setFromPoints(i);return at.jsxs("line",{children:[at.jsx("bufferGeometry",{attach:"geometry",...a}),at.jsx("lineBasicMaterial",{attach:"material",color:t.color,transparent:!0,opacity:.3})]},e)})})}function FK(){const n=tt.useRef(null),{positions:t,velocities:e}=tt.useMemo(()=>{const a=new Float32Array(6e3),s=new Float32Array(2e3*3);for(let r=0;r<2e3;r++){const l=30+Math.random()*80,u=Math.random()*Math.PI*2,f=Math.acos(2*Math.random()-1);a[r*3]=l*Math.sin(f)*Math.cos(u),a[r*3+1]=l*Math.sin(f)*Math.sin(u),a[r*3+2]=l*Math.cos(f),s[r*3]=(Math.random()-.5)*.01,s[r*3+1]=(Math.random()-.5)*.01,s[r*3+2]=(Math.random()-.5)*.01}return{positions:a,velocities:s}},[]);return Xf(()=>{if(n.current){const i=n.current.geometry.attributes.position,a=i.array;for(let s=0;s<a.length;s+=3)a[s]+=e[s],a[s+1]+=e[s+1],a[s+2]+=e[s+2];i.needsUpdate=!0}}),at.jsxs("points",{ref:n,frustumCulled:!1,children:[at.jsx("bufferGeometry",{children:at.jsx("bufferAttribute",{attach:"attributes-position",args:[t,3]})}),at.jsx("pointsMaterial",{transparent:!0,color:"#64748B",size:.2,sizeAttenuation:!0,depthWrite:!1,opacity:.4})]})}function GK(){const n=tt.useRef(null),{camera:t}=Ps(),e=oa(s=>s.cameraTarget);oa(s=>s.cameraDistance);const i=oa(s=>s.setCameraTarget),a=oa(s=>s.centerNodeId);return tt.useEffect(()=>{if(!n.current)return;const s=n.current,r=t.position.clone(),l=new V(0,0,r.length());let u=0;const f=.8;let d;function p(){u+=1/60/f,t.position.lerp(l,Math.min(u,1)),s.target.lerp(new V(0,0,0),Math.min(u,1)),s.update(),u<1&&(d=requestAnimationFrame(p))}return p(),()=>{d&&cancelAnimationFrame(d)}},[a]),tt.useEffect(()=>{const s=r=>{if(!n.current)return;const l=2,u=n.current;switch(r.code){case"ArrowUp":u.object.position.y+=l;break;case"ArrowDown":u.object.position.y-=l;break;case"ArrowLeft":u.object.position.x-=l;break;case"ArrowRight":u.object.position.x+=l;break;case"Space":r.preventDefault(),u.reset();break;case"Equal":case"NumpadAdd":if(t.isPerspectiveCamera){const f=t;f.fov=Math.max(f.fov-5,10),f.updateProjectionMatrix()}break;case"Minus":case"NumpadSubtract":if(t.isPerspectiveCamera){const f=t;f.fov=Math.min(f.fov+5,120),f.updateProjectionMatrix()}break}u.update()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t]),Xf(()=>{if(e&&n.current){const s=n.current,r=new V(...e);s.target.lerp(r,.05),s.update(),s.target.distanceTo(r)<.1&&i(null)}}),at.jsx(sq,{ref:n,enablePan:!0,enableZoom:!0,enableRotate:!0,zoomSpeed:.6,panSpeed:.8,rotateSpeed:.4,minDistance:5,maxDistance:100,enableDamping:!0,dampingFactor:.05})}function XK(){const n=oa(i=>i.activeFilters),t=oa(i=>i.searchTerm),e=hp.filter(i=>{const a=n.includes(i.category),s=t===""||i.title.toLowerCase().includes(t.toLowerCase())||i.description.toLowerCase().includes(t.toLowerCase());return a&&s});return at.jsxs(at.Fragment,{children:[at.jsx(GK,{}),at.jsx(Bj,{}),at.jsx(FK,{}),at.jsx(HK,{}),e.map(i=>at.jsx(VK,{project:i},i.id)),at.jsx("ambientLight",{intensity:.1}),at.jsx("pointLight",{position:[10,10,10],intensity:.5})]})}function kK({onLoaded:n}){return tt.useEffect(()=>{if(n){const t=setTimeout(()=>{n()},500);return()=>clearTimeout(t)}},[n]),at.jsx(zj,{camera:{position:[0,0,20],fov:60,near:.1,far:1e3},style:{background:"radial-gradient(ellipse at center, #1a1a2e 0%, #16213e 50%, #0f0f23 100%)"},children:at.jsx(tt.Suspense,{fallback:null,children:at.jsx(XK,{})})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Yf=(n,t)=>{const e=tt.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:l="",children:u,...f},d)=>tt.createElement("svg",{ref:d,...jK,width:a,height:a,stroke:i,strokeWidth:r?Number(s)*24/Number(a):s,className:["lucide",`lucide-${qK(n)}`,l].join(" "),...f},[...t.map(([p,m])=>tt.createElement(p,m)),...Array.isArray(u)?u:[u]]));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=Yf("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=Yf("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=Yf("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=Yf("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=Yf("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=Yf("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function QK(){const{searchTerm:n,setSearchTerm:t,setCameraTarget:e}=oa(),[i,a]=tt.useState(!1),[s,r]=tt.useState([]);tt.useEffect(()=>{if(n.length>1){const u=hp.filter(f=>f.title.toLowerCase().includes(n.toLowerCase())||f.description.toLowerCase().includes(n.toLowerCase())||f.technologies.some(d=>d.toLowerCase().includes(n.toLowerCase())));r(u)}else r([])},[n]);const l=u=>{e(u.position),t(""),a(!1)};return at.jsxs("div",{className:"relative",children:[at.jsxs(Zs.div,{className:"flex items-center bg-gray-900/80 backdrop-blur-sm rounded-full border border-gray-700",animate:{width:i?300:48},transition:{duration:.3,ease:"easeInOut"},children:[at.jsx("button",{onClick:()=>a(!i),className:"p-3 text-gray-400 hover:text-white transition-colors",children:at.jsx(KK,{size:20})}),at.jsx(Ov,{children:i&&at.jsxs(Zs.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"flex-1 flex items-center",children:[at.jsx("input",{type:"text",placeholder:"Search projects...",value:n,onChange:u=>t(u.target.value),className:"bg-transparent text-white placeholder-gray-400 outline-none flex-1 px-2",autoFocus:!0}),n&&at.jsx("button",{onClick:()=>t(""),className:"p-1 text-gray-400 hover:text-white transition-colors mr-2",children:at.jsx(mT,{size:16})})]})})]}),at.jsx(Ov,{children:s.length>0&&i&&at.jsx(Zs.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full mt-2 w-full bg-gray-900/95 backdrop-blur-sm rounded-lg border border-gray-700 overflow-hidden z-50",children:s.map(u=>at.jsxs("button",{onClick:()=>l(u),className:"w-full text-left p-3 hover:bg-gray-800/50 transition-colors border-b border-gray-800 last:border-b-0",children:[at.jsx("div",{className:"text-white font-medium",children:u.title}),at.jsx("div",{className:"text-gray-400 text-sm",children:u.category})]},u.id))})})]})}const JK={ai:"#06B6D4",quantum:"#8B5CF6",fullstack:"#14B8A6",personal:"#F59E0B"};function $K(){const{selectedProject:n,setSelectedProject:t}=oa();return at.jsx(Ov,{children:n&&at.jsx(Zs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>t(null),children:at.jsxs(Zs.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",duration:.5},className:"bg-gray-900/95 backdrop-blur-sm rounded-xl border border-gray-700 p-6 max-w-lg w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:JK[n.category]}}),at.jsx("h2",{className:"text-xl font-bold text-white",children:n.title})]}),at.jsx("button",{onClick:()=>t(null),className:"text-gray-400 hover:text-white transition-colors",children:at.jsx(mT,{size:20})})]}),n.description&&at.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:n.description}),n.id==="resume"&&at.jsx("div",{className:"mb-6 flex justify-center",children:at.jsxs("a",{href:"/resume.pdf",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-5 py-2 rounded-lg font-bold transition-colors",children:[at.jsx(WK,{size:18}),"Open Resume PDF"]})}),n.id==="contact"&&at.jsxs("div",{className:"mb-6 flex flex-col items-center",children:[n.email&&at.jsxs(at.Fragment,{children:[at.jsx("span",{className:"text-lg font-semibold text-white mb-2",children:"Email"}),at.jsx("a",{href:`mailto:${n.email}`,className:"text-cyan-400 underline text-base mb-4",children:n.email})]}),n.githubUrl&&at.jsxs("a",{href:n.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-bold transition-colors mt-2",children:[at.jsx(eD,{size:18}),"GitHub"]})]}),n.id!=="resume"&&n.id!=="contact"&&at.jsxs(at.Fragment,{children:[n.technologies&&n.technologies.length>0&&at.jsxs("div",{className:"mb-6",children:[at.jsx("h3",{className:"text-white font-semibold mb-3",children:"Technologies"}),at.jsx("div",{className:"flex flex-wrap gap-2",children:n.technologies.map(e=>at.jsx("span",{className:"bg-gray-800 text-gray-300 px-3 py-1 rounded-full text-sm",children:e},e))})]}),at.jsxs("div",{className:"flex gap-3",children:[n.demoUrl&&at.jsxs("a",{href:n.demoUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[at.jsx(YK,{size:16}),"Live Demo"]}),n.githubUrl&&at.jsxs("a",{href:n.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:[at.jsx(eD,{size:16}),"Source Code"]})]})]})]})})})}function tQ(){const[n,t]=tt.useState({x:0,y:0});return tt.useEffect(()=>{const e=i=>{t({x:i.clientX,y:i.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),at.jsxs(at.Fragment,{children:[at.jsx(Zs.div,{className:"fixed pointer-events-none z-50",style:{left:n.x-10,top:n.y-10},animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:at.jsx("div",{className:"w-5 h-5 border border-cyan-400 rounded-full bg-cyan-400/10 backdrop-blur-sm",children:at.jsx("div",{className:"absolute top-1/2 left-1/2 w-1 h-1 bg-cyan-400 rounded-full transform -translate-x-1/2 -translate-y-1/2"})})}),at.jsx(Zs.div,{className:"fixed pointer-events-none z-40",style:{left:n.x-20,top:n.y-20},animate:{scale:[1,1.05,1],rotate:[0,360]},transition:{scale:{duration:3,repeat:1/0,ease:"easeInOut"},rotate:{duration:10,repeat:1/0,ease:"linear"}},children:at.jsx("div",{className:"w-10 h-10 border border-cyan-400/30 rounded-full"})})]})}function eQ(){const[n,t]=tt.useState(!1),e=[{key:"Mouse Drag",action:"Rotate camera around the scene"},{key:"Mouse Wheel",action:"Zoom in/out (2x to 50x)"},{key:"Arrow Keys",action:"Pan camera position"},{key:"Space",action:"Reset camera to origin"},{key:"+/-",action:"Adjust field of view"},{key:"Click Star",action:"View project details"},{key:"Search",action:"Find and navigate to projects"}];return at.jsxs(at.Fragment,{children:[at.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-4 right-4 bg-gray-900/80 backdrop-blur-sm text-white p-3 rounded-full border border-gray-700 hover:bg-gray-800/80 transition-colors z-40",children:at.jsx(ZK,{size:20})}),at.jsx(Ov,{children:n&&at.jsx(Zs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>t(!1),children:at.jsxs(Zs.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gray-900/95 backdrop-blur-sm rounded-xl border border-gray-700 p-6 max-w-md w-full",onClick:i=>i.stopPropagation(),children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsx("h2",{className:"text-xl font-bold text-white",children:"Navigation Controls"}),at.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white transition-colors",children:at.jsx(mT,{size:20})})]}),at.jsx("div",{className:"space-y-3",children:e.map((i,a)=>at.jsxs("div",{className:"flex justify-between items-center",children:[at.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:i.key}),at.jsx("span",{className:"text-gray-300 text-sm text-right flex-1 ml-4",children:i.action})]},a))}),at.jsx("div",{className:"mt-6 p-3 bg-gray-800/50 rounded-lg",children:at.jsx("p",{className:"text-gray-400 text-sm text-center",children:"Explore the cosmic portfolio by clicking on glowing stars to discover projects"})})]})})})]})}function Yu(n){return hp.find(t=>t.id===n)}function nQ(n){const t=Yu(n);return!t||!t.connections?[]:t.connections.map(Yu).filter(e=>!!e)}function iQ({project:n}){const[t,e]=tt.useState(!1),i=oa(r=>r.setCameraTarget),a=oa(r=>r.setSelectedProject),s=nQ(n.id).filter(r=>!["about-me","resume","contact"].includes(r.id));return at.jsxs("div",{className:"mb-1",children:[at.jsxs("button",{onClick:()=>e(!t),className:"flex items-center w-full text-left px-3 py-2 rounded font-bold text-white hover:bg-gray-800 transition-colors",children:[at.jsx("span",{className:"mr-2",children:t?"▼":"▶"}),n.title]}),t&&at.jsx("div",{className:"ml-2 border-l border-gray-700 pl-2",children:s.map(r=>at.jsx("button",{onClick:()=>{i(r.position),a(r)},className:"block w-full text-left px-3 py-2 rounded text-gray-300 hover:bg-gray-800 transition-colors",style:{paddingLeft:32},children:r.title},r.id))})]})}function aQ(){const[n,t]=tt.useState(!1),e=Yu("about-me"),i=Yu("resume"),a=Yu("contact"),s=Yu("projects");if(!e||!i||!a||!s)return null;const r=oa(u=>u.setCameraTarget),l=oa(u=>u.setSelectedProject);return at.jsxs("div",{className:"w-64",children:[at.jsxs("button",{onClick:()=>t(!n),className:"flex items-center w-20 px-4 py-2 mb-2 bg-gray-800 text-cyan-400 font-bold rounded-lg shadow hover:bg-gray-700 transition-colors",children:[at.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),at.jsx("span",{className:"ml-auto",children:n?"▲":"▼"})]}),n&&at.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-lg border border-gray-700 rounded-xl shadow-lg p-4 max-h-[80vh] overflow-y-auto",children:[at.jsx("button",{onClick:()=>{r(e.position),l(e)},className:"block w-full text-left px-3 py-2 rounded font-bold text-white hover:bg-gray-800 transition-colors mb-1",children:"About Me"}),at.jsx("button",{onClick:()=>{r(i.position),l(i)},className:"block w-full text-left px-3 py-2 rounded font-bold text-white hover:bg-gray-800 transition-colors mb-1",children:"Resume"}),at.jsx("button",{onClick:()=>{r(a.position),l(a)},className:"block w-full text-left px-3 py-2 rounded font-bold text-white hover:bg-gray-800 transition-colors mb-2",children:"Contact Me"}),at.jsx(iQ,{project:s})]})]})}function sQ(){const[n,t]=tt.useState(!0);return at.jsxs("div",{className:"relative w-full h-screen overflow-hidden cursor-none",children:[at.jsx(kK,{onLoaded:()=>t(!1)}),at.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[at.jsx("div",{className:"w-full flex justify-center mt-6 pointer-events-auto",children:at.jsxs("div",{className:"text-center",children:[at.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Eesh Khanna"}),at.jsx("p",{className:"text-gray-400 text-sm",children:"Transforming Ideas into Intelligent Solutions "})]})}),at.jsx("div",{className:"p-4 flex justify-between items-start pointer-events-auto",children:at.jsxs("div",{className:"flex flex-col gap-4",children:[at.jsx(QK,{}),at.jsx(aQ,{})]})})]}),at.jsx($K,{}),at.jsx(eQ,{}),at.jsx(tQ,{}),n&&at.jsx("div",{className:"absolute inset-0 bg-gray-900 flex items-center justify-center text-white z-50",children:at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-cyan-400 border-t-transparent rounded-full mx-auto mb-4"}),at.jsx("p",{children:"Loading cosmic experience..."})]})})]})}JU.createRoot(document.getElementById("root")).render(at.jsx(tt.StrictMode,{children:at.jsx(sQ,{})}));
